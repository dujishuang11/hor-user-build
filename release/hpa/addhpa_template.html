<md-dialog aria-label="autoscaling_dialog" class="autoscaling_dialog" style="width:800px;"> <md-toolbar> <div class="md-toolbar-tools"> <h2>自动弹性伸缩</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content> <p>Tip:&nbsp;系统将根据设定的CPU阈值来自动的【扩展或减少】该服务所【缺少或冗余】的实例数量</p> <form name="instance_form" novalidate class="form-horizontal appRepositoryForm"> <div layout="row" layout-wrap> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>{{"NAMESPACE"|I18N}}：</label> <input type="text" ng-model="$ctrl.obj.namespaceValue" disabled="disabled"> </md-input-container> </div> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>{{"HPA KIND"|I18N}}：</label> <md-select ng-model="$ctrl.obj.kihdboxValue" ng-disabled="$ctrl.obj.isEnable==false" aria-label="Selector for containers"> <md-option ng-value="item.kind" ng-repeat="item in $ctrl.obj.kindbox"> {{item.kind}} </md-option> </md-select> </md-input-container> </div> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>{{"NAME"|I18N}}：</label> <input type="text" ng-model="$ctrl.obj.hpanameboxValue" disabled="disabled"> </md-input-container> </div> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>最大实例数量:</label> <input ng-model="$ctrl.maxNumber" type="number" name="max" required min="1" max="10" placeholder="输入最大实例数量" ng-change="$ctrl.maxchange($ctrl.maxNumber-$ctrl.minNumber)" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <div class="error" ng-messages="instance_form.max.$error"> <div ng-message="required">输入最大实例数量(非0且大于最小实例数量)</div> <div ng-message="min">实例数量不能小于1</div> <div ng-message="max">实例数量不能大于10</div> <div ng-show="$ctrl.mmopen" style="font-size:12px;line-height: 14px;overflow: hidden;padding-top:5px;color: rgb(221,44,0);">请大于最小实例数量</div> </div> </md-input-container> </div> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>最小实例数量:</label> <input ng-model="$ctrl.minNumber" type="number" name="min" required min="1" maxlength="10" placeholder="输入最小实例数量" ng-change="$ctrl.minchange($ctrl.maxNumber-$ctrl.minNumber)" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <div class="error" ng-messages="instance_form.min.$error"> <div ng-message="required">输入最小实例数量(非0且小于最大实例数量)</div> <div ng-message="min">实例数量不能小于1</div> <div ng-message="max">实例数量不能大于10</div> <div ng-show="$ctrl.mmopenb" style="font-size:12px;line-height: 14px;overflow: hidden;padding-top:5px;color: rgb(221,44,0);">请小于最大实例数量</div> </div> </md-input-container> </div> <div flex="40" flex-offset="5"> <md-input-container md-no-float class="md-block"> <label>CPU阈值:</label> <i class="icon-info-line fw" style="position: absolute;top: -12px;left: 60px;font-size: 12px"> <md-tooltip> 容器实例实际占用CPU与实例CPU限制比例 </md-tooltip> </i> <input ng-model="$ctrl.cpuNumber" type="number" name="cpu" required min="1" max="100" maxlength="10" placeholder="输入CPU阈值" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <div class="error" ng-messages="instance_form.cpu.$error"> <div ng-message="required">{{"Please enter target CPU utilization percentage"|I18N}}(非0且小于或等于100) </div> <div ng-message="min">{{"Please enter a number greater than 0"|I18N}}</div> <div ng-message="max">{{"Please enter a number less than or equal to 100"|I18N}}</div> </div> </md-input-container> </div> </div> </form> </md-dialog-content> <md-dialog-actions layout="row" style="border-top:0;"> <span flex></span> <md-button class="btn btn-success" ng-disabled="instance_form.max.$invalid ||instance_form.min.$invalid ||instance_form.cpu.$invalid || !$ctrl.obj.hpanameboxValue || $ctrl.mmopen || $ctrl.mmopenb " ng-click="$ctrl.answer($ctrl.obj.namespaceValue,$ctrl.obj.kihdboxValue,$ctrl.obj.hpanameboxValue,$ctrl.maxNumber,$ctrl.minNumber,$ctrl.cpuNumber)"> {{"Confirm"|I18N}} </md-button> <md-button ng-click="$ctrl.cancel()" class="btncancel btn-link"> {{"Cancel"|I18N}} </md-button> </md-dialog-actions>  </md-dialog>