!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _hormain_module=__webpack_require__(1),_hormain_module2=_interopRequireDefault(_hormain_module),_namespace_module=__webpack_require__(55),_namespace_module2=_interopRequireDefault(_namespace_module),_node_module=__webpack_require__(68),_node_module2=_interopRequireDefault(_node_module),_persistentvolume_module=__webpack_require__(115),_persistentvolume_module2=_interopRequireDefault(_persistentvolume_module),_persistentvolumeclaim_module=__webpack_require__(129),_persistentvolumeclaim_module2=_interopRequireDefault(_persistentvolumeclaim_module),_replicationcontroller_module=__webpack_require__(142),_replicationcontroller_module2=_interopRequireDefault(_replicationcontroller_module),_daemonset_module=__webpack_require__(164),_daemonset_module2=_interopRequireDefault(_daemonset_module),_service_module=__webpack_require__(176),_service_module2=_interopRequireDefault(_service_module),_job_module=__webpack_require__(187),_job_module2=_interopRequireDefault(_job_module),_statefulset_module=__webpack_require__(199),_statefulset_module2=_interopRequireDefault(_statefulset_module),_secret_module=__webpack_require__(212),_secret_module2=_interopRequireDefault(_secret_module),_deploy_module=__webpack_require__(224),_deploy_module2=_interopRequireDefault(_deploy_module),_configmaps_module=__webpack_require__(230),_configmaps_module2=_interopRequireDefault(_configmaps_module),_deployment_module=__webpack_require__(242),_deployment_module2=_interopRequireDefault(_deployment_module),_ingress_module=__webpack_require__(254),_ingress_module2=_interopRequireDefault(_ingress_module),_pod_module=__webpack_require__(83),_pod_module2=_interopRequireDefault(_pod_module),_pod_module3=__webpack_require__(266),_pod_module4=_interopRequireDefault(_pod_module3),_replicaset_module=__webpack_require__(272),_replicaset_module2=_interopRequireDefault(_replicaset_module),_hpa_module=__webpack_require__(283),_hpa_module2=_interopRequireDefault(_hpa_module),_appstore_module=__webpack_require__(293),_appstore_module2=_interopRequireDefault(_appstore_module),_servicebroker_module=__webpack_require__(307),_servicebroker_module2=_interopRequireDefault(_servicebroker_module),_services_module=__webpack_require__(331),_services_module2=_interopRequireDefault(_services_module),_brokerinstance_module=__webpack_require__(346),_brokerinstance_module2=_interopRequireDefault(_brokerinstance_module),_repositories_module=__webpack_require__(355),_repositories_module2=_interopRequireDefault(_repositories_module),_apphistory_module=__webpack_require__(365),_apphistory_module2=_interopRequireDefault(_apphistory_module),_appupdate_module=__webpack_require__(377),_appupdate_module2=_interopRequireDefault(_appupdate_module),_appinstances_module=__webpack_require__(381),_appinstances_module2=_interopRequireDefault(_appinstances_module),_usermanagement_module=__webpack_require__(394),_usermanagement_module2=_interopRequireDefault(_usermanagement_module),_role_module=__webpack_require__(401),_role_module2=_interopRequireDefault(_role_module),_rolebinding_module=__webpack_require__(409),_rolebinding_module2=_interopRequireDefault(_rolebinding_module),_dashboard_module=__webpack_require__(422),_dashboard_module2=_interopRequireDefault(_dashboard_module),_log_module=__webpack_require__(427),_log_module2=_interopRequireDefault(_log_module),_alarmconfiguration_module=__webpack_require__(431),_alarmconfiguration_module2=_interopRequireDefault(_alarmconfiguration_module),_alertmanagertemplates_module=__webpack_require__(438),_alertmanagertemplates_module2=_interopRequireDefault(_alertmanagertemplates_module),_builds_module=__webpack_require__(445),_builds_module2=_interopRequireDefault(_builds_module),_coderepository_module=__webpack_require__(463),_coderepository_module2=_interopRequireDefault(_coderepository_module),_serviceaccounts_module=__webpack_require__(469),_serviceaccounts_module2=_interopRequireDefault(_serviceaccounts_module),_appcatalog_module=__webpack_require__(482),_appcatalog_module2=_interopRequireDefault(_appcatalog_module),_appdeployed_module=__webpack_require__(492),_appdeployed_module2=_interopRequireDefault(_appdeployed_module),_apprepository_module=__webpack_require__(502),_apprepository_module2=_interopRequireDefault(_apprepository_module),_podproset_module=__webpack_require__(508),_podproset_module2=_interopRequireDefault(_podproset_module),_storageclass_module=__webpack_require__(521),_storageclass_module2=_interopRequireDefault(_storageclass_module),_resourcequota_module=__webpack_require__(533),_resourcequota_module2=_interopRequireDefault(_resourcequota_module),_event_module=__webpack_require__(546),_event_module2=_interopRequireDefault(_event_module),_search_module=__webpack_require__(550),_search_module2=_interopRequireDefault(_search_module),_networkpolicy_module=__webpack_require__(559),_networkpolicy_module2=_interopRequireDefault(_networkpolicy_module),_podsecuritypolicie_module=__webpack_require__(572),_podsecuritypolicie_module2=_interopRequireDefault(_podsecuritypolicie_module),_modify_module=__webpack_require__(584),_modify_module2=_interopRequireDefault(_modify_module),_module=__webpack_require__(599),_module2=_interopRequireDefault(_module),_traefik_module=__webpack_require__(604),_traefik_module2=_interopRequireDefault(_traefik_module),_registryconfig_module=__webpack_require__(615),_registryconfig_module2=_interopRequireDefault(_registryconfig_module),_tenant_module=__webpack_require__(625),_tenant_module2=_interopRequireDefault(_tenant_module),_calico_module=__webpack_require__(642),_calico_module2=_interopRequireDefault(_calico_module),_module3=__webpack_require__(648),_module4=_interopRequireDefault(_module3),_destroycluster_module=__webpack_require__(652),_destroycluster_module2=_interopRequireDefault(_destroycluster_module),_mirroredwarehouse_module=__webpack_require__(657),_mirroredwarehouse_module2=_interopRequireDefault(_mirroredwarehouse_module),_vulnerability_module=__webpack_require__(676),_vulnerability_module2=_interopRequireDefault(_vulnerability_module),_tag_module=__webpack_require__(681),_tag_module2=_interopRequireDefault(_tag_module),_index_route=__webpack_require__(685),_index_route2=_interopRequireDefault(_index_route),_index_httpInterceptor=__webpack_require__(686),_index_httpInterceptor2=_interopRequireDefault(_index_httpInterceptor);exports.default=angular.module("horApp",["ngAnimate","ngAria","ngMaterial","ngMessages","ngResource","ngSanitize","ngCookies","ui.router","ngTable","ngWebSocket","ui.ace","angular-clipboard","pascalprecht.translate",_deploy_module2.default.name,_hormain_module2.default.name,_namespace_module2.default.name,_node_module2.default.name,_persistentvolume_module2.default.name,_persistentvolumeclaim_module2.default.name,_daemonset_module2.default.name,_service_module2.default.name,_services_module2.default.name,_job_module2.default.name,_statefulset_module2.default.name,_secret_module2.default.name,_configmaps_module2.default.name,_deployment_module2.default.name,_ingress_module2.default.name,_replicationcontroller_module2.default.name,_pod_module2.default.name,_pod_module4.default.name,_replicaset_module2.default.name,_hpa_module2.default.name,_appstore_module2.default.name,_servicebroker_module2.default.name,_brokerinstance_module2.default.name,_usermanagement_module2.default.name,_repositories_module2.default.name,_apphistory_module2.default.name,_appupdate_module2.default.name,_appinstances_module2.default.name,_role_module2.default.name,_rolebinding_module2.default.name,_dashboard_module2.default.name,_log_module2.default.name,_alarmconfiguration_module2.default.name,_alertmanagertemplates_module2.default.name,_builds_module2.default.name,_coderepository_module2.default.name,_modify_module2.default.name,_serviceaccounts_module2.default.name,_appcatalog_module2.default.name,_appdeployed_module2.default.name,_apprepository_module2.default.name,_podproset_module2.default.name,_storageclass_module2.default.name,_resourcequota_module2.default.name,_event_module2.default.name,_search_module2.default.name,_podsecuritypolicie_module2.default.name,_module2.default.name,_traefik_module2.default.name,_networkpolicy_module2.default.name,_tenant_module2.default.name,_registryconfig_module2.default.name,_calico_module2.default.name,_destroycluster_module2.default.name,_module4.default.name,_mirroredwarehouse_module2.default.name,_vulnerability_module2.default.name,_tag_module2.default.name]).config(_index_route2.default).config(_index_httpInterceptor2.default).config(["$mdThemingProvider",function($mdThemingProvider){$mdThemingProvider.definePalette("amazingPaletteName",{50:"ffebee",100:"ffcdd2",200:"ef9a9a",300:"e57373",400:"1370ad",500:"1370ad",600:"1c689a",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),$mdThemingProvider.theme("default").primaryPalette("amazingPaletteName")}]).config(["$translateProvider",function($translateProvider){window.localStorage.lang="ch",$translateProvider.preferredLanguage("ch").useStaticFilesLoader({prefix:"i18n/",suffix:".json"}).useSanitizeValueStrategy("escapeParameters")}]).filter("I18N",["$translate",function($translate){return function(key){return $translate.instant(key)}}])},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _components_module=__webpack_require__(2),_namespace_module=(_interopRequireDefault(_components_module),__webpack_require__(29)),_namespace_module2=_interopRequireDefault(_namespace_module),_state_module=__webpack_require__(33),_state_module2=_interopRequireDefault(_state_module),_utils_module=__webpack_require__(35),_utils_module2=_interopRequireDefault(_utils_module),_module=__webpack_require__(48),_module2=_interopRequireDefault(_module),_nav_module=__webpack_require__(50),_nav_module2=_interopRequireDefault(_nav_module),_hormain_stateconfig=__webpack_require__(53),_hormain_stateconfig2=_interopRequireDefault(_hormain_stateconfig),_hormain_component=__webpack_require__(54);exports.default=angular.module("horApp.horMain",["ngAnimate","ngMaterial","ngResource","ui.router","ngMaterialSidemenu","hc.marked",_nav_module2.default.name,_namespace_module2.default.name,_state_module2.default.name,_utils_module2.default.name,_module2.default.name]).config(_hormain_stateconfig2.default).config(["markedProvider",function(markedProvider){markedProvider.setOptions({gfm:!0,tables:!0,sanitize:!0,smartypants:!0,highlight:function(code,lang){return lang?hljs.highlight(lang,code,!0).value:hljs.highlightAuto(code).value}})}]).component("horMain",_hormain_component.hormainComponent)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _tablelink_directive=__webpack_require__(3),_tablelink_directive2=_interopRequireDefault(_tablelink_directive),_tablelist_component=__webpack_require__(5),_nothingstate_component=__webpack_require__(6),_actionbar_module=__webpack_require__(7),_actionbar_module2=_interopRequireDefault(_actionbar_module),_servicelist_component=__webpack_require__(10),_hpalist_component=__webpack_require__(12),_podlist_component=__webpack_require__(13),_sercetlist_component=__webpack_require__(14),_replicasetlist_component=__webpack_require__(15),_eventlist_component=__webpack_require__(16),_loading_component=__webpack_require__(17),_scansummary_component=__webpack_require__(18),_directive=__webpack_require__(19),_directive2=_interopRequireDefault(_directive),_module=__webpack_require__(21),_module2=_interopRequireDefault(_module);exports.default=angular.module("horApp.common.components",["ngMaterial","ui.router","ngResource",_actionbar_module2.default.name,_module2.default.name]).component("horTableList",_tablelist_component.tableListComponent).component("horNotingstate",_nothingstate_component.nothingStateComponent).component("horServiceList",_servicelist_component.serviceListComponent).component("horHpaList",_hpalist_component.hpaListComponent).component("horPodList",_podlist_component.podListComponent).component("horSercetList",_sercetlist_component.sercetListComponent).component("horReplicasetList",_replicasetlist_component.replicaSetListComponent).component("horEventList",_eventlist_component.eventListComponent).component("horLoading",_loading_component.loadingComponent).component("horScanSummaryChart",_scansummary_component.scanSummaryComponent).directive("horWarnThreshold",_directive2.default).directive("tableLink",_tablelink_directive2.default)},function(module,exports,__webpack_require__){"use strict";function tableLinkDirective($compile,$state,$stateParams){return{restrict:"A",link:function(scope,element,attrs){}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=tableLinkDirective;__webpack_require__(4)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function appendDetailParamsToUrl(baseUrl){return baseUrl+"/{objectNamespace:[^/]+}/{objectName:[^/]+}"}function appendUpdateParamsToUrl(baseUrl){return baseUrl+"/{objectNamespace:[^/]+}/{objectName:[^/]+}/{lastPage:[^/]+}"}function newappendUpdateParamsToUrl(baseUrl){return baseUrl+"/{objectName:[^/]+}/{lastPage:[^/]+}"}function appendPodsInfoParamsToUrl(baseUrl){return baseUrl+"/{objectNamespace:[^/]+}/{name:[^/]+}/{type:[^/]+}/{releaseName:[^/]+}/{version:[^/]+}/{currentDir:[^/]+}"}function appendGlobalDetailParamsToUrl(baseUrl){return baseUrl+"/:objectName"}function appendVulnerabilityParamsToUrl(baseUrl){return baseUrl+"/{projectName:[^/]+}/{repoName:[^/]+}/{tagName:[^/]+}/{projectId:[^/]+}"}function appendTagsListParamsToUrl(baseUrl){return baseUrl+"/{projectName:[^/]+}/{repoName:[^/]+}/{projectId:[^/]+}/{publicLevel:[^/]+}"}function appendDeployDetailStateParams(baseUrl){return baseUrl+"/{projectName:[^/]+}/{repoName:[^/]+}"}function getLocalTime(newFormatTime,i){if("number"==typeof i){for(var d=new Date(newFormatTime),len=d.getTime(),offset=6e4*d.getTimezoneOffset(),utcTime=len+offset,dateLocal=new Date(utcTime+72e5*i),newDate=dateLocal.toLocaleString(),dateTimeStrArr=newDate.split(" "),dateStrArr=dateTimeStrArr[0].split("-"),timeStrArr=dateTimeStrArr[1].split(":"),_i=0;_i<dateStrArr.length;_i++)"1"!=dateStrArr[_i]&&"2"!=dateStrArr[_i]&&"3"!=dateStrArr[_i]&&"4"!=dateStrArr[_i]&&"5"!=dateStrArr[_i]&&"6"!=dateStrArr[_i]&&"7"!=dateStrArr[_i]&&"8"!=dateStrArr[_i]&&"9"!=dateStrArr[_i]||(dateStrArr[_i]="0"+dateStrArr[_i]);for(var _i2=0;_i2<timeStrArr.length;_i2++)"1"!=timeStrArr[_i2]&&"2"!=timeStrArr[_i2]&&"3"!=timeStrArr[_i2]&&"4"!=timeStrArr[_i2]&&"5"!=timeStrArr[_i2]&&"6"!=timeStrArr[_i2]&&"7"!=timeStrArr[_i2]&&"8"!=timeStrArr[_i2]&&"9"!=timeStrArr[_i2]&&"0"!=timeStrArr[_i2]||(timeStrArr[_i2]="0"+timeStrArr[_i2]);return newDate=dateStrArr[0]+"-"+dateStrArr[1]+"-"+dateStrArr[2]+"T"+(timeStrArr[0]+":"+timeStrArr[1]+":"+timeStrArr[2])+"Z"}}function formatLocalTime(createTime){var d=new Date,gmtHours=d.getTimezoneOffset()/60,tmpTime=createTime.replace(/-/g,"/");return getLocalTime(tmpTime.substring(0,10)+" "+tmpTime.substring(11,19),-gmtHours)}function mirroredWarehouseTime(createTime){var d=new Date,gmtHours=d.getTimezoneOffset()/60,tmpTime=createTime.replace(/-/g,"/");return getMirroredWarehouseTime(tmpTime.substring(0,10)+" "+tmpTime.substring(11,19),-gmtHours)}function getMirroredWarehouseTime(newFormatTime,i){if("number"==typeof i){var d=new Date(newFormatTime),len=d.getTime(),offset=6e4*d.getTimezoneOffset(),utcTime=len+offset,dateLocal=new Date(utcTime+72e5*i),newDate=dateLocal.toLocaleString(),dateTimeStrArr=newDate.split(" ");dateTimeStrArr[1].indexOf("上午")?dateTimeStrArr[1].indexOf("下午")||(dateTimeStrArr[1]=dateTimeStrArr[1].replace("下午","")+":PM"):dateTimeStrArr[1]=dateTimeStrArr[1].replace("上午","")+":AM";for(var dateStrArr=dateTimeStrArr[0].split("/"),timeStrArr=dateTimeStrArr[1].split(":"),_i3=0;_i3<dateStrArr.length;_i3++)"1"!=dateStrArr[_i3]&&"2"!=dateStrArr[_i3]&&"3"!=dateStrArr[_i3]&&"4"!=dateStrArr[_i3]&&"5"!=dateStrArr[_i3]&&"6"!=dateStrArr[_i3]&&"7"!=dateStrArr[_i3]&&"8"!=dateStrArr[_i3]&&"9"!=dateStrArr[_i3]||(dateStrArr[_i3]="0"+dateStrArr[_i3]);for(var _i4=0;_i4<timeStrArr.length;_i4++)"1"!=timeStrArr[_i4]&&"2"!=timeStrArr[_i4]&&"3"!=timeStrArr[_i4]&&"4"!=timeStrArr[_i4]&&"5"!=timeStrArr[_i4]&&"6"!=timeStrArr[_i4]&&"7"!=timeStrArr[_i4]&&"8"!=timeStrArr[_i4]&&"9"!=timeStrArr[_i4]&&"0"!=timeStrArr[_i4]||(timeStrArr[_i4]="0"+timeStrArr[_i4]);return newDate=dateStrArr[0]+"-"+dateStrArr[1]+"-"+dateStrArr[2]+", "+(timeStrArr[0]+":"+timeStrArr[1]+":"+timeStrArr[2]+" "+timeStrArr[3])}}function replaceAll(str,AFindText,ARepText){var raRegExp=new RegExp(AFindText,"g");return str.replace(raRegExp,ARepText)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendDetailParamsToUrl=appendDetailParamsToUrl,exports.appendUpdateParamsToUrl=appendUpdateParamsToUrl,exports.newappendUpdateParamsToUrl=newappendUpdateParamsToUrl,exports.appendPodsInfoParamsToUrl=appendPodsInfoParamsToUrl,exports.appendGlobalDetailParamsToUrl=appendGlobalDetailParamsToUrl,exports.appendVulnerabilityParamsToUrl=appendVulnerabilityParamsToUrl,exports.appendTagsListParamsToUrl=appendTagsListParamsToUrl,exports.appendDeployDetailStateParams=appendDeployDetailStateParams,exports.getLocalTime=getLocalTime,exports.formatLocalTime=formatLocalTime,exports.mirroredWarehouseTime=mirroredWarehouseTime,exports.getMirroredWarehouseTime=getMirroredWarehouseTime,exports.replaceAll=replaceAll;exports.StateParams=function StateParams(objectNamespace,objectName){_classCallCheck(this,StateParams),this.objectNamespace=objectNamespace,this.objectName=objectName},exports.UpdageStateParams=function UpdageStateParams(objectNamespace,objectName,lastPage){_classCallCheck(this,UpdageStateParams),this.objectNamespace=objectNamespace,this.objectName=objectName,this.lastPage=lastPage},exports.NewUpdageStateParams=function NewUpdageStateParams(objectName,lastPage){_classCallCheck(this,NewUpdageStateParams),this.objectName=objectName,this.lastPage=lastPage},exports.ModifyStateParams=function ModifyStateParams(objectNamespace,objectType,objectName){_classCallCheck(this,ModifyStateParams),this.objectNamespace=objectNamespace,this.objectType=objectType,this.objectName=objectName},exports.AppInstancePodsParams=function AppInstancePodsParams(objectNamespace,name,type,releaseName,version,currentDir){_classCallCheck(this,AppInstancePodsParams),this.objectNamespace=objectNamespace,this.name=name,this.type=type,this.releaseName=releaseName,this.version=version,this.currentDir=currentDir},exports.VulnerabilityDetailStateParams=function VulnerabilityDetailStateParams(projectName,repoName,tagName,projectId){_classCallCheck(this,VulnerabilityDetailStateParams),this.projectName=projectName,this.repoName=repoName,this.tagName=tagName,this.projectId=projectId},exports.TagsListStateParams=function TagsListStateParams(projectName,repoName,projectId,publicLevel){_classCallCheck(this,TagsListStateParams),this.projectName=projectName,this.repoName=repoName,this.projectId=projectId,this.publicLevel=publicLevel},exports.DeployDetailStateParams=function DeployDetailStateParams(projectName,repoName){_classCallCheck(this,DeployDetailStateParams),this.projectName=projectName,this.repoName=repoName}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var TableListController=exports.TableListController=function TableListController(){_classCallCheck(this,TableListController),this.selected,this.data,this.limitOptions,this.query,this.options,this.theadcontent,this.namespace};exports.tableListComponent={controller:TableListController,bindings:{options:"<",limitOptions:"<",query:"<",data:"<",theadcontent:"<",selected:"<",namespace:"<",doClick:"&"},templateUrl:"common/components/tablelist/tablelist.html"}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.nothingStateComponent={templateUrl:"common/components/nothingstate/nothingstate.html"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _actionbar_component=__webpack_require__(8);exports.default=angular.module("horApp.common.components.actionbar",["ngMaterial","ui.router","ngResource"]).component("horActionBar",_actionbar_component.actionbarComponent)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.actionbarComponent=exports.ActionbarComponent=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_deploy_state=__webpack_require__(9),ActionbarComponent=exports.ActionbarComponent=function(){function ActionbarComponent($state){_classCallCheck(this,ActionbarComponent),this._state=$state}return ActionbarComponent.$inject=["$state"],_createClass(ActionbarComponent,[{key:"create",value:function(){this._state.go(_deploy_state.deployFileStateName)}}]),ActionbarComponent}();exports.actionbarComponent={templateUrl:"common/components/actionbar/actionbar.html",transclude:!0,controller:ActionbarComponent}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.baseStateName="deploy",exports.deployAppStateName="deployApp",exports.deployFileStateName="deployFile"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceListComponent=exports.ServiceListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),ServiceListController=exports.ServiceListController=function(){function ServiceListController($cookies){_classCallCheck(this,ServiceListController),this.selected=[],this.data,this.limitOptions,this.query,this.options,this.namespace,this._cookies=$cookies,this.editFlag=!0,"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name?(this.editFlag=!1,this.theadcontent=[{name:"状态"},{name:"名称"},{name:"Namespace"},{name:"标签"},{name:"集群内IP"},{name:"内部端口"},{name:"外部端口"}]):this.theadcontent=[{name:"状态"},{name:"名称"},{name:"Namespace"},{name:"标签"},{name:"集群内IP"},{name:"内部端口"},{name:"外部端口"},{name:"操作"}]}return _createClass(ServiceListController,[{key:"isLabel",value:function(label){return"-"!=label}},{key:"delete",value:function(event,item){return this.onDelete({event:event,item:item})}},{key:"update",value:function(event,item){return this.onUpdate({event:event,item:item})}},{key:"getHref",value:function(namespace,objName){return this.onHref({namespace:namespace,objName:objName})}}]),ServiceListController}();exports.serviceListComponent={controller:ServiceListController,bindings:{options:"<",limitOptions:"<",query:"<",data:"<",namespace:"<",onDelete:"&",onUpdate:"&",onHref:"&"},templateUrl:"common/components/servicelist/servicelist.html"}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var HOR_K8S_SERVER_URL_NEW=(exports.HOR_LOGIN_PAGE="login.html",exports.HOR_CLUSTERINITIALISE_PAGE="clusterinitialise.html",exports.HOR_K8S_SERVER_URL_NEW=HOR_K8S_SERVER_URL_GLOBAL_NEW),HOR_K8S_PROMETHEUS_URL=exports.HOR_K8S_PROMETHEUS_URL=HOR_K8S_PROMETHEUS_URL_GLOBAL,HOR_K8S_SERVER_CONFIG_URL=exports.HOR_K8S_SERVER_CONFIG_URL=HOR_K8S_SERVER_CONFIG_URL_GLOBAL,HOR_k8S_SERVER_PORT=exports.HOR_k8S_SERVER_PORT=HOR_k8S_SERVER_PORT_GLOBAL,HOR_K8S_SERVER_HELM_PORT=exports.HOR_K8S_SERVER_HELM_PORT=HOR_K8S_SERVER_HELM_PORT_GLOBAL,HOR_K8S_SERVER_LOG_PORT=exports.HOR_K8S_SERVER_LOG_PORT=HOR_K8S_SERVER_LOG_PORT_GLOBAL,HOR_K8S_SERVER_BROKER_PORT=exports.HOR_K8S_SERVER_BROKER_PORT=HOR_K8S_SERVER_BROKER_PORT_GLOBAL,HOR_K8S_PROMETHEUS_PORT=(exports.HOR_K8S_EXTENSION_PORT=HOR_K8S_EXTENSION_PORT_GLOBAL,exports.HOR_K8S_PROMETHEUS_PORT=HOR_K8S_PROMETHEUS_PORT_GLOBAL),HOR_K8S_CALICO_PORT=exports.HOR_K8S_CALICO_PORT=HOR_K8S_CALICO_PORT_GLOBAL,HOR_K8S_SERVER_TRAEFIK_PORT=exports.HOR_K8S_SERVER_TRAEFIK_PORT=HOR_K8S_SERVER_TRAEFIK_PORT_GLOBAL,HOR_K8S_SERVER_LICENSE_PORT=exports.HOR_K8S_SERVER_LICENSE_PORT=HOR_K8S_SERVER_LICENSE_PORT_GLOBAL,HOR_K8S_SERVER_IMAGE_PORT=exports.HOR_K8S_SERVER_IMAGE_PORT=HOR_K8S_SERVER_IMAGE_PORT_GLOBAL,HOR_k8S_SERVER_VERSION=(exports.REGISTRY_ADDRESS=HOR_K8S_REGISTRY_ADDRESS_GLOBAL,exports.HOR_k8S_SERVER_VERSION=HOR_k8S_SERVER_VERSION_GLOBAL),HOR_k8S_SERVER_BROKER_VERSION=exports.HOR_k8S_SERVER_BROKER_VERSION=HOR_k8S_SERVER_BROKER_VERSION_GLOBAL,HOR_K8S_CICD_URL=exports.HOR_K8S_CICD_URL=HOR_K8S_CICD_URL_GLOBAL_NEW,HOR_K8S_CICD_PORT=exports.HOR_K8S_CICD_PORT=HOR_K8S_CICD_PORT_GLOBAL,HOR_K8S_CICD_WS=exports.HOR_K8S_CICD_WS=HOR_K8S_CICD_URL_WS,HOR_K8S_CICD_BADGES_PORT=exports.HOR_K8S_CICD_BADGES_PORT=HOR_K8S_CICD_PORT_BADGES,HOR_K8S_CICD_URL_BADGES=exports.HOR_K8S_CICD_URL_BADGES=HOR_K8S_CICD_URL_BADGES_NEW,HOR_VERSION_NO=(exports.HOR_K8S_CICD_TOKEN=HOR_K8S_CICD_TOKEN_GLOBAL,exports.HOR_USER_COOKIES_KEY="horuser",exports.HOR_ACCESS_COOKIES_KEY="access",exports.HOR_LICENSE_COOKIES_KEY="license",exports.HOR_VERSION_NO=HOR_VERSION_NO_GLOBAL);exports.HOR_VERSION="移动PaaS "+HOR_VERSION_NO,exports.backendApi={HOR_K8S_SERVER:HOR_K8S_SERVER_URL_NEW+":"+HOR_k8S_SERVER_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_SERVER_HELM:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_HELM_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_SERVER_BROKER:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_BROKER_PORT+HOR_k8S_SERVER_BROKER_VERSION,HOR_K8S_PROMETHEUS:HOR_K8S_PROMETHEUS_URL+":"+HOR_K8S_PROMETHEUS_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_LOGS:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_LOG_PORT+HOR_k8S_SERVER_VERSION_GLOBAL,HOR_K8S_EXTENSION:HOR_K8S_SERVER_URL_NEW+":"+HOR_k8S_SERVER_PORT+HOR_k8S_SERVER_VERSION_GLOBAL,HOR_K8S_EXTENSION_URL:HOR_K8S_SERVER_URL_NEW+":"+HOR_k8S_SERVER_PORT,HOR_K8S_ALARM:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_PROMETHEUS_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_CICD:HOR_K8S_CICD_URL+":"+HOR_K8S_CICD_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_CICD_BADGES:HOR_K8S_CICD_URL_BADGES+":"+HOR_K8S_CICD_BADGES_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_CICD_FOLLOW:HOR_K8S_CICD_WS+":"+HOR_K8S_CICD_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_TRAEFIKS:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_TRAEFIK_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_LICENSE:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_LICENSE_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_CALICO:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_CALICO_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_SERVER_CONFIG:HOR_K8S_SERVER_CONFIG_URL+":"+HOR_k8S_SERVER_PORT+HOR_k8S_SERVER_VERSION,HOR_K8S_IMAGE:HOR_K8S_SERVER_URL_NEW+":"+HOR_K8S_SERVER_IMAGE_PORT+HOR_k8S_SERVER_VERSION},exports.HOR_KIND_NAME=["kind: Service","kind: ConfigMap","kind: PersistentVolume","kind: PersistentVolumeClaim","kind: StatefulSet","kind: DaemonSet","kind: Deployment","kind: Ingress","kind: Job","kind: Namespace","kind: Pod","kind: ReplicaSet","kind: ReplicationController","kind: Secret","kind: Node","kind: HorizontalPodAutoscaler"],exports.HOR_KIND_NAME_STATE=[{name:"Service",state:"service"},{name:"ConfigMap",state:"configmaps"},{name:"PersistentVolume",state:"persistentvolume"},{name:"PersistentVolumeClaim",state:"persistentvolumeclaim"},{name:"StatefulSet",state:"statefulset"},{name:"DaemonSet",state:"daemonset"},{name:"Deployment",state:"deployment"},{name:"Ingress",state:"ingress"},{name:"Job",state:"job"},{name:"Namespace",state:"namespace"},{name:"Pod",state:"pod"},{name:"ReplicaSet",state:"replicaset"},{name:"ReplicationController",state:"replicationcontrollers"},{name:"Secret",state:"secret"},{name:"Node",state:"node"},{name:"HorizontalPodAutoscaler",state:"horizontalpodautoscalser"}],exports.HOR_KIND_DETAIL_STATE=[{name:"ReplicaSet",state:"replicasetdetail"},{name:"ReplicationController",state:"replicationcontrollerdetail"},{name:"DaemonSet",state:"daemonsetdetail"},{name:"StatefulSet",state:"statefulsetdetail"},{name:"Pod",state:"poddetail"},{name:"Service",state:"servicedetail"},{name:"Secret",state:"secretdetail"},{name:"Deployment",state:"deploymentdetail"},{name:"HorizontalPodAutoscaler",state:"horizontalpodautoscalserdetail"},{name:"PersistentVolume",state:"persistentvolumedetail"},{name:"PersistentVolumeClaim",state:"persistentvolumeclaimdetail"}],exports.CHART_TYPE_TAG=[{key:"database",label:"Database",check:!1},{key:"cache",label:"Cache",check:!1},{key:"message queue",label:"MessageQueue",check:!1},{key:"cluster",label:"Cluster",check:!1},{key:"servicebroker",label:"Service Broker",check:!1},{key:"middleware",label:"Middleware",check:!1},{key:"storage",label:"Storage",check:!1},{key:"keyvalue",label:"Key/Value",check:!1}],exports.README_REGEX_STR="{i18n{.*}i18n}",exports.README_REGEX_PREFIX="{i18n{",exports.README_REGEX_SUFFIX="}i18n}"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hpaListComponent=exports.HpaListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),HpaListController=exports.HpaListController=function(){function HpaListController($cookies){_classCallCheck(this,HpaListController),this.data,this.namespace,this._cookies=$cookies,this.editFlag=!0
;this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY)}return _createClass(HpaListController,[{key:"delete",value:function(event,item){return this.onDelete({event:event,item:item})}},{key:"update",value:function(event,item){return this.onUpdate({event:event,item:item})}},{key:"getDetailHref",value:function(namespace,objName){return this.onHref({namespace:namespace,objName:objName})}},{key:"getNamespaceHref",value:function(namespace){return this.onNamespace({namespace:namespace})}},{key:"modifyLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){return this.updateLabels({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjLabels:resourceObjLabels})}},{key:"modifyAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjAnnotations){return this.updateAnnotations({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjAnnotations:resourceObjAnnotations})}}]),HpaListController}();exports.hpaListComponent={controller:HpaListController,bindings:{data:"<",namespace:"<",onDelete:"&",onUpdate:"&",onHref:"&",onNamespace:"&",onNode:"&",updateLabels:"&",updateAnnotations:"&"},templateUrl:"common/components/hpalist/hpalist.html"}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.podListComponent=exports.PodListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PodListController=(__webpack_require__(11),exports.PodListController=function(){function PodListController($cookies){_classCallCheck(this,PodListController),this.data,this.namespace,this._cookies=$cookies,this.editFlag=!0}return _createClass(PodListController,[{key:"getHref",value:function(namespace,objName){return this.onHref({namespace:namespace,objName:objName})}},{key:"getNamespce",value:function(namespace,objName){return this.onNamespace({namespace:namespace,objName:objName})}},{key:"getStatus",value:function(str){return"Running"==str?"运行中":str}},{key:"delete",value:function(event,item){return this.onDelete({event:event,item:item})}},{key:"goToShell",value:function(name,containerName){return this.onShell({name:name,containerName:containerName})}},{key:"update",value:function(event,item){return this.onUpdate({event:event,item:item})}},{key:"node",value:function(event,item){return this.onNode({event:event,item:item})}},{key:"modifyLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){return this.updateLabels({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjLabels:resourceObjLabels})}},{key:"modifyAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjAnnotations){return this.updateAnnotations({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjAnnotations:resourceObjAnnotations})}}]),PodListController}());exports.podListComponent={controller:PodListController,bindings:{data:"<",namespace:"<",searchtext:"=",onDelete:"&",onUpdate:"&",onHref:"&",onNode:"&",onShell:"&",updateLabels:"&",updateAnnotations:"&",onNamespace:"&"},templateUrl:"common/components/podlist/podlist.html"}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sercetListComponent=exports.SercetListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),SercetListController=exports.SercetListController=function(){function SercetListController($cookies){_classCallCheck(this,SercetListController),this.data,this.namespace,this._cookies=$cookies,this.editFlag=!0;this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY)}return _createClass(SercetListController,[{key:"getHref",value:function(namespace,objName){return this.onHref({namespace:namespace,objName:objName})}},{key:"getNamespce",value:function(namespace,objName){return this.onNamespace({namespace:namespace,objName:objName})}},{key:"delete",value:function(event,item){return this.onDelete({event:event,item:item})}},{key:"update",value:function(event,item){return this.onUpdate({event:event,item:item})}},{key:"modifyLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){return this.updateLabels({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjLabels:resourceObjLabels})}},{key:"modifyAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjAnnotations){return this.updateAnnotations({event:event,namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjAnnotations:resourceObjAnnotations})}}]),SercetListController}();exports.sercetListComponent={controller:SercetListController,bindings:{data:"<",namespace:"<",onDelete:"&",onUpdate:"&",onHref:"&",updateLabels:"&",updateAnnotations:"&",onNamespace:"&"},templateUrl:"common/components/sercetlist/sercetlist.html"}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.replicaSetListComponent=exports.ReplicaSetListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),ReplicaSetListController=exports.ReplicaSetListController=function(){function ReplicaSetListController($cookies){_classCallCheck(this,ReplicaSetListController),this.selected=[],this.data,this.limitOptions,this.query,this.options,this.namespace,this._cookies=$cookies,this.editFlag=!0,"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name?(this.editFlag=!1,this.theadcontent=[{name:"状态"},{name:"名称"},{name:"Namespace"},{name:"标签"},{name:"副本"},{name:"时长"},{name:"镜像"}]):this.theadcontent=[{name:"状态"},{name:"名称"},{name:"Namespace"},{name:"标签"},{name:"副本"},{name:"时长"},{name:"镜像"},{name:"操作"}]}return _createClass(ReplicaSetListController,[{key:"isLabel",value:function(label){return"-"!=label}},{key:"delete",value:function(event,item){return this.onDelete({event:event,item:item})}},{key:"update",value:function(event,item){return this.onUpdate({event:event,item:item})}},{key:"getHref",value:function(namespace,objName){return this.onHref({namespace:namespace,objName:objName})}}]),ReplicaSetListController}();exports.replicaSetListComponent={controller:ReplicaSetListController,bindings:{options:"<",limitOptions:"<",query:"<",data:"<",namespace:"<",onDelete:"&",onUpdate:"&",onHref:"&"},templateUrl:"common/components/replicasetlist/replicasetlist.html"}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventListComponent=exports.EventListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),EventListController=exports.EventListController=function(){function EventListController($state){_classCallCheck(this,EventListController),this._state=$state,this.data}return _createClass(EventListController,[{key:"getLabelFirstletter",value:function(value){var regexp=/[A-Z]/g,matchesArr=value.toString().match(regexp),newStr="";return matchesArr.forEach(function(chr){newStr+=chr}),newStr}},{key:"getDetailHref",value:function(kind,namespace,objName){var resourceName=kind.toLowerCase();return this._state.href(resourceName+"detail",new _utils.UpdageStateParams(namespace,objName,"list"))}}]),EventListController}();exports.eventListComponent={controller:EventListController,bindings:{data:"=",limit:"<",onRefresh:"&"},templateUrl:"common/components/eventlist/eventlist.html"}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.loadingComponent={templateUrl:"common/components/loading/loading.html"}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),MIN_TIP_WIDTH=exports.MIN_TIP_WIDTH=5,MAX_TIP_WIDTH=exports.MAX_TIP_WIDTH=100,VulnerabilitySeverity=exports.VulnerabilitySeverity={none:1,unknown:2,low:3,medium:4,high:5},VULNERABILITY=(exports.VULNERABILITY_SCAN_STATUS={unknown:"n/a",pending:"pending",running:"running",error:"error",stopped:"stopped",finished:"finished"},exports.VULNERABILITY={PLURAL:"漏洞",SINGULAR:"漏洞",PACKAGE:"组件",PACKAGES:"组件"}),ScanSummaryController=exports.ScanSummaryController=function(){function ScanSummaryController($translate){_classCallCheck(this,ScanSummaryController),this.data,this._translate=$translate,this._tipTitle=null,this._highCount=0,this._mediumCount=0,this._lowCount=0,this._unknownCount=0,this._noneCount=0,this.totalPackages=0,this.packagesWithVul=0,this.update_time=new Date,this.scanOverviewData=[]}return _createClass(ScanSummaryController,[{key:"initPieChartConfig",value:function(){return{calculable:!0,series:[{name:"Vulnerability",type:"pie",hoverAnimation:!1,center:["50%","50%"],avoidLabelOverlap:!1}]}}},{key:"$onInit",value:function(){var _this=this;if(void 0!=this.data){this.summary={scan_status:this.data.scan_status,severity:this.data.severity,update_time:this.data.update_time,components:{total:this.data.components.total,summary:this.data.components.summary}};var highStyle={normal:{label:{show:!1,position:"inner"},color:"orangered"},emphasis:{borderColor:"orangered",borderWidth:3}},mediumStyle={normal:{label:{show:!1,position:"inner"},color:"rgb(216, 150, 9)"},emphasis:{borderColor:"rgb(216, 150, 9)",borderWidth:3}},lowStyle={normal:{label:{show:!1,position:"inner"},color:"orange"},emphasis:{borderColor:"orange",borderWidth:3}},unknownStyle={normal:{label:{show:!1,position:"inner"},color:"rgb(206, 206, 159)"},emphasis:{borderColor:"rgb(206, 206, 159)",borderWidth:3}},negligibleStyle={normal:{label:{show:!1,position:"inner"},color:"rgb(238, 219, 48)"},emphasis:{borderColor:"rgb(238, 219, 48)",borderWidth:3}};this.totalPackages=this.summary&&this.summary.components?this.summary.components.total:0,this.summary&&this.summary.components&&this.summary.components.summary&&(this.summary.components.summary.forEach(function(item){switch(item.severity!=VulnerabilitySeverity.none&&(_this.packagesWithVul+=item.count),item.severity){case VulnerabilitySeverity.unknown:_this._unknownCount+=item.count,_this._unknownObj={value:item.count,name:"Unknown-level Vulnerabilities",itemStyle:unknownStyle},_this.scanOverviewData.push(_this._unknownObj);break;case VulnerabilitySeverity.none:_this._noneCount+=item.count,_this._noneObj={value:item.count,name:"Negligible-level Vulnerabilities",itemStyle:negligibleStyle},_this.scanOverviewData.push(_this._noneObj);break;case VulnerabilitySeverity.low:_this._lowCount+=item.count,_this._lowObj={value:item.count,name:"Low-level Vulnerabilities",itemStyle:lowStyle},_this.scanOverviewData.push(_this._lowObj);break;case VulnerabilitySeverity.medium:_this._mediumCount+=item.count,_this._mediumObj={value:item.count,name:"Medium-level Vulnerabilities",itemStyle:mediumStyle},_this.scanOverviewData.push(_this._mediumObj);break;case VulnerabilitySeverity.high:_this._highCount+=item.count,_this._highObj={value:item.count,name:"High-level Vulnerabilities",itemStyle:highStyle},_this.scanOverviewData.push(_this._highObj)}}),this._highCount&&this._highCount>=1?this._highObj.showSelected=!0:this._mediumCount&&this._mediumCount>=1?this._mediumObj.showSelected=!0:this._lowCount&&this._lowCount>=1?this._lowObj.showSelected=!0:this._unknownCount&&this._unknownCount?this._unknownObj.showSelected=!0:this._noneObj&&(this._noneObj.showSelected=!0),this.scanOverviewConfig=this.initPieChartConfig()),this.formatText={totalVulnerability:this.packagesWithVul,totalPackages:this.totalPackages,package:this.packageText(this.totalPackages),vulnerability:this.unitText(this.packagesWithVul)}}}},{key:"scanLevel",value:function(){return this._highCount&&this._highCount>=1?VulnerabilitySeverity.high:this._mediumCount&&this._mediumCount>=1?VulnerabilitySeverity.medium:this._lowCount&&this._lowCount>=1?VulnerabilitySeverity.low:this._unknownCount&&this._unknownCount?VulnerabilitySeverity.unknown:VulnerabilitySeverity.none}},{key:"tipWidth",value:function(severity){var n=0,m=this.totalPackages;if(0===m)return severity===VulnerabilitySeverity.none?MAX_TIP_WIDTH+"px":"0px";switch(severity){case VulnerabilitySeverity.high:n=this._highCount;break;case VulnerabilitySeverity.medium:n=this._mediumCount;break;case VulnerabilitySeverity.low:n=this._lowCount;break;case VulnerabilitySeverity.unknown:n=this._unknownCount;break;case VulnerabilitySeverity.none:(n=m-(this._highCount+this._mediumCount+this._lowCount+this._unknownCount))<0&&(n=0);break;default:n=0}var width=Math.round(n/m*MAX_TIP_WIDTH);return width>0&&width<MIN_TIP_WIDTH&&(width=MIN_TIP_WIDTH),width+"px"}},{key:"unitText",value:function(count){return count>1?VULNERABILITY.PLURAL:VULNERABILITY.SINGULAR}},{key:"packageText",value:function(count){return count>1?VULNERABILITY.PACKAGES:VULNERABILITY.PACKAGE}},{key:"completeTimestamp",value:function(){return this.summary&&this.summary.update_time?this.summary.update_time:new Date}},{key:"hasHigh",value:function(){return this._highCount>0}},{key:"hasMedium",value:function(){return this._mediumCount>0}},{key:"hasLow",value:function(){return this._lowCount>0}},{key:"hasUnknown",value:function(){return this._unknownCount>0}},{key:"hasNone",value:function(){return this._noneCount>0}},{key:"tipTitle",value:function(){return this._tipTitle}},{key:"highCount",value:function(){return this._highCount}},{key:"mediumCount",value:function(){return this._mediumCount}},{key:"lowCount",value:function(){return this._lowCount}},{key:"unknownCount",value:function(){return this._unknownCount}},{key:"noneCount",value:function(){return this._noneCount}},{key:"getMaxWidth",value:function(){return MAX_TIP_WIDTH+20+"px"}}]),ScanSummaryController}();exports.scanSummaryComponent={controller:ScanSummaryController,bindings:{data:"<"},templateUrl:"common/components/scansummary/scansummary.html"}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function warnThresholdDirective(){return{restrict:"A",require:["^mdInputContainer","ngModel"],scope:_defineProperty({},_warnthreshold.hasWarningAttr,"="),link:function(scope,element,attrs,ctrl){var inputContainer=element.parent(),inputCtrl=ctrl[1];inputCtrl.$viewChangeListeners.push(function(){(0,_warnthreshold.shouldSetWarning)(inputCtrl,attrs)&&(0,_warnthreshold.setWarning)(inputContainer,scope),(0,_warnthreshold.shouldRemoveWarning)(inputCtrl,attrs,scope)&&(0,_warnthreshold.removeWarning)(inputContainer,scope)})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=warnThresholdDirective;var _warnthreshold=__webpack_require__(20)},function(module,exports){"use strict";function shouldSetWarning(inputCtrl,attributes){return parseInt(inputCtrl.$viewValue,10)>attributes[horWarnThresholdAttr]}function shouldRemoveWarning(inputCtrl,attributes,scope){return hasWarning(scope)&&!shouldSetWarning(inputCtrl,attributes)}function setWarning(inputContainer,socpe){socpe[hasWarningAttr]=!0,inputContainer.addClass(horWarningClass)}function removeWarning(inputContainer,scope){scope[hasWarningAttr]=!1,inputContainer.removeClass(horWarningClass)}function hasWarning(scope){return scope[hasWarningAttr]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shouldSetWarning=shouldSetWarning,exports.shouldRemoveWarning=shouldRemoveWarning,exports.setWarning=setWarning,exports.removeWarning=removeWarning;var horWarnThresholdAttr="horWarnThreshold",hasWarningAttr=exports.hasWarningAttr="horWarnThresholdBind",horWarningClass="hor-warning"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _component=__webpack_require__(22),_graphcard_component=__webpack_require__(28);exports.default=angular.module("horApp.common.components.graph",["ngMaterial","ui.router"]).component("horGraph",_component.graphComponent).component("horGraphCard",_graphcard_component.graphCardComponent)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.graphComponent=exports.GraphController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_settings=__webpack_require__(23),_tick_values=__webpack_require__(27),GraphController=exports.GraphController=function(){function GraphController($scope,$element){_classCallCheck(this,GraphController),this._scope=$scope,this._element=$element,this.metrics}return GraphController.$inject=["$scope","$element"],_createClass(GraphController,[{key:"$onInit",value:function(){null!==this.metrics&&0!==this.metrics.length&&this.generateGraph()}},{key:"onMetricsChanged",value:function(newValue,oldValue,scope){}},{key:"generateGraph",value:function(){var _this=this,chart=void 0;nv.addGraph(function(){chart=nv.models.multiChart().margin({top:30,right:30,bottom:55,left:75}).options({duration:300,tooltips:!0,useInteractiveGuideline:!0});for(var data=[],yAxis1Type=void 0,yAxis2Type=void 0,y1max=1,y2max=1,i=0;i<_this.metrics.length;i++){var metric=_this.metrics[i];if(!(metric.dataPoints.length<2)&&metric.metricName in _settings.metricDisplaySettings){var metricSettings=_settings.metricDisplaySettings[metric.metricName];if(1===metricSettings.yAxis){if(void 0===yAxis1Type)yAxis1Type=metricSettings.yAxisType;else if(yAxis1Type!==metricSettings.yAxisType)throw new Error("Can't display requested data - metrics have inconsistent types of y1 axis!");y1max=Math.max(y1max,Math.max.apply(Math,_toConsumableArray(metric.dataPoints.map(function(e){return e.y}))))}else{if(void 0===yAxis2Type)yAxis2Type=metricSettings.yAxisType;else if(yAxis2Type!==metricSettings.yAxisType)throw new Error("Can't display requested data - metrics have inconsistent types of y2 axis!");y2max=Math.max(y2max,Math.max.apply(Math,_toConsumableArray(metric.dataPoints.map(function(e){return e.y}))))}data.push({area:metricSettings.area,values:metric.dataPoints,key:metricSettings.key,color:metricSettings.color,fillOpacity:metricSettings.fillOpacity,strokeWidth:metricSettings.strokeWidth,type:metricSettings.type,yAxis:metricSettings.yAxis})}}if(0!==data.length){void 0===yAxis1Type&&(yAxis1Type=yAxis2Type,y1max=y2max,data.forEach(function(d){return d.yAxis=1}),yAxis2Type=void 0),1===data.length&&chart.showLegend(!1);var xAxisSettings=_settings.axisSettings[_settings.TimeAxisType];if(chart.xAxis.axisLabel(xAxisSettings.label).tickFormat(xAxisSettings.formatter).staggerLabels(!1),void 0!==yAxis1Type){var yAxis1Settings=_settings.axisSettings[yAxis1Type];chart.yAxis1.axisLabel(yAxis1Settings.label).tickFormat(yAxis1Settings.formatter).tickValues((0,_tick_values.getTickValues)(y1max)),chart.yDomain1([0,(0,_tick_values.getNewMax)(y1max)])}if(void 0!==yAxis2Type){var yAxis2Settings=_settings.axisSettings[yAxis2Type];chart.yAxis2.axisLabel(yAxis2Settings.label).tickFormat(yAxis2Settings.formatter).tickValues((0,_tick_values.getTickValues)(y2max)),chart.yDomain2([0,(0,_tick_values.getNewMax)(y2max)])}chart.interactiveLayer.tooltip.valueFormatter(function(d,tooltip_row_index){var notDisabledMetrics=data.filter(function(e){return!e.disabled});return tooltip_row_index<notDisabledMetrics.length?1===notDisabledMetrics[tooltip_row_index].yAxis?chart.yAxis1.tickFormat()(d):chart.yAxis2.tickFormat()(d):d});var graphArea=d3.select(_this._element[0]),svg=graphArea.append("svg");svg.attr("height","200px").datum(data).call(chart),svg.style({"background-color":"white"});var isUpdatingFunctionRunning=!1,updateUntil=0,startChartUpdatePeriod=function(updatePeriod,timeBetweenUpdates){if(isUpdatingFunctionRunning)return void(updateUntil=(new Date).valueOf()+updatePeriod);isUpdatingFunctionRunning=!0,updateUntil=(new Date).valueOf()+updatePeriod;var updater=function updater(){chart.update(),new Date<updateUntil?setTimeout(updater,timeBetweenUpdates):isUpdatingFunctionRunning=!1};setTimeout(updater,timeBetweenUpdates)};return nv.utils.windowResize(chart.update),_this._scope.$watch(function(){return graphArea.node().getBoundingClientRect().width},function(){return startChartUpdatePeriod(1600,200)},!1),chart}})}}]),GraphController}();exports.graphComponent={bindings:{metrics:"<"},controller:GraphController,templateUrl:"common/components/graph/graph.html"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axisSettings=exports.metricDisplaySettings=exports.TimeAxisType=exports.MemoryAxisType=exports.CPUAxisType=exports.MAX_BETWEEN_TICKS=exports.TICK_NUM=void 0;var _graph_tick_formatters=__webpack_require__(24),i18n={MSG_GRAPH_CPU_USAGE_LEGEND_LABEL:"CPU Usage",MSG_GRAPH_MEMORY_USAGE_LEGEND_LABEL:"Memory Usage",MSG_GRAPH_CPU_LIMIT_LEGEND_LABEL:"CPU Limit",MSG_GRAPH_CPU_AXIS_LABEL:"CPU (cores)",MSG_GRAPH_MEMORY_AXIS_LABEL:"Memory (bytes)",MSG_GRAPH_TIME_AXIS_LABEL:"Time"},CPUAxisType=(exports.TICK_NUM=4.5,exports.MAX_BETWEEN_TICKS=[3.8,4.1],exports.CPUAxisType="CPUAxisType"),MemoryAxisType=exports.MemoryAxisType="MemoryAxisType";exports.TimeAxisType="TimeAxisType",exports.metricDisplaySettings={"cpu/usage_rate":{yAxisType:CPUAxisType,area:!0,key:i18n.MSG_GRAPH_CPU_USAGE_LEGEND_LABEL,color:"#33E9FF",fillOpacity:.8,strokeWidth:3,type:"line",yAxis:1},"cpu/limit":{yAxisType:CPUAxisType,area:!0,key:i18n.MSG_GRAPH_CPU_LIMIT_LEGEND_LABEL,color:"#BB33FF",fillOpacity:.8,strokeWidth:3,type:"line",yAxis:1},"memory/usage":{yAxisType:MemoryAxisType,area:!0,key:i18n.MSG_GRAPH_MEMORY_USAGE_LEGEND_LABEL,color:"#05BB81",fillOpacity:.8,strokeWidth:3,type:"line",yAxis:2}},exports.axisSettings={CPUAxisType:{formatter:_graph_tick_formatters.formatCpuUsage,label:i18n.MSG_GRAPH_CPU_AXIS_LABEL},MemoryAxisType:{formatter:_graph_tick_formatters.formatMemoryUsage,label:i18n.MSG_GRAPH_MEMORY_AXIS_LABEL},TimeAxisType:{formatter:_graph_tick_formatters.formatTime,label:i18n.MSG_GRAPH_TIME_AXIS_LABEL}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function precisionFilter(d){return d>=1e3?d3.format(",")(d.toPrecision(3)):d<.01?d.toPrecision(1):d<.1?d.toPrecision(2):d.toPrecision(3)}function formatMemoryUsage(d){return null===d?i18n.MSG_GRAPH_DATA_POINT_NOT_AVAILABLE:(0,_memory2.default)(precisionFilter)(d)}function formatCpuUsage(d){return null===d?i18n.MSG_GRAPH_DATA_POINT_NOT_AVAILABLE:(0,_cores2.default)(precisionFilter)(d)}function formatTime(d){return d3.time.format("%H:%M")(new Date(1e3*d))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatMemoryUsage=formatMemoryUsage,exports.formatCpuUsage=formatCpuUsage,exports.formatTime=formatTime;var _cores=__webpack_require__(25),_cores2=_interopRequireDefault(_cores),_memory=__webpack_require__(26),_memory2=_interopRequireDefault(_memory),i18n={MSG_GRAPH_DATA_POINT_NOT_AVAILABLE:"N/A"}},function(module,exports){"use strict";function coresFilter(numberFilter){return function(value){value/=1e3;for(var divider=1,power=0;value/divider>base&&power<powerSuffixes.length-1;)divider*=base,power+=1;var formatted=numberFilter(value/divider),suffix=powerSuffixes[power];return suffix?formatted+" "+suffix:formatted}}coresFilter.$inject=["numberFilter"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=coresFilter;var base=1e3,powerSuffixes=["","k","M","G","T"]},function(module,exports){"use strict";function memoryFilter(numberFilter){return function(value){for(var divider=1,power=0;value/divider>base&&power<powerSuffixes.length-1;)divider*=base,power+=1;var formatted=numberFilter(value/divider),suffix=powerSuffixes[power];return suffix?formatted+" "+suffix:formatted}}memoryFilter.$inject=["numberFilter"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=memoryFilter;var base=1024,powerSuffixes=["","Ki","Mi","Gi","Ti","Pi"]},function(module,exports,__webpack_require__){"use strict";function niceNum(a,b){var ra=b/a,sh=Math.floor(Math.log(a)/Math.log(10)),pa=a*Math.pow(10,-sh)*100,pb=Math.floor(pa*ra);pa=Math.ceil(pa);for(var i=0;i<DIV_PRIORITY.length;i++){var cand=DIV_PRIORITY[i];if(Math.ceil(pa/cand)<=Math.floor(pb/cand))return Math.ceil(pa/cand)*cand/100*Math.pow(10,sh)}return a}function getYTickSeparation(yMax){return niceNum(yMax/_settings.MAX_BETWEEN_TICKS[1],yMax/_settings.MAX_BETWEEN_TICKS[0])}function getNewMax(yMax){return getYTickSeparation(yMax)*_settings.TICK_NUM}function getTickValues(yMax){for(var ticks=[],yTickSep=getYTickSeparation(yMax),i=1;i<=Math.ceil(_settings.TICK_NUM-1);i++)ticks.push(yTickSep*i);return ticks}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNewMax=getNewMax,exports.getTickValues=getTickValues;var _settings=__webpack_require__(23),DIV_PRIORITY=[1500,1e3,500,250,200,100,50,25,20,10,5,1]},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),GraphCardController=exports.GraphCardController=function(){function GraphCardController($scope){_classCallCheck(this,GraphCardController),this.metrics,this.graphTitile,this.selectedMetrics,this._scope=$scope}return GraphCardController.$inject=["$scope"],_createClass(GraphCardController,[{key:"$onInit",value:function(){this.selectedMetrics=this.getSelectedMetrics()}},{key:"getSelectedMetrics",value:function(){if(void 0===this.selectedMetricNames)return this.metrics;var selectedMetricNameList=this.selectedMetricNames.split(",");return this.metrics&&this.metrics.filter(function(metric){return-1!==selectedMetricNameList.indexOf(metric.metricName)})}},{key:"shouldShowGraph",value:function(){return null!==this.metrics&&this.metrics.length>0&&this.metrics.filter(function(metric){return metric.dataPoints.length>1}).length===this.metrics.length}}]),GraphCardController}();exports.graphCardComponent={controller:GraphCardController,bindings:{metrics:"<",graphTitle:"@",graphInfo:"@",selectedMetricNames:"<"},templateUrl:"common/components/graph/graphcard.html"}},function(module,exports,__webpack_require__){"use strict";function ensureNamespaceParamPresent($rootScope,$location,$window,$cookies,$http){function replaceUrlIfNeeded(namespace){var userRole=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole;void 0===namespace&&""!=userRole.Namespace?($location.search(_hormain_state.namespaceParam,userRole.Namespace),$location.replace()):void 0===namespace&&($location.search(_hormain_state.namespaceParam,_namespaceselect_component.DEFAULT_NAMESPACE),$location.replace())}$rootScope.$watch(function(){return $location.search()[_hormain_state.namespaceParam]},replaceUrlIfNeeded),$rootScope.$on("$locationChangeSuccess",function(){var user=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY);if(void 0===user||null==user){var url=$location.absUrl(),index=url.search(/\/([^\/]+html|#)/);$window.location=url.slice(0,index)+"/"+_constant.HOR_LOGIN_PAGE}else{var userRole=user.userRole;""===userRole.Namespace||$location.search(_hormain_state.namespaceParam,userRole.Namespace),replaceUrlIfNeeded($location.search()[_hormain_state.namespaceParam])}})}ensureNamespaceParamPresent.$inject=["$rootScope","$location","$window","$cookies","$http"],Object.defineProperty(exports,"__esModule",{value:!0});var _hormain_state=__webpack_require__(30),_namespaceselect_component=__webpack_require__(31),_namespace_service=__webpack_require__(32),_constant=__webpack_require__(11)
;exports.default=angular.module("horApp.common.namespace",["ngMaterial","ngResource","ui.router","ngCookies"]).service("horNamespaceService",_namespace_service.NamespaceService).component("horNamespaceSelect",_namespaceselect_component.namespaceSelectComponent).run(ensureNamespaceParamPresent)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="hormain",exports.stateSearchName="search",exports.stateBuildsName="builds",exports.namespaceParam="namespace",exports.StateParams=function StateParams(namespace){_classCallCheck(this,StateParams),this.namespace=namespace}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.namespaceSelectComponent=exports.NamespaceSelectController=exports.NAMESPACE_REGEX=exports.DEFAULT_NAMESPACE=exports.ALL_NAMESPACES=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_hormain_state=__webpack_require__(30),ALL_NAMESPACES=exports.ALL_NAMESPACES="all",DEFAULT_NAMESPACE=exports.DEFAULT_NAMESPACE="default",NAMESPACE_REGEX=exports.NAMESPACE_REGEX=/^([a-z0-9]([-a-z0-9]*[a-z0-9])?|_all)$/,NamespaceSelectController=exports.NamespaceSelectController=function(){function NamespaceSelectController($resource,$state,$scope,horNamespaceService,horStateService,$cookies,$http){_classCallCheck(this,NamespaceSelectController),this.namespaces=[],this.ALL_NAMESPACES=ALL_NAMESPACES,this._namespacesInitialized=!1,this.selectedNamespace,this._namespaceService=horNamespaceService,this._resource=$resource,this._state=$state,this._scope=$scope,this._horStateService=horStateService,this._cookies=$cookies,this.currentUser=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY),this._http=$http,this.isMultiNamespace=!1}return NamespaceSelectController.$inject=["$resource","$state","$scope","horNamespaceService","horStateService","$cookies","$http"],_createClass(NamespaceSelectController,[{key:"$onInit",value:function(){var _this=this;this._onNamespaceChanged(this._horStateService.params),this._scope.$watch(function(){return _this._horStateService.params},function(toParams){_this._onNamespaceChanged(toParams)})}},{key:"_onNamespaceChanged",value:function(toParams){if(toParams){var newNamespace=toParams[_hormain_state.namespaceParam];newNamespace?this._namespacesInitialized?this.namespaces.indexOf(newNamespace)>=0||newNamespace===ALL_NAMESPACES?this.selectedNamespace=newNamespace:this.selectedNamespace=DEFAULT_NAMESPACE:NAMESPACE_REGEX.test(newNamespace)?(this.namespaces=[newNamespace],this.selectedNamespace=newNamespace):this.selectedNamespace=DEFAULT_NAMESPACE:this.selectedNamespace=DEFAULT_NAMESPACE}else this.selectedNamespace=DEFAULT_NAMESPACE}},{key:"formatNamespace",value:function(){var namespace=this.selectedNamespace;return namespace===ALL_NAMESPACES?"ch"==window.localStorage.lang?"所有命名空间":"AllNamespaces":namespace}},{key:"changeNamespace",value:function(){var currentStateName=this._state.current.name;if(currentStateName.includes("detail")){var str=currentStateName.split("detail")[0];this._state.go(str,_defineProperty({},_hormain_state.namespaceParam,this.selectedNamespace))}else this._state.go(".",_defineProperty({},_hormain_state.namespaceParam,this.selectedNamespace))}},{key:"loadNamespacesIfNeeded",value:function(){var _this2=this;if(!this._namespacesInitialized){var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY),userRole=user.userRole;if(""===userRole.Namespace){this.isMultiNamespace=!0;return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces").get().$promise.then(function(namespaceList){_this2.namespaces=namespaceList.items.map(function(n){return n.metadata.name}),-1===_this2.namespaces.indexOf(_this2.selectedNamespace)&&_this2.selectedNamespace!==ALL_NAMESPACES&&(_this2.selectedNamespace=DEFAULT_NAMESPACE,_this2.changeNamespace())})}this.namespaces=[userRole.Namespace],this.isMultiNamespace=!1,this.selectedNamespace=userRole.Namespace}}}]),NamespaceSelectController}();exports.namespaceSelectComponent={controller:NamespaceSelectController,templateUrl:"common/namespace/namespace.html"}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NamespaceService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespaceselect_component=__webpack_require__(31),_namespaceselect_component2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_namespaceselect_component);exports.NamespaceService=function(){function NamespaceService($stateParams){_classCallCheck(this,NamespaceService),this._stateParams=$stateParams}return NamespaceService.$inject=["$stateParams"],_createClass(NamespaceService,[{key:"areMultipleNamespacesSelected",value:function(){return this._stateParams.namespace===_namespaceselect_component2.default}},{key:"isMultiNamespace",value:function(namespace){return namespace===_namespaceselect_component2.default}}]),NamespaceService}()},function(module,exports,__webpack_require__){"use strict";function initServices(horStateService){horStateService.init()}initServices.$inject=["horStateService"],Object.defineProperty(exports,"__esModule",{value:!0});var _state_service=__webpack_require__(34);exports.default=angular.module("horApp.common.state",["ui.router"]).service("horStateService",_state_service.StateService).run(initServices)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.StateService=function(){function StateService($rootScope){_classCallCheck(this,StateService),this._rootScope=$rootScope,this.state=null,this.params=null}return StateService.$inject=["$rootScope"],_createClass(StateService,[{key:"init",value:function(){var _this=this;this._rootScope.$on("$stateChangeStart",function(event,toState,toParams){_this.state=toState,_this.params=toParams})}}]),StateService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _utils_service=__webpack_require__(36),_filters_module=__webpack_require__(38),_filters_module2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_filters_module);exports.default=angular.module("horApp.common.utils",["ngMaterial","ui.router",_filters_module2.default.name]).factory("horUtilsService",_utils_service.utilsService)},function(module,exports,__webpack_require__){"use strict";function utilsService($q,$filter,$interpolate,$translate){function recombineServiceList(serviceList){var deferred=$q.defer(),serviceListArr=[];return serviceList.items.map(function(item){var labelsArr=[],podSelector=[],annotationsArr=[],internalEndpointsArr=[],serviceState=void 0,serviceName=item.Service.metadata.name,serviceType=item.Service.spec.type,serviceCIP=item.Service.spec.clusterIP,serviceExEndpoints=item.ExternalEndpoints;serviceState=null===serviceCIP||"LoadBalancer"==serviceType&&null===serviceExEndpoints?"pending":"success",item.Service.metadata.labels?angular.forEach(item.Service.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}}):labelsArr="-",item.Service.spec.selector?angular.forEach(item.Service.spec.selector,function(value,key){var pStr=key+"="+value;podSelector.push(pStr)}):podSelector="-",item.Service.metadata.annotations&&angular.forEach(item.Service.metadata.annotations,function(key,value){var str=value+"="+key;annotationsArr.push(str)}),item.InternalEndpoints.ports?angular.forEach(item.InternalEndpoints.ports,function(value,key){if(value.port){var str=serviceName+":"+value.port+" "+value.protocol;internalEndpointsArr.push(str)}if(value.nodePort){var _str2=serviceName+":"+value.nodePort+" "+value.protocol;internalEndpointsArr.push(_str2)}else{var _str3=serviceName+":0 "+value.protocol;internalEndpointsArr.push(_str3)}}):internalEndpointsArr="-";var obj={state:serviceState,name:serviceName,namespace:item.Service.metadata.namespace,labels:labelsArr,selector:podSelector,annotations:annotationsArr,clusterIP:item.Service.spec.clusterIP||"None",ports:item.Service.spec.ports,internalEndpoints:internalEndpointsArr,externalEndpoints:item.ExternalEndpoints||"-"};serviceListArr.push(obj)}),deferred.resolve(serviceListArr),deferred.promise}function recombinePodList(podList){var deferred=$q.defer(),podListArr=[];return podList.items?(podList.items.forEach(function(item){var pod=void 0,readiness=void 0,labelsArr=[],annotationsArr=[],restartCount=0,imageName=void 0,hostIp=void 0,podIp=void 0;pod=item.Pod?item.Pod:item,pod.status.containerStatuses&&(pod.status.containerStatuses.forEach(function(c){restartCount+=c.restartCount}),imageName=pod.status.containerStatuses[0].image),pod.status&&(hostIp=pod.status.hostIP,podIp=pod.status.podIP);var conditions=null;pod.status.conditions&&(conditions=pod.status.conditions),conditions?conditions.forEach(function(i){"Ready"==i.type&&"True"==i.status?readiness="Ready":"Ready"==i.type&&"False"==i.status&&(readiness=i.reason)}):readiness="-",pod.metadata.annotations&&angular.forEach(pod.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),pod.metadata.labels&&angular.forEach(pod.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str4=key+"="+value;labelsArr.push(_str4)}});var obj={state:(0,_podstatus.getPodStatus)(pod),name:pod.metadata.name,namespace:pod.metadata.namespace,labels:labelsArr,status:(0,_podstatus.getDisplayStatus)(pod),readiness:readiness,node:pod.spec.nodeName,restartCount:restartCount,age:pod.metadata.creationTimestamp,actions:"Actions",annotations:annotationsArr,imageName:imageName,hostIp:hostIp,podIp:podIp,container:pod.spec.containers[0].name};podListArr.push(obj)}),deferred.resolve(podListArr),deferred.promise):null}function recombineReplicaSetList(rsList){var deferred=$q.defer(),rsListArr=[];if(rsList.items)rsList.items.map(function(item){var labelsArr=[],podSelectorArr=[],annotationsArr=[],imagesArr=[],rsState=void 0;rsState=item.ReplicaSet.status.availableReplicas==item.ReplicaSet.status.replicas?"success":"failed",item.ReplicaSet.spec.selector.matchLabels&&angular.forEach(item.ReplicaSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str5=key+"="+value;podSelectorArr.push(_str5)}}),item.ReplicaSet.metadata.annotations?angular.forEach(item.ReplicaSet.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation"),item.ReplicaSet.metadata.labels?angular.forEach(item.ReplicaSet.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str6=key+"="+value;labelsArr.push(_str6)}}):labelsArr.push("No labels"),item.ReplicaSet.spec.template.spec.containers&&item.ReplicaSet.spec.template.spec.containers.forEach(function(c){imagesArr.push(c.image)});var withStyle=!0;withStyle=1!==labelsArr.length||"No labels"!==labelsArr[0];var rsTime=item.ReplicaSet.metadata.creationTimestamp;rsTime={nodesTime:$interpolate("{{date | date}}")({date:rsTime})};var rsAge=$filter("relativeTime")(item.ReplicaSet.metadata.creationTimestamp),obj={state:rsState,name:item.ReplicaSet.metadata.name,namespace:item.ReplicaSet.metadata.namespace,labels:labelsArr,pods:{running:item.ReplicaSet.status.availableReplicas||0,desired:item.ReplicaSet.status.replicas||0},age:rsAge,images:imagesArr,withStyle:withStyle,createTime:$translate.instant("Create at")+rsTime.nodesTime,sortTime:item.ReplicaSet.metadata.creationTimestamp,podSelector:podSelectorArr,annotations:annotationsArr,PodInfo:item.PodInfo};rsListArr.push(obj)});else{var labelsArr=[],podSelectorArr=[],annotationsArr=[],rsState=void 0;rsState=rsList.status.availableReplicas==rsList.status.replicas?"success":"failed",rsList.spec.selector.matchLabels&&angular.forEach(rsList.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str7=key+"="+value;podSelectorArr.push(_str7)}}),rsList.metadata.annotations?angular.forEach(rsList.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation"),rsList.metadata.labels?angular.forEach(rsList.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str8=key+"="+value;labelsArr.push(_str8)}}):labelsArr.push("No labels");var withStyle=!0;withStyle=1!==labelsArr.length||"No labels"!==labelsArr[0];var imagesArr=[];rsList.spec.template.spec.containers&&rsList.spec.template.spec.containers.forEach(function(c){imagesArr.push(c.image)});var rsTime=rsList.metadata.creationTimestamp;rsTime={nodesTime:$interpolate("{{date | date}}")({date:rsTime})};var rsAge=$filter("relativeTime")(rsList.metadata.creationTimestamp),obj={state:rsState,name:rsList.metadata.name,namespace:rsList.metadata.namespace,labels:labelsArr,pods:{running:rsList.status.availableReplicas||0,desired:rsList.status.replicas||0},age:rsAge,images:imagesArr,withStyle:withStyle,createTime:$translate.instant("Create at")+rsTime.nodesTime,sortTime:rsList.metadata.creationTimestamp,podSelector:podSelectorArr,annotations:annotationsArr};rsListArr.push(obj)}return deferred.resolve(rsListArr),deferred.promise}function recombinePvcList(pvcList){var deferred=$q.defer(),pvcListArr=[];return 0==pvcList.items.length?null:(pvcList.items.map(function(item){var labelsArr=[],annotationsArr=[],pvcState=item.status.phase,pvcName=item.metadata.name,pvcNamespace=item.metadata.namespace,pvcTime=item.metadata.creationTimestamp,pvcAge=$filter("relativeTime")(item.metadata.creationTimestamp),storage=item.spec.resources.requests.storage;pvcTime={nodesTime:$interpolate("{{date | date}}")({date:pvcTime})},item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str9=key+"="+value;labelsArr.push(_str9)}}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var withStyle=!0;withStyle="-"!==labelsArr;var volumeStr=void 0;volumeStr=item.spec.volumeName?item.spec.volumeName.toString():"-";var obj={state:pvcState,name:pvcName,namespace:pvcNamespace,volume:volumeStr,annotations:annotationsArr,labels:labelsArr,age:pvcAge,createTime:pvcTime.nodesTime,withStyle:withStyle,storage:storage};pvcListArr.push(obj)}),deferred.resolve(pvcListArr),deferred.promise)}function recombinePodprosetList(podpresetList){var deferred=$q.defer(),podpresetListArr=[];return 0==podpresetList.items.length?null:(podpresetList.items.map(function(item){var labelsArr=[],annotationsArr=[],pvcName=item.metadata.name,pvcNamespace=item.metadata.namespace,pvcTime=item.metadata.creationTimestamp,pvcAge=$filter("relativeTime")(item.metadata.creationTimestamp);item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str10=key+"="+value;labelsArr.push(_str10)}}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var withStyle=!0;withStyle="-"!==labelsArr;var obj={name:pvcName,namespace:pvcNamespace,annotations:annotationsArr,labels:labelsArr,age:pvcAge,createTime:pvcTime,withStyle:withStyle};podpresetListArr.push(obj)}),deferred.resolve(podpresetListArr),deferred.promise)}function recombineroleList(roleList){var deferred=$q.defer(),roleListArr=[];return 0==roleList.items.length?null:(roleList.items.map(function(item){var pvcName=item.metadata.name,roleCreatTime=item.metadata.creationTimestamp,pvcNamespace=item.metadata.namespace,obj={name:pvcName,namespace:pvcNamespace,creatTime:roleCreatTime};roleListArr.push(obj)}),deferred.resolve(roleListArr),deferred.promise)}function recombineclusterRoleList(clusterRoleList){var deferred=$q.defer(),clusterRoleListArr=[];return 0==clusterRoleList.items.length?null:(clusterRoleList.items.map(function(item){var pvcName=item.metadata.name,roleCreatTime=item.metadata.creationTimestamp,pvcNamespace=item.metadata.namespace,obj={name:pvcName,namespace:pvcNamespace,creatTime:roleCreatTime};clusterRoleListArr.push(obj)}),deferred.resolve(clusterRoleListArr),deferred.promise)}function recombinepodsecuritypolicieList(psplist){var deferred=$q.defer(),psplistArr=[];return 0==psplist.items.length?null:(psplist.items.map(function(item){var obj={name:item.metadata.name,creatTime:item.metadata.creationTimestamp,seLinux:item.spec.seLinux.rule,runAsUser:item.spec.runAsUser.rule,supplementalGroups:item.spec.supplementalGroups.rule,fsGroup:item.spec.fsGroup.rule};psplistArr.push(obj)}),deferred.resolve(psplistArr),deferred.promise)}function recombinerolebindingList(rolebindingList){var deferred=$q.defer(),rolebindingListArr=[];return 0==rolebindingList.items.length?null:(rolebindingList.items.map(function(item){var pvcName=item.metadata.name,pvcNamespace=item.metadata.namespace,roleref=item.roleRef.name,subjectkind=item.subjects[0].kind,subjectname=item.subjects[0].name,obj={name:pvcName,namespace:pvcNamespace,kind:item.roleRef.kind,roleref:roleref,subjectkind:subjectkind,subjectname:subjectname};rolebindingListArr.push(obj)}),deferred.resolve(rolebindingListArr),deferred.promise)}function recombineclusterrolebindingList(clusterrolebindingList){var deferred=$q.defer(),clusterrolebindingListArr=[];return 0==clusterrolebindingList.items.length?null:(clusterrolebindingList.items.map(function(item){var pvcName=item.metadata.name,roleref=item.roleRef.name,obj={name:pvcName,namespace:"all",roleref:roleref,subjects:item.subjects,kind:item.roleRef.kind};clusterrolebindingListArr.push(obj)}),deferred.resolve(clusterrolebindingListArr),deferred.promise)}function recombineStorageclassList(storageclassLists){var deferred=$q.defer(),storageclassListsArr=[];return 0==storageclassLists.items.length?null:(storageclassLists.items.map(function(item){var labelsArr=[],annotationsArr=[],pvcName=item.metadata.name,pvcTime=item.metadata.creationTimestamp,pvcAge=$filter("relativeTime")(item.metadata.creationTimestamp);item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str11=key+"="+value;labelsArr.push(_str11)}}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var withStyle=!0;withStyle="-"!==labelsArr;var obj={name:pvcName,annotations:annotationsArr,labels:labelsArr,age:pvcAge,createTime:pvcTime,withStyle:withStyle,type:item.provisioner};storageclassListsArr.push(obj)}),deferred.resolve(storageclassListsArr),deferred.promise)}function recombineRqList(rqlist){var deferred=$q.defer(),rqListsArr=[];return 0==rqlist.items.length?null:(rqlist.items.map(function(item){var labelsArr=[],annotationsArr=[],pvcName=item.metadata.name,pvcNamespace=item.metadata.namespace,pvcTime=item.metadata.creationTimestamp,pvcAge=$filter("relativeTime")(item.metadata.creationTimestamp);item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str12=key+"="+value;labelsArr.push(_str12)}}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var withStyle=!0;withStyle="-"!==labelsArr;var obj={name:pvcName,namespace:pvcNamespace,annotations:annotationsArr,labels:labelsArr,age:pvcAge,createTime:pvcTime,withStyle:withStyle,type:item.provisioner};rqListsArr.push(obj)}),deferred.resolve(rqListsArr),deferred.promise)}function recombineNodeList(nodeList){var deferred=$q.defer(),nodeListArr=[];return nodeList.items.map(function(item){var labelsArr=[],annotationsArr=[],readyType=item.metadata.annotations["volumes.kubernetes.io/controller-managed-attach-detach"],nodeName=item.metadata.name,unschedulable=item.spec.unschedulable,nodeState=void 0;item.metadata.labels?angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str13=key+"="+value;labelsArr.push(_str13)}}):labelsArr="-",item.metadata.annotations?angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotations");var conditions=null;item.status.conditions&&(conditions=item.status.conditions);var nodeStatus={ready:null,status:null};"False"===conditions[3].status||"Unknown"===conditions[3].status?(nodeStatus.ready="False",nodeStatus.status="Not Ready"):"True"===conditions[3].status&&"False"===conditions[0].status&&"False"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="True",nodeStatus.status="Ready"):"True"===conditions[3].status&&"True"===conditions[0].status&&"False"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk"):"True"===conditions[3].status&&"True"===conditions[0].status&&"True"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Memory Pressure"):"True"===conditions[3].status&&"True"===conditions[0].status&&"False"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Disk Pressure"):"True"===conditions[3].status&&"True"===conditions[0].status&&"True"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Memory Pressure & Disk Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"True"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Memory Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"True"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Memory Pressure & Disk Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"False"===conditions[1].status&&"True"===conditions[2].status&&(nodeStatus.ready="Pending",nodeStatus.status="Disk Pressure");var nodeReady=void 0;"true"==readyType?(nodeReady="True",nodeState="success"):(readyType="false")?(nodeReady="False",nodeState="pending"):(readyType="unknown")&&(nodeReady="Unknown",nodeState="pending");var nodesTime=item.metadata.creationTimestamp;nodesTime={nodesTime:$interpolate("{{date | date}}")({date:nodesTime})};var withStyle=!0;withStyle="-"!==labelsArr;var cpuSurplus=Number(item.status.allocatable.cpu),cpuAll=Number(item.status.capacity.cpu),nodesSurplus=parseInt(item.status.allocatable.memory),nodesAll=parseInt(item.status.capacity.memory),obj={state:readyType,status:nodeState,name:nodeName,labels:labelsArr,Ready:nodeReady,age:$filter("relativeTime")(item.metadata.creationTimestamp),time:$translate.instant("Create at")+nodesTime.nodesTime,withStyle:withStyle,cpuUsage:cpuAll-cpuSurplus,nodesUsage:nodesAll-nodesSurplus,sortTime:item.metadata.creationTimestamp,nodeStatus:nodeStatus,annotations:annotationsArr,unschedulable:unschedulable};nodeListArr.push(obj)}),deferred.resolve(nodeListArr),deferred.promise}function recombineSecretList(secretList){var deferred=$q.defer(),secretListArr=[];return secretList.items.map(function(item){var labelsArr=[],annotationsArr=[],secretName=item.metadata.name,nodesTime=item.metadata.creationTimestamp;nodesTime={nodesTime:$interpolate("{{date | date}}")({date:nodesTime})},item.metadata.labels&&angular.forEach(item.metadata.labels,function(key,value){if(0==key.length){var str=""+value;labelsArr.push(str)}else{var _str14=value+"="+key;labelsArr.push(_str14)}}),item.metadata.annotations?angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var obj={name:secretName,namespace:item.metadata.namespace,age:item.metadata.creationTimestamp,time:item.metadata.creationTimestamp,data:item.data,label:labelsArr,annotations:annotationsArr,type:item.type};secretListArr.push(obj)}),deferred.resolve(secretListArr),deferred.promise}function recombineSecretServiceAccountList(secretServiceAccountList){var deferred=$q.defer(),secretListArr=[];return secretServiceAccountList.items.map(function(item){var labelsArr=[],annotationsArr=[],secretName=item.metadata.name,nodesTime=item.metadata.creationTimestamp;nodesTime={nodesTime:$interpolate("{{date | date}}")({date:nodesTime})},item.metadata.labels&&angular.forEach(item.metadata.labels,function(key,value){if(0==key.length){var str=""+value;labelsArr.push(str)}else{var _str15=value+"="+key;labelsArr.push(_str15)}}),item.metadata.annotations?angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var obj={name:secretName,namespace:item.metadata.namespace,age:$filter("relativeTime")(item.metadata.creationTimestamp),time:"创建于 "+nodesTime.nodesTime,data:item.data,label:labelsArr,annotations:annotationsArr};secretListArr.push(obj)}),deferred.resolve(secretListArr),deferred.promise}function recombineSecretDetailList(secretDetailList){var deferred=$q.defer(),age=$filter("relativeTime")(secretDetailList.metadata.creationTimestamp);secretDetailList.metadata.age=age;var secretTime=secretDetailList.metadata.creationTimestamp;return secretTime={secretTime:$interpolate("{{date | date}}")({date:secretTime})},secretDetailList.metadata.time=secretTime.secretTime,deferred.resolve(secretDetailList),deferred.promise}function recombineNamespaceList(namespaceList){var deferred=$q.defer(),namespaceListArr=[];return namespaceList.items.map(function(item){var labelsArr=[],annotationsArr=[],namespaceName=item.metadata.name,namespaceStatus=item.status.phase,namespaceCreateTime=item.metadata.creationTimestamp,namespaceAge=$filter("relativeTime")(item.metadata.creationTimestamp);namespaceCreateTime={nodesTime:$interpolate("{{date | date}}")({date:namespaceCreateTime})},item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){var str=key+"="+value;labelsArr.push(str)});var withStyle=!0;withStyle=1!==labelsArr.length||"No labels"!==labelsArr[0];var obj={state:namespaceStatus,name:namespaceName,annotations:annotationsArr,labels:labelsArr,age:namespaceAge,createTime:$translate.instant("Create at")+namespaceCreateTime.nodesTime,withStyle:withStyle,sortTime:item.metadata.creationTimestamp};namespaceListArr.push(obj)}),deferred.resolve(namespaceListArr),deferred.promise}function recombineNamespaceDetailEvents(namespaceDetailEvents){var deferred=$q.defer(),namespaceEventsArr=[];return 0==namespaceDetailEvents.items.length?null:(namespaceDetailEvents.items.map(function(item){var eventMessage=item.message,eventSource=item.source.component+" "+item.source.host,eventStatus=item.type,eventSubObject=item.involvedObject.fieldPath,eventCount=item.count,eventFirstSeen=$filter("date")(item.firstTimestamp),eventLastSeen=$filter("date")(item.lastTimestamp);eventSubObject=item.involvedObject.fieldPath?item.involvedObject.fieldPath:"-";var obj={state:eventStatus,message:eventMessage,source:eventSource,subObject:eventSubObject.toString(),count:eventCount,firstSeen:eventFirstSeen,lastSeen:eventLastSeen};namespaceEventsArr.push(obj)}),deferred.resolve(namespaceEventsArr),deferred.promise)}function recombineDaemonSetList(daemonSetList){var deferred=$q.defer(),daemonSetListArr=[];return 0==daemonSetList.items.length?null:(daemonSetList.items.map(function(item){var daemonSet=item.DaemonSet,PodInfo=item.PodInfo,labelsArr=[],daemonSetName=daemonSet.metadata.name,daemonSetNameSpace=daemonSet.metadata.namespace;daemonSet.metadata.labels&&angular.forEach(daemonSet.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str16=key+"="+value;labelsArr.push(_str16)}});var podSelectorArr=[];daemonSet.spec.selector.matchLabels&&angular.forEach(daemonSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str17=key+"="+value;podSelectorArr.push(_str17)}});var annotationsArr=[];daemonSet.metadata.annotations&&angular.forEach(daemonSet.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var withStyle=!0;withStyle=1!==labelsArr.length||"No labels"!==labelsArr[0];var age=$filter("relativeTime")(daemonSet.metadata.creationTimestamp),secretTime=daemonSet.metadata.creationTimestamp;secretTime={secretTime:$interpolate("{{date | date}}")({date:secretTime})};var image=[],containerImages=daemonSet.spec.template.spec.containers;if(0!=containerImages.length)for(var i in containerImages){var str=containerImages[i].image;image.push(str)}else image="-";var State=void 0;PodInfo.failed>0?State="warning":0==PodInfo.failed&&PodInfo.pending>0?State="pending":0==PodInfo.failed&&0==PodInfo.pending&&(State="success");var obj={state:State,pods:PodInfo,name:daemonSetName,namespace:daemonSetNameSpace,label:labelsArr,age:age,image:image,time:$translate.instant("Create at")+secretTime.secretTime,sortTime:daemonSet.metadata.creationTimestamp,withStyle:withStyle,podSelector:podSelectorArr,annotations:annotationsArr};daemonSetListArr.push(obj)}),deferred.resolve(daemonSetListArr),deferred.promise)}function recombineDaemonSetPods(daemonSetPods){var deferred=$q.defer(),daemonSetPodsArr=[];return null==daemonSetPods.items?null:(daemonSetPods.items.map(function(item){
var podName=item.metadata.name,podNamespace=item.metadata.namespace,podStatus=item.status.phase,restartCount=($filter("relativeTime")(item.metadata.creationTimestamp),0);item.status.containerStatuses&&item.status.containerStatuses.forEach(function(c){restartCount+=c.restartCount});var annotationsArr=[];item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var labelsArr=[];item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){var str=key+"="+value;labelsArr.push(str)});var readiness=null;item.status.conditions&&item.status.conditions.forEach(function(i){"Ready"==i.type&&"True"==i.status?readiness="Ready":"Ready"==i.type&&"False"==i.status&&(readiness=i.reason)});var obj={state:(0,_podstatus.getPodStatus)(item),name:podName,namespace:podNamespace,labels:labelsArr,status:podStatus,readiness:readiness,node:item.spec.nodeName,restartCount:restartCount,age:item.metadata.creationTimestamp,actions:"Actions",annotations:annotationsArr};daemonSetPodsArr.push(obj)}),deferred.resolve(daemonSetPodsArr),deferred.promise)}function recombineDaemonSetEvents(daemonSetEvents){var deferred=$q.defer(),daemonSetEventsArr=[];return null==daemonSetEvents.items?null:(deferred.resolve(daemonSetEventsArr),deferred.promise)}function recombinePersistentVolume(persistentVolumeList){var deferred=$q.defer(),persistentVolumeListArr=[];return null==persistentVolumeList.items?null:(persistentVolumeList.items.map(function(item){var labelsArr=[],persistentVolumeName=item.metadata.name,capacityArr=[],claimArr=[],annotationsArr=[];item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str18=value+"="+key;labelsArr.push(_str18)}}),item.metadata.annotations?angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var withStyle=!0;withStyle="-"!==labelsArr,item.spec.claimRef?angular.forEach(item.spec.claimRef,function(value,key){var str=key+"="+value;claimArr.push(str)}):claimArr="-",item.spec.capacity?angular.forEach(item.spec.capacity,function(value,key){capacityArr.push(value)}):capacityArr="-";var nodesTime=item.metadata.creationTimestamp;nodesTime={nodesTime:$interpolate("{{date | date}}")({date:nodesTime})};var obj={name:persistentVolumeName,labels:labelsArr,capacity:capacityArr,accessMode:item.spec.accessModes.toString(),status:item.status.phase,claim:item.spec.claimRef,reason:item.metadata.reason||"-",age:$filter("relativeTime")(item.metadata.creationTimestamp),time:"Create "+nodesTime.nodesTime,withStyle:withStyle,annotations:annotationsArr,storage:item.spec.capacity.storage,reclaimpolicy:item.spec.persistentVolumeReclaimPolicy};persistentVolumeListArr.push(obj)}),deferred.resolve(persistentVolumeListArr),deferred.promise)}function recombineRcList(replicationControllerList){var deferred=$q.defer(),replicationControllerListArr=[];return 0==replicationControllerList.items.length?null:(replicationControllerList.items.map(function(item){var ReplicationController=item.ReplicationController,PodInfo=item.PodInfo,labelsArr=[],podSelectorArr=[],annotationsArr=[],rcState=void 0,rcName=ReplicationController.metadata.name,rcNamespace=ReplicationController.metadata.namespace,createTime=(ReplicationController.status.availableReplicas,ReplicationController.status.readyReplicas,ReplicationController.status.replicas,ReplicationController.status.fullyLabeledReplicas,ReplicationController.status.observedGeneration,ReplicationController.metadata.creationTimestamp),rcAge=$filter("relativeTime")(ReplicationController.metadata.creationTimestamp),image=[];createTime={nodesTime:$interpolate("{{date | date}}")({date:createTime})},ReplicationController.metadata.labels?angular.forEach(ReplicationController.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str19=key+"="+value;labelsArr.push(_str19)}}):labelsArr.push("No labels"),ReplicationController.spec.selector&&angular.forEach(ReplicationController.spec.selector,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str20=key+"="+value;podSelectorArr.push(_str20)}}),ReplicationController.metadata.annotations?angular.forEach(ReplicationController.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var withStyle=!0;if(withStyle="-"!==labelsArr,ReplicationController.spec.template.spec.containers)for(var i in ReplicationController.spec.template.spec.containers){var str=ReplicationController.spec.template.spec.containers[i].image;image.push(str)}else image="-";var rcPodsStr=PodInfo.current+"/"+PodInfo.desired;rcState=PodInfo.warnings.length>0?"Warning":PodInfo.pending>0?"Pending":"Success";var obj={state:rcState,name:rcName,namespace:rcNamespace,labels:labelsArr,pods:rcPodsStr,age:rcAge,image:image,actions:"Actions",createTime:$translate.instant("Create at")+createTime.nodesTime,ReplicationController:ReplicationController,PodInfo:PodInfo,withStyle:withStyle,sortTime:ReplicationController.metadata.creationTimestamp,podSelector:podSelectorArr,annotations:annotationsArr};replicationControllerListArr.push(obj)}),deferred.resolve(replicationControllerListArr),deferred.promise)}function recombineRcDetail(replicationControllerDetail){var deferred=$q.defer(),replicationControllerDetailArr={},labelsArr=[],detailName=replicationControllerDetail.ReplicationController.metadata.name,detailNamespace=replicationControllerDetail.ReplicationController.metadata.namespace,createTime=replicationControllerDetail.ReplicationController.metadata.creationTimestamp,selectorArr=[],imagesArr=[];replicationControllerDetail.ReplicationController.metadata.labels?angular.forEach(replicationControllerDetail.ReplicationController.metadata.labels,function(value,key){var str=void 0;str=0===value.length?""+key:key+"="+value,labelsArr.push(str)}):labelsArr.push("No labels"),replicationControllerDetail.ReplicationController.spec.selector?angular.forEach(replicationControllerDetail.ReplicationController.spec.selector,function(value,key){var str=key+":"+value;selectorArr.push(str)}):selectorArr="-";var podSelectorArr=[];replicationControllerDetail.ReplicationController.spec.selector&&angular.forEach(replicationControllerDetail.ReplicationController.spec.selector,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str21=key+"="+value;podSelectorArr.push(_str21)}});var annotationsArr=[];if(replicationControllerDetail.ReplicationController.metadata.annotations&&angular.forEach(replicationControllerDetail.ReplicationController.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),replicationControllerDetail.ReplicationController.spec.template.spec.containers)for(var i in replicationControllerDetail.ReplicationController.spec.template.spec.containers){var str=replicationControllerDetail.ReplicationController.spec.template.spec.containers[i].image;imagesArr.push(str)}else imagesArr="-";var replicationControllerPodInfo=replicationControllerDetail.PodInfo;return replicationControllerDetailArr={state:"success",name:detailName,namespace:detailNamespace,labels:labelsArr,createTime:createTime,selector:selectorArr,images:imagesArr,pods:replicationControllerPodInfo,podSelector:podSelectorArr,annotations:annotationsArr},deferred.resolve(replicationControllerDetailArr),deferred.promise}function recombineRcHpasList(replicationControllerHpas){var deferred=$q.defer(),replicationControllerHpasArr=[];return null==replicationControllerHpas.items?null:(replicationControllerHpas.items.map(function(item){}),deferred.resolve(replicationControllerHpasArr),deferred.promise)}function recombineRcEventsList(replicationControllerEvents){var deferred=$q.defer(),replicationControllerEventsArr=[];return null==replicationControllerEvents.items?null:0==replicationControllerEvents.items.length?null:(replicationControllerEvents.items.map(function(item){var eventMessage=item.message,eventSource=item.source.component+" "+item.source.host,eventStatus=item.type,eventSubObject=item.involvedObject.fieldPath,eventCount=item.count,eventFirstSeen=$filter("date")(item.firstTimestamp),eventLastSeen=$filter("date")(item.lastTimestamp);eventSubObject=item.involvedObject.fieldPath?item.involvedObject.fieldPath.toString():"-";var obj={state:eventStatus,message:eventMessage,source:eventSource,subObject:eventSubObject,count:eventCount,firstSeen:eventFirstSeen,lastSeen:eventLastSeen};replicationControllerEventsArr.push(obj)}),deferred.resolve(replicationControllerEventsArr),deferred.promise)}function recombineNodepodList(nodePodList){var deferred=$q.defer(),nodePodListArr=[];return nodePodList.items.map(function(item){var obj={state:(0,_podstatus.getPodStatus)(item.Pod),name:item.Pod.metadata.name,namespace:item.Pod.metadata.namespace,status:(0,_podstatus.getDisplayStatus)(item.Pod),restartCount:item.restartCount,age:item.Pod.metadata.creationTimestamp,actions:"Actions"};nodePodListArr.push(obj)}),deferred.resolve(nodePodListArr),deferred.promise}function recombineHpaList(hpaList){var deferred=$q.defer(),hpaListArr=[];return hpaList.items||deferred.reject(null),0===hpaList.items.length?null:(hpaList.items.map(function(item){var obj={name:item.metadata.name,namespace:item.metadata.namespace,target:item.spec.scaleTargetRef.kind+":"+item.spec.scaleTargetRef.name,tarCpuUtilization:item.spec.targetCPUUtilizationPercentage+"%",currentCpuUtilization:void 0==item.status.currentCPUUtilizationPercentage?"0%":item.status.currentCPUUtilizationPercentage+"%",minReplicas:item.spec.minReplicas,maxReplicas:item.spec.maxReplicas,age:$filter("date")(item.metadata.creationTimestamp)};hpaListArr.push(obj)}),deferred.resolve(hpaListArr),deferred.promise)}function recombineStatefulSetPods(podList){var deferred=$q.defer(),podListArr=[];return podList||deferred.reject(null),podList.map(function(item){var pod=void 0,restartCount=0;pod=item.Pod?item.Pod:item,pod.status.containerStatuses&&pod.status.containerStatuses.forEach(function(c){restartCount+=c.restartCount});var obj={state:(0,_podstatus.getPodStatus)(pod),name:pod.metadata.name,namespace:pod.metadata.namespace,status:(0,_podstatus.getDisplayStatus)(pod),restartCount:restartCount,age:pod.metadata.creationTimestamp,actions:"Actions"};podListArr.push(obj)}),deferred.resolve(podListArr),deferred.promise}function recombineShopList(shopList){var deferred=$q.defer(),appStoreArr=[];return angular.forEach(shopList,function(value,key){var temp=value,reop=key,appstoreKey=[];angular.forEach(temp.RawData,function(value,key){value.reop=reop,appStoreArr.push(value)}),appStoreArr=appstoreKey.concat(appStoreArr)}),deferred.resolve(appStoreArr),deferred.promise}function recombineAppCataLogList(appCatalogList){var deferred=$q.defer(),appcatalogArr=[];return angular.forEach(appCatalogList,function(value,key){var temp=value,repo=key;angular.forEach(temp.RawData,function(value,key){angular.forEach(value,function(v,key){v.repo=repo,appcatalogArr.push(v)})})}),deferred.resolve(appcatalogArr),deferred.promise}function recombineDeploymentList(deploymentList){var deferred=$q.defer(),deploymentArr=[];return deploymentList.items.map(function(item){var labelsArr=[],matchLabelArr=[],annotationsArr=[];item.Deployment.metadata.labels?angular.forEach(item.Deployment.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str22=key+"="+value;labelsArr.push(_str22)}}):labelsArr="-",item.Deployment.spec.selector.matchLabels&&angular.forEach(item.Deployment.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;matchLabelArr.push(str)}else{var _str23=key+"="+value;matchLabelArr.push(_str23)}}),item.Deployment.metadata.annotations?angular.forEach(item.Deployment.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotations");var statusString=void 0,hasDetailInfo=void 0;if(item.Deployment.status.unavailableReplicas){statusString=item.PodInfo.desired-item.Deployment.status.unavailableReplicas+" / "+item.PodInfo.desired+" pods",hasDetailInfo=!1}else statusString=item.PodInfo.current+" / "+item.PodInfo.desired+" pods",hasDetailInfo=!0;var obj={name:item.Deployment.metadata.name,namespace:item.Deployment.metadata.namespace,label:labelsArr,status:statusString,hasDetailInfo:hasDetailInfo,matchLabels:matchLabelArr,annotations:annotationsArr,PodInfo:item.PodInfo};deploymentArr.push(obj)}),deferred.resolve(deploymentArr),deferred.promise}function recombineJobList(jobList){var deferred=$q.defer(),jobArr=[];return jobList.items.map(function(item){var labelsArr=[],annotationsArr=[],selector=[];item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str24=key+"="+value;labelsArr.push(_str24)}}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),item.spec.selector.matchLabels&&angular.forEach(item.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;selector.push(str)}else{var _str25=key+"="+value;selector.push(_str25)}});var obj={name:item.metadata.name,namespace:item.metadata.namespace,label:labelsArr,age:item.metadata.creationTimestamp,annotations:annotationsArr,selector:selector,completions:item.status.succeeded||"0",parallelism:item.spec.parallelism,time:item.metadata.creationTimestamp};jobArr.push(obj)}),deferred.resolve(jobArr),deferred.promise}function recombineJobDetail(jobDetail){var deferred=$q.defer(),jobDetailArr={},labelsArr=[];jobDetail.metadata.labels?angular.forEach(jobDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str26=key+"="+value;labelsArr.push(_str26)}}):labelsArr.push("No labels");var annotationsArr=[];jobDetail.metadata.annotations&&angular.forEach(jobDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var podSelectorArr=[];return jobDetail.spec.selector.matchLabels&&angular.forEach(jobDetail.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str27=key+"="+value;podSelectorArr.push(_str27)}}),jobDetailArr={name:jobDetail.metadata.name,namespace:jobDetail.metadata.namespace,labels:labelsArr,annotations:annotationsArr,podSelector:podSelectorArr,completions:jobDetail.spec.completions,parallelism:jobDetail.spec.parallelism,createAt:jobDetail.metadata.creationTimestamp,startTime:jobDetail.status.startTime,completionTime:jobDetail.status.completionTime,succeeded:jobDetail.status.succeeded,failed:jobDetail.status.failed,active:jobDetail.status.active},deferred.resolve(jobDetailArr),deferred.promise}function recombinePodDetail(podDetail){var deferred=$q.defer(),podDetailArr={},labelsArr=[];podDetail.Pod.metadata.labels?angular.forEach(podDetail.Pod.metadata.labels,function(value,key){var str=void 0;str=0===value.length?""+key:key+"="+value,labelsArr.push(str)}):labelsArr.push("No labels");var annotationsArr=[];podDetail.Pod.metadata.annotations&&angular.forEach(podDetail.Pod.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var ownerArr=[];podDetail.Pod.metadata.ownerReferences&&angular.forEach(podDetail.Pod.metadata.ownerReferences,function(item){var owner={kind:"",name:""};owner.kind=item.kind.toLowerCase(),owner.name=item.name,ownerArr.push(owner)});var containersArr=[];return podDetail.Pod.spec.containers&&angular.forEach(podDetail.Pod.spec.containers,function(item){var container={name:"",image:""};container.name=item.name,container.image=item.image,containersArr.push(container)}),podDetailArr={name:podDetail.Pod.metadata.name,namespace:podDetail.Pod.metadata.namespace,status:(0,_podstatus.getDisplayStatus)(podDetail.Pod),labels:labelsArr,podip:podDetail.Pod.status.podIP,annotations:annotationsArr,node:podDetail.Pod.spec.nodeName,restartPolicy:podDetail.Pod.spec.restartPolicy,createAt:podDetail.Pod.metadata.creationTimestamp,ownerArr:ownerArr,containers:containersArr},deferred.resolve(podDetailArr),deferred.promise}function recombineDeploymentDetail(deploymentDetail){var deferred=$q.defer(),detail={},labelsArr=[];deploymentDetail.Deployment.metadata.labels&&angular.forEach(deploymentDetail.Deployment.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str28=key+"="+value;labelsArr.push(_str28)}});var podSelectorArr=[];deploymentDetail.Deployment.spec.selector.matchLabels&&angular.forEach(deploymentDetail.Deployment.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str29=key+"="+value;podSelectorArr.push(_str29)}});var annotationsArr=[];return deploymentDetail.Deployment.metadata.annotations&&angular.forEach(deploymentDetail.Deployment.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),detail={name:deploymentDetail.Deployment.metadata.name,namespace:deploymentDetail.Deployment.metadata.namespace,replicas:deploymentDetail.Deployment.spec.replicas,maxUnavailable:deploymentDetail.Deployment.spec.strategy.rollingUpdate.maxUnavailable,type:deploymentDetail.Deployment.spec.strategy.type,labels:labelsArr,podSelector:podSelectorArr,maxSurge:deploymentDetail.Deployment.spec.strategy.rollingUpdate.maxSurge,annotations:annotationsArr,PodInfo:deploymentDetail.PodInfo,createTime:deploymentDetail.Deployment.metadata.creationTimestamp,availableReplicas:deploymentDetail.Deployment.status.availableReplicas,unavailableReplicas:deploymentDetail.Deployment.status.unavailableReplicas,allreplicas:deploymentDetail.Deployment.status.replicas,updatedReplicas:deploymentDetail.Deployment.status.updatedReplicas},deferred.resolve(detail),deferred.promise}function recombineReplicaSetDetail(replicasetDetail){var deferred=$q.defer(),detail={},labelsArr=[];replicasetDetail.ReplicaSet.metadata.labels&&angular.forEach(replicasetDetail.ReplicaSet.metadata.labels,function(value,key){var str=void 0;str=0===value.length?""+key:key+"="+value,labelsArr.push(str)});var podSelectorArr=[];replicasetDetail.ReplicaSet.spec.selector.matchLabels&&angular.forEach(replicasetDetail.ReplicaSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str30=key+"="+value;podSelectorArr.push(_str30)}});var annotationsArr=[];replicasetDetail.ReplicaSet.metadata.annotations&&angular.forEach(replicasetDetail.ReplicaSet.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var ownerArr=[];return replicasetDetail.ReplicaSet.metadata.ownerReferences&&angular.forEach(replicasetDetail.ReplicaSet.metadata.ownerReferences,function(item){var owner={kind:"",name:""};owner.kind=item.kind.toLowerCase(),owner.name=item.name,ownerArr.push(owner)}),detail={name:replicasetDetail.ReplicaSet.metadata.name,namespace:replicasetDetail.ReplicaSet.metadata.namespace,labels:labelsArr,podSelector:podSelectorArr,annotations:annotationsArr,createTime:replicasetDetail.ReplicaSet.metadata.creationTimestamp,PodInfo:replicasetDetail.PodInfo,data:replicasetDetail,ownerArr:ownerArr},deferred.resolve(detail),deferred.promise}function recombineNodeDetail(nodeDetail){var deferred=$q.defer(),detail={},labelsArr=[],annotationsArr=[];nodeDetail.metadata.labels?angular.forEach(nodeDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str31=key+"="+value;labelsArr.push(_str31)}}):labelsArr="-",nodeDetail.metadata.annotations?angular.forEach(nodeDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotations");var imagesArr=[];return nodeDetail.status.images&&angular.forEach(nodeDetail.status.images,function(item){angular.forEach(item.names,function(imageItem){var imageObj={name:"",size:""};imageObj.name=imageItem,imageObj.size=item.sizeBytes,imagesArr.push(imageObj)})}),detail={name:nodeDetail.metadata.name,operatingSystem:nodeDetail.status.nodeInfo.operatingSystem,externalId:nodeDetail.spec.externalID,architecture:nodeDetail.status.nodeInfo.architecture,nodeAddress:nodeDetail.status.addresses,kernelVersion:nodeDetail.status.nodeInfo.kernelVersion,labels:labelsArr,bootId:nodeDetail.status.nodeInfo.bootID,annotations:annotationsArr,containerRuntimeVersion:nodeDetail.status.nodeInfo.containerRuntimeVersion,kubeletVersion:nodeDetail.status.nodeInfo.kubeletVersion,kubeProxyVersion:nodeDetail.status.nodeInfo.kubeProxyVersion,createTime:nodeDetail.metadata.creationTimestamp,conditions:nodeDetail.status.conditions,podCIDR:nodeDetail.spec.podCIDR,unschedulable:nodeDetail.spec.unschedulable,images:imagesArr},deferred.resolve(detail),deferred.promise}function recombineStatefulSetList(statefulSetList){var deferred=$q.defer(),statefulsetArr=[];return statefulSetList.items.map(function(item){var labelsArr=[],matchLabelArr=[],annotationsArr=[],metadata=item.StatefulSet.metadata;metadata.labels?angular.forEach(metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str32=key+"="+value;labelsArr.push(_str32)}}):labelsArr="-",item.StatefulSet.spec.selector.matchLabels&&angular.forEach(item.StatefulSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;matchLabelArr.push(str)}else{var _str33=key+"="+value;matchLabelArr.push(_str33)}}),metadata.annotations?angular.forEach(metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var statusString=item.PodInfo.current+" / "+item.PodInfo.desired+" pods",obj={name:metadata.name,namespace:metadata.namespace,label:labelsArr,status:statusString,matchLabels:matchLabelArr,PodInfo:item.PodInfo,annotations:annotationsArr,createTime:metadata.creationTimestamp};statefulsetArr.push(obj)}),deferred.resolve(statefulsetArr),deferred.promise}function recombineStatefulSetDetail(statefulSetDetail){var deferred=$q.defer(),detail={},labelsArr=[],metadata=statefulSetDetail.StatefulSet.metadata;metadata.labels?angular.forEach(metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str34=key+"="+value;labelsArr.push(_str34)}}):labelsArr.push("No labels");var podSelectorArr=[];statefulSetDetail.StatefulSet.spec.selector.matchLabels&&angular.forEach(statefulSetDetail.StatefulSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str35=key+"="+value;podSelectorArr.push(_str35)}});var annotationsArr=[];return metadata.annotations&&angular.forEach(metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),detail={name:metadata.name,namespace:metadata.namespace,labels:labelsArr,podSelector:podSelectorArr,annotations:annotationsArr,PodInfo:statefulSetDetail.PodInfo,createTime:metadata.creationTimestamp,allreplicas:statefulSetDetail.StatefulSet.status.replicas},deferred.resolve(detail),deferred.promise}function recombineTraefikProviders(traefikProviders){var deferred=$q.defer(),k8sTraefikArr=[];return angular.forEach(traefikProviders.kubernetes.backends,function(bvalue,bkey){angular.forEach(traefikProviders.kubernetes.frontends,function(fvalue,fkey){bkey==fkey&&Object.assign(bvalue,fvalue)})}),angular.forEach(traefikProviders.kubernetes.backends,function(value,key){var obj={servers:[],routes:[]};obj.name=key,obj.loadBalancer=value.loadBalancer.method,obj.backend=value.backend,obj.entryPoints=void 0===value.entryPoints?"":value.entryPoints[0],obj.passHostHeader=value.passHostHeader,angular.forEach(value.servers,function(svalue,skey){var serverArr=[];serverArr.name=skey,serverArr.url=svalue.url,serverArr.weight=svalue.weight,obj.servers.push(serverArr)}),angular.forEach(value.routes,function(rvalue,rkey){var routesArr=[];routesArr.name=rkey,routesArr.rule=rvalue.rule,obj.routes.push(routesArr)}),k8sTraefikArr.push(obj)}),deferred.resolve(k8sTraefikArr),deferred.promise}function recombineProjectsList(projectsList){console.log(projectsList);var deferred=$q.defer(),projectsListArr=[];return projectsList.map(function(item){var obj={projectId:item.project_id,projectName:item.name,accessLevel:item.public,role:item.current_user_role_id,repoCount:item.repo_count,creationTime:item.creation_time};projectsListArr.push(obj)}),deferred.resolve(projectsListArr),deferred.promise}return{recombineServiceList:recombineServiceList,recombinePodList:recombinePodList,recombineReplicaSetList:recombineReplicaSetList,recombinePvcList:recombinePvcList,recombineNodeList:recombineNodeList,recombineSecretList:recombineSecretList,recombineSecretDetailList:recombineSecretDetailList,recombineNamespaceList:recombineNamespaceList,recombineNamespaceDetailEvents:recombineNamespaceDetailEvents,recombineDaemonSetList:recombineDaemonSetList,recombineDaemonSetPods:recombineDaemonSetPods,recombineDaemonSetEvents:recombineDaemonSetEvents,recombinePersistentVolume:recombinePersistentVolume,recombineNodepodList:recombineNodepodList,recombineRcList:recombineRcList,recombineRcDetail:recombineRcDetail,recombineRcEventsList:recombineRcEventsList,recombineRcHpasList:recombineRcHpasList,recombineHpaList:recombineHpaList,recombineStatefulSetPods:recombineStatefulSetPods,recombineShopList:recombineShopList,recombineDeploymentList:recombineDeploymentList,recombineJobList:recombineJobList,recombineJobDetail:recombineJobDetail,recombinePodDetail:recombinePodDetail,recombineDeploymentDetail:recombineDeploymentDetail,recombineReplicaSetDetail:recombineReplicaSetDetail,recombineNodeDetail:recombineNodeDetail,recombineSecretServiceAccountList:recombineSecretServiceAccountList,recombineAppCataLogList:recombineAppCataLogList,recombinePodprosetList:recombinePodprosetList,recombineStorageclassList:recombineStorageclassList,recombineRqList:recombineRqList,recombineStatefulSetList:recombineStatefulSetList,recombineStatefulSetDetail:recombineStatefulSetDetail,recombineroleList:recombineroleList,recombinerolebindingList:recombinerolebindingList,recombineclusterrolebindingList:recombineclusterrolebindingList,recombineclusterRoleList:recombineclusterRoleList,recombinepodsecuritypolicieList:recombinepodsecuritypolicieList,recombineTraefikProviders:recombineTraefikProviders,recombineProjectsList:recombineProjectsList}}utilsService.$inject=["$q","$filter","$interpolate","$translate"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.utilsService=utilsService;var _podstatus=__webpack_require__(37);__webpack_require__(4)},function(module,exports){"use strict";function getPodStatus(item){var ready=!1,initialized=!1;return"Failed"==item.status.phase?"failed":"Succeeded"==item.status.phase?"success":(item.status.conditions&&item.status.conditions.forEach(function(c){"Ready"==c.type&&(ready="True"==c.status),"Initialized"==c.type&&(initialized="True"==c.status)}),initialized&&ready?"success":"pending")}function getDisplayStatus(item){var msgState="running",reason=void 0;return item.status.containerStatuses&&item.status.containerStatuses.forEach(function(c){var state=c.state;state.waiting&&(msgState="waiting",reason=state.waiting.reason),state.terminated&&(msgState="terminated",(reason=state.terminated.reason)||(reason=state.terminated.signal?"Signal:"+state.terminated.signal:"ExitCode:"+state.terminated.exitCode))}),"waiting"===msgState?"Waiting: "+reason:"terminated"===msgState?"Terminated: "+reason:item.status.phase}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPodStatus=getPodStatus,exports.getDisplayStatus=getDisplayStatus},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _appconfig_module=__webpack_require__(39),_appconfig_module2=_interopRequireDefault(_appconfig_module),_cores=__webpack_require__(25),_cores2=_interopRequireDefault(_cores),_memory=__webpack_require__(26),_memory2=_interopRequireDefault(_memory),_date_filter=__webpack_require__(42),_date_filter2=_interopRequireDefault(_date_filter),_relativetime_filter=__webpack_require__(43),_relativetime_filter2=_interopRequireDefault(_relativetime_filter),_relativestring_filter=__webpack_require__(44),_relativestring_filter2=_interopRequireDefault(_relativestring_filter),_tags_filter=__webpack_require__(45),_tags_filter2=_interopRequireDefault(_tags_filter),_bytes_filter=__webpack_require__(46),_bytes_filter2=_interopRequireDefault(_bytes_filter),_replacekeytempstr_filter=__webpack_require__(47),_replacekeytempstr_filter2=_interopRequireDefault(_replacekeytempstr_filter);exports.default=angular.module("horApp.common.filters",["ngMaterial",_appconfig_module2.default.name]).filter("horMemory",_memory2.default).filter("horCores",_cores2.default).filter("relativeTime",_relativetime_filter2.default).filter("relativeString",_relativestring_filter2.default).filter("horTags",_tags_filter2.default).filter("bytes",_bytes_filter2.default).filter("keyTempStr",_replacekeytempstr_filter2.default).decorator("dateFilter",_date_filter2.default)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _appconfig_serviceprovider=__webpack_require__(40),_appconfig_serviceprovider2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_appconfig_serviceprovider),appConfig_DO_NOT_USE_DIRECTLY={};exports.default=angular.module("horApp.appconfig",["ngMaterial"]).provider("horAppConfigService",_appconfig_serviceprovider2.default).value("appConfig",appConfig_DO_NOT_USE_DIRECTLY)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_appconfig_service=__webpack_require__(41),AppConfigServiceProvider=function(){function AppConfigServiceProvider(){_classCallCheck(this,AppConfigServiceProvider)}return _createClass(AppConfigServiceProvider,[{key:"$get",value:function(appConfig){return new _appconfig_service.AppConfigService(appConfig||{})}}]),AppConfigServiceProvider}();exports.default=AppConfigServiceProvider},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.AppConfigService=function(){function AppConfigService(appConfig){_classCallCheck(this,AppConfigService),this.appConfig_=appConfig,this.initTime_=(new Date).getTime()}
return AppConfigService.$inject=["appConfig"],_createClass(AppConfigService,[{key:"getServerTime",value:function(){if(isNaN(this.appConfig_.serverTime))return null;var elapsed=(new Date).getTime()-this.initTime_;return new Date(this.appConfig_.serverTime+elapsed)}}]),AppConfigService}()},function(module,exports){"use strict";function dateFilter($delegate){var original=$delegate;return function(date,format,timezone){return format||(format="yyyy/MM/dd HH:mm (UTC)"),timezone||(timezone="UTC"),original(date,format,timezone)}}dateFilter.$inject=["$delegate"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=dateFilter},function(module,exports){"use strict";function relativeTimeFilter(horAppConfigService){return function(value){var serverTime=horAppConfigService.getServerTime(),currentTime=getCurrentTime(serverTime),givenTime=new Date(value).getTime(),diffInMilliseconds=currentTime-givenTime,diffInSeconds=Math.floor(diffInMilliseconds/UnitConversions.MILLISECONDS_PER_SECOND),diffInMinutes=Math.floor(diffInSeconds/UnitConversions.SECONDS_PER_MINUTE),diffInHours=Math.floor(diffInMinutes/UnitConversions.MINUTES_PER_HOUR),diffInDays=Math.floor(diffInHours/UnitConversions.HOURS_PER_DAY),diffInMonths=Math.floor(diffInDays/UnitConversions.DAYS_PER_MONTH),diffInYears=Math.floor(diffInDays/UnitConversions.DAYS_PER_YEAR);return diffInMilliseconds<-1e3?TimeConstants.NOT_YET:diffInSeconds<1?formatOutputTimeString_(0,Units.SECOND):diffInMinutes<1?formatOutputTimeString_(diffInSeconds,Units.SECOND):diffInHours<1?formatOutputTimeString_(diffInMinutes,Units.MINUTE):diffInDays<1?formatOutputTimeString_(diffInHours,Units.HOUR):diffInMonths<1?formatOutputTimeString_(diffInDays,Units.DAY):diffInYears<1?formatOutputTimeString_(diffInMonths,Units.MONTH):formatOutputTimeString_(diffInYears,Units.YEAR)}}function getCurrentTime(serverTime){return serverTime?serverTime.getTime():(new Date).getTime()}function formatOutputTimeString_(timeValue,timeUnit){return timeValue>1||0===timeValue?timeValue+" "+timeUnit[1]:timeUnit[0]}relativeTimeFilter.$inject=["horAppConfigService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=relativeTimeFilter;var i18n={MSG_TIME_UNIT_SECOND_LABEL:"a second",MSG_TIME_UNIT_SECONDS_LABEL:"seconds",MSG_TIME_UNIT_MINUTE_LABEL:"a minute",MSG_TIME_UNIT_MINUTES_LABEL:"minutes",MSG_TIME_UNIT_HOUR_LABEL:"an hour",MSG_TIME_UNIT_HOURS_LABEL:"hours",MSG_TIME_UNIT_DAY_LABEL:"a day",MSG_TIME_UNIT_DAYS_LABEL:"days",MSG_TIME_UNIT_MONTH_LABEL:"a month",MSG_TIME_UNIT_MONTHS_LABEL:"months",MSG_TIME_UNIT_YEAR_LABEL:"a year",MSG_TIME_UNIT_YEARS_LABEL:"years",MSG_TIME_NOT_YET_LABEL:"-"},Units={SECOND:[i18n.MSG_TIME_UNIT_SECOND_LABEL,i18n.MSG_TIME_UNIT_SECONDS_LABEL],MINUTE:[i18n.MSG_TIME_UNIT_MINUTE_LABEL,i18n.MSG_TIME_UNIT_MINUTES_LABEL],HOUR:[i18n.MSG_TIME_UNIT_HOUR_LABEL,i18n.MSG_TIME_UNIT_HOURS_LABEL],DAY:[i18n.MSG_TIME_UNIT_DAY_LABEL,i18n.MSG_TIME_UNIT_DAYS_LABEL],MONTH:[i18n.MSG_TIME_UNIT_MONTH_LABEL,i18n.MSG_TIME_UNIT_MONTHS_LABEL],YEAR:[i18n.MSG_TIME_UNIT_YEAR_LABEL,i18n.MSG_TIME_UNIT_YEARS_LABEL]},UnitConversions={MILLISECONDS_PER_SECOND:1e3,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,DAYS_PER_MONTH:30,DAYS_PER_YEAR:365,MONTHS_PER_YEAR:12},TimeConstants={NOT_YET:i18n.MSG_TIME_NOT_YET_LABEL}},function(module,exports){"use strict";function relativeStringFilter(){return function(str){return str.length>20&&(str=str.substring(0,20)+"..."),str}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=relativeStringFilter},function(module,exports){"use strict";function tagsFilter(){return function(items,tags){var filtered=[];(items||[]).forEach(function(item){if(tags.length>0){for(var matches=!1,i=0;i<=tags.length;i++)void 0!=item[0].keywords&&item[0].keywords.indexOf(tags[i])>-1&&(matches=!0);matches&&filtered.push(item)}else filtered.push(item)});for(var n=[],i=0;i<filtered.length;i++)-1==n.indexOf(filtered[i])&&n.push(filtered[i]);return filtered=n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=tagsFilter},function(module,exports){"use strict";function bytesFilter(){return function(bytes,precision){if(isNaN(parseFloat(bytes))||!isFinite(bytes))return"-";void 0===precision&&(precision=1);var units=["bytes","kB","MB","GB","TB","PB"],number=Math.floor(Math.log(bytes)/Math.log(1024));return(bytes/Math.pow(1024,Math.floor(number))).toFixed(precision)+" "+units[number]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=bytesFilter},function(module,exports){"use strict";function keyTempStrFilter(){return function(input){return input.replace(/\$/g,".")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=keyTempStrFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _directive=__webpack_require__(49);exports.default=angular.module("horApp.common.charts",["ngAnimate","ngMaterial"]).directive("horChart",_directive.horChartDirective)},function(module,exports){"use strict";function linkFn($window,$timeout){return function(scope,element,attrs){$timeout(function(){function setOptions(options){chart||(chart=echarts.init(element[0],"",{width:parentWidth,height:parentHeight})),chart.setOption(options)}function formatData(conf,data){return conf.series&&conf.series.forEach(function(s){s.data=data}),conf}var chart=void 0,config=void 0,ndParent=element.parent()[0],parentWidth=ndParent.clientWidth,parentHeight=ndParent.clientHeight;chart=echarts.init(element[0],"",{width:parentWidth,height:parentHeight}),chart.showLoading("default",{color:"#34a2e3",text:""}),config=formatData(scope.config,scope.data),setOptions(config),angular.element($window).bind("resize",function(){chart.resize()}),scope.$watch(function(){return scope.data},function(value){value&&(config=formatData(scope.config,value),setOptions(config),chart.hideLoading())},!0)})}}function horChartDirective($window,$timeout){return{restrict:"EA",template:"<div></div>",scope:{config:"=config",data:"=data"},link:linkFn($window,$timeout)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.horChartDirective=horChartDirective},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _state_module=__webpack_require__(33),_nav_component=(function(obj){obj&&obj.__esModule}(_state_module),__webpack_require__(51)),_navbutton_component=__webpack_require__(52);exports.default=angular.module("horApp.horMain.nav",["ngMaterial","ui.router"]).component("horNav",_nav_component.navComponent).component("horNavButton",_navbutton_component.navButtonComponent)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.navComponent=exports.NavController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),NavController=exports.NavController=function(){function NavController($state,$scope,$rootScope,$cookies){_classCallCheck(this,NavController),this.repositories="repositories",this.show=!0,this.isVisible=!0,this._state=$state,this._scope=$scope,this._rootscope=$rootScope,this.navBars,this.currentUser=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY),this.panes=[{id:"dashboard",header:"总览",permission:"all",icon:"icon-dashboard"},{id:"applications-manager",header:"应用管理",permission:"all",icon:"icon-folder-open",expanded:!1,subpanes:[{id:"services",header:"服务",permission:"all"},{id:"pod",header:"容器",permission:"all"},{id:"ingress",header:"ch"==window.localStorage.lang?"负载均衡":"Ingresses",permission:"all"}]},{id:"delivery-center",header:"交付中心",icon:"icon-laptop",permission:"all",subpanes:[{id:"registry",header:"镜像仓库",permission:"all"},{id:"servicebroker",header:"服务市场",permission:"all"}]},{id:"cicd",header:"CI/CD",icon:"icon-box",permission:"all",subpanes:[{id:"coderepository",header:"代码仓库",permission:"all"},{id:"builds",header:"构建",permission:"all"}]},{id:"configuration",header:"配置管理",icon:"icon-store-mall",permission:"all",subpanes:[{id:"configmap",header:"服务配置",permission:"all"}]}],this.activeNavId}return NavController.$inject=["$state","$scope","$rootScope","$cookies"],_createClass(NavController,[{key:"$onInit",value:function(){this.registerStateChangeListeners(this._rootscope)}},{key:"registerStateChangeListeners",value:function(scope){var _this=this;scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){_this.navActive(toState.name)}),scope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams){_this.navActive(toState.name)}),scope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){_this.navActive(toState.name)})}},{key:"navFunc",value:function(arg){this.navAction=arg}},{key:"toggle",value:function(){this.isVisible=!this.isVisible}},{key:"hasSubpanes",value:function(arr){return angular.isArray(arr)&&arr.length>0}},{key:"panePermission",value:function(p){var role=this.currentUser.userRole.Name;return"all"==p||role==p}},{key:"navActive",value:function(stateName){var sName=stateName.split("detail")[0];angular.forEach(this.panes,function(value){value.subpanes?angular.forEach(value.subpanes,function(v){v.active=!1,v.id==sName&&(v.active=!0)}):value.id==sName&&(value.active=!0)})}}]),NavController}();exports.navComponent={controller:NavController,templateUrl:"hormain/nav/nav.html"}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NavButtonController=exports.NavButtonController=function(){function NavButtonController($state){_classCallCheck(this,NavButtonController),this.state,this.href,this._state=$state}return NavButtonController.$inject=["$state"],_createClass(NavButtonController,[{key:"getHref",value:function(){return this.href?this.href:this._state.href(this.state)}}]),NavButtonController}();exports.navButtonComponent={controller:NavButtonController,bindings:{state:"@",href:"@"},transclude:!0,templateUrl:"hormain/nav/navbutton.html"}},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_hormain_state.stateName,{url:"?"+_hormain_state.namespaceParam,abstract:!0,views:{"":{template:"<div ui-view></div>"}}}),$stateProvider.decorator("parent",requireParentState)}function requireParentState(stateExtend,parentFn){var state=stateExtend.self;if(!state.parent&&state.name!==_hormain_state.stateName)throw new Error('State "'+state.name+'" 引用父状态被设置为 '+_hormain_state.stateName+".");return parentFn(stateExtend)}stateConfig.$inject=["$stateProvider"],requireParentState.$inject=["stateExtend","parentFn"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _hormain_state=__webpack_require__(30)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hormainComponent=exports.HorMainController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),HorMainController=exports.HorMainController=function(){function HorMainController($resource,$cookies,$location,$window,$mdDialog,$scope,$translate,$filter){_classCallCheck(this,HorMainController),this._resource=$resource,this._cookies=$cookies,this._location=$location,this._window=$window,this._mdDialog=$mdDialog,this._scope=$scope,this.isVisible=!0,this.loading=!0,this.editFlag=!0,this.currentLoginUser,this._translate=$translate,this.en="en",this.ch="ch",this.cur_lang=this._translate.use()||this._translate.proposedLanguage()||window.localStorage.lang,this._filter=$filter}return HorMainController.$inject=["$resource","$cookies","$location","$window","$mdDialog","$scope","$translate","$filter"],_createClass(HorMainController,[{key:"$onInit",value:function(){var _this=this,user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);this.currentLoginUser=user.userName,"view"===user.userRole.Name&&(this.editFlag=!1),this.registerStateChangeListeners(this._scope),setTimeout(function(){_this.versionStr=_this._translate.instant("Version"),_this.logoutStr=_this._translate.instant("Logout")},300)}},{key:"registerStateChangeListeners",value:function(scope){var _this2=this;scope.$on("$stateChangeStart",function(){_this2.loading=!0}),scope.$on("$stateChangeError",this.hideSpinner.bind(this)),scope.$on("$stateChangeSuccess",this.hideSpinner.bind(this))}},{key:"hideSpinner",value:function(){this.loading=!1}},{key:"onClickLogout",value:function(){var _this3=this,confirm=this._mdDialog.confirm().title(this._translate.instant("Sign Out Management System")).textContent(this._translate.instant("Are you sure you want to exit the HOR management platform")).ok(this._translate.instant("Logout")).cancel(this._translate.instant("Cancel"));this._mdDialog.show(confirm).then(function(){var apiUrl=_constant.backendApi.HOR_K8S_SERVER+"/user/logout";_this3._resource(apiUrl).get().$promise.then(function(data){if("logout success."==data.message){_this3._cookies.putObject(_constant.HOR_USER_COOKIES_KEY,null);var loginUrl=_this3._location.protocol()+"://"+_this3._location.host()+":"+_this3._location.port()+"/"+_constant.HOR_LOGIN_PAGE;_this3._window.location=loginUrl}})},function(){})}},{key:"onClickVersion",value:function(){this._mdDialog.show(this._mdDialog.alert().clickOutsideToClose(!0).title(this._translate.instant("Version Information")).textContent(_constant.HOR_VERSION).ok(this._translate.instant("close")))}},{key:"switching",value:function(lang){this._translate.use(lang),this._window.localStorage.lang=lang,this._window.location.reload()}},{key:"toggle",value:function(){this.isVisible=!this.isVisible}},{key:"openMenu",value:function(mdMenu){mdMenu.open()}}]),HorMainController}();exports.hormainComponent={controller:HorMainController,controllerAs:"$ctrl",templateUrl:"hormain/hormain.html"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _namespace_service=__webpack_require__(56),_namespacelist_service=__webpack_require__(58),_namespacedetail_service=__webpack_require__(59),_namespace_stateconfig=__webpack_require__(60),_namespace_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_namespace_stateconfig);exports.default=angular.module("horApp.namespace",["ngMaterial","ngResource","ui.router"]).config(_namespace_stateconfig2.default).service("horNamespaceService",_namespace_service.namespaceService).factory("horNamespaceListResource",_namespacelist_service.namespaceListResource).factory("horNamespaceDetailResource",_namespacedetail_service.namespaceDetailResource).factory("horNamespaceDetailEventsResource",_namespacedetail_service.namespaceDetailEventsResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.namespaceService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_namespacedetail_state=__webpack_require__(57);exports.namespaceService=function(){function namespaceService($http,$state,$mdDialog,$mdToast,$cookies,$translate){_classCallCheck(this,namespaceService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._mdToast=$mdToast,this._cookies=$cookies,this._translate=$translate,this.readonly=!1,this.labels}return _createClass(namespaceService,[{key:"getAddUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"getUrl",value:function(obj){var namespacesName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespacesName}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Namespace")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Namespace")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(data){self._state.go(".",{},{reload:!0})})}},{key:"showAddNamespaceDialog",value:function(event,nameSpace){var _this3=this,self=this,url=this.getAddUrl();this._dialog.show({controller:function($mdDialog){this.readonly=!1,this.namespaceLabel=[],this.onLoad=function(instance){instance.expandAll()},this.onTransformCb=function(chip){var _this2=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(angular.forEach(this.namespaceLabel,function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this2.namespaceLabel[index]=chip)}),chip):chipTest2?chip:null},this.answer=function(namespace,labels){var labelObj={},strTemp="",allLabel="";labels&&angular.forEach(labels,function(arr,index){strTemp=arr.replace("=",'":"'),strTemp=strTemp.substring(0,strTemp.length),0==index?allLabel=strTemp:index==labels.length-1?(allLabel='{"'+allLabel+'","'+strTemp+'"}',labelObj=JSON.parse(allLabel)):allLabel=allLabel+'","'+strTemp,0==index&&index==labels.length-1&&(allLabel='{"'+strTemp+'"}',labelObj=JSON.parse(allLabel))});var obj={labels:labelObj,name:namespace};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"namespace/create_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return self._http({url:url,method:"POST",data:answer})}).then(function(data){void 0==data?(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("Failed!")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&self._state.go(_namespacedetail_state.stateName,new _utils.StateParams(nameSpace,data.data.metadata.name))},function(reason){})}}]),namespaceService}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="namespacedetail",exports.stateUrl="/namespace"},function(module,exports,__webpack_require__){"use strict";function namespaceListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces")}namespaceListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.namespaceListResource=namespaceListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function namespaceDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:objectName")}function namespaceDetailEventsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:objectName/events")}namespaceDetailResource.$inject=["$resource"],namespaceDetailEventsResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.namespaceDetailResource=namespaceDetailResource,exports.namespaceDetailEventsResource=namespaceDetailEventsResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_namespacelist_state.stateName,_namespacelist_stateconfig.config).state(_namespacedetail_state.stateName,_namespacedetail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _namespacelist_state=(__webpack_require__(30),__webpack_require__(61)),_namespacedetail_state=__webpack_require__(57),_namespacelist_stateconfig=__webpack_require__(62),_namespacedetail_stateconfig=__webpack_require__(64)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="namespace",exports.stateUrl="/namespace"},function(module,exports,__webpack_require__){"use strict";function resolveNamespaceList(horNamespaceListResource,horUtilsService){return horNamespaceListResource.get().$promise.then(function(namespaceList){return horUtilsService.recombineNamespaceList(namespaceList)})}resolveNamespaceList.$inject=["horNamespaceListResource","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNamespaceList=resolveNamespaceList;var _hormain_state=__webpack_require__(30),_namespacelist_controller=__webpack_require__(63),_namespacelist_state=__webpack_require__(61);exports.config={url:_namespacelist_state.stateUrl,parent:_hormain_state.stateName,resolve:{namespaceList:resolveNamespaceList},views:{"":{controller:_namespacelist_controller.NamespaceListController,controllerAs:"$ctrl",templateUrl:"namespace/list/namespacelist.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NamespaceListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);exports.NamespaceListController=function(){function NamespaceListController(namespaceList,$stateParams,$state,$interpolate,$scope,$filter,NgTableParams,horNamespaceService,horModifyService){_classCallCheck(this,NamespaceListController),this._horModifyService=horModifyService,this._horNamespaceService=horNamespaceService,this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.theadcontent=[{name:"状态"},{name:"名称"},{name:"标签"},{name:"时间"}],this.data=namespaceList,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.data}),this._state=$state,this._interpolate=$interpolate,this.namespace=$stateParams.namespace,this.globalSearchTerm}return NamespaceListController.$inject=["namespaceList","$stateParams","$state","$interpolate","$scope","$filter","NgTableParams","horNamespaceService","horModifyService"],_createClass(NamespaceListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,objName))}},{key:"getCreatedAtTooltip",value:function(creationDate){return creationDate={creationDate:this._interpolate("{{date | date}}")({date:creationDate})},"Created at"+creationDate.creationDate}},{key:"addNamespace",value:function(event){return this._horNamespaceService.showAddNamespaceDialog(event,this.namespace)}},{key:"deleteService",value:function(event,item){return this._horNamespaceService.showDeleteDialog(event,item)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),NamespaceListController}()},function(module,exports,__webpack_require__){"use strict";function resolveNamespaceDetail(horNamespaceDetailResource,$stateParams){var obj={objectName:$stateParams.objectName};return horNamespaceDetailResource.get(obj).$promise}function resolveNamespaceDetailEvents(horNamespaceDetailEventsResource,$stateParams,horUtilsService){var obj={objectName:$stateParams.objectName};return horNamespaceDetailEventsResource.get(obj).$promise.then(function(namespaceDetailEvents){return horUtilsService.recombineNamespaceDetailEvents(namespaceDetailEvents)})}function resolveNamespaceResourceQuota(horResourcequotaListResource,$stateParams){try{var obj={namespace:$stateParams.objectName};return horResourcequotaListResource.get(obj).$promise}catch(err){}}resolveNamespaceDetail.$inject=["horNamespaceDetailResource","$stateParams"],resolveNamespaceDetailEvents.$inject=["horNamespaceDetailEventsResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNamespaceDetail=resolveNamespaceDetail,exports.resolveNamespaceDetailEvents=resolveNamespaceDetailEvents,exports.resolveNamespaceResourceQuota=resolveNamespaceResourceQuota;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_namespacedetail_state=__webpack_require__(57),_namespacedetail_controller=__webpack_require__(65);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_namespacedetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{namespaceDetail:resolveNamespaceDetail,namespaceDetailEvents:resolveNamespaceDetailEvents,resourceQuotaData:resolveNamespaceResourceQuota},views:{"":{controller:_namespacedetail_controller.NamespaceDetailController,controllerAs:"$ctrl",templateUrl:"namespace/detail/namespacedetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NamespaceDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespacelist_state=__webpack_require__(61),_list_state=__webpack_require__(66),_tentant_utils=(__webpack_require__(4),__webpack_require__(67));__webpack_require__(24),exports.NamespaceDetailController=function(){function NamespaceDetailController($resource,namespaceDetail,namespaceDetailEvents,resourceQuotaData,$filter,$state,$scope,horModifyService,horNamespaceService,$translate){_classCallCheck(this,NamespaceDetailController),this._translate=$translate,this._horModifyService=horModifyService,this._horNamespaceService=horNamespaceService,this._resource=$resource,this._state=$state,this.namespaceDetail=namespaceDetail,this.namespaceStatus=namespaceDetail.status.phase,this.resourceQuotaData=resourceQuotaData,this._filter=$filter,this.stateParams=this._state.params,this.tabs=[{title:"Details"},{title:"Events"}],this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.theadcontent=[{name:"状态"},{name:"消息"},{name:"数据源"},{name:"子项目"},{name:"数量"},{name:"首次上线"},{name:"最后上线"}],this.data=namespaceDetailEvents;var labelsStyle=!0,labelsArr=[];if(namespaceDetail.metadata.labels){for(var item in namespaceDetail.metadata.labels){var label=item+"="+namespaceDetail.metadata.labels[item];labelsArr.push(label)}labelsStyle=!0}else labelsStyle=!1;var annotationsArr=[];namespaceDetail.metadata.annotations&&angular.forEach(namespaceDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),this.annotationsArr=annotationsArr,namespaceDetail.metadata.labelsArr=labelsArr,namespaceDetail.metadata.labelsStyle=labelsStyle,this.labelsArr=labelsArr,this.item={namespace:namespaceDetail.metadata.namespace,name:namespaceDetail.metadata.name},this.chartData={limitsCPU:"",limitsCPUUsed:"",limitsMemory:"",limitsMemoryUsed:"",requestsCPU:"",requestsCPUUsed:"",requestsMemory:"",requestsMemoryUsed:"",requestsStorage:"",requestsStorageUsed:""}}return NamespaceDetailController.$inject=["$resource","namespaceDetail","namespaceDetailEvents","resourceQuotaData","$filter","$state","$scope","horModifyService","horNamespaceService","$translate"],_createClass(NamespaceDetailController,[{key:"$onInit",value:function(){var _this=this;try{var self=this;self.resourceQuotaData&&self.resourceQuotaData.items&&angular.forEach(self.resourceQuotaData.items,function(item){if(item.status&&item.status.hard&&item.status.used){var hard=item.status.hard,used=item.status.used;self.chartData=self.resolveChartData(hard,used);var _ChartConfig=function(title,tooltipCb,yAxisCb){return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left"},series:[{name:title,type:"pie",hoverAnimation:!1,radius:["85%","100%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[]}]}};_this.cpuUsageChartConfig=function(){var title=self._translate.instant("Storage (Gi) Used");return new _ChartConfig(title)}(),
_this.limitsMemoryChartConfig=function(){var title=self._translate.instant("Limits Memory (Gi) Used");return new _ChartConfig(title)}(),_this.limitsCPUChartConfig=function(){var title=self._translate.instant("Limits CPU (Cores) Used");return new _ChartConfig(title)}(),_this.requestsMemoryChartConfig=function(){var title=self._translate.instant("Requests Memory (Gi) Used");return new _ChartConfig(title)}(),_this.requestsCPUChartConfig=function(){var title=self._translate.instant("Requests CPU (Cores) Used");return new _ChartConfig(title)}();var requestsStorageUsed=self.chartData.requestsStorageUsed,requestsStorageFree=self.chartData.requestsStorage-self.chartData.requestsStorageUsed;self.cpuUsageChartData=[{value:requestsStorageUsed,name:self._translate.instant("Used")},{value:requestsStorageFree,name:self._translate.instant("Free")}],self.pieData=Math.round(self.chartData.requestsStorageUsed/self.chartData.requestsStorage*1e4)/100+"%";var limitsMemoryUsed=self.chartData.limitsMemoryUsed,limitsMemoryFree=self.chartData.limitsMemory-self.chartData.limitsMemoryUsed;self.limitsMemoryChartData=[{value:limitsMemoryUsed,name:self._translate.instant("Used")},{value:limitsMemoryFree,name:self._translate.instant("Free")}],self.pieDatalimit=Math.round(self.chartData.limitsMemoryUsed/self.chartData.limitsMemory*1e4)/100+"%";var limitsCPUUsed=self.chartData.limitsCPUUsed,limitsCPUFree=self.chartData.limitsCPU-self.chartData.limitsCPUUsed;self.limitsCPUChartData=[{value:limitsCPUUsed,name:self._translate.instant("Used")},{value:limitsCPUFree,name:self._translate.instant("Free")}],self.pieDatalimitCPU=Math.round(self.chartData.limitsCPUUsed/self.chartData.limitsCPU*1e4)/100+"%";var requestsMemoryUsed=self.chartData.requestsMemoryUsed,requestsMemoryFree=self.chartData.requestsMemory-self.chartData.requestsMemoryUsed;self.requestsMemoryChartData=[{value:requestsMemoryUsed,name:self._translate.instant("Used")},{value:requestsMemoryFree,name:self._translate.instant("Free")}],self.pieDataMemory=Math.round(self.chartData.requestsMemoryUsed/self.chartData.requestsMemory*1e4)/100+"%";var requestsCPUUsed=self.chartData.requestsCPUUsed,requestsCPUFree=self.chartData.requestsCPU-self.chartData.requestsCPUUsed;self.requestsCPUChartData=[{value:requestsCPUUsed,name:self._translate.instant("Used")},{value:requestsCPUFree,name:self._translate.instant("Free")}],self.pieDataCpu=Math.round(self.chartData.requestsCPUUsed/self.chartData.requestsCPU*1e4)/100+"%"}})}catch(err){}}},{key:"initPieConfig",value:function(){try{return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:300,y:100,data:[{name:this._translate.instant("Used"),textStyle:{},icon:"pie"},{name:this._translate.instant("Total"),textStyle:{},icon:"pie"}]},series:[{name:this._translate.instant("Vulnerability"),type:"pie",radius:["50%","70%"],center:["25%","50%"],avoidLabelOverlap:!1}]}}catch(err){}}},{key:"resolveChartData",value:function(hard,used){try{var self=this,chartData={limitsCPU:"",limitsCPUUsed:"",limitsMemory:"",limitsMemoryUsed:"",requestsCPU:"",requestsCPUUsed:"",requestsMemory:"",requestsMemoryUsed:"",requestsStorage:"",requestsStorageUsed:""};if(hard["limits.cpu"]){var str=hard["limits.cpu"],formatStr=self.formatCPUValue(str);chartData.limitsCPU=formatStr}if(used["limits.cpu"]){var _str=used["limits.cpu"],_formatStr=self.formatCPUValue(_str);chartData.limitsCPUUsed=_formatStr}if(hard["limits.memory"]){var _str2=hard["limits.memory"],_formatStr2=self.formatMemoryValue(_str2);chartData.limitsMemory=_formatStr2}if(used["limits.memory"]){var _str3=used["limits.memory"],_formatStr3=self.formatMemoryValue(_str3);chartData.limitsMemoryUsed=_formatStr3}if(hard["requests.cpu"]){var _str4=hard["requests.cpu"],_formatStr4=self.formatCPUValue(_str4);chartData.requestsCPU=_formatStr4}if(used["requests.cpu"]){var _str5=used["requests.cpu"],_formatStr5=self.formatCPUValue(_str5);chartData.requestsCPUUsed=_formatStr5}if(hard["requests.memory"]){var _str6=hard["requests.memory"],_formatStr6=self.formatMemoryValue(_str6);chartData.requestsMemory=_formatStr6}if(used["requests.memory"]){var _str7=used["requests.memory"],_formatStr7=self.formatMemoryValue(_str7);chartData.requestsMemoryUsed=_formatStr7}if(hard["requests.storage"]){var _str8=hard["requests.storage"],_formatStr8=self.formatMemoryValue(_str8);chartData.requestsStorage=_formatStr8}if(used["requests.storage"]){var _str9=used["requests.storage"],_formatStr9=self.formatMemoryValue(_str9);chartData.requestsStorageUsed=_formatStr9}return chartData}catch(err){}}},{key:"formatCPUValue",value:function(valueStr){try{var self=this,result="";if((0,_tentant_utils.endWith)(valueStr,"k")){var tmp="";tmp=(0,_tentant_utils.trimLastString)(valueStr,"k".length),result=self._filter("number")(parseFloat(tmp/1e3/1e3),2)}else if((0,_tentant_utils.endWith)(valueStr,"m")){var _tmp="";_tmp=(0,_tentant_utils.trimLastString)(valueStr,"m".length),result=self._filter("number")(parseFloat(_tmp/1e3),2)}else result=valueStr;return result}catch(err){}}},{key:"formatMemoryValue",value:function(valueStr){try{var self=this,result="";if((0,_tentant_utils.endWith)(valueStr,"Gi"))result=(0,_tentant_utils.trimLastString)(valueStr,"Gi".length);else if((0,_tentant_utils.endWith)(valueStr,"Mi")){var tmp="";tmp=(0,_tentant_utils.trimLastString)(valueStr,"Mi".length),result=self._filter("number")(parseFloat(tmp/1024),2)}else if((0,_tentant_utils.endWith)(valueStr,"Ki")){var _tmp2="";_tmp2=(0,_tentant_utils.trimLastString)(valueStr,"Ki".length),result=self._filter("number")(parseFloat(_tmp2/1024/1024),2)}else if((0,_tentant_utils.endWith)(valueStr,"Ti")){var _tmp3="";_tmp3=(0,_tentant_utils.trimLastString)(valueStr,"Ti".length),result=self._filter("number")(parseFloat(1024*_tmp3),2)}else if((0,_tentant_utils.endWith)(valueStr,"Pi".length)){var _tmp4="";_tmp4=(0,_tentant_utils.trimLastString)(valueStr,"Pi".length),result=self._filter("number")(parseFloat(1024*_tmp4*1024),2)}else result=valueStr;return result}catch(err){}}},{key:"hideLimitsCPUGauge",value:function(){return""===this.chartData.limitsCPU||""===this.chartData.limitsCPUUsed}},{key:"hideLimitsMemoryGauge",value:function(){return""===this.chartData.limitsMemoryUsed||""===this.chartData.limitsMemory}},{key:"hideRequestsCPUGauge",value:function(){return""===this.chartData.requestsCPUUsed||""===this.chartData.requestsCPU}},{key:"hideRequestsMemoryGauge",value:function(){return""===this.chartData.requestsMemoryUsed||""===this.chartData.requestsMemory}},{key:"hideRequestsStorageGauge",value:function(){return""===this.chartData.requestsStorageUsed||""===this.chartData.requestsStorage}},{key:"getListHref",value:function(namespace){return this._state.href(_namespacelist_state.stateName,namespace)}},{key:"getNetworkPolicyHref",value:function(){var ns=this.stateParams.namespace;return this._state.href(_list_state.stateName,ns)}},{key:"deleteService",value:function(event){var item=this.item;return this._horNamespaceService.showDeleteDialog(event,item)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),NamespaceDetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="networkpolicy",exports.stateUrl="/networkpolicy"},function(module,exports){"use strict";function endWith(original,endStr){try{var d=original.length-endStr.length;return d>=0&&original.lastIndexOf(endStr)===d}catch(err){console.log(err)}}function trimLastString(original,size){try{var shift=size;return original=original.substring(0,original.length-shift)}catch(err){console.log(err)}}function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}function loadLiquidFillGauge(elementId,value,config){try{var animateWave=function animateWave(){wave.attr("transform","translate("+waveAnimateScale(wave.attr("T"))+",0)"),wave.transition().duration(config.waveAnimateTime*(1-wave.attr("T"))).ease("linear").attr("transform","translate("+waveAnimateScale(1)+",0)").attr("T",1).each("end",function(){wave.attr("T",0),animateWave(config.waveAnimateTime)})},GaugeUpdater=function(){this.update=function(value){var newFinalValue=parseFloat(value).toFixed(2),textRounderUpdater=function(value){return Math.round(value)};parseFloat(newFinalValue)!=parseFloat(textRounderUpdater(newFinalValue))&&(textRounderUpdater=function(value){return parseFloat(value).toFixed(1)}),parseFloat(newFinalValue)!=parseFloat(textRounderUpdater(newFinalValue))&&(textRounderUpdater=function(value){return parseFloat(value).toFixed(2)});var textTween=function(){var i=d3.interpolate(this.textContent,parseFloat(value).toFixed(2));return function(t){this.textContent=textRounderUpdater(i(t))+percentText}};text1.transition().duration(config.waveRiseTime).tween("text",textTween),text2.transition().duration(config.waveRiseTime).tween("text",textTween);var newClipArea,fillPercent=Math.max(config.minValue,Math.min(config.maxValue,value))/config.maxValue,waveHeight=fillCircleRadius*waveHeightScale(100*fillPercent),waveRiseScale=d3.scale.linear().range([fillCircleMargin+2*fillCircleRadius+waveHeight,fillCircleMargin-waveHeight]).domain([0,1]),newHeight=waveRiseScale(fillPercent),waveScaleX=d3.scale.linear().range([0,waveClipWidth]).domain([0,1]),waveScaleY=d3.scale.linear().range([0,waveHeight]).domain([0,1]);newClipArea=config.waveHeightScaling?d3.svg.area().x(function(d){return waveScaleX(d.x)}).y0(function(d){return waveScaleY(Math.sin(2*Math.PI*config.waveOffset*-1+2*Math.PI*(1-config.waveCount)+2*d.y*Math.PI))}).y1(function(d){return 2*fillCircleRadius+waveHeight}):clipArea;var newWavePosition=config.waveAnimate?waveAnimateScale(1):0;wave.transition().duration(0).transition().duration(config.waveAnimate?config.waveAnimateTime*(1-wave.attr("T")):config.waveRiseTime).ease("linear").attr("d",newClipArea).attr("transform","translate("+newWavePosition+",0)").attr("T","1").each("end",function(){config.waveAnimate&&(wave.attr("transform","translate("+waveAnimateScale(0)+",0)"),animateWave(config.waveAnimateTime))}),waveGroup.transition().duration(config.waveRiseTime).attr("transform","translate("+waveGroupXPosition+","+newHeight+")")}};null==config&&(config=liquidFillGaugeDefaultSettings());var fillPercent,gauge=d3.select("#"+elementId),radius=Math.min(parseInt(gauge.style("width")),parseInt(gauge.style("height")))/2,locationX=parseInt(gauge.style("width"))/2-radius,locationY=parseInt(gauge.style("height"))/2-radius;fillPercent=value<10?Math.max(config.minValue,Math.min(config.maxValue,10))/config.maxValue:Math.max(config.minValue,Math.min(config.maxValue,value))/config.maxValue;var waveHeightScale;waveHeightScale=config.waveHeightScaling?d3.scale.linear().range([0,config.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([config.waveHeight,config.waveHeight]).domain([0,100]);var textPixels=config.textSize*radius/2,textFinalValue=parseFloat(value).toFixed(2),textStartValue=config.valueCountUp?config.minValue:textFinalValue,percentText=config.displayPercent?"%":"",circleThickness=config.circleThickness*radius,circleFillGap=config.circleFillGap*radius,fillCircleMargin=circleThickness+circleFillGap,fillCircleRadius=radius-fillCircleMargin,waveHeight=fillCircleRadius*waveHeightScale(100*fillPercent),waveLength=2*fillCircleRadius/config.waveCount,waveClipCount=1+config.waveCount,waveClipWidth=waveLength*waveClipCount,textRounder=function(value){return Math.round(value)};parseFloat(textFinalValue)!=parseFloat(textRounder(textFinalValue))&&(textRounder=function(value){return parseFloat(value).toFixed(1)}),parseFloat(textFinalValue)!=parseFloat(textRounder(textFinalValue))&&(textRounder=function(value){return parseFloat(value).toFixed(2)});for(var data=[],i=0;i<=40*waveClipCount;i++)data.push({x:i/(40*waveClipCount),y:i/40});var gaugeCircleX=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),gaugeCircleY=d3.scale.linear().range([0,radius]).domain([0,radius]),waveScaleX=d3.scale.linear().range([0,waveClipWidth]).domain([0,1]),waveScaleY=d3.scale.linear().range([0,waveHeight]).domain([0,1]),waveRiseScale=d3.scale.linear().range([fillCircleMargin+2*fillCircleRadius+waveHeight,fillCircleMargin-waveHeight]).domain([0,1]),waveAnimateScale=d3.scale.linear().range([0,waveClipWidth-2*fillCircleRadius]).domain([0,1]),textRiseScaleY=d3.scale.linear().range([fillCircleMargin+2*fillCircleRadius,fillCircleMargin+.7*textPixels]).domain([0,1]),gaugeGroup=gauge.append("g").attr("transform","translate("+locationX+","+locationY+")"),gaugeCircleArc=d3.svg.arc().startAngle(gaugeCircleX(0)).endAngle(gaugeCircleX(1)).outerRadius(gaugeCircleY(radius)).innerRadius(gaugeCircleY(radius-circleThickness));gaugeGroup.append("path").attr("d",gaugeCircleArc).style("fill",config.circleColor).attr("transform","translate("+radius+","+radius+")");var text1=gaugeGroup.append("text").text(textRounder(textStartValue)+percentText).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",textPixels+"px").style("fill",config.textColor).attr("transform","translate("+radius+","+textRiseScaleY(config.textVertPosition)+")"),clipArea=d3.svg.area().x(function(d){return waveScaleX(d.x)}).y0(function(d){return waveScaleY(Math.sin(2*Math.PI*config.waveOffset*-1+2*Math.PI*(1-config.waveCount)+2*d.y*Math.PI))}).y1(function(d){return 2*fillCircleRadius+waveHeight}),waveGroup=gaugeGroup.append("defs").append("clipPath").attr("id","clipWave"+elementId),wave=waveGroup.append("path").datum(data).attr("d",clipArea).attr("T",0),fillCircleGroup=gaugeGroup.append("g").attr("clip-path","url(#clipWave"+elementId+")");fillCircleGroup.append("circle").attr("cx",radius).attr("cy",radius).attr("r",fillCircleRadius).style("fill",config.waveColor);var text2=fillCircleGroup.append("text").text(textRounder(textStartValue)+percentText).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",textPixels+"px").style("fill",config.waveTextColor).attr("transform","translate("+radius+","+textRiseScaleY(config.textVertPosition)+")");if(config.valueCountUp){var textTween=function(){var i=d3.interpolate(this.textContent,textFinalValue);return function(t){this.textContent=textRounder(i(t))+percentText}};text1.transition().duration(config.waveRiseTime).tween("text",textTween),text2.transition().duration(config.waveRiseTime).tween("text",textTween)}var waveGroupXPosition=fillCircleMargin+2*fillCircleRadius-waveClipWidth;return config.waveRise?waveGroup.attr("transform","translate("+waveGroupXPosition+","+waveRiseScale(0)+")").transition().duration(config.waveRiseTime).attr("transform","translate("+waveGroupXPosition+","+waveRiseScale(fillPercent)+")").each("start",function(){wave.attr("transform","translate(1,0)")}):waveGroup.attr("transform","translate("+waveGroupXPosition+","+waveRiseScale(fillPercent)+")"),config.waveAnimate&&animateWave(),new GaugeUpdater}catch(err){console.log(err)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.endWith=endWith,exports.trimLastString=trimLastString,exports.liquidFillGaugeDefaultSettings=liquidFillGaugeDefaultSettings,exports.loadLiquidFillGauge=loadLiquidFillGauge},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(69),_detail_service=__webpack_require__(70),_node_stateconfig=__webpack_require__(71),_node_stateconfig2=_interopRequireDefault(_node_stateconfig),_pod_module=__webpack_require__(83),_pod_module2=_interopRequireDefault(_pod_module),_filereader_directive=(__webpack_require__(11),__webpack_require__(108)),_filereader_directive2=_interopRequireDefault(_filereader_directive),_upload_directive=__webpack_require__(109),_upload_directive2=_interopRequireDefault(_upload_directive),_errorhandling_module=__webpack_require__(111),_errorhandling_module2=_interopRequireDefault(_errorhandling_module),_add_service=__webpack_require__(113),_component=__webpack_require__(114);exports.default=angular.module("horApp.node",["ngMaterial","ngResource","ui.router","ngWebSocket","ab-base64",_pod_module2.default.name,_errorhandling_module2.default.name]).config(_node_stateconfig2.default).component("horAllocatedResourcesChart",_component.allocatedResourcesChartComponent).factory("horNodeListResource",_list_service.nodeListResource).factory("horNodeDetailResource",_detail_service.nodeDetailResource).factory("horNodeDetailYaml",_detail_service.nodeDetailYaml).factory("horNodeYmlArr",_detail_service.nodeYmlArr).factory("horNodeAllocatedResource",_detail_service.nodeAllocatedResource).factory("horNodePodResource",_detail_service.nodePodResource).factory("horNodeEventResource",_detail_service.nodeEventResource).factory("horNodeDetailResourceUsage",_detail_service.nodeResourcesUsage).directive("horFileReader",_filereader_directive2.default).directive("horUpload",_upload_directive2.default).service("horAddNodeService",_add_service.AddNodeService).factory("horAddNodesInfoService",_add_service.getAddNodesInfoService).factory("horNodeUnschedulableResource",_detail_service.nodeUnschedulableResource)},function(module,exports,__webpack_require__){"use strict";function nodeListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes")}nodeListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeListResource=nodeListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function nodeDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/:objectName")}function nodeDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/node/name/:objectName")}function nodeYmlArr($http){function changeYaml(name,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/node/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function nodeAllocatedResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/:objectName/allocatedresources")}function nodePodResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/:objectName/pods")}function nodeEventResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/:objectName/events")}function nodeResourcesUsage($websocket,$stateParams){function genStartWSConnect(url,callback){var socketObj=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},serverResponseData=void 0;return socketObj.socket=$websocket(url),socketObj.socket.onOpen(function(evt){socketObj.isConnected=!0,console.info("connection open")}),socketObj.socket.onMessage(function(evt){serverResponseData=JSON.parse(evt.data),callback(serverResponseData)}),socketObj.socket.onError(function(evt){socketObj.isConnected=!1,console.info("connection error")}),socketObj.socket.onClose(function(evt){socketObj.isConnected=!1,console.info("connection closed")}),socketObj}function startNodeResourceWSConnect(objName,callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/nodes/"+objName,socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}var serviceInstance={};return serviceInstance.startNodeResourceWSConnect=startNodeResourceWSConnect,serviceInstance}function nodeUnschedulableResource($http){function schedulable(name,schedulable,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/"+name+"/unschedulable/"+schedulable;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.schedulable=schedulable,serviceInstance}nodeDetailResource.$inject=["$resource"],nodeDetailYaml.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeDetailResource=nodeDetailResource,exports.nodeDetailYaml=nodeDetailYaml,exports.nodeYmlArr=nodeYmlArr,exports.nodeAllocatedResource=nodeAllocatedResource,exports.nodePodResource=nodePodResource,exports.nodeEventResource=nodeEventResource,exports.nodeResourcesUsage=nodeResourcesUsage,exports.nodeUnschedulableResource=nodeUnschedulableResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state(_add_state.stateName,_add_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(72)),_detail_state=__webpack_require__(73),_list_stateconfig=__webpack_require__(74),_detail_stateconfig=__webpack_require__(76),_add_state=__webpack_require__(80),_add_stateconfig=__webpack_require__(81)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="node",exports.stateUrl="/node"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="nodedetail",exports.stateUrl="/node"},function(module,exports,__webpack_require__){"use strict";function resolveNodeList(horNodeListResource,$stateParams,horUtilsService){return horNodeListResource.get().$promise.then(function(nodeList){return horUtilsService.recombineNodeList(nodeList)})}resolveNodeList.$inject=["horNodeListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNodeList=resolveNodeList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(75),_list_state=__webpack_require__(72);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{nodesList:resolveNodeList},views:{"":{controller:_list_controller.nodeController,controllerAs:"$ctrl",templateUrl:"node/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(73),_graph_tick_formatters=(__webpack_require__(11),__webpack_require__(24));exports.nodeController=function(){function nodeController(nodesList,$stateParams,$state,$interpolate,horModifyService,$scope,NgTableParams,horNodeUnschedulableResource,$mdToast,$translate){_classCallCheck(this,nodeController),this._horModifyService=horModifyService,this.nodesValue=nodesList,this.tableParams=null,this.nodesValue&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.nodesValue})),this._horNodeUnschedulableResource=horNodeUnschedulableResource,this._mdToast=$mdToast,this._translate=$translate,this.namespace=$stateParams.namespace,this._interpolate=$interpolate,this._state=$state,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Cluster",subNav:{title:"Nodes",state:"node"}})}return nodeController.$inject=["nodesList","$stateParams","$state","$interpolate","horModifyService","$scope","NgTableParams","horNodeUnschedulableResource","$mdToast","$translate"],_createClass(nodeController,[{key:"$onInit",value:function(){}},{key:"changeUnschedulable",value:function(row){var _this=this,unschedulable=row.unschedulable,name=row.name;this.unschedulable=unschedulable,void 0==this.unschedulable?this.unschedulable=!0:1==this.unschedulable&&(this.unschedulable=!1);var schedulable=this.unschedulable;return this._horNodeUnschedulableResource.schedulable(name,schedulable).then(function(data){_this._state.go(".",{},{reload:!0}),1==schedulable?_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("schedulable changes success")).position("w320 success").hideDelay(3e3)):_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("unschedulable changes success")).position("w320 success").hideDelay(3e3))})}},{key:"showNotingState",value:function(){return!1}},{key:"updateNode",value:function(event,item){var self=this;return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(self.namespace,item.name,"yaml"))}},{key:"getDetailHref",value:function(objName){var self=this;return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(self.namespace,objName,"list"))}},{key:"generateCpuUsageData",value:function(dataArray){var newValues=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=dataArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var value=_step.value,formatData={},timeValue=value.x,rateValue=(0,_graph_tick_formatters.formatCpuUsage)(value.y);formatData.x=timeValue,formatData.y=rateValue,newValues.push(formatData)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return newValues}},{key:"generateMemoryUsageData",value:function(dataArray){var newValues=[],_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=dataArray[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var value=_step2.value,formatData={},timeValue=value.x,rateValue=(0,_graph_tick_formatters.formatMemoryUsage)(value.y),newRate=0;newRate=rateValue,formatData.x=timeValue,formatData.y=newRate,newValues.push(formatData)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return newValues}},{key:"responseDataCallBack",value:function(responseData){var data=responseData.cumulativeMetrics;if(this.wsResponseData=data,2===data.length){var cpuData=data[0],cpuUsageValues=this.generateCpuUsageData(cpuData.dataPoints),formatObj={key:"CPU Usage",values:cpuUsageValues,color:"#2222ff"},formatDataArray=[];formatDataArray.push(formatObj),this.cpuUsageData=formatDataArray,this.cupUsageOptions={chart:{type:"stackedAreaChart",height:200,margin:{top:20,right:20,bottom:30,left:40},x:function(d){return d.x},y:function(d){return d.y},useVoronoi:!1,clipEdge:!0,duration:100,useInteractiveGuideline:!0,showLegend:!1,xAxis:{showMaxMin:!0,tickFormat:function(d){return d3.time.format("%H:%M")(new Date(1e3*d))}},yAxis:{tickFormat:function(d){return d3.format(",.2f")(d)}},zoom:{enabled:!0,scaleExtent:[1,10],useFixedDomain:!1,useNiceScale:!1,horizontalOff:!1,verticalOff:!0,unzoomEventType:"dblclick.zoom"}}};var memoryData=data[1],memoryUsageValues=this.generateMemoryUsageData(memoryData.dataPoints),formatMemoryObj={key:"Memory Usage",values:memoryUsageValues,color:"#05BB81"},formatMemoryDataArray=[];formatMemoryDataArray.push(formatMemoryObj),this.memoryUsageData=formatMemoryDataArray,this.memoryUsageOptions={chart:{type:"stackedAreaChart",height:200,margin:{top:20,right:20,bottom:30,left:40},x:function(d){return d.x},y:function(d){return d.y},useVoronoi:!1,clipEdge:!0,duration:100,showLegend:!1,useInteractiveGuideline:!0,xAxis:{showMaxMin:!0,tickFormat:function(d){return d3.time.format("%H:%M")(new Date(1e3*d))}},yAxis:{tickFormat:function(d){return d3.format(",.2f")(d)}},zoom:{enabled:!0,scaleExtent:[1,10],useFixedDomain:!1,useNiceScale:!1,horizontalOff:!1,verticalOff:!0,unzoomEventType:"dblclick.zoom"}}}}}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),nodeController}()},function(module,exports,__webpack_require__){"use strict";function resolveNodeDetailYaml(horNodeDetailYaml,$stateParams){var objParams={objectName:$stateParams.objectName};return horNodeDetailYaml.get(objParams).$promise}function resolveNodeDetail(horNodeDetailResource,$stateParams,horUtilsService){var obj={objectName:$stateParams.objectName};return horNodeDetailResource.get(obj).$promise.then(function(nodeDetail){return horUtilsService.recombineNodeDetail(nodeDetail)})}function resolveNodeAllocated(horNodeAllocatedResource,$stateParams){var obj={objectName:$stateParams.objectName};return horNodeAllocatedResource.get(obj).$promise}function resolveNodePod(horNodePodResource,$stateParams,horUtilsService){var obj={objectName:$stateParams.objectName};return horNodePodResource.get(obj).$promise.then(function(nodePodList){return horUtilsService.recombinePodList(nodePodList)})}function resolveNodeEvent(horNodeEventResource,$stateParams){var obj={objectName:$stateParams.objectName};return horNodeEventResource.get(obj).$promise}resolveNodeDetail.$inject=["horNodeDetailResource","$stateParams","horUtilsService"],resolveNodeAllocated.$inject=["horNodeAllocatedResource","$stateParams"],resolveNodePod.$inject=["horNodePodResource","$stateParams","horUtilsService"],resolveNodeEvent.$inject=["horNodeEventResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNodeDetailYaml=resolveNodeDetailYaml,exports.resolveNodeDetail=resolveNodeDetail,exports.resolveNodeAllocated=resolveNodeAllocated,exports.resolveNodePod=resolveNodePod,exports.resolveNodeEvent=resolveNodeEvent;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(73),_detail_controller=__webpack_require__(77);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{nodeDetail:resolveNodeDetail,nodePod:resolveNodePod,nodeDetailYaml:resolveNodeDetailYaml,resolveNodeAllocated:resolveNodeAllocated},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"node/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){
if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_detail_state=__webpack_require__(73),_detail_state2=__webpack_require__(78),_detail_state3=__webpack_require__(79),_list_state=__webpack_require__(72),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($http,$q,$state,$mdDialog,$scope,$stateParams,$resource,nodeDetail,nodePod,horManagePod,horNodeDetailResourceUsage,NgTableParams,nodeDetailYaml,horModifyService,horNodeDetailYaml,horNodeYmlArr,$mdToast,resolveNodeAllocated,horNodeUnschedulableResource,$translate){_classCallCheck(this,DetailController),this._translate=$translate;var _formatTime=function(value){var unixTimestamp=new Date(1e3*value),hours=unixTimestamp.getHours(),minutes=unixTimestamp.getMinutes();return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,hours+":"+minutes},_ChartConfig=function(title,yAxisVar,tooltipCb){return{tooltip:{trigger:"axis",formatter:tooltipCb},title:{left:15,top:10,textStyle:{fontFamily:"Source Sans Pro",fontSize:14,fontWeight:700}},legend:{show:!1},grid:{left:"0",right:"0",bottom:"0",top:"0",containLabel:!1},xAxis:{show:!0,type:"time",boundaryGap:[0,"100%"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!1,textStyle:{color:"#333"},formatter:function(value,index){return _formatTime(value)}},splitLine:{show:!1}},yAxis:yAxisVar,series:[{name:title,type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(1, 128, 223)"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgb(211, 236, 249)"},{offset:0,color:"rgb(114, 186, 233)"}])}},data:[]}]}};this.nodeCpuUsageChartConfig=function(){var tooltipCb=function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=(Number(p.data[1])/100).toFixed(2),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"%"},yAxisVar=_defineProperty({show:!0,type:"value",boundaryGap:[0,"100%"],splitNumber:5,axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1},axisTick:{show:!0},max:1e4,min:0},"splitNumber",5);return new _ChartConfig("CPU",yAxisVar,tooltipCb)}(),this.nodeMemoryUsageChartConfig=function(){return new _ChartConfig("MEMORY",{show:!0,type:"value",boundaryGap:[0,"100%"],splitNumber:5,axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!1},axisTick:{show:!0}},function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=parseInt(Number(p.data[1])/1073741824),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"GiB"})}(),this.nodeCpuUsageChartData,this.nodeMemoryUsageChartData,this._horNodeUnschedulableResource=horNodeUnschedulableResource,this._mdToast=$mdToast,this._resource=$resource,this._q=$q,this._horModifyService=horModifyService,this._horNodeDetailYaml=horNodeDetailYaml,this._horNodeYmlArr=horNodeYmlArr,this._stateParams=$stateParams,this.namespace=$stateParams.objectNamespace,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this.data=nodeDetail,this.nodeDetail=nodeDetail,this.unschedulable=this.nodeDetail.unschedulable,this.nodePod=nodePod,this.conditions=nodeDetail.conditions,this.tableParams=new NgTableParams({count:this.conditions.length},{counts:[],dataset:this.conditions}),this.images=nodeDetail.images,this.imageTableParams=new NgTableParams({count:this.images.length},{counts:[],dataset:this.images}),this.podTableParams=null,this.nodePod&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.nodePod})),this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var yml=JSON.stringify(nodeDetailYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(yml)),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horManagePod=horManagePod,this._horNodeDetailResourceUsage=horNodeDetailResourceUsage,this.nodeResourceUsageData,this.nodeSockets={},this._scope=$scope,this.allocatedResources=resolveNodeAllocated}return DetailController.$inject=["$http","$q","$state","$mdDialog","$scope","$stateParams","$resource","nodeDetail","nodePod","horManagePod","horNodeDetailResourceUsage","NgTableParams","nodeDetailYaml","horModifyService","horNodeDetailYaml","horNodeYmlArr","$mdToast","resolveNodeAllocated","horNodeUnschedulableResource","$translate"],_createClass(DetailController,[{key:"$onInit",value:function(){var _this=this,name=this._stateParams.objectName;this.nodeSockets.nodeResources=this._horNodeDetailResourceUsage.startNodeResourceWSConnect(name,this.nodeDetailResourceCb.bind(this)),this._scope.$on("$destroy",function(){var nodeSockets=_this.nodeSockets;angular.forEach(nodeSockets,function(value,key){value.socket.close()})})}},{key:"nodeDetailResourceCb",value:function(data){var _this2=this;data&&data.metrics&&angular.forEach(data.metrics,function(value,key){var arr=[];angular.forEach(value.dataPoints,function(value,key){arr.push([value.x,value.y])}),value.metricName.includes("cpu")&&(_this2.nodeCpuUsageChartData=arr),value.metricName.includes("memory")&&(_this2.nodeMemoryUsageChartData=arr)})}},{key:"goToNodeDetail",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"saveChange",value:function(){var _this3=this,aceName=this.data.name,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horNodeYmlArr.changeYaml(aceName,newModel).then(function(data){200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(_this3._stateParams.objectNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"reload",value:function(){var _this4=this,obj={objectName:this._stateParams.objectName};this._horNodeDetailYaml.get(obj).$promise.then(function(data){var yml=JSON.stringify(data,null,2);_this4.aceModel=jsyaml.safeDump(JSON.parse(yml))})}},{key:"deleteNodePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(this.namespace,item.name,"yaml"))}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getListHref",value:function(objName){return this._state.href(_list_state.stateName,{objectName:objName})}},{key:"responseDataCallBack",value:function(responseData){this.nodeResourceUsageData=responseData.metrics,this.nodePod.podInfo=responseData.podList}},{key:"changeUnschedulable",value:function(name,unschedulable){var _this5=this;this.unschedulable=unschedulable,void 0==this.unschedulable?this.unschedulable=!0:1==this.unschedulable&&(this.unschedulable=!1);var schedulable=this.unschedulable;return this._horNodeUnschedulableResource.schedulable(name,schedulable).then(function(data){_this5._state.go(".",{},{reload:!0}),1==schedulable?_this5._mdToast.show(_this5._mdToast.simple().textContent(_this5._translate.instant("schedulable changes success")).position("w320 success").hideDelay(3e3)):_this5._mdToast.show(_this5._mdToast.simple().textContent(_this5._translate.instant("unschedulable changes success")).position("w320 success").hideDelay(3e3))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="secretdetail",exports.stateUrl="/secret"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="poddetail",exports.stateUrl="/pod"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="addnode",exports.stateUrl="/addnode"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _hormain_state=__webpack_require__(30),_add_state=__webpack_require__(80),_add_controller=__webpack_require__(82);exports.config={url:_add_state.stateUrl,parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_add_controller.AddNodeController,controllerAs:"$ctrl",templateUrl:"node/addnode/add.html"}}}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.AddNodeController=function(){function AddNodeController(horAddNodeService,horAddNodesInfoService,errorDialog,$q,base64,$mdDialog){_classCallCheck(this,AddNodeController);var chiperCodefileObj={name:"",content:""},nodeObj={hostName:"",hostIp:"",userName:"",userPassword:"",cipherCode:chiperCodefileObj,sshPort:""};this.form,this._dialog=$mdDialog,this.nodeList=[],this.nodeList.push(nodeObj),this._horAddNodeService=horAddNodeService,this._horAddNodesInfoService=horAddNodesInfoService,this._errorDialog=errorDialog,this._q=$q,this._base64=base64,this.testConnectionRunning=!1,this.testConnectionResultSuccess=!1,this.testConnectionResultError=!1}return _createClass(AddNodeController,[{key:"addNode",value:function(){try{var chiperCodefileObj={name:"",content:""},nodeObj={hostName:"",hostIp:"",userName:"",userPassword:"",cipherCode:chiperCodefileObj,sshPort:""};this.nodeList.push(nodeObj)}catch(err){this._errorDialog.open("System Error",err.toString())}}},{key:"delNode",value:function(index){try{this.nodeList.splice(index,1)}catch(err){this._errorDialog.open("System Error",err.toString())}}},{key:"changeInput",value:function(){this.testConnectionResultSuccess=!1}},{key:"connectionTest",value:function(node){var _this=this;try{this.testConnectionRunning=!0;var defer=this._q.defer(),base64Str=this._base64.encode(node.cipherCode.content),paramObj={config:{ansible_ssh_private_key_file:base64Str,ansible_ssh_private_key_file_name:node.cipherCode.name,ansible_ssh_user:node.userName,ansible_ssh_host:node.hostIp,ansible_ssh_pass:node.userPassword,ansible_ssh_port:node.sshPort},host:node.hostName};this._horAddNodeService.pingNodeResource().save(paramObj,function(response){defer.resolve(response),_this.testConnectionRunning=!1,_this.testConnectionResultSuccess=!0,_this.testConnectionResultError=!1},function(responseError){defer.reject(responseError),_this.testConnectionRunning=!1,_this.testConnectionResultSuccess=!1,_this.testConnectionResultError=!0})}catch(err){this._errorDialog.open("System Error",err)}}},{key:"addNodeProcDialog",value:function(){try{var self=this,nodeObj=this.nodeList;this._dialog.show({controller:function($mdDialog,$scope,base64,nodeData){var _this3=this;this._scope=$scope,this._base64=base64,this.arr=[],this.processState=!0,this.closeBtnDisabled=!0,this.showProcessVisable=!1,this.hide=function(){$mdDialog.cancel()},this.processToggle=function(){this.showProcessVisable=!this.showProcessVisable},this.addNodesInfoCb=function(data){var _this2=this;this._scope.$apply(function(){if(""!=data){var decodeData=_this2._base64.decode(data);_this2.arr.push(decodeData)}})},this.addNodesInfoEofCb=function(evt){"eof"==evt.data&&(this.processState=!1,this.closeBtnDisabled=!1)};self._q.defer();if(nodeData&&nodeData.length>0){var addNodeParam=[];angular.forEach(nodeData,function(node){var base64Str=self._base64.encode(node.cipherCode.content),paramObj={config:{ansible_ssh_private_key_file:base64Str,ansible_ssh_private_key_file_name:node.cipherCode.name,ansible_ssh_user:node.userName,ansible_ssh_host:node.hostIp,ansible_ssh_pass:node.userPassword,ansible_ssh_port:node.sshPort},host:node.hostName};addNodeParam.push(paramObj)}),self._horAddNodeService.addNewNodesResource().save(addNodeParam,function(response){if(response.inventoryName){var inventoryName=response.inventoryName;self._horAddNodesInfoService.startAddNodesInfoWSConnect(inventoryName,_this3.addNodesInfoCb.bind(_this3),_this3.addNodesInfoEofCb.bind(_this3))}},function(responseError){console.log(responseError)})}},controllerAs:"$ctrl",templateUrl:"node/addnode/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!1,locals:{nodeData:nodeObj}}).then(function(data){})}catch(err){this._errorDialog.open("System Error",err)}}}]),AddNodeController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _pod_service=__webpack_require__(84),_pod_stateconfig=__webpack_require__(85),_pod_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_pod_stateconfig),_list_service=__webpack_require__(105),_detail_service=__webpack_require__(106),_list_service2=__webpack_require__(107);exports.default=angular.module("horApp.pod",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_pod_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).factory("horPodYmlArr",_detail_service.updatePodService).factory("horPodListInfoResource",_list_service.podListResource).factory("horPodDetailResource",_detail_service.podDetailResource).factory("horPodContainerDetailResource",_detail_service.podContainerDetailResource).factory("horPodcControllerDetailResource",_detail_service.podControllerDetailResource).factory("horPodEventsDetailResource",_detail_service.podEventsDetailResource).factory("horPodsResourceUsage",_list_service.getPodsResourceUsage).factory("horPodDetailYaml",_detail_service.getPodDetailYaml).factory("horLogResource",_detail_service.logResource).factory("horPodDetailResourceUsage",_detail_service.podResourcesUsage).factory("horRegistryConfigListResource",_list_service2.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PodSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.PodSerivce=function(){function PodSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,PodSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return PodSerivce.$inject=["$http","$state","$mdDialog","$resource","$translate"],_createClass(PodSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,podName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/pod/namespace/"+ns+"/name/"+podName}},{key:"getResetUrl",value:function(namespace,name){var ns=namespace,objName=name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/"+ns+"/name/"+objName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Pod Delete Pod Title")).textContent(this._translate.instant("Pod Delete Pod Desc")+" "+item.name+"?").targetEvent(event).ok(this._translate.instant("Pod Delete Pod Delete")).cancel(this._translate.instant("Pod Delete Pod Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("pod",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,podData){this.podData=podData.data,this.obj={data:this.podData,options:{mode:"tree",name:"Pod"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"pod/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{podData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showReplicaSetDelete",value:function(event,namespace,name){var _this2=this,self=this,url=this.getResetUrl(namespace,name),confirm=this._dialog.confirm().title("删除").textContent("您确定要删除 "+name+" 吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this2._http.delete(url)}).then(function(){self._state.go("replicaset",{},{reload:!0})},function(){})}},{key:"showReplicaSetEdit",value:function(event,namespace,name){var self=this,url=this.getResetUrl(namespace,name);this._dialog.show({controller:function($mdDialog,replicaSetData){this.replicaSetData=replicaSetData.data,this.obj={data:this.replicaSetData,options:{mode:"tree",name:"ReplicaSet"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"replicaset/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{replicaSetData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),PodSerivce}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("pod.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(86),_detail_state=__webpack_require__(79),_list_stateconfig=__webpack_require__(87),_detail_stateconfig=__webpack_require__(91),_new_stateconfig=__webpack_require__(103)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="pod",exports.stateUrl="/pod"},function(module,exports,__webpack_require__){"use strict";function resolvePodList(horPodListInfoResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horPodListInfoResource.get(obj).$promise.then(function(podList){return horUtilsService.recombinePodList(podList)})}resolvePodList.$inject=["horPodListInfoResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodList=resolvePodList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(88),_list_state=__webpack_require__(86);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{podList:resolvePodList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"pod/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(79),_detail_state2=__webpack_require__(73),_constant=(__webpack_require__(86),__webpack_require__(89),__webpack_require__(11)),_namespacedetail_state=__webpack_require__(57),_state=__webpack_require__(90);exports.ListController=function(){function ListController($state,$stateParams,$scope,$cookies,podList,horManagePod,horPodsResourceUsage,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._scope=$scope,this._state=$state,this._horModifyService=horModifyService,this.horPodsResourceUsage=horPodsResourceUsage,this.PodsResourceUsageData,this.namespace=$stateParams.namespace,this._stateParams=$stateParams,this._horManagePod=horManagePod,this._cookies=$cookies,this.globalSearchTerm,this.podList=podList,this.role=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.podList})}return _createClass(ListController,[{key:"$onInit",value:function(){this._scope.$on("$destroy",function(){})}},{key:"podsResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.PodsResourceUsageData=responseData.cumulativeMetrics)}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"refreshPage",value:function(){return this._state.go(".",{},{reload:!0})}},{key:"goToShellPage",value:function(name,containerName){var obj={objectNamespace:this._stateParams.namespace,objectName:name,container:containerName};return this._state.go(_state.stateName,obj,{reload:!0})}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"deletePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="podsdetail",exports.stateUrl="/pods"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShellStateParams=exports.stateUrl=exports.stateName=void 0;var _utils=__webpack_require__(4);exports.stateName="shell",exports.stateUrl="/shell",exports.ShellStateParams=function(_StateParams){function ShellStateParams(objectNamespace,objectName,container){_classCallCheck(this,ShellStateParams);var _this=_possibleConstructorReturn(this,(ShellStateParams.__proto__||Object.getPrototypeOf(ShellStateParams)).call(this,objectNamespace,objectName));return _this.container=container,_this}return _inherits(ShellStateParams,_StateParams),ShellStateParams}(_utils.StateParams)},function(module,exports,__webpack_require__){"use strict";function resolvePodDetail(horPodDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodDetailResource.get(obj).$promise.then(function(podDetail){return horUtilsService.recombinePodDetail(podDetail)})}function resolvePodContainerDetail(horPodContainerDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodContainerDetailResource.query(obj).$promise}function resolvePodControllerDetail(horPodcControllerDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodcControllerDetailResource.get(obj).$promise}function resolvePodEventDetail(horPodEventsDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodEventsDetailResource.get(obj).$promise}function resolvePodYaml(horPodDetailYaml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodDetailYaml.get(objParams).$promise}resolvePodDetail.$inject=["horPodDetailResource","$stateParams","horUtilsService"],resolvePodContainerDetail.$inject=["horPodContainerDetailResource","$stateParams"],resolvePodControllerDetail.$inject=["horPodcControllerDetailResource","$stateParams"],resolvePodEventDetail.$inject=["horPodEventsDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodDetail=resolvePodDetail,exports.resolvePodContainerDetail=resolvePodContainerDetail,exports.resolvePodControllerDetail=resolvePodControllerDetail,exports.resolvePodEventDetail=resolvePodEventDetail,exports.resolvePodYaml=resolvePodYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(79),_detail_controller=__webpack_require__(92);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{podDetail:resolvePodDetail,podContainer:resolvePodContainerDetail,podController:resolvePodControllerDetail,podEvent:resolvePodEventDetail,podYaml:resolvePodYaml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"pod/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state2=(__webpack_require__(93),__webpack_require__(79),__webpack_require__(73)),_detail_state3=__webpack_require__(94),_detail_state4=__webpack_require__(95),_daemonsetdetail_state=__webpack_require__(96),_jobdetail_state=__webpack_require__(97),_statefulsetdetail_state=__webpack_require__(98),_detail_state5=__webpack_require__(99),_list_state=__webpack_require__(86),_detail_state6=__webpack_require__(100),_detail_state7=__webpack_require__(101),_detail_state8=__webpack_require__(102),_namespacedetail_state=__webpack_require__(57),_state=__webpack_require__(90);exports.DetailController=function(){function DetailController($http,$state,$mdDialog,$stateParams,$scope,$cookies,$resource,podDetail,podContainer,podController,podEvent,horManagePod,horManageReplicaSet,horPodDetailResourceUsage,NgTableParams,podYaml,horModifyService,horPodYmlArr,horLogResource,$mdToast,$translate){_classCallCheck(this,DetailController);var _formatTime=function(value){
var unixTimestamp=new Date(1e3*value),hours=unixTimestamp.getHours(),minutes=unixTimestamp.getMinutes();return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,hours+":"+minutes},_ChartConfig=function(title,yAxisVar,tooltipCb){return{tooltip:{trigger:"axis",formatter:tooltipCb},title:{left:15,top:10,textStyle:{fontFamily:"Source Sans Pro",fontSize:14,fontWeight:700}},legend:{show:!1},grid:{left:"0",right:"0",bottom:"0",top:"0",containLabel:!1},xAxis:{show:!0,type:"time",boundaryGap:[0,"100%"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!1,textStyle:{color:"#333"},formatter:function(value,index){return _formatTime(value)}},splitLine:{show:!0,lineStyle:{color:"#eee"}}},yAxis:yAxisVar,series:[{name:title,type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(1, 128, 223)"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgb(211, 236, 249)"},{offset:0,color:"rgb(114, 186, 233)"}])}},data:[]}]}};this.podCpuUsageChartConfig=function(){var tooltipCb=function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=(Number(p.data[1])/1e3).toFixed(2),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"%"},yAxisVar=_defineProperty({show:!0,type:"value",boundaryGap:[0,"100%"],splitNumber:5,axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:"#eee"}},axisTick:{show:!0},max:1e4,min:0},"splitNumber",5);return new _ChartConfig("CPU",yAxisVar,tooltipCb)}(),this.podMemoryUsageChartConfig=function(){return new _ChartConfig("MEMORY",{show:!0,type:"value",boundaryGap:[0,"100%"],splitNumber:5,axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:"#eee"}},axisTick:{show:!0}},function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=(Number(p.data[1])/1073741824).toFixed(2),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"GiB"})}(),this.podCpuUsageChartData,this.podMemoryUsageChartData,this.podSockets={},this._horPodDetailResourceUsage=horPodDetailResourceUsage,this._mdToast=$mdToast,this._horPodYmlArr=horPodYmlArr,this._resource=$resource,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horLogResource=horLogResource,this._stateParams=$stateParams,this._scope=$scope,this._horModifyService=horModifyService,this._horManageReplicaSet=horManageReplicaSet,this._cookies=$cookies,this.namespace=$stateParams.namespace,this._horManagePod=horManagePod,this._translate=$translate,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this.PodsDetailResouceUsageData,this.podDetail=podDetail,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(podYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.deafultace=podYaml,this.podContainer=podContainer,this.selectedcontainerName=podContainer[0].name,this.query={containerName:this.selectedcontainerName},this.podController=podController,this.selected=[],this.item={namespace:this.podDetail.namespace,name:this.podDetail.name},this.podEvent=podEvent.items,this.user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY)}return _createClass(DetailController,[{key:"$onInit",value:function(){}},{key:"getNamespaceDetail",value:function(objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.item.namespace,objName))}},{key:"podsDetailResourceCb",value:function(data){var _this=this;data&&data.podDetail.metrics&&angular.forEach(data.podDetail.metrics,function(value,key){var arr=[];angular.forEach(value.dataPoints,function(value,key){arr.push([value.x,value.y])}),value.metricName.includes("cpu")&&(_this.podCpuUsageChartData=angular.copy(arr)),value.metricName.includes("memory")&&(_this.podMemoryUsageChartData=arr)})}},{key:"initChartData",value:function(){var _this2=this,name=this._stateParams.objectName,namespace=this._stateParams.objectNamespace;this.podSockets.podResource=this._horPodDetailResourceUsage.startPodResourceWSConnect(namespace,name,this.podsDetailResourceCb.bind(this)),this._scope.$on("$destroy",function(){var podSockets=_this2.podSockets;angular.forEach(podSockets,function(value,key){value.socket.close()})})}},{key:"changeTab",value:function(){var _this3=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName,containerName:this.query.containerName};this._horLogResource.get(obj).$promise.then(function(data){_this3.logList=data})}},{key:"changeContainer",value:function(){var _this4=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName,containerName:this.query.containerName};this._horLogResource.get(obj).$promise.then(function(data){_this4.logList=data})}},{key:"toNodeDetail",value:function(nodeName){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(this.item.namespace,nodeName,"list"))}},{key:"goToObjectDetail",value:function(item){return"ingress"===item.kind?this._state.go(_detail_state6.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"deployment"===item.kind?this._state.go(_detail_state7.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"daemonset"===item.kind?this._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"replicaset"===item.kind?(console.log("rs"),this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list"))):"replicationcontrollerListStateName"===item.kind?this._state.go(rcDetailStateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"configmap"===item.kind?this._state.go(_detail_state5.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"service"===item.kind?this._state.go(_detail_state8.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"job"===item.kind?this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):"pod"===item.kind?this._state.go(".",new _utils.UpdageStateParams(this.item.namespace,item.name,"list")):void 0}},{key:"reload",value:function(){var deafultace=this.deafultace,tempJson=JSON.stringify(deafultace,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"podsDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.PodsDetailResouceUsageData=responseData.podDetail.metrics)}},{key:"hasWarnings",value:function(){return this.podController.pods.warnings.length>0}},{key:"isPending",value:function(){return!this.hasWarnings()&&this.podController.pods.pending>0}},{key:"isSuccess",value:function(){return!this.isPending()&&!this.hasWarnings()}},{key:"getContainerShellHref",value:function(){var obj={objectNamespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName,container:this.query.containerName};return this._state.href(_state.stateName,obj)}},{key:"goToShellPage",value:function(){var obj={objectNamespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName,container:this.query.containerName};return this._state.go(_state.stateName,obj,{reload:!0})}},{key:"getNodeDetailHref",value:function(objName){return this._state.href(_detail_state2.stateName,{objectName:objName})}},{key:"getrReplicaSetDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.StateParams(namespace,objName))}},{key:"getReplicationcontrollerDetailHref",value:function(namespace,objName){return this._state.href(_detail_state4.stateName,new _utils.StateParams(namespace,objName))}},{key:"getDaemonsetDetailHref",value:function(namespace,objName){return this._state.href(_daemonsetdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getJobDetailHref",value:function(namespace,objName){return this._state.href(_jobdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getStatefulsetDetailHref",value:function(namespace,objName){return this._state.href(_statefulsetdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getConfigDetailHref",value:function(objName){var namespace=this.namespace;return this._state.href(_detail_state5.stateName,new _utils.StateParams(namespace,objName))}},{key:"getLogDetailHref",value:function(namespace,objName,containerName){}},{key:"deletePod",value:function(event){var item=this.item;return this._horManagePod.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event){var item=this.item;return this._horManagePod.showEditDialog(event,item)}},{key:"getListHref",value:function(objName){return this._state.href(_list_state.stateName,{objectName:objName})}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"showReplicaSetEditDialog",value:function(event,namespace,name){return this._horManagePod.showReplicaSetEdit(event,namespace,name)}},{key:"showReplicaSetDeleteDialog",value:function(event,namespace,name){this.podController;return this._horManagePod.showReplicaSetDelete(event,namespace,name)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"saveChange",value:function(){var _this5=this,aceName=this.podDetail.name,aceNamespace=this.podDetail.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horPodYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this5._mdToast.show(_this5._mdToast.simple().textContent(_this5._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this5.selectedIndex=0,_this5._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="log",exports.stateUrl="/log"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="replicasetdetail",exports.stateUrl="/replicaset"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="replicationcontrollerdetail",exports.stateUrl="/replicationcontroller"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="daemonsetdetail",exports.stateUrl="/daemonset"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="jobdetail",exports.stateUrl="/job"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="statefulsetdetail",exports.stateUrl="/statefulset"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="configmapdetail",exports.stateUrl="/configmaps"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="ingressdetail",exports.stateUrl="/ingress"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="deploymentdetail",exports.stateUrl="/deployment"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="servicedetail",exports.stateUrl="/service"},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _list_state=__webpack_require__(86),_new_controller=__webpack_require__(104),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"pod/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(79);exports.NewController=function(){function NewController(horManagePod,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._mdToast=$mdToast,this._horManagePod=horManagePod,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.selectedRegistryConfig,this.registryConfigList=registryConfigList,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: v1\nkind: Pod\nmetadata:\n  name: redis\n  labels:\n    app: redis\n  namespace: "+this.namespaceString+"\nspec:\n  containers:\n    - name: key-value-store\n      image: redis\n      ports:\n        - containerPort: 6379"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"pod.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horManagePod.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open("系统提示","创建失败");try{var resourceObj=response.ResourceObject;resourceObj.namespace,resourceObj.name;_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: v1\nkind: Pod\nmetadata:\n  name: redis\n  labels:\n    app: redis\n  namespace: "+this.namespaceString+"\nspec:\n  containers:\n    - name: key-value-store\n      image: redis\n      ports:\n        - containerPort: 6379":this.aceModel="apiVersion: v1\nkind: Pod\nmetadata:\n  name: redis\n  labels:\n    app: redis\n  namespace: "+this.namespaceString+"\nspec:\n  containers:\n    - name: key-value-store\n      image: redis\n      ports:\n        - containerPort: 6379\n  imagePullSecrets:\n    - name: "+this.selectedRegistryConfig,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function podListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods")}function getPodsResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/pods";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}podListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podListResource=podListResource,exports.getPodsResourceUsage=getPodsResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function podDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName")}function podContainerDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/containers",{query:{method:"GET"}})}function podControllerDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/controller")}function podEventsDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/events")}function getPodDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/pod/namespace/:namespace/name/:objectName")}function updatePodService($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/pod/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function logResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/containers/:containerName/log")}function podResourcesUsage($websocket,$stateParams){function genStartWSConnect(url,callback){var socketObj=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},serverResponseData=void 0;return socketObj.socket=$websocket(url),socketObj.socket.onOpen(function(evt){socketObj.isConnected=!0,console.info("connection open")}),socketObj.socket.onMessage(function(evt){serverResponseData=JSON.parse(evt.data),callback(serverResponseData)}),socketObj.socket.onError(function(evt){socketObj.isConnected=!1,console.info("connection error")}),socketObj.socket.onClose(function(evt){socketObj.isConnected=!1,console.info("connection closed")}),socketObj}function startPodResourceWSConnect(namespace,objName,callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+namespace+"/pods/"+objName,socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}var serviceInstance={};return serviceInstance.startPodResourceWSConnect=startPodResourceWSConnect,serviceInstance}podDetailResource.$inject=["$resource"],podContainerDetailResource.$inject=["$resource"],podControllerDetailResource.$inject=["$resource"],podEventsDetailResource.$inject=["$resource"],updatePodService.$inject=["$http"],logResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podDetailResource=podDetailResource,exports.podContainerDetailResource=podContainerDetailResource,exports.podControllerDetailResource=podControllerDetailResource,exports.podEventsDetailResource=podEventsDetailResource,exports.getPodDetailYaml=getPodDetailYaml,exports.updatePodService=updatePodService,exports.logResource=logResource,exports.podResourcesUsage=podResourcesUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function registryConfigListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/registryconfigs",{},{get:{method:"GET",isArray:!0}})}registryConfigListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.registryConfigListResource=registryConfigListResource;var _constant=__webpack_require__(11)},function(module,exports){"use strict";function fileReaderDirective($log){return{restrict:"A",require:["^horUpload","ngModel"],link:function(scope,element,attrs,ctrls){ctrls[0].registerBrowseFileFunction(function(){return element[0].click()}),element.bind("change",function(changeEvent){var file=changeEvent.target.files[0];if(!file)return void $log.error("Error invalid file: ",file);var reader=new FileReader;reader.onload=function(event){ctrls[1].$setViewValue({name:file.name,content:event.target.result})},reader.onerror=function(error){return $log.error("Error reading file:",error)},reader.readAsText(file)})}}}fileReaderDirective.$inject=["$log"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=fileReaderDirective},function(module,exports,__webpack_require__){"use strict";function uploadDirective(){return{scope:{},bindToController:{file:"=",form:"="},controller:_upload_controller.UploadController,controllerAs:"$ctrl",templateUrl:"deploy/upload.html"}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=uploadDirective;var _upload_controller=__webpack_require__(110)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.UploadController=function(){function UploadController($scope){_classCallCheck(this,UploadController),this.isBrowseFileFuncRegistered_=!1,this.browseFileFunc_,this.form,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Establish"})}return _createClass(UploadController,[{key:"registerBrowseFileFunction",value:function(func){this.isBrowseFileFuncRegistered_||(this.browseFileFunc_=func,this.isBrowseFileFuncRegistered_=!0)}},{key:"browseFile",value:function(){this.browseFileFunc_&&this.browseFileFunc_()}},{key:"isFileNameError",value:function(){var fileName=this.form.fileName;return this.form.$submitted&&fileName.$invalid}}]),UploadController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _errordialog_service=__webpack_require__(112);exports.default=angular.module("horApp.common.errorhandling",["ngMaterial"]).service("errorDialog",_errordialog_service.ErrorDialog)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.ErrorDialog=function(){function ErrorDialog($mdDialog){_classCallCheck(this,ErrorDialog),this._mdDialog=$mdDialog}return ErrorDialog.$inject=["$mdDialog"],_createClass(ErrorDialog,[{key:"open",value:function(title,text){var alert=this._mdDialog.alert();alert.title(title),alert.textContent(text),alert.ok("close"),this._mdDialog.show(alert)}}]),ErrorDialog}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getAddNodesInfoService(){function genStartWSConnect(url,callback,eofCallback){var evtSourceObj=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},serverResponseData=void 0;return evtSourceObj.socket=new EventSource(url),evtSourceObj.socket.onopen=function(evt){evtSourceObj.isConnected=!0},evtSourceObj.socket.onmessage=function(message){serverResponseData=message.data,callback(serverResponseData)},evtSourceObj.socket.onerror=function(evt){evtSourceObj.isConnected=!1,eofCallback(evt)},evtSourceObj.socket.onclose=function(evt){evtSourceObj.isConnected=!1},evtSourceObj}function startAddNodesInfoWSConnect(inventoryName,callback,eofCallback){var wsUrl=_constant.backendApi.HOR_K8S_SERVER_CONFIG+"/config/nodes/"+inventoryName,evtSourceObj={};if(evtSourceObj.isConnected=!1,!evtSourceObj.isConnected)return evtSourceObj=genStartWSConnect(wsUrl,callback,eofCallback,evtSourceObj)}var serviceInstance={};return serviceInstance.startAddNodesInfoWSConnect=startAddNodesInfoWSConnect,serviceInstance}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNodeService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.getAddNodesInfoService=getAddNodesInfoService;var _constant=__webpack_require__(11);exports.AddNodeService=function(){function AddNodeService($resource){_classCallCheck(this,AddNodeService),this._resource=$resource}return _createClass(AddNodeService,[{key:"addNewNodesResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER_CONFIG+"/config/nodes",{},{save:{method:"POST"}})}},{key:"pingNodeResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER_CONFIG+"/config/ping",{},{save:{method:"POST"}})}},{key:"getNodesResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER_CONFIG+"/config/nodes/:inventoryName")}}]),AddNodeService}()},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AllocatedResourcesChartController=exports.AllocatedResourcesChartController=function(){function AllocatedResourcesChartController($element){_classCallCheck(this,AllocatedResourcesChartController),this._element=$element,this.data,this.colorPalette,this.outer,this.outercolor,this.inner,this.innercolor,this.ratio=.67,this.enableTooltips=!0,this.size}return AllocatedResourcesChartController.$inject=["$element"],_createClass(AllocatedResourcesChartController,[{key:"$onInit",value:function(){this._generateGraph()}},{key:"_displayOnlyAllocated",value:function(d,i){return 0===i?d.data.value.toFixed(2)+"%":""}},{key:"_formatLabel",value:function(d){return d.data.value.toFixed(2)+"%"}},{key:"_initPieChart",value:function(svg,data,colors,margin,ratio,labelFunc){var size=this.size||280;labelFunc||(labelFunc=this._formatLabel);var chart=nv.models.pieChart().showLegend(!1).showLabels(!0).x(function(d){return d.value}).y(function(d){return d.value}).donut(!0).donutRatio(ratio).color(colors).margin({top:margin,right:margin,bottom:margin,left:margin}).width(size).height(size).growOnHover(!1).labelType(labelFunc);chart.tooltip.enabled(this.enableTooltips),chart.tooltip.contentGenerator(function(obj){return obj.data.key}),svg.attr("height",size).attr("width",size).append("g").datum(data).transition().duration(350).call(chart)}},{key:"_generateGraph",value:function(){var _this=this;nv.addGraph(function(){var svg=d3.select(_this._element[0]).append("svg");_this.data?_this._initPieChart(svg,_this.data,_this.colorPalette,0,_this.ratio,null):(void 0!==_this.outer&&(_this.outercolor=_this.outercolor?_this.outercolor:"#f77454",_this._initPieChart(svg,[{value:_this.outer},{value:100-_this.outer}],[_this.outercolor,"#408ed5"],10,.65,_this._displayOnlyAllocated)),void 0!==_this.inner&&(_this.innercolor=_this.innercolor?_this.innercolor:"#df5977",_this._initPieChart(svg,[{value:_this.inner},{value:100-_this.inner}],[_this.innercolor,"#408ed5"],50,.55,_this._displayOnlyAllocated)))})}}]),AllocatedResourcesChartController}();exports.allocatedResourcesChartComponent={bindings:{outer:"<",outercolor:"<",inner:"<",innercolor:"<",data:"<",colorPalette:"<",ratio:"<",enableTooltips:"<",size:"<"},controller:AllocatedResourcesChartController,templateUrl:"node/allocatedresourceschart/allocatedresourcechart.html"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(116),_persistentvolume_service=__webpack_require__(117),_detail_service=__webpack_require__(118),_persistentvolume_stateconfig=__webpack_require__(120),_persistentvolume_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_persistentvolume_stateconfig);exports.default=angular.module("horApp.persistentVolume",["ngMaterial","ngResource","ui.router"]).config(_persistentvolume_stateconfig2.default).service("horPersistentVolumeService",_persistentvolume_service.persistentVolumeService).factory("horPersistentVolumeResource",_list_service.persistentVolumeResource).factory("horPersistentVolumeDetailResource",_detail_service.persistentVolumeDetailResource).factory("horGetPVDetailYml",_detail_service.getPVDetailYml).factory("horPVDetailYml",_detail_service.pvDetailYml)},function(module,exports,__webpack_require__){"use strict"
;function persistentVolumeResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/persistentvolumes")}persistentVolumeResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeResource=persistentVolumeResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.persistentVolumeService=function(){function persistentVolumeService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,persistentVolumeService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(persistentVolumeService,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"getUrl",value:function(obj){var objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolume/name/"+objName}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Persistent Volume")).textContent(this._translate.instant("Are you sure you want to delete")+""+item.name).targetEvent(event).ok(this._translate.instant("Delete Persistent Volume")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("persistentvolume",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,deploymentData){this.deploymentData=deploymentData.data,this.obj={data:this.deploymentData,options:{mode:"tree",name:"PersistentVolume"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"persistentvolume/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{deploymentData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),persistentVolumeService}()},function(module,exports,__webpack_require__){"use strict";function persistentVolumeDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/persistentvolumes/:objectName")}function getPVDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolume/name/:objectName")}function pvDetailYml($http){function changeYaml(name,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolume/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}persistentVolumeDetailResource.$inject=["$resource"],getPVDetailYml.$inject=["$resource"],pvDetailYml.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeDetailResource=persistentVolumeDetailResource,exports.getPVDetailYml=getPVDetailYml,exports.pvDetailYml=pvDetailYml;var _constant=__webpack_require__(11);__webpack_require__(119)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="persistentvolume",exports.stateUrl="/persistentvolume"},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("persistentvolume.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(119),_detail_state=__webpack_require__(121),_list_stateconfig=__webpack_require__(122),_detail_stateconfig=__webpack_require__(124),_new_stateconfig=__webpack_require__(127)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="persistentvolumedetail",exports.stateUrl="/persistentvolume"},function(module,exports,__webpack_require__){"use strict";function resolvePersistentVolume(horPersistentVolumeResource,horUtilsService){return horPersistentVolumeResource.get().$promise.then(function(persistentVolumeList){return horUtilsService.recombinePersistentVolume(persistentVolumeList)})}resolvePersistentVolume.$inject=["horPersistentVolumeResource","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePersistentVolume=resolvePersistentVolume;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(123),_list_state=__webpack_require__(119);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{persistentVolumeList:resolvePersistentVolume},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"persistentvolume/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=(__webpack_require__(11),__webpack_require__(121)),_utils=(__webpack_require__(119),__webpack_require__(4)),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController(persistentVolumeList,$stateParams,$http,$state,$mdDialog,horPersistentVolumeService,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this.persistentVolumeList=persistentVolumeList,this.tableParams=null,this.persistentVolumeList&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.persistentVolumeList})),this.namespace=$stateParams.namespace,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horPersistentVolumeService=horPersistentVolumeService,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Cluster",subNav:{title:"Persistent Volumes",state:"persistentvolume"}})}return ListController.$inject=["persistentVolumeList","$stateParams","$http","$state","$mdDialog","horPersistentVolumeService","$scope","NgTableParams","horModifyService"],_createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(objName){return this._state.href(_detail_state.stateName,new _utils.NewUpdageStateParams(objName,"list"))}},{key:"deleteService",value:function(event,item){return this._horPersistentVolumeService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolvePersistentVolumeDetail(horPersistentVolumeDetailResource,$stateParams){var obj={objectName:$stateParams.objectName};return horPersistentVolumeDetailResource.get(obj).$promise}function resolveGetPVDetailYml(horGetPVDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horGetPVDetailYml.get(obj).$promise}resolvePersistentVolumeDetail.$inject=["horPersistentVolumeDetailResource","$stateParams"],resolveGetPVDetailYml.$inject=["horGetPVDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePersistentVolumeDetail=resolvePersistentVolumeDetail,exports.resolveGetPVDetailYml=resolveGetPVDetailYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_controller=__webpack_require__(125),_detail_state=__webpack_require__(121);exports.config={url:(0,_utils.newappendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{persistentVolumeDetail:resolvePersistentVolumeDetail,getPvDetail:resolveGetPVDetailYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"persistentvolume/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(119),__webpack_require__(4)),_detail_state=__webpack_require__(121),_detail_state2=__webpack_require__(126);exports.DetailController=function(){function DetailController(persistentVolumeDetail,$mdDialog,$http,$state,horPersistentVolumeService,$scope,getPvDetail,horPVDetailYml,horGetPVDetailYml,horModifyService,$resource,$mdToast,$stateParams,NgTableParams,$translate){_classCallCheck(this,DetailController),this._translate=$translate,this._dialog=$mdDialog,this._horGetPVDetailYml=horGetPVDetailYml,this._horPVDetailYml=horPVDetailYml,this._horModifyService=horModifyService,this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this._horPersistentVolumeService=horPersistentVolumeService,this.namespace=$stateParams.namespace,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0;var labelsArr=[];persistentVolumeDetail.metadata.labels&&angular.forEach(persistentVolumeDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}});var annotationsArr=[];persistentVolumeDetail.metadata.annotations&&angular.forEach(persistentVolumeDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),persistentVolumeDetail.arrLabels=labelsArr,persistentVolumeDetail.arrAnnotations=annotationsArr,this.data=persistentVolumeDetail,this._http=$http,this._state=$state,this.tabs=[{title:"Details"},{title:"Pods"}],this.persistentVolumeItem={name:this.data.metadata.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(getPvDetail,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.claim,this.data.spec.claimRef?this.claim=this.data.spec.claimRef.namespace+"/"+this.data.spec.claimRef.name:this.claim="-"}return DetailController.$inject=["persistentVolumeDetail","$mdDialog","$http","$state","horPersistentVolumeService","$scope","getPvDetail","horPVDetailYml","horGetPVDetailYml","horModifyService","$resource","$mdToast","$stateParams","NgTableParams","$translate"],_createClass(DetailController,[{key:"showDeleteDialog",value:function(event){var item=this.item;return this._horPvManageService.showDeleteDialog(event,item)}},{key:"showEditDialog",value:function(event){this.selectedIndex=1}},{key:"saveChange",value:function(){var _this=this,aceName=this.data.metadata.name,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horPVDetailYml.changeYaml(aceName,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horGetPVDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deleteService",value:function(event,item){return item.name=item.metadata.name,this._horPersistentVolumeService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){this.selectedIndex=1}},{key:"getStorageClassHref",value:function(objName,namespace){return this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="storageclassdetail",exports.stateUrl="/storageclass"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(119),_new_controller=__webpack_require__(128),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/pv/new/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"persistentvolume/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(121);exports.NewController=function(){function NewController($q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,horPersistentVolumeService,$translate){_classCallCheck(this,NewController),this._horPersistentVolumeService=horPersistentVolumeService,this._translate=$translate,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams;"all"===this._stateParams.namespace||this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: example\nspec:\n  capacity:\n    storage: 5Gi\n  accessModes:\n    - ReadWriteOnce\n  persistentVolumeReclaimPolicy: Recycle\n  storageClassName: slow\n  nfs:\n    path: /tmp\n    server: 172.17.0.2\n  \n",this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.length).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horPersistentVolumeService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System Information"),_this._translate.instant("Create Failure"));_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _errorhandling_module=__webpack_require__(111),_errorhandling_module2=_interopRequireDefault(_errorhandling_module),_list_service=__webpack_require__(130),_pvcdetail_service=__webpack_require__(131),_persistentvolumeclaim_stateconfig=__webpack_require__(132),_persistentvolumeclaim_stateconfig2=_interopRequireDefault(_persistentvolumeclaim_stateconfig),_persistentvolumeclaim_service=__webpack_require__(141);exports.default=angular.module("horApp.persistentVolumeClaimList",["ngMaterial","ngResource","ui.router",_errorhandling_module2.default.name]).config(_persistentvolumeclaim_stateconfig2.default).service("horPvcManageService",_persistentvolumeclaim_service.PersistentVolumeClaimManageService).factory("horPersistentVolumeClaimListResource",_list_service.persistentVolumeClaimListResource).factory("horPersistentVolumeClaimDetailResource",_pvcdetail_service.persistentVolumeClaimDetailResource).factory("horPvcDetailYml",_pvcdetail_service.pvcDetailYml).factory("horPvcDetailYmlArray",_pvcdetail_service.pvcDetailYmlArr)},function(module,exports,__webpack_require__){"use strict";function persistentVolumeClaimListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/persistentvolumeclaims")}persistentVolumeClaimListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeClaimListResource=persistentVolumeClaimListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function persistentVolumeClaimDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/persistentvolumeclaims/:objectName")}function pvcDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolumeclaim/namespace/:namespace/name/:objectName")}function pvcDetailYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolumeclaim/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}persistentVolumeClaimDetailResource.$inject=["$resource"],pvcDetailYml.$inject=["$resource"],pvcDetailYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeClaimDetailResource=persistentVolumeClaimDetailResource,exports.pvcDetailYml=pvcDetailYml,exports.pvcDetailYmlArr=pvcDetailYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_pvcdetail_state.stateName,_pvcdetail_stateconfig.config).state("persistentvolumeclaim.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(133),_pvcdetail_state=__webpack_require__(134),_list_stateconfig=__webpack_require__(135),_pvcdetail_stateconfig=__webpack_require__(137),_new_stateconfig=__webpack_require__(139)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="persistentvolumeclaim",exports.stateUrl="/persistentvolumeclaim"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="persistentvolumeclaimdetail",exports.stateUrl="/persistentvolumeclaim"},function(module,exports,__webpack_require__){"use strict";function resolvePersistentVolumeClaimList(horPersistentVolumeClaimListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horPersistentVolumeClaimListResource.get(obj).$promise.then(function(persistentVolumeClaimList){return horUtilsService.recombinePvcList(persistentVolumeClaimList)})}resolvePersistentVolumeClaimList.$inject=["horPersistentVolumeClaimListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePersistentVolumeClaimList=resolvePersistentVolumeClaimList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(136),_list_state=__webpack_require__(133);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{persistentVolumeClaimList:resolvePersistentVolumeClaimList},views:{"":{controller:_list_controller.persistentVolumeClaimListController,controllerAs:"$ctrl",templateUrl:"persistentvolumeclaim/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeClaimListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_pvcdetail_state=__webpack_require__(134),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57);exports.persistentVolumeClaimListController=function(){function persistentVolumeClaimListController(persistentVolumeClaimList,$stateParams,$state,$interpolate,$cookies,$scope,NgTableParams,horPvcManageService,horModifyService){_classCallCheck(this,persistentVolumeClaimListController),this.selected=[],this._horPvcManageService=horPvcManageService,this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this._horModifyService=horModifyService,this.persistentVolumeClaimList=persistentVolumeClaimList,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.persistentVolumeClaimList}),this.namespace=$stateParams.namespace,this._state=$state,this._interpolate=$interpolate,this._cookies=$cookies,this.editFlag=!0,this.globalSearchTerm,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Config & Store",subNav:{title:"Persistent Volume Claims",state:"persistentvolumeclaim"}})}return persistentVolumeClaimListController.$inject=["persistentVolumeClaimList","$stateParams","$state","$interpolate","$cookies","$scope","NgTableParams","horPvcManageService","horModifyService"],_createClass(persistentVolumeClaimListController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_pvcdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"areMultipleNamespacesSelected",value:function(){return"all"===this.namespace}},{key:"deletePvcService",value:function(event,item){return this._horPvcManageService.showDeleteDialog(event,item)}},{key:"showEditPvcDialog",value:function(event,item){this._state.go(_pvcdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),persistentVolumeClaimListController}()},function(module,exports,__webpack_require__){"use strict";function resolvePvcDetail(horPersistentVolumeClaimDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPersistentVolumeClaimDetailResource.get(obj).$promise}function resolvePvcYml(horPvcDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPvcDetailYml.get(obj).$promise}resolvePvcDetail.$inject=["horPersistentVolumeClaimDetailResource","$stateParams"],resolvePvcYml.$inject=["horPvcDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePvcDetail=resolvePvcDetail,exports.resolvePvcYml=resolvePvcYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_pvcdetail_state=__webpack_require__(134),_pvcdetail_controller=__webpack_require__(138);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_pvcdetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{persistentVolumeClaimDetail:resolvePvcDetail,pvcYml:resolvePvcYml},views:{"":{controller:_pvcdetail_controller.PersistentVolumeClaimDetailController,controllerAs:"$ctrl",templateUrl:"persistentvolumeclaim/detail/pvcdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PersistentVolumeClaimDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(133),_utils=__webpack_require__(4),_namespacedetail_state=(__webpack_require__(134),__webpack_require__(57)),_detail_state=__webpack_require__(121),_detail_state2=__webpack_require__(126);exports.PersistentVolumeClaimDetailController=function(){function PersistentVolumeClaimDetailController(persistentVolumeClaimDetail,horModifyService,horPvcDetailYml,$mdDialog,$stateParams,$http,$state,$cookies,horPvcManageService,$scope,pvcYml,horPvcDetailYmlArray,$mdToast,$translate){if(_classCallCheck(this,PersistentVolumeClaimDetailController),this.pvcDetailValue,this.item,this._horPvcManageService=horPvcManageService,this._horPvcDetailYmlArray=horPvcDetailYmlArray,this._stateParams=$stateParams,this._horPvcDetailYml=horPvcDetailYml,this.namespace=$stateParams.namespace,null!=persistentVolumeClaimDetail){var pvcDetailObject={};pvcDetailObject.name=persistentVolumeClaimDetail.metadata.name,pvcDetailObject.namespace=persistentVolumeClaimDetail.metadata.namespace,pvcDetailObject.lables=this.formatObject(persistentVolumeClaimDetail.metadata.labels),pvcDetailObject.annotations=this.formatObject(persistentVolumeClaimDetail.metadata.annotations),pvcDetailObject.createTime=persistentVolumeClaimDetail.metadata.creationTimestamp,pvcDetailObject.status=persistentVolumeClaimDetail.status.phase,pvcDetailObject.volume=persistentVolumeClaimDetail.spec.volumeName||"-",pvcDetailObject.capacity=this.formatObject(persistentVolumeClaimDetail.status.capacity)||"-",pvcDetailObject.accessModes=this.formatObject(persistentVolumeClaimDetail.spec.accessModes),this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0;var acctionArr=[];angular.forEach(pvcDetailObject.annotations,function(item){var str=item.name+"="+item.value;acctionArr.push(str),pvcDetailObject.dataArr=acctionArr.length}),angular.forEach(pvcDetailObject.annotations,function(item){if("volume.beta.kubernetes.io/storage-class"==item.name){var str=item.value;pvcDetailObject.storageclass=str}});var labelNewArr=[];angular.forEach(pvcDetailObject.lables,function(item){if(0==item.value.length){var str=""+item.name
;labelNewArr.push(str)}else{var _str=item.name+"="+item.value;labelNewArr.push(_str)}}),pvcDetailObject.labelArr=labelNewArr,pvcDetailObject.acctionArr=acctionArr,this.pvcDetailValue=pvcDetailObject,this.item={namespace:this.pvcDetailValue.namespace,name:this.pvcDetailValue.name},this.showLabels=!1,this.pvcDetailValue.lables.length>0?this.showLabels=!0:this.showLabels=!1}else this.pvcDetailValue=null;this._horModifyService=horModifyService,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(pvcYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this._dialog=$mdDialog,this._http=$http,this._state=$state,this._cookies=$cookies,this.editFlag=!0,this._mdToast=$mdToast,this._translate=$translate,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Config & Store",subNav:{title:"Persistent Volume Claims",state:"persistentvolumeclaim"},sub:this.pvcDetailValue.name+" Details"})}return PersistentVolumeClaimDetailController.$inject=["persistentVolumeClaimDetail","horModifyService","horPvcDetailYml","$mdDialog","$stateParams","$http","$state","$cookies","horPvcManageService","$scope","pvcYml","horPvcDetailYmlArray","$mdToast","$translate"],_createClass(PersistentVolumeClaimDetailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"formatObject",value:function(obj){var newStr="",valueArr=[],nameArr=[],formatObject=[];for(var name in obj)nameArr.push(name);angular.forEach(obj,function(value){newStr=value,valueArr.push(newStr)});for(var i in nameArr){var _obj={name:nameArr[i],value:valueArr[i]};formatObject.push(_obj)}return formatObject}},{key:"showDeleteDialog",value:function(event){var item=this.item;return this._horPvcManageService.showDeleteDialog(event,item)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getVolumeHref",value:function(objName,namespace){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getStorageClassHref",value:function(objName,namespace){return this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"showEditDialog",value:function(event){this.selectedIndex=1}},{key:"getListHref",value:function(namespace){return this._state.href(_list_state.stateName,namespace)}},{key:"saveChange",value:function(){var _this=this,aceName=this.pvcDetailValue.name,aceNamespace=this.pvcDetailValue.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horPvcDetailYmlArray.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horPvcDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),PersistentVolumeClaimDetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(133),_new_controller=__webpack_require__(140),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"persistentvolumeclaim/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_pvcdetail_state=__webpack_require__(134);exports.NewController=function(){function NewController(horPvcManageService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate){_classCallCheck(this,NewController),this._horPvcManageService=horPvcManageService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate;var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="kind: PersistentVolumeClaim\napiVersion: v1\nmetadata:\n  name: example\n  namespace: "+namespaceString+"\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 8Gi\n  storageClassName: slow\n  selector:\n    matchLabels:\n      release: stable\n    matchExpressions:\n      - key: environment\n        operator: In\n        values:\n          - dev",this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horPvcManageService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));_this._state.go(_pvcdetail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PersistentVolumeClaimManageService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(133);exports.PersistentVolumeClaimManageService=function(){function PersistentVolumeClaimManageService($http,$state,$mdDialog,errorDialog,$resource,$translate){_classCallCheck(this,PersistentVolumeClaimManageService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._errorDialog=errorDialog,this._resource=$resource,this._translate=$translate}return _createClass(PersistentVolumeClaimManageService,[{key:"getUrl",value:function(obj){var ns=obj.namespace,pvcName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/persistentvolumeclaim/namespace/"+ns+"/name/"+pvcName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=(item.name,this._dialog.confirm().title(this._translate.instant("Delete Persistent Volume Claim")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Persistent Volume Claim")).cancel(this._translate.instant("Cancel")));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go(_list_state.stateName,{},{reload:!0})})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,pvcData){this.pvcData=pvcData.data,this.obj={data:this.pvcData,options:{mode:"tree",name:"Persistent Volume Claim"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"persistentvolumeclaim/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{pvcData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})}}]),PersistentVolumeClaimManageService}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(143),_detail_service=__webpack_require__(144),_updatereplicas_service=__webpack_require__(146),_replicationcontroller_service=__webpack_require__(151),_service_service=__webpack_require__(152),_replicationcontroller_stateconfig=__webpack_require__(153),_replicationcontroller_stateconfig2=_interopRequireDefault(_replicationcontroller_stateconfig),_module=__webpack_require__(158),_module2=_interopRequireDefault(_module),_hpa_service=__webpack_require__(163),_pod_service=__webpack_require__(84),_list_service2=__webpack_require__(107);exports.default=angular.module("horApp.replicationControllerList",["ngMaterial","ngResource","ui.router","ngWebSocket",_module2.default.name]).config(_replicationcontroller_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).service("horHpaService",_hpa_service.HpaService).service("horManageRCService",_replicationcontroller_service.ReplicationControllerManageSerivce).service("horUpdateReplicasService",_updatereplicas_service.UpdateReplicasService).service("horMangeService",_service_service.ServiceSerivce).service("horManagePod",_pod_service.PodSerivce).factory("horReplicationControllerListResource",_list_service.replicationControllerListResource).factory("horReplicationControllerDetailResource",_detail_service.replicationControllerDetailResource).factory("horReplicationControllerServicesResource",_detail_service.replicationControllerServicesResource).factory("horReplicationControllerPodsResource",_detail_service.replicationControllerPodsResource).factory("horReplicationControllerHpasResource",_detail_service.replicationControllerHpasResource).factory("horReplicationControllerEventsResource",_detail_service.replicationControllerEventsResource).factory("horRCResourceUsage",_list_service.getRCResourceUsage).factory("horRCDetailResourceUsage",_detail_service.getRcDetailResourceUsage).factory("horRCDetailYaml",_detail_service.getReplicationControllerDetailYaml).factory("horReplicationControllerYmlArr",_detail_service.replicationControllerService).factory("horRegistryConfigListResource",_list_service2.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function replicationControllerListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicationcontrollers")}function getRCResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/replicationcontrollers";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}replicationControllerListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.replicationControllerListResource=replicationControllerListResource,exports.getRCResourceUsage=getRCResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function replicationControllerDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/"+_list_state.stateName+"s/:objectName")}function replicationControllerServicesResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/"+_list_state.stateName+"s/:objectName/services")}function replicationControllerPodsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/"+_list_state.stateName+"s/:objectName/pods")}function replicationControllerHpasResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpas/ReplicationController/:objectName")}function replicationControllerEventsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/"+_list_state.stateName+"s/:objectName/events")}function getReplicationControllerDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicationcontroller/namespace/:namespace/name/:objectName")}function replicationControllerService($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicationcontroller/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function getRcDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"===obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/replicationcontrollers/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}replicationControllerDetailResource.$inject=["$resource"],replicationControllerServicesResource.$inject=["$resource"],replicationControllerPodsResource.$inject=["$resource"],replicationControllerHpasResource.$inject=["$resource"],replicationControllerEventsResource.$inject=["$resource"],replicationControllerService.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.replicationControllerDetailResource=replicationControllerDetailResource,exports.replicationControllerServicesResource=replicationControllerServicesResource,exports.replicationControllerPodsResource=replicationControllerPodsResource,exports.replicationControllerHpasResource=replicationControllerHpasResource,exports.replicationControllerEventsResource=replicationControllerEventsResource,exports.getReplicationControllerDetailYaml=getReplicationControllerDetailYaml,exports.replicationControllerService=replicationControllerService,exports.getRcDetailResourceUsage=getRcDetailResourceUsage;var _constant=__webpack_require__(11),_list_state=__webpack_require__(145)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="replicationcontroller",exports.stateUrl="/replicationcontroller"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdateReplicasService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_updatereplicas_dialog=__webpack_require__(147),_updatereplicas_dialog2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_updatereplicas_dialog);exports.UpdateReplicasService=function(){function UpdateReplicasService($mdDialog){_classCallCheck(this,UpdateReplicasService),this._mdDialog=$mdDialog}return _createClass(UpdateReplicasService,[{key:"showUpdateReplicasDialog",value:function(namespace,replicationController,currentPods,desiredPods){return(0,_updatereplicas_dialog2.default)(this._mdDialog,namespace,replicationController,currentPods,desiredPods)}}]),UpdateReplicasService}()},function(module,exports,__webpack_require__){"use strict";function showUpdateReplicasDialog(mdDialog,namespace,replicationController,currentPods,desiredPods){return mdDialog.show({controller:_updatereplicas_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"replicationcontroller/detail/updatereplicas.html",locals:{namespace:namespace,replicationController:replicationController,currentPods:currentPods,desiredPods:desiredPods}})}showUpdateReplicasDialog.$inject=["mdDialog","namespace","replicationController","currentPods","desiredPods"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showUpdateReplicasDialog;var _updatereplicas_controller=__webpack_require__(148),_updatereplicas_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_updatereplicas_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_stateconfig=__webpack_require__(149),UpdateReplicasDialogController=function(){function UpdateReplicasDialogController($mdDialog,$state,$resource,namespace,replicationController,currentPods,desiredPods){_classCallCheck(this,UpdateReplicasDialogController),this.replicas=currentPods,this.currentPods=currentPods,this.desiredPods=desiredPods,this.replicationController=replicationController,this._namespace=namespace,this._mdDialog=$mdDialog,this._state=$state,this._resource=$resource,this.updateReplicasForm}return _createClass(UpdateReplicasDialogController,[{key:"updateReplicas",value:function(){var _this=this;if(this.updateReplicasForm.$valid){var resource=(0,_detail_stateconfig.getReplicationControllerSpecPodsResourceWithActions)(new _utils.StateParams(this._namespace,this.replicationController),this._resource,{save:{method:"POST"}}),replicationControllerSpec={replicas:this.replicas};resource.save(replicationControllerSpec,function(response){_this._mdDialog.hide(),_this._state.reload()},function(err){_this._errorDialog.open("系统提示","更新失败！")})}}},{key:"cancel",value:function(){this._mdDialog.cancel()}}]),UpdateReplicasDialogController}();exports.default=UpdateReplicasDialogController},function(module,exports,__webpack_require__){"use strict";function resolveReplicationControllerDetail(horReplicationControllerDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicationControllerDetailResource.get(obj).$promise.then(function(replicationControllerDetail){return horUtilsService.recombineRcDetail(replicationControllerDetail)})}function resolveReplicationControllerServices(horReplicationControllerServicesResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicationControllerServicesResource.get(obj).$promise.then(function(replicationControllerServices){return horUtilsService.recombineServiceList(replicationControllerServices)})}function resolveReplicationControllerPods(horReplicationControllerPodsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicationControllerPodsResource.get(obj).$promise.then(function(replicationControllerPods){return horUtilsService.recombinePodList(replicationControllerPods)})}function resolveReplicationControllerHpas(horReplicationControllerHpasResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicationControllerHpasResource.get(obj).$promise.then(function(replicationControllerHpas){return horUtilsService.recombineHpaList(replicationControllerHpas)})}function resolveReplicationControllerEvents(horReplicationControllerEventsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicationControllerEventsResource.get(obj).$promise.then(function(replicationControllerEvents){return horUtilsService.recombineRcEventsList(replicationControllerEvents)})}function getReplicationControllerSpecPodsResourceWithActions($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/replicationcontrollers/"+$stateParams.objectName+"/update/pod",{},actions)}function resolveRCDetailYaml(horRCDetailYaml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horRCDetailYaml.get(objParams).$promise}resolveReplicationControllerDetail.$inject=["horReplicationControllerDetailResource","$stateParams","horUtilsService"],resolveReplicationControllerServices.$inject=["horReplicationControllerServicesResource","$stateParams","horUtilsService"],resolveReplicationControllerPods.$inject=["horReplicationControllerPodsResource","$stateParams","horUtilsService"],resolveReplicationControllerHpas.$inject=["horReplicationControllerHpasResource","$stateParams","horUtilsService"],resolveReplicationControllerEvents.$inject=["horReplicationControllerEventsResource","$stateParams","horUtilsService"],getReplicationControllerSpecPodsResourceWithActions.$inject=["$stateParams","$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReplicationControllerDetail=resolveReplicationControllerDetail,exports.resolveReplicationControllerServices=resolveReplicationControllerServices,exports.resolveReplicationControllerPods=resolveReplicationControllerPods,exports.resolveReplicationControllerHpas=resolveReplicationControllerHpas,exports.resolveReplicationControllerEvents=resolveReplicationControllerEvents,exports.getReplicationControllerSpecPodsResourceWithActions=getReplicationControllerSpecPodsResourceWithActions,exports.resolveRCDetailYaml=resolveRCDetailYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_detail_state=__webpack_require__(95),_detail_controller=__webpack_require__(150);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{replicationControllerDetail:resolveReplicationControllerDetail,replicationControllerServices:resolveReplicationControllerServices,replicationControllerPods:resolveReplicationControllerPods,replicationControllerHpas:resolveReplicationControllerHpas,replicationControllerEvents:resolveReplicationControllerEvents,replicationControllerYaml:resolveRCDetailYaml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"replicationcontroller/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=exports.rcStateName=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=(__webpack_require__(148),__webpack_require__(102)),_detail_state2=__webpack_require__(79),_list_state=__webpack_require__(145),_detail_state3=__webpack_require__(95),_detail_state4=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.rcStateName="replicationcontroller",exports.DetailController=function(){function DetailController(horUpdateReplicasService,horMangeService,horManageRCService,horHpaService,horManagePod,replicationControllerDetail,replicationControllerPods,replicationControllerHpas,replicationControllerEvents,replicationControllerServices,$mdDialog,$http,$state,$cookies,horRCDetailResourceUsage,$scope,horModifyService,replicationControllerYaml,NgTableParams,$stateParams,$resource,horReplicationControllerYmlArr,$mdToast,$translate){_classCallCheck(this,DetailController),this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this._horReplicationControllerYmlArr=horReplicationControllerYmlArr,this._mdToast=$mdToast,this._resource=$resource,this._stateParams=$stateParams,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(replicationControllerYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.defaultAceModel=this.aceModel,this._horModifyService=horModifyService,this.horRCDetailResourceUsage=horRCDetailResourceUsage,this.RCDetailResourceUsageData,this._scope=$scope,this._dialog=$mdDialog,this.detail=replicationControllerDetail,this.currentItemNamespace=replicationControllerDetail.namespace,this.podInfo=this.detail.pods,this.servicesData=replicationControllerServices,this.podsData=null,0==replicationControllerPods.length?this.podsData=null:this.podsData=replicationControllerPods,this.podTableParams=null,this.podsData&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.podsData})),null===replicationControllerHpas||0===replicationControllerHpas.length?this.hpaData=null:this.hpaData=replicationControllerHpas,this.eventsData=replicationControllerEvents,this._horUpdateReplicasService=horUpdateReplicasService,this._horManageService=horMangeService,this._horManageRCService=horManageRCService,this._horHpaService=horHpaService,this._horManagePod=horManagePod,this.selected=[],this.item={namespace:this.detail.namespace,name:this.detail.name},this._http=$http,this._state=$state,this._cookies=$cookies,this.editFlag=!0,this.initServiceData(),this.initHpaData(),this._translate=$translate,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Replication Controllers",state:"replicationcontrollers"},sub:this.detail.name+" Details"})}return DetailController.$inject=["horUpdateReplicasService","horMangeService","horManageRCService","horHpaService","horManagePod","replicationControllerDetail","replicationControllerPods","replicationControllerHpas","replicationControllerEvents","replicationControllerServices","$mdDialog","$http","$state","$cookies","horRCDetailResourceUsage","$scope","horModifyService","replicationControllerYaml","NgTableParams","$stateParams","$resource","horReplicationControllerYmlArr","$mdToast","$translate"],_createClass(DetailController,[{key:"getNamespaceDetail",value:function(objName){return this._horManageRCService.goToNamespaceDetail(objName,objName)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horRCDetailResourceUsage.setCallBack(self.rcDetailResourceUsageCallBack.bind(self)),this.horRCDetailResourceUsage.startWSMonitor(this.currentItemNamespace),this._scope.$on("$destroy",function(){
_this.horRCDetailResourceUsage.stopWSMonitor()})}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"rcDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.RCDetailResourceUsageData=responseData.replicationControllerDetail.podList.cumulativeMetrics)}},{key:"initPodData",value:function(){this.podsOptions={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.podsQuery={order:"name",limit:5,page:1},this.podsLimitOptions=[5,10,15]}},{key:"initServiceData",value:function(){this.servicesOptions={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.servicesQuery={order:"name",limit:5,page:1},this.servicesLimitOptions=[5,10,15]}},{key:"initHpaData",value:function(){this.hpaOptions={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.hpaQuery={order:"name",limit:5,page:1},this.hpaLimitOptions=[5,10,15]}},{key:"deleteHpaService",value:function(event,item){return this._horHpaService.showDeleteDialog(event,item)}},{key:"updateHpaService",value:function(event,item){return this._horHpaService.showEditDialog(event,item)}},{key:"showDeleteDialog",value:function(event){var item=this.item;return this._horManageRCService.showDeleteDialog(event,item)}},{key:"showEditDialog",value:function(event){var item=this.item;return this._horManageRCService.showEditDialog(event,item)}},{key:"getServiceDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteService",value:function(event,item){return this._horManageService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._horManageService.showEditDialog(event,item)}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"deletePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event,item){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showScaleDialog",value:function(event){var item=this.item,podInfo=this.podInfo,namespace=item.namespace,replicationController=item.name,currentPods=podInfo.current,desiredPods=podInfo.desired;this._horUpdateReplicasService.showUpdateReplicasDialog(namespace,replicationController,currentPods,desiredPods)}},{key:"rcUpdateService",value:function(){var _this2=this,ns=this.detail.namespace,obj=this.detail.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicationcontroller/namespace/"+ns+"/name/"+obj;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(".",{},{reload:!0})})}},{key:"getListHref",value:function(namespace){return this._state.href(_list_state.stateName,namespace)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"reload",value:function(){this.aceModel=this.defaultAceModel}},{key:"saveChange",value:function(data){var _this3=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horReplicationControllerYmlArr.changeYaml(this.item.name,this.item.namespace,jsonData).then(function(data){200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(_this3.item.namespace,_this3.item.name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplicationControllerManageSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_namespacedetail_state=__webpack_require__(57);exports.ReplicationControllerManageSerivce=function(){function ReplicationControllerManageSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,ReplicationControllerManageSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(ReplicationControllerManageSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,serviceName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicationcontroller/namespace/"+ns+"/name/"+serviceName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),name=item.name,confirm=this._dialog.confirm().title(this._translate.instant("Replication Controller Delete Replication Controller")).textContent(this._translate.instant("Are you sure you want to delete")+" "+name+"？").targetEvent(event).ok(this._translate.instant("Replication Controller Delete Replication Controller")).cancel(this._translate.instant("Replication Controller Delete Replication Controller Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("replicationcontroller",{},{reload:!0})})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,rcData){this.rcData=rcData.data,this.obj={data:this.rcData,options:{mode:"tree",name:"Replication Controller"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"replicationcontroller/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{rcData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}}]),ReplicationControllerManageSerivce}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);__webpack_require__(102),exports.ServiceSerivce=function(){function ServiceSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,ServiceSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return ServiceSerivce.$inject=["$http","$state","$mdDialog","$resource","$translate"],_createClass(ServiceSerivce,[{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"getUrl",value:function(obj){var ns=obj.namespace,serviceName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/service/namespace/"+ns+"/name/"+serviceName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Service")).textContent(this._translate.instant("Are you sure you want to delete")+(item.name+" ？")).targetEvent(event).ok(this._translate.instant("Delete Service")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("service",{},{reload:!0})},function(){})}},{key:"showCreateNetworkPolicyDialog",value:function(item){var _this2=this,confirm=this._dialog.confirm().title(this._translate.instant("Notice")).textContent(this._translate.instant("If you decide what you want to do, you can ignore the hint.")).targetEvent(event).ok(this._translate.instant("Go to Create")).cancel(this._translate.instant("Ignore"));this._dialog.show(confirm).then(function(){_this2._state.go("networkpolicy.template",{name:item.name,namespace:item.namespace},{reload:!0})}).then(function(){},function(){console.log("click cancel")})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,serviceData){this.serviceData=serviceData.data,this.obj={data:this.serviceData,options:{mode:"tree",name:"Service"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"service/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{serviceData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}}]),ServiceSerivce}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("replicationcontroller.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(145)),_detail_state=__webpack_require__(95),_list_stateconfig=__webpack_require__(154),_detail_stateconfig=__webpack_require__(149),_new_stateconfig=__webpack_require__(156)},function(module,exports,__webpack_require__){"use strict";function resolveReplicationControllerList(horReplicationControllerListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horReplicationControllerListResource.get(obj).$promise.then(function(replicationControllerList){return horUtilsService.recombineRcList(replicationControllerList)})}resolveReplicationControllerList.$inject=["horReplicationControllerListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReplicationControllerList=resolveReplicationControllerList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(155),_list_state=__webpack_require__(145);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{replicationControllerList:resolveReplicationControllerList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"replicationcontroller/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(95),_constant=(__webpack_require__(145),__webpack_require__(11));exports.ListController=function(){function ListController(replicationControllerList,horUpdateReplicasService,horManageRCService,$stateParams,$state,$mdDialog,$http,$interpolate,$cookies,horRCResourceUsage,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this.horRCResourceUsage=horRCResourceUsage,this.RCResourceUsageData,this._scope=$scope,this.selected=[],this.globalSearchTerm,this.data=replicationControllerList,this.tableParams=null,this.data&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data})),this._horUpdateReplicasService=horUpdateReplicasService,this._horManageRCService=horManageRCService,this.namespace=$stateParams.namespace,this._state=$state,this._dialog=$mdDialog,this._http=$http,this._interpolate=$interpolate,this._cookies=$cookies,this.editFlag=!0,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Replication Controllers",state:"replicationcontrollers"}})}return _createClass(ListController,[{key:"toNamespaceDetail",value:function(objNamespace){return this._horManageRCService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horRCResourceUsage.setCallBack(self.rcResourceUsageCallBack.bind(self)),this.horRCResourceUsage.startWSMonitor(),this._scope.$on("$destroy",function(){_this.horRCResourceUsage.stopWSMonitor()})}},{key:"rcResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.RCResourceUsageData=responseData.replicationControllerList.cumulativeMetrics)}},{key:"showNothingState",value:function(){return!1}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getPodlHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod"))}},{key:"updateRC",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"areMultipleNamespacesSelected",value:function(){return"all"===this.namespace}},{key:"showUpdateReplicasDialog",value:function(event,namespace,name){var current=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,desired=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._horUpdateReplicasService.showUpdateReplicasDialog(namespace,name,current,desired)}},{key:"showDeleteDialog",value:function(event,name,namespace){var item={namespace:namespace,name:name};return this._horManageRCService.showDeleteDialog(event,item)}},{key:"showEditDialog",value:function(event,name,namespace){var item={namespace:namespace,name:name};return this._horManageRCService.showEditDialog(event,item)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _list_state=__webpack_require__(145),_new_controller=__webpack_require__(157),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"replicationcontroller/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(95);exports.NewController=function(){function NewController(horManageRCService,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._mdToast=$mdToast,this._horManageRCService=horManageRCService,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.selectedRegistryConfig,this.registryConfigList=registryConfigList,this._translate=$translate,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: v1\nkind: ReplicationController\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer();if(0===this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};this._horManageRCService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length){if(response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"))}else try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: v1\nkind: ReplicationController\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80":this.aceModel="apiVersion: v1\nkind: ReplicationController\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80\n      imagePullSecrets:\n        - name: "+this.selectedRegistryConfig,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _directive=__webpack_require__(159),_directive2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_directive),_factory=__webpack_require__(160);exports.default=angular.module("horApp.common.validators",["ngMaterial"]).service("horValidatorFactory",_factory.ValidatorFactory).directive("horValidate",_directive2.default)},function(module,exports){"use strict";function validateDirective(horValidatorFactory){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ctrl){attrs.horValidate.split(",").forEach(function(validateValidatorName){validateValidatorName=validateValidatorName.trim();var validator=horValidatorFactory.getValidator(validateValidatorName),validatorName="horValid"+validateValidatorName[0].toUpperCase()+validateValidatorName.substr(1);ctrl.$validators[validatorName]=function(value){return validator.isValid(value)}})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=validateDirective},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValidatorFactory=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_integervalidator=__webpack_require__(161);exports.ValidatorFactory=function(){function ValidatorFactory(){_classCallCheck(this,ValidatorFactory),this.validatorMap_=new Map,this.registerValidator("integer",new _integervalidator.IntegerValidator)}return _createClass(ValidatorFactory,[{key:"registerValidator",value:function(validatorName,validatorObject){if(this.validatorMap_.has(validatorName))throw new Error("Validator with name "+validatorName+" is already registered.");this.validatorMap_.set(validatorName,validatorObject)}},{key:"getValidator",value:function(validatorName){var validatorObject=this.validatorMap_.get(validatorName);if(!validatorObject)throw new Error("Given validator '"+validatorName+"' is not supported.");return validatorObject}}]),ValidatorFactory}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntegerValidator=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_validator=__webpack_require__(162);exports.IntegerValidator=function(_Validator){function IntegerValidator(){return _classCallCheck(this,IntegerValidator),_possibleConstructorReturn(this,(IntegerValidator.__proto__||Object.getPrototypeOf(IntegerValidator)).call(this))}return _inherits(IntegerValidator,_Validator),_createClass(IntegerValidator,[{key:"isValid",value:function(value){return Number(value)===value&&value%1==0||!value}}]),IntegerValidator}(_validator.Validator)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.Validator=function(){function Validator(){if(_classCallCheck(this,Validator),this.constructor===Validator)throw new TypeError('Abstract class "Validator" cannot be instantiated directly.')}return _createClass(Validator,[{key:"isValid",value:function(value){}}]),Validator}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.HpaSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.HpaSerivce=function(){function HpaSerivce($http,$state,$mdDialog,$mdToast,$cookies,$resource,$translate,$q){_classCallCheck(this,HpaSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._mdToast=$mdToast,this._cookies=$cookies,this._resource=$resource,this.cookieName,this.cookieNamespace}return _createClass(HpaSerivce,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"getUrl",value:function(obj){var ns=obj.namespace,hpaName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/horizontalpodautoscaler/namespace/"+ns+"/name/"+hpaName}},{key:"getNamespaceUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"getHpaNameKind",value:function(cookiesNamespace){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+cookiesNamespace+"/deployments"}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title("删除自动弹性伸缩").textContent("确认删除 "+item.name+" ？").targetEvent(event).ok("删除").cancel("取消");this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("services",{},{reload:!0}),self._mdToast.show(self._mdToast.simple().textContent("自动弹性伸缩删除成功").position("w320 success").hideDelay(3e3))})}},{key:"showEditDialog",value:function(event,item){var _this2=this,self=this;this.kindbox=[{kind:"服务"}];var cookiesName=item.name,cookiesNamespace=item.namespace,url=this.getUrl(item),HpaNameKind=this.getHpaNameKind(cookiesNamespace);this._dialog.show({controller:function($mdDialog,hpaData,HpaNameData){var hpanamebox=[],spec=(hpaData.data.metadata,hpaData.data.spec),Oshis=(hpaData.data.status,this);this.obj={namespaceValue:cookiesNamespace,kihdboxValue:self.kindbox[0].kind,hpanameboxValue:cookiesName,kindbox:self.kindbox,hpanamebox:hpanamebox,isEnable:!1},this.maxNumber=spec.maxReplicas,this.minNumber=spec.minReplicas,this.cpuNumber=spec.targetCPUUtilizationPercentage;this.minchange=function(maxmin){Oshis.mmopenb=!1,Oshis.mmopen=!1,(0==maxmin&&void 0!=this.maxNumber||maxmin<0&&void 0!=this.maxNumber)&&(Oshis.mmopenb=!0)},
this.maxchange=function(maxmin){Oshis.mmopen=!1,Oshis.mmopenb=!1,(0==maxmin&&void 0!=this.minNumber&&void 0!=this.maxNumber||maxmin<0&&void 0!=this.minNumber&&void 0!=this.maxNumber)&&(Oshis.mmopen=!0)},this.onLoad=function(instance){instance.expandAll()},this.answer=function(namespaceValue,kihdboxValue,hpanameboxValue,maxNumber,minNumber,cpuNumber){var obj={namespaceValue:namespaceValue,kihdboxValue:kihdboxValue,hpanameboxValue:hpanameboxValue,maxReplicas:maxNumber,minReplicas:minNumber,targetCPUUtilizationPercentage:cpuNumber};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"hpa/addhpa_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{hpaData:function(){return self._http.get(url)},HpaNameData:function(){return self._http.get(HpaNameKind)}}}).then(function(answer){var strUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+answer.namespaceValue+"/hpa/"+answer.hpanameboxValue,postdata={maxReplicas:answer.maxReplicas,minReplicas:answer.minReplicas,targetCPUUtilizationPercentage:answer.targetCPUUtilizationPercentage};return self._http({url:strUrl,method:"PUT",data:postdata})}).then(function(data){void 0==data?(_this2._mdToast.show(_this2._mdToast.simple().textContent("自动弹性伸缩修改失败!").position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this2._mdToast.show(_this2._mdToast.simple().textContent("自动弹性伸缩修改成功!").position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(){})}},{key:"getAddUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/user/"}},{key:"addHpaUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpa/:kind/:name"}},{key:"getHpaNameKindtwo",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/all/replicationcontrollers"}},{key:"getHpaNamespacesName",value:function(cookiesNamespace){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+cookiesNamespace+"/hpas"}},{key:"showAddDialog",value:function(event,item){var _this3=this,cookiesName=item.name,cookiesNamespace=item.namespace,self=this,kindbox=[{kind:"服务"}];this.kindbox=kindbox,this.kihdboxValue=kindbox[0].kind;this.addHpaUrl(),this.getHpaNameKind(cookiesNamespace);this._dialog.show({controller:function($mdToast,$mdDialog,InSideCookiesName,InSideCookiesNamespace,$http){this.mdToast=$mdToast,this._http=$http;var Oshis=this;this.obj={namespaceValue:InSideCookiesNamespace,kindbox:self.kindbox,kihdboxValue:self.kihdboxValue,hpanameboxValue:InSideCookiesName,isEnable:!0},this.kindchange=function(){"服务"==Oshis.obj.kihdboxValue?(Oshis.obj.hpanamebox=[],Oshis.obj.hpanameboxValue=null,angular.forEach(Oshis.aa,function(item){item.Deployment.metadata.namespace==Oshis.obj.namespaceValue&&(Oshis.obj.hpanamebox.push({name:item.Deployment.metadata.name,namespace:item.Deployment.metadata.namespace}),Oshis.obj.hpanameboxValue=Oshis.obj.hpanamebox[0].name)})):"ReplicationController"==Oshis.obj.kihdboxValue&&(Oshis.obj.hpanamebox=[],Oshis.obj.hpanameboxValue=null)},this.namespacechange=function(){"服务"==Oshis.obj.kihdboxValue?(Oshis.obj.hpanamebox=[],Oshis.obj.hpanameboxValue=null,angular.forEach(Oshis.aa,function(item){item.Deployment.metadata.namespace==Oshis.obj.namespaceValue&&(Oshis.obj.hpanamebox.push({name:item.Deployment.metadata.name,namespace:item.Deployment.metadata.namespace}),Oshis.obj.hpanameboxValue=Oshis.obj.hpanamebox[0].name)})):"ReplicationController"==Oshis.obj.kihdboxValue&&(Oshis.obj.hpanamebox=[],Oshis.obj.hpanameboxValue=null)};this.minchange=function(maxmin){Oshis.mmopenb=!1,Oshis.mmopen=!1,(0==maxmin&&void 0!=this.maxNumber||maxmin<0&&void 0!=this.maxNumber)&&(Oshis.mmopenb=!0)},this.maxchange=function(maxmin){Oshis.mmopen=!1,Oshis.mmopenb=!1,(0==maxmin&&void 0!=this.minNumber&&void 0!=this.maxNumber||maxmin<0&&void 0!=this.minNumber&&void 0!=this.maxNumber)&&(Oshis.mmopen=!0)},this.onLoad=function(instance){instance.expandAll()},this.answer=function(namespaceValue,kihdboxValue,hpanameboxValue,maxNumber,minNumber,cpuNumber){var obj={namespaceValue:namespaceValue,kihdboxValue:kihdboxValue,hpanameboxValue:hpanameboxValue,maxReplicas:maxNumber,minReplicas:minNumber,targetCPUUtilizationPercentage:cpuNumber};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"hpa/addhpa_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{InSideCookiesName:cookiesName,InSideCookiesNamespace:cookiesNamespace}}).then(function(answer){var databox={namespaceValue:answer.namespaceValue,kihdboxValue:answer.kihdboxValue,hpanameboxValue:answer.hpanameboxValue},strUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+databox.namespaceValue+"/hpa/"+databox.kihdboxValue+"/"+databox.hpanameboxValue,postdata={maxReplicas:answer.maxReplicas,minReplicas:answer.minReplicas,targetCPUUtilizationPercentage:answer.targetCPUUtilizationPercentage};return self._http({url:strUrl,method:"POST",data:postdata})}).then(function(data){void 0==data?(_this3._mdToast.show(_this3._mdToast.simple().textContent("自动弹性伸缩添加失败!").position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent("自动弹性伸缩添加成功!").position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(reason){void 0==reason||(_this3._mdToast.show(_this3._mdToast.simple().textContent("自动弹性伸缩已存在!").position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))})}}]),HpaSerivce}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _daemonsetlist_service=__webpack_require__(165),_daemonset_service=__webpack_require__(166),_daemonsetdetail_service=__webpack_require__(167),_daemonset_stateconfig=__webpack_require__(168),_daemonset_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_daemonset_stateconfig),_list_service=__webpack_require__(107),_pod_service=__webpack_require__(84);exports.default=angular.module("horApp.daemonSetList",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_daemonset_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).factory("horDaemonSetListResource",_daemonsetlist_service.daemonSetListResource).service("horDaemonsetService",_daemonset_service.daemonsetService).factory("horDaemonSetDetailResource",_daemonsetdetail_service.daemonSetDetailResource).factory("horDaemonSetPodsResource",_daemonsetdetail_service.daemonSetPodsResource).factory("horDaemonSetEventsResource",_daemonsetdetail_service.daemonSetEventsResource).factory("horDaemonSetResourceUsage",_daemonsetlist_service.getDaemonSetResourceUsage).factory("horDaemonSetDetailResourceUsage",_daemonsetdetail_service.getDaemonSetDetailResourceUsage).factory("horDaemoSetDetailYaml",_daemonsetdetail_service.getDaemonSetDetailYaml).factory("horDaemonSetYmlArr",_daemonsetdetail_service.daemonsetYmlArr).factory("horRegistryConfigListResource",_list_service.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function daemonSetListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/daemonsets")}function getDaemonSetResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/daemonsets";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}daemonSetListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.daemonSetListResource=daemonSetListResource,exports.getDaemonSetResourceUsage=getDaemonSetResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.daemonsetService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);exports.daemonsetService=function(){function daemonsetService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,daemonsetService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(daemonsetService,[{key:"getUrl",value:function(obj){var ns=obj.namespace,name=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/daemonset/namespace/"+ns+"/name/"+name}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Daemon Set")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Daemon Set")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("daemonset",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,deploymentData){this.deploymentData=deploymentData.data,this.obj={data:this.deploymentData,options:{mode:"tree",name:"daemonset"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"daemonset/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{deploymentData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),daemonsetService}()},function(module,exports,__webpack_require__){"use strict";function daemonSetDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/daemonsets/:objectName")}function daemonSetPodsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/daemonsets/:objectName/pods")}function daemonSetEventsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/daemonsets/:objectName/events")}function getDaemonSetDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/daemonset/namespace/:namespace/name/:objectName")}function daemonsetYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/daemonset/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function getDaemonSetDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"===obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/daemonsets/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}daemonSetDetailResource.$inject=["$resource"],daemonSetPodsResource.$inject=["$resource"],daemonSetEventsResource.$inject=["$resource"],daemonsetYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.daemonSetDetailResource=daemonSetDetailResource,exports.daemonSetPodsResource=daemonSetPodsResource,exports.daemonSetEventsResource=daemonSetEventsResource,exports.getDaemonSetDetailYaml=getDaemonSetDetailYaml,exports.daemonsetYmlArr=daemonsetYmlArr,exports.getDaemonSetDetailResourceUsage=getDaemonSetDetailResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_daemonsetlist_state.stateName,_daemonsetlist_stateconfig.config).state(_daemonsetdetail_state.stateName,_daemonsetdetail_stateconfig.config).state("daemonset.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _daemonsetlist_state=(__webpack_require__(30),__webpack_require__(169)),_daemonsetdetail_state=__webpack_require__(96),_daemonsetlist_stateconfig=__webpack_require__(170),_daemonsetdetail_stateconfig=__webpack_require__(172),_new_stateconfig=__webpack_require__(174)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="daemonset",exports.stateUrl="/daemonset"},function(module,exports,__webpack_require__){"use strict";function resolveDaemonSetList(horDaemonSetListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horDaemonSetListResource.get(obj).$promise.then(function(daemonSetList){return horUtilsService.recombineDaemonSetList(daemonSetList)})}resolveDaemonSetList.$inject=["horDaemonSetListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDaemonSetList=resolveDaemonSetList;var _hormain_state=__webpack_require__(30),_daemonsetlist_controller=__webpack_require__(171),_daemonsetlist_state=__webpack_require__(169);exports.config={url:_daemonsetlist_state.stateUrl,parent:_hormain_state.stateName,resolve:{daemonSetList:resolveDaemonSetList},views:{"":{controller:_daemonsetlist_controller.daemonSetListController,controllerAs:"$ctrl",templateUrl:"daemonset/list/daemonsetlist.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.daemonSetListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_daemonsetdetail_state=__webpack_require__(96);__webpack_require__(169),exports.daemonSetListController=function(){function daemonSetListController(daemonSetList,$stateParams,$http,$state,$mdDialog,$cookies,horDaemonsetService,horDaemonSetResourceUsage,$scope,NgTableParams,horModifyService){_classCallCheck(this,daemonSetListController),this.data=daemonSetList,this.tableParams=null,this.data&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data})),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._cookies=$cookies,this.editFlag=!0,this.namespace=$stateParams.namespace,"all"==this.namespace?this.namespaceShow=!1:this.namespaceShow=!0,this._horDaemonsetService=horDaemonsetService,this.horDaemonSetResourceUsage=horDaemonSetResourceUsage,this.daemonSetResourceUsageData,this._scope=$scope,this.globalSearchTerm,this._horModifyService=horModifyService,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Daemon Sets",state:"daemonset"}})}return daemonSetListController.$inject=["daemonSetList","$stateParams","$http","$state","$mdDialog","$cookies","horDaemonsetService","horDaemonSetResourceUsage","$scope","NgTableParams","horModifyService"],_createClass(daemonSetListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horDaemonSetResourceUsage.setCallBack(self.daemonSetResourceUsageCallBack.bind(self)),this.horDaemonSetResourceUsage.startWSMonitor(),this._scope.$on("$destroy",function(){_this.horDaemonSetResourceUsage.stopWSMonitor()})}},{key:"toNamespaceDetail",value:function(objNamespace){return this._horDaemonsetService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"daemonSetResourceUsageCallBack",value:function(responseData){if(null!==responseData){var data=responseData.daemonSetList.cumulativeMetrics;this.daemonSetResourceUsageData=data}}},{key:"showNotingState",value:function(){return!1}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getPodlHref",value:function(namespace,objName){return this._state.href(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod"))}},{key:"deleteService",value:function(event,item){return this._horDaemonsetService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectNodeSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjNodeSelector){this._horModifyService.showModifyResourceObjectNodeSelector(namespace,resourceObjType,resourceObjName,resourceObjNodeSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),daemonSetListController}()},function(module,exports,__webpack_require__){"use strict";function resolveDaemonSetDetail(horDaemonSetDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDaemonSetDetailResource.get(obj).$promise}function resolveDaemonSetPods(horDaemonSetPodsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDaemonSetPodsResource.get(obj).$promise.then(function(daemonSetPods){return horUtilsService.recombinePodList(daemonSetPods)})}function resolveDaemonSetYaml(horDaemoSetDetailYaml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDaemoSetDetailYaml.get(objParams).$promise}resolveDaemonSetDetail.$inject=["horDaemonSetDetailResource","$stateParams"],resolveDaemonSetPods.$inject=["horDaemonSetPodsResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDaemonSetDetail=resolveDaemonSetDetail,exports.resolveDaemonSetPods=resolveDaemonSetPods,exports.resolveDaemonSetYaml=resolveDaemonSetYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_daemonsetdetail_state=__webpack_require__(96),_daemonsetdetail_controller=__webpack_require__(173);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_daemonsetdetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{daemonSetDetail:resolveDaemonSetDetail,daemonSetPods:resolveDaemonSetPods,daemonSetYaml:resolveDaemonSetYaml},views:{"":{controller:_daemonsetdetail_controller.DaemonSetDetailController,controllerAs:"$ctrl",templateUrl:"daemonset/detail/daemonsetdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DaemonSetDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_daemonsetdetail_state=(__webpack_require__(169),__webpack_require__(96)),_detail_state=__webpack_require__(79),_detail_state2=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.DaemonSetDetailController=function(){function DaemonSetDetailController(daemonSetDetail,daemonSetPods,daemonSetYaml,$stateParams,$cookies,$mdDialog,$http,$state,horDaemonsetService,horManagePod,horDaemonSetDetailResourceUsage,$scope,horModifyService,NgTableParams,$resource,horDaemonSetYmlArr,$mdToast,$translate){_classCallCheck(this,DaemonSetDetailController),this._mdToast=$mdToast,this._horDaemonSetYmlArr=horDaemonSetYmlArr,this._resource=$resource,this._translate=$translate,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this._horModifyService=horModifyService,this.daemonSetDetail=this.formatDetailData(daemonSetDetail),this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(daemonSetYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.defaultAceModel=this.aceModel,this.daemonSetPods=daemonSetPods,this.podTableParams=null,this.daemonSetPods&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.daemonSetPods})),this._scope=$scope,this.horDaemonSetDetailResourceUsage=horDaemonSetDetailResourceUsage,this.daemonSetDetailResourceUsageData,this.namespace=$stateParams.namespace,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._cookies=$cookies,this.editFlag=!0,this._horDaemonsetService=horDaemonsetService,this.daemonsetItem={name:this.daemonSetDetail.name,namespace:this.daemonSetDetail.namespace},this._horManagePod=horManagePod,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Daemon Sets",state:"daemonset"},sub:this.daemonsetItem.name+" Details"})}return DaemonSetDetailController.$inject=["daemonSetDetail","daemonSetPods","daemonSetYaml","$stateParams","$cookies","$mdDialog","$http","$state","horDaemonsetService","horManagePod","horDaemonSetDetailResourceUsage","$scope","horModifyService","NgTableParams","$resource","horDaemonSetYmlArr","$mdToast","$translate"],_createClass(DaemonSetDetailController,[{key:"getNamespaceDetail",value:function(objName){return this._horDaemonsetService.goToNamespaceDetail(objName,objName)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"showNothingState",value:function(){return!this.podTableParams||0===this.podTableParams.count()}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horDaemonSetDetailResourceUsage.setCallBack(self.daemonSetDetailResourceUsageCallBack.bind(self)),this.horDaemonSetDetailResourceUsage.startWSMonitor(this.daemonsetItem.namespace),this._scope.$on("$destroy",function(){_this.horDaemonSetDetailResourceUsage.stopWSMonitor()})}},{key:"daemonSetDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.daemonSetDetailResourceUsageData=responseData.daemonSetDetail.podList.cumulativeMetrics)}},{key:"formatDetailData",value:function(daemonSetDetail){if(null==daemonSetDetail)return null;var daemonSetDetailObject={};daemonSetDetailObject.name=daemonSetDetail.DaemonSet.metadata.name,daemonSetDetailObject.namespace=daemonSetDetail.DaemonSet.metadata.namespace;var labelsArr=[];daemonSetDetail.DaemonSet.metadata.labels?angular.forEach(daemonSetDetail.DaemonSet.metadata.labels,function(value,key){var str=void 0;str=0===value.length?""+key:key+"="+value,labelsArr.push(str)}):labelsArr.push("No labels"),daemonSetDetailObject.labels=labelsArr,daemonSetDetailObject.imageArr=this.formatImages(daemonSetDetail.DaemonSet.spec.template.spec.containers),daemonSetDetailObject.states=daemonSetDetail.DaemonSet.status.currentNumberScheduled+" running",daemonSetDetail.PodInfo&&(daemonSetDetailObject.current=daemonSetDetail.PodInfo.current,daemonSetDetailObject.desired=daemonSetDetail.PodInfo.desired),daemonSetDetailObject.createTime=daemonSetDetail.DaemonSet.metadata.creationTimestamp;var podSelectorArr=[];daemonSetDetail.DaemonSet.spec.selector.matchLabels&&angular.forEach(daemonSetDetail.DaemonSet.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str=key+"="+value;podSelectorArr.push(_str)}}),daemonSetDetailObject.podSelector=podSelectorArr;var annotations=[];return daemonSetDetail.DaemonSet.metadata.annotations&&angular.forEach(daemonSetDetail.DaemonSet.metadata.annotations,function(value,key){var str=key+"="+value;annotations.push(str)}),daemonSetDetailObject.annotations=annotations,daemonSetDetailObject}},{key:"formatImages",value:function(arr){var imageArr=[];if(arr)for(var i in arr){var image={};image.name=arr[i].image,imageArr.push(image)}else imageArr="-";return imageArr}},{key:"daemonsetDeleteService",value:function(event){var item=this.daemonsetItem;return this._horDaemonsetService.showDeleteDialog(event,item)}},{key:"daemonsetUpdateService",value:function(event){var _this2=this,ns=this.daemonSetDetail.namespace,deployment=this.daemonSetDetail.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/daemonset/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(".",{},{reload:!0})})}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"deleteNodePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectNodeSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjNodeSelector){this._horModifyService.showModifyResourceObjectNodeSelector(namespace,resourceObjType,resourceObjName,resourceObjNodeSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"reload",value:function(){this.aceModel=this.defaultAceModel}},{key:"saveChange",value:function(data){var _this3=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horDaemonSetYmlArr.changeYaml(this.daemonsetItem.name,this.daemonsetItem.namespace,jsonData).then(function(data){200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(_this3.daemonsetItem.namespace,_this3.daemonsetItem.name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DaemonSetDetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList
;var _daemonsetlist_state=__webpack_require__(169),_new_controller=__webpack_require__(175),_hormain_state=__webpack_require__(30);exports.config={url:_daemonsetlist_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"daemonset/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_daemonsetdetail_state=__webpack_require__(96);exports.NewController=function(){function NewController(horDaemonsetService,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._mdToast=$mdToast,this._horDaemonsetService=horDaemonsetService,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.registryConfigList=registryConfigList,this.selectedRegistryConfig,this._translate=$translate,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: nginx-daemonset\n  namespace: "+this.namespaceString+"\nspec:\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer();if(0===this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var deploymentSpec={name:"ds.yaml",content:this.aceModel,validate:!0};this._horDaemonsetService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)_this._errorDialog.open(_this._translate.instant("Error"),_this._translate.instant("Create Failed!"));else try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: nginx-daemonset\n  namespace: "+this.namespaceString+"\nspec:\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80":this.aceModel="apiVersion: extensions/v1beta1\nkind: DaemonSet\nmetadata:\n  name: nginx-daemonset\n  namespace: "+this.namespaceString+"\nspec:\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80\n      imagePullSecrets:\n        - name: "+this.selectedRegistryConfig,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(177),_detail_service=__webpack_require__(178),_service_service=__webpack_require__(152),_service_stateconfig=__webpack_require__(179),_service_stateconfig2=_interopRequireDefault(_service_stateconfig),_pod_module=__webpack_require__(83),_pod_module2=_interopRequireDefault(_pod_module);exports.default=angular.module("horApp.service",["ngMaterial","ngResource","ui.router",_pod_module2.default.name]).config(_service_stateconfig2.default).service("horManageService",_service_service.ServiceSerivce).factory("horServiceListResource",_list_service.serviceListResource).factory("horServiceDetailResource",_detail_service.serviceDetailResource).factory("horServiceDetailPodListResource",_detail_service.serviceDetailPodListResource).factory("horServiceDetailYamlResource",_detail_service.serviceDetailYamlResource).factory("horServiceYmlArr",_detail_service.serviceYmlArr)},function(module,exports,__webpack_require__){"use strict";function serviceListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services")}serviceListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceListResource=serviceListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function serviceDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services/:objectName")}function serviceDetailPodListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services/:objectName/pods")}function serviceDetailYamlResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/service/namespace/:namespace/name/:objectName")}function serviceYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/service/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}serviceYmlArr.$inject=["$http"],serviceDetailResource.$inject=["$resource"],serviceDetailPodListResource.$inject=["$resource"],serviceDetailYamlResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceDetailResource=serviceDetailResource,exports.serviceDetailPodListResource=serviceDetailPodListResource,exports.serviceDetailYamlResource=serviceDetailYamlResource,exports.serviceYmlArr=serviceYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("service.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(180),_detail_state=__webpack_require__(102),_list_stateconfig=__webpack_require__(181),_detail_stateconfig=__webpack_require__(183),_new_stateconfig=__webpack_require__(185)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="service",exports.stateUrl="/service"},function(module,exports,__webpack_require__){"use strict";function resolveServiceList(horServiceListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horServiceListResource.get(obj).$promise.then(function(serviceList){return horUtilsService.recombineServiceList(serviceList)})}resolveServiceList.$inject=["horServiceListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceList=resolveServiceList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(182),_list_state=__webpack_require__(180);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{serviceList:resolveServiceList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"service/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(102);__webpack_require__(11),exports.ListController=function(){function ListController($stateParams,$http,$state,serviceList,horManageService,$scope,$filter,NgTableParams,horModifyService){_classCallCheck(this,ListController),this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this._horModifyService=horModifyService,this.data=serviceList,this.namespace=$stateParams.namespace,this.globalSearchTerm,this._state=$state,this._http=$http,this._horManageService=horManageService;var withStyle=!0,podStyle=!0,labelsLength=!0;angular.forEach(this.data,function(item){var labels=item.labels;"-"!=labels?(withStyle=!0,labelsLength=labels.length>1,item.labelsLength=labelsLength):(item.labels=[],withStyle=!1),item.withStyle=withStyle;var selector=item.selector,selectors="";"-"!=selector?(podStyle=!0,selector.length>1?angular.forEach(selector,function(value,key){selector.length-1==key?selectors+=value:selectors+=value+", "}):selectors=item.selector[0]):(selectors="No selector",podStyle=!1),item.selectors=selectors,item.podStyle=podStyle}),this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.data})}return ListController.$inject=["$stateParams","$http","$state","serviceList","horManageService","$scope","$filter","NgTableParams","horModifyService"],_createClass(ListController,[{key:"toNamespaceDetail",value:function(objNamespace){return this._horManageService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"labelLength",value:function(value){angular.forEach(this.data,function(item){item.name==value.name&&(value.labelsLength?item.labelsLength=!1:item.labelsLength=!0)})}},{key:"deleteService",value:function(event,item){return this._horManageService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveServiceDetail(horServiceDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceDetailResource.get(obj).$promise}function resolveServiceDetailPodList(horServiceDetailPodListResource,$stateParams,horUtilsService,$q){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceDetailPodListResource.get(obj).$promise.then(function(podList){if(!podList.items)return null;var podListArr=[],deferred=$q.defer();return podList.items.forEach(function(item){var readiness=void 0,labelsArr=[],annotationsArr=[],restartCount=0;item.status.containerStatuses&&item.status.containerStatuses.forEach(function(c){restartCount+=c.restartCount}),item.status.conditions&&item.status.conditions.forEach(function(i){"Ready"==i.type&&"True"==i.status?readiness="Ready":"Ready"==i.type&&"False"==i.status&&(readiness=i.reason)}),item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}),item.metadata.labels&&angular.forEach(item.metadata.labels,function(value,key){var str=key+"="+value;labelsArr.push(str)});var obj={state:(0,_podstatus.getPodStatus)(item),name:item.metadata.name,namespace:item.metadata.namespace,labels:labelsArr,status:(0,_podstatus.getDisplayStatus)(item),readiness:readiness,node:item.spec.nodeName,restartCount:restartCount,age:item.metadata.creationTimestamp,actions:"Actions",annotations:annotationsArr};podListArr.push(obj)}),deferred.resolve(podListArr),deferred.promise})}function resolveServiceDetailYaml(horServiceDetailYamlResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceDetailYamlResource.get(obj).$promise}resolveServiceDetail.$inject=["horServiceDetailResource","$stateParams"],resolveServiceDetailPodList.$inject=["horServiceDetailPodListResource","$stateParams","horUtilsService","$q"],resolveServiceDetailYaml.$inject=["horServiceDetailYamlResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceDetail=resolveServiceDetail,exports.resolveServiceDetailPodList=resolveServiceDetailPodList,exports.resolveServiceDetailYaml=resolveServiceDetailYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_podstatus=__webpack_require__(37),_detail_state=__webpack_require__(102),_detail_controller=__webpack_require__(184);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{serviceDetail:resolveServiceDetail,podList:resolveServiceDetailPodList,serviceYaml:resolveServiceDetailYaml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"service/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(79),_constant=__webpack_require__(11),_detail_state2=__webpack_require__(102),_detail_state3=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($http,$state,$mdDialog,$stateParams,serviceDetail,podList,horManageService,horManagePod,$cookies,$scope,horModifyService,serviceYaml,NgTableParams,$resource,horServiceYmlArr,horServiceDetailYamlResource,$mdToast,$translate){var _this=this;_classCallCheck(this,DetailController),this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,this._translate=$translate,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this.data=serviceDetail.Service.metadata,this.serviceDetail=serviceDetail,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horModifyService=horModifyService,this._horManageService=horManageService,this._horServiceYmlArr=horServiceYmlArr,this._horManagePod=horManagePod,this._horServiceDetailYamlResource=horServiceDetailYamlResource,this.item={namespace:this.serviceDetail.Service.metadata.namespace,name:this.serviceDetail.Service.metadata.name},this.tableParams=podList?new NgTableParams({count:10},{counts:[],dataset:podList}):new NgTableParams({count:0},{counts:[],dataset:podList}),this.namespace=$stateParams.namespace,this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.tabs=[{title:"Details"},{title:"Pods"}],this._cookies=$cookies,this.editFlag=!0,this.annotations=[],this.serviceDetail.Service.metadata.annotations&&angular.forEach(this.serviceDetail.Service.metadata.annotations,function(key,value){var str=value+"="+key;_this.annotations.push(str)}),this.lables=[],this.lablesStyle=!0,this.serviceDetail.Service.metadata.labels?(angular.forEach(this.serviceDetail.Service.metadata.labels,function(value,key){if(0==value.length){var str=""+key;_this.lables.push(str)}else{var _str=key+"="+value;_this.lables.push(_str)}}),this.lablesStyle=!0):this.lablesStyle=!1,this.selector=[],this.selectorStyle=!0,this.serviceDetail.Service.spec.selector?(angular.forEach(this.serviceDetail.Service.spec.selector,function(value,key){var pStr=key+"="+value;_this.selector.push(pStr)}),this.selectorStyle=!0):this.selectorStyle=!1,this.typeLoad="",this.typeLoadStyle=!0,this.serviceDetail.Service.status.loadBalancer.ingress?this.serviceDetail.Service.status.loadBalancer.ingress.length>1?angular.forEach(this.serviceDetail.Service.status.loadBalancer.ingress,function(value,key){_this.serviceDetail.Service.status.loadBalancer.ingress.length-1==key?_this.typeLoad+=value:_this.typeLoad+=value+", "}):this.typeLoad=this.serviceDetail.Service.status.loadBalancer.ingress[0].ip:this.typeLoadStyle=!1,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var yml=JSON.stringify(serviceYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(yml))}return DetailController.$inject=["$http","$state","$mdDialog","$stateParams","serviceDetail","podList","horManageService","horManagePod","$cookies","$scope","horModifyService","serviceYaml","NgTableParams","$resource","horServiceYmlArr","horServiceDetailYamlResource","$mdToast","$translate"],_createClass(DetailController,[{key:"getNamespaceDetail",value:function(objName){return this._horManageService.goToNamespaceDetail(objName,objName)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"deleteService",value:function(event){var item=this.item;return this._horManageService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event){this.selectedIndex=1}},{key:"daemonsetUpdateService",value:function(event){var _this2=this,ns=this.serviceDetail.Service.metadata.namespace,deployment=this.serviceDetail.Service.metadata.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/service/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(".",{},{reload:!0})})}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"deleteServicePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updateServicePod",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"reload",value:function(){var _this3=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horServiceDetailYamlResource.get(obj).$promise.then(function(data){var yml=JSON.stringify(data,null,2);_this3.aceModel=jsyaml.safeDump(JSON.parse(yml))})}},{key:"saveChange",value:function(){var _this4=this,aceName=this.data.name,aceNamespace=this.data.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horServiceYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this4._mdToast.show(_this4._mdToast.simple().textContent(_this4._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this4._stateParams.lastPage?_this4._state.go(".",{},{reload:!0}):_this4._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(180),_new_controller=__webpack_require__(186),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"service/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(102);exports.NewController=function(){function NewController(horManageService,$q,$state,$mdToast,$mdDialog,errorDialog,$stateParams,horNetworkPolicyListResource,horServiceDetailResource,$translate){_classCallCheck(this,NewController),this._horManageService=horManageService,this._horNetworkPolicyListResource=horNetworkPolicyListResource,this._horServiceDetailResource=horServiceDetailResource,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: Service\nmetadata:\n  name: my-service\n  namespace: "+namespaceString+"\nspec:\n  selector:\n    app: MyApp\n  ports:\n    - protocol: TCP\n      port: 80\n      targetPort: 9376\n"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),seviceSpec={name:"service.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horManageService.createResource().save(seviceSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name,obj={objectNamespace:objNamespace};_this._horNetworkPolicyListResource.get(obj).$promise.then(function(data){if(data.items&&data.items.length>0){_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"));var item=resourceObj;_this._horManageService.showCreateNetworkPolicyDialog(item)}else _this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))})}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _joblist_service=__webpack_require__(188),_jobdetail_service=__webpack_require__(189),_job_stateconfig=__webpack_require__(190),_job_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_job_stateconfig),_job_service=__webpack_require__(198);exports.default=angular.module("horApp.jobList",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_job_stateconfig2.default).service("horJobService",_job_service.JobService).factory("horJobListResource",_joblist_service.jobListResource).factory("horJobDetailResource",_jobdetail_service.jobDetailResource).factory("horJobPodsResource",_jobdetail_service.jobPodsResource).factory("horJobEventsResource",_jobdetail_service.jobEventsResource).factory("horJobResourceUsage",_joblist_service.getJobResourceUsage).factory("horJobDetailResourceUsage",_jobdetail_service.getJobDetailResourceUsage).factory("horJobDetailYaml",_jobdetail_service.getJobDetailYaml).factory("horJobYmlArr",_jobdetail_service.jobYmlArr)},function(module,exports,__webpack_require__){"use strict";function jobListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/jobs")}function getJobResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/jobs";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}jobListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.jobListResource=jobListResource,exports.getJobResourceUsage=getJobResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function jobDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/jobs/:objectName")}function jobPodsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/jobs/:objectName/pods")}function jobEventsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/jobs/:objectName/events")}function getJobDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/job/namespace/:namespace/name/:objectName")}function jobYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/job/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function getJobDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"==obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/jobs/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}jobDetailResource.$inject=["$resource"],jobPodsResource.$inject=["$resource"],jobEventsResource.$inject=["$resource"],jobYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.jobDetailResource=jobDetailResource,exports.jobPodsResource=jobPodsResource,exports.jobEventsResource=jobEventsResource,exports.getJobDetailYaml=getJobDetailYaml,exports.jobYmlArr=jobYmlArr,exports.getJobDetailResourceUsage=getJobDetailResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){
$stateProvider.state(_joblist_state.stateName,_joblist_stateconfig.config).state(_jobdetail_state.stateName,_jobdetail_stateconfig.config).state("job.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _joblist_state=(__webpack_require__(30),__webpack_require__(191)),_jobdetail_state=__webpack_require__(97),_joblist_stateconfig=__webpack_require__(192),_jobdetail_stateconfig=__webpack_require__(194),_new_stateconfig=__webpack_require__(196)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="job",exports.stateUrl="/job"},function(module,exports,__webpack_require__){"use strict";function resolveJobList(horJobListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horJobListResource.get(obj).$promise.then(function(jobList){return horUtilsService.recombineJobList(jobList)})}resolveJobList.$inject=["horJobListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveJobList=resolveJobList;var _hormain_state=__webpack_require__(30),_joblist_controller=__webpack_require__(193),_joblist_state=__webpack_require__(191);exports.config={url:_joblist_state.stateUrl,parent:_hormain_state.stateName,resolve:{jobList:resolveJobList},views:{"":{controller:_joblist_controller.jobListController,controllerAs:"$ctrl",templateUrl:"job/list/joblist.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.jobListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_jobdetail_state=__webpack_require__(97);__webpack_require__(191),exports.jobListController=function(){function jobListController(jobList,$stateParams,$http,$state,$cookies,$mdDialog,horJobService,horJobResourceUsage,$scope,NgTableParams,horModifyService){_classCallCheck(this,jobListController),this._horModifyService=horModifyService,this.globalSearchTerm,this.horJobResourceUsage=horJobResourceUsage,this.jobResourceUsageData,this._scope=$scope,this._horJobService=horJobService,this.jobList=jobList,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._cookies=$cookies,this.editFlag=!0,this.namespace=$stateParams.namespace,angular.forEach(this.jobList,function(item){var selector="";item.selector.length>1?(angular.forEach(item.selector,function(value,key){item.selector.length-1==key?selector+=value:selector+=value+", "}),item.selectorStr=selector):(selector=item.selector[0],item.selectorStr=selector),item.completions>item.parallelism?item.type="None Parallel":item.completions<item.parallelism?item.type="Parallel":item.completions===item.parallelism&&item.completions>1&&item.parallelism>1?item.type="Parallel":item.completions===item.parallelism&&1==item.parallelism&&1==item.completions&&(item.type="None Parallel")}),this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.jobList})}return jobListController.$inject=["jobList","$stateParams","$http","$state","$cookies","$mdDialog","horJobService","horJobResourceUsage","$scope","NgTableParams","horModifyService"],_createClass(jobListController,[{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horJobResourceUsage.setCallBack(self.jobResourceUsageCallBack.bind(self)),this.horJobResourceUsage.startWSMonitor(),this._scope.$on("$destroy",function(){_this.horJobResourceUsage.stopWSMonitor()})}},{key:"toNamespaceDetail",value:function(objNamespace){return this._horJobService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"jobResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.jobResourceUsageData=responseData.jobList.cumulativeMetrics)}},{key:"showNotingState",value:function(){return!1}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_jobdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"deleteService",value:function(event,item){return this._horJobService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"upPods",value:function(event,item){return this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"pods"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}}]),jobListController}()},function(module,exports,__webpack_require__){"use strict";function resolveJobDetail(horJobDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horJobDetailResource.get(obj).$promise.then(function(jobDetail){return horUtilsService.recombineJobDetail(jobDetail)})}function resolveJobPods(horJobPodsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horJobPodsResource.get(obj).$promise.then(function(jobPods){return horUtilsService.recombinePodList(jobPods)})}function resolveJobEvents(horJobEventsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horJobEventsResource.get(obj).$promise}function resolveJobYaml(horJobDetailYaml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horJobDetailYaml.get(objParams).$promise}resolveJobDetail.$inject=["horJobDetailResource","$stateParams","horUtilsService"],resolveJobPods.$inject=["horJobPodsResource","$stateParams","horUtilsService"],resolveJobEvents.$inject=["horJobEventsResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveJobDetail=resolveJobDetail,exports.resolveJobPods=resolveJobPods,exports.resolveJobEvents=resolveJobEvents,exports.resolveJobYaml=resolveJobYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_jobdetail_state=__webpack_require__(97),_jobdetail_controller=__webpack_require__(195);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_jobdetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{jobDetail:resolveJobDetail,jobPods:resolveJobPods,jobYaml:resolveJobYaml},views:{"":{controller:_jobdetail_controller.JobDetailController,controllerAs:"$ctrl",templateUrl:"job/detail/jobdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.JobDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_joblist_state=__webpack_require__(191),_jobdetail_state=__webpack_require__(97),_detail_state=__webpack_require__(79),_detail_state2=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.JobDetailController=function(){function JobDetailController(jobDetail,jobPods,$stateParams,$mdDialog,$cookies,$http,$state,horJobService,horJobDetailResourceUsage,$scope,horModifyService,jobYaml,NgTableParams,$resource,$mdToast,horJobYmlArr,horJobDetailYaml,$translate){_classCallCheck(this,JobDetailController),this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pods"==this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this._translate=$translate,this._horModifyService=horModifyService,this._horJobYmlArr=horJobYmlArr,this._horJobDetailYaml=horJobDetailYaml,this.horJobDetailResourceUsage=horJobDetailResourceUsage,this.jobDetailResourceUsageData,this._scope=$scope,this._horJobService=horJobService,this.item={namespace:jobDetail.namespace,name:jobDetail.name},this.data=jobDetail,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var yml=JSON.stringify(jobYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(yml)),this.jobDetail=jobDetail,this.podTableParams=null,this.tableParams=jobPods?new NgTableParams({count:10},{counts:[],dataset:jobPods}):new NgTableParams({count:0},{counts:[],dataset:jobPods}),this.namespace=$stateParams.namespace,this.theadcontentEvents=[],this._http=$http,this._state=$state,this._dialog=$mdDialog,this._cookies=$cookies,this.editFlag=!0}return JobDetailController.$inject=["jobDetail","jobPods","$stateParams","$mdDialog","$cookies","$http","$state","horJobService","horJobDetailResourceUsage","$scope","horModifyService","jobYaml","NgTableParams","$resource","$mdToast","horJobYmlArr","horJobDetailYaml","$translate"],_createClass(JobDetailController,[{key:"getNamespaceDetail",value:function(objName){return this._horJobService.goToNamespaceDetail(objName,objName)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horJobDetailResourceUsage.setCallBack(self.jobDetailResourceUsageCallBack.bind(self)),this.horJobDetailResourceUsage.startWSMonitor(this.item.namespace),this._scope.$on("$destroy",function(){_this.horJobDetailResourceUsage.stopWSMonitor()})}},{key:"jobDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.jobDetailResourceUsageData=responseData.jobDetail.podList.cumulativeMetrics)}},{key:"formatDetailData",value:function(jobDetail){if(null==jobDetail)return null;var jobDetailObject={};return jobDetailObject.name=jobDetail.metadata.name,jobDetailObject.namespace=jobDetail.metadata.namespace,jobDetailObject.labels=this.formatObject(jobDetail.metadata.labels),jobDetailObject.imageArr=this.formatImages(jobDetail.spec.template.spec.containers),jobDetailObject.states=jobDetail.status.currentNumberScheduled+" running",jobDetailObject.completions=jobDetail.spec.completions,jobDetailObject.parallelism=jobDetail.spec.parallelism,jobDetailObject}},{key:"formatImages",value:function(arr){var imageArr=[];if(arr)for(var i in arr){var image={};image.name=arr[i].image,imageArr.push(image)}else imageArr="-";return imageArr}},{key:"formatObject",value:function(obj){var newStr="",valueArr=[],nameArr=[],formatObject=[];for(var name in obj)nameArr.push(name);angular.forEach(obj,function(value){newStr=value,valueArr.push(newStr)});for(var i in nameArr){var _obj={name:nameArr[i],value:valueArr[i]};formatObject.push(_obj)}return formatObject}},{key:"deleteService",value:function(event){var item=this.item;return this._horJobService.showDeleteDialog(event,item)}},{key:"daemonsetUpdateService",value:function(event){var _this2=this,ns=this.jobDetail.namespace,deployment=this.jobDetail.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/job/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(_this2.jobDetail.namespace,_this2.jobDetail.name,"list"),{reload:!0})})}},{key:"updateService",value:function(event){this.selectedIndex=1}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"getListHref",value:function(namespace){return this._state.href(_joblist_state.stateName,namespace)}},{key:"jobUpdateService",value:function(){var _this3=this,ns=this.jobDetail.namespace,deployment=this.jobDetail.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/job/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this3._state.go(".",{},{reload:!0})})}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceCount){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceCount)}},{key:"reload",value:function(){var _this4=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horJobDetailYaml.get(obj).$promise.then(function(data){var yml=JSON.stringify(data,null,2);_this4.aceModel=jsyaml.safeDump(JSON.parse(yml))})}},{key:"saveChange",value:function(){var _this5=this,aceName=this.data.name,aceNamespace=this.data.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horJobYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this5._mdToast.show(_this5._mdToast.simple().textContent(_this5._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this5._stateParams.lastPage?_this5._state.go(".",{},{reload:!0}):_this5._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),JobDetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _joblist_state=__webpack_require__(191),_new_controller=__webpack_require__(197),_hormain_state=__webpack_require__(30);exports.config={url:_joblist_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"job/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_jobdetail_state=__webpack_require__(97);exports.NewController=function(){function NewController(horJobService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate){_classCallCheck(this,NewController),this._horJobService=horJobService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: pi\n  namespace: "+namespaceString+"\nspec:\n  selector: {}\n  template:\n    metadata:\n      name: pi\n    spec:\n      containers:\n        - name: pi\n          image: perl\n          command:\n            - perl\n            - '-Mbignum=bpi'\n            - '-wle'\n            - print bpi(2000)\n      restartPolicy: Never"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),jobSpec={name:"job.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horJobService.createResource().save(jobSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.JobService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);exports.JobService=function(){function JobService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,JobService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(JobService,[{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"getUrl",value:function(obj){var ns=obj.namespace,job=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/job/namespace/"+ns+"/name/"+job}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Job Delete Job")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Job Delete Job")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("job",{},{reload:!0})})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,jobData){this.jobData=jobData.data,this.obj={data:this.jobData,options:{mode:"tree",name:"Job"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"job/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{jobData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})}}]),JobService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _statefulsetlist_service=__webpack_require__(200),_statefulset_service=__webpack_require__(201),_hpa_service=__webpack_require__(163),_replicaset_service=__webpack_require__(202),_statefulsetdetail_service=__webpack_require__(203),_statefulset_stateconfig=__webpack_require__(204),_statefulset_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_statefulset_stateconfig),_pod_service=__webpack_require__(84),_list_service=__webpack_require__(107);exports.default=angular.module("horApp.statefulset",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_statefulset_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).service("horHpaService",_hpa_service.HpaService).service("horManageReplicaSet",_replicaset_service.ReplicaSetSerivce).service("horStatefulSetService",_statefulset_service.statefulsetSerivce).factory("horStatefulSetListResource",_statefulsetlist_service.statefulSetListResource).factory("horStatefulSetDetailResource",_statefulsetdetail_service.statefulSetDetailResource).factory("horStatefulSetEventsResource",_statefulsetdetail_service.statefulSetEventsResource).factory("horStatefulSetServicesResource",_statefulsetdetail_service.statefulSetServicesResource).factory("horStatefulSetResourceUsage",_statefulsetlist_service.getStatefulSetResourceUsage).factory("horStatefulSetDetailResourceUsage",_statefulsetdetail_service.getStatefulSetDetailResourceUsage).factory("horStatefulSetPodsResource",_statefulsetdetail_service.statefulSetPodsResource).factory("horStatefulSetYmlArr",_statefulsetdetail_service.statefulSetYmlArr).factory("horStatefulSetDetailYml",_statefulsetdetail_service.statefulSetDetailYml).factory("horRegistryConfigListResource",_list_service.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function statefulSetListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/statefulsets")}function getStatefulSetResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/statefulsets";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}statefulSetListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.statefulSetListResource=statefulSetListResource,exports.getStatefulSetResourceUsage=getStatefulSetResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.statefulsetSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.statefulsetSerivce=function(){function statefulsetSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,statefulsetSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(statefulsetSerivce,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"getUrl",value:function(obj){var ns=obj.namespace,objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/statefulset/namespace/"+ns+"/name/"+objName}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Stateful Set")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Stateful Set")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("statefulset",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,replicaSetData){this.replicaSetData=replicaSetData.data,this.obj={data:this.replicaSetData,options:{mode:"tree",name:"statefulset"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"statefulset/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{replicaSetData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),statefulsetSerivce}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplicaSetSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);exports.ReplicaSetSerivce=function(){function ReplicaSetSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,ReplicaSetSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return ReplicaSetSerivce.$inject=["$http","$state","$mdDialog","$resource","$translate"],_createClass(ReplicaSetSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/"+ns+"/name/"+objName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Replica Set Delete Replica Set Title")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Replica Set Delete Replica Set Title")).cancel(this._translate.instant("Replica Set Delete Replica Set Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("replicaset",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,replicaSetData){this.replicaSetData=replicaSetData.data,this.obj={data:this.replicaSetData,options:{mode:"tree",name:"ReplicaSet"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"replicaset/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{replicaSetData:function(){return self._http.get(url)}}}).then(function(answer){return console.log("click ok",answer),self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),ReplicaSetSerivce}()},function(module,exports,__webpack_require__){"use strict";function statefulSetDetailResource($resource){
return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/statefulsets/:objectName")}function statefulSetPodsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/statefulsets/:objectName/pods")}function statefulSetEventsResource($http,$q){function getStatefulSetEvents(namespace,objectName){var deferred=$q.defer();return $http.get(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespace+"/statefulsets/"+objectName+"/events").then(function(data){deferred.resolve(data)},function(reason){deferred.reject(reason)}),deferred.promise}return{getStatefulSetEvents:getStatefulSetEvents}}function getStatefulSetDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"===obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/statefulsets/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}function statefulSetServicesResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/statefulsets/:objectName/services")}function statefulSetDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/statefulset/namespace/:namespace/name/:objectName")}function statefulSetYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/statefulset/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}statefulSetDetailResource.$inject=["$resource"],statefulSetPodsResource.$inject=["$resource"],statefulSetEventsResource.$inject=["$http","$q"],statefulSetServicesResource.$inject=["$resource"],statefulSetDetailYml.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.statefulSetDetailResource=statefulSetDetailResource,exports.statefulSetPodsResource=statefulSetPodsResource,exports.statefulSetEventsResource=statefulSetEventsResource,exports.getStatefulSetDetailResourceUsage=getStatefulSetDetailResourceUsage,exports.statefulSetServicesResource=statefulSetServicesResource,exports.statefulSetDetailYml=statefulSetDetailYml,exports.statefulSetYmlArr=statefulSetYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_statefulsetlist_state.stateName,_statefulsetlist_stateconfig.config).state(_statefulsetdetail_state.stateName,_statefulsetdetail_stateconfig.config).state("statefulset.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _statefulsetlist_state=(__webpack_require__(30),__webpack_require__(205)),_statefulsetdetail_state=__webpack_require__(98),_statefulsetlist_stateconfig=__webpack_require__(206),_statefulsetdetail_stateconfig=__webpack_require__(208),_new_stateconfig=__webpack_require__(210)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="statefulset",exports.stateUrl="/statefulset"},function(module,exports,__webpack_require__){"use strict";function resolveStatefulSetList(horStatefulSetListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horStatefulSetListResource.get(obj).$promise.then(function(statefulSetList){return horUtilsService.recombineStatefulSetList(statefulSetList)})}resolveStatefulSetList.$inject=["horStatefulSetListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveStatefulSetList=resolveStatefulSetList;var _hormain_state=__webpack_require__(30),_statefulsetlist_controller=__webpack_require__(207),_statefulsetlist_state=__webpack_require__(205);exports.config={url:_statefulsetlist_state.stateUrl,parent:_hormain_state.stateName,resolve:{statefulSetList:resolveStatefulSetList},views:{"":{controller:_statefulsetlist_controller.statefulSetListController,controllerAs:"$ctrl",templateUrl:"statefulset/list/statefulsetlist.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.statefulSetListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_statefulsetdetail_state=__webpack_require__(98),_namespacedetail_state=__webpack_require__(57);exports.statefulSetListController=function(){function statefulSetListController(statefulSetList,$state,$stateParams,horStatefulSetService,$cookies,$scope,NgTableParams,horModifyService){_classCallCheck(this,statefulSetListController),this._horModifyService=horModifyService,this._state=$state,this._stateParams=$stateParams,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.statefulSetList=statefulSetList,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.statefulSetList}),this._horStatefulSetService=horStatefulSetService,this.StatefulSetResourceUsageData,this.namespace=$stateParams.namespace,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Stateful Sets",state:"statefulset"}})}return statefulSetListController.$inject=["statefulSetList","$state","$stateParams","horStatefulSetService","$cookies","$scope","NgTableParams","horModifyService"],_createClass(statefulSetListController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"deleteService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._horStatefulSetService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._state.go(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,namespace))}},{key:"getPodlHref",value:function(namespace,objName){return this._state.href(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod"))}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),statefulSetListController}()},function(module,exports,__webpack_require__){"use strict";function resolveStatefulSetDetail(horStatefulSetDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horStatefulSetDetailResource.get(obj).$promise.then(function(statefulSetDetail){return horUtilsService.recombineStatefulSetDetail(statefulSetDetail)})}function resolveStatefulSetPods(horStatefulSetPodsResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horStatefulSetPodsResource.get(obj).$promise.then(function(statefulSetPods){return horUtilsService.recombinePodList(statefulSetPods)})}function resolveStatefulSetEvents(horStatefulSetEventsResource,$stateParams){return horStatefulSetEventsResource.getStatefulSetEvents($stateParams.objectNamespace,$stateParams.objectName)}function resolveStatefulSetService(horStatefulsetServicesResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horStatefulsetServicesResource.get(obj).$promise.then(function(replicationControllerServices){return horUtilsService.recombineServiceList(replicationControllerServices)})}function resolveStatefulSetDetailYaml(horStatefulSetDetailYml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horStatefulSetDetailYml.get(objParams).$promise}resolveStatefulSetDetail.$inject=["horStatefulSetDetailResource","$stateParams","horUtilsService"],resolveStatefulSetPods.$inject=["horStatefulSetPodsResource","$stateParams","horUtilsService"],resolveStatefulSetEvents.$inject=["horStatefulSetEventsResource","$stateParams"],resolveStatefulSetService.$inject=["horStatefulsetServicesResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveStatefulSetDetail=resolveStatefulSetDetail,exports.resolveStatefulSetPods=resolveStatefulSetPods,exports.resolveStatefulSetEvents=resolveStatefulSetEvents,exports.resolveStatefulSetService=resolveStatefulSetService,exports.resolveStatefulSetDetailYaml=resolveStatefulSetDetailYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_statefulsetdetail_state=__webpack_require__(98),_statefulsetdetail_controller=__webpack_require__(209);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_statefulsetdetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{statefulSetDetail:resolveStatefulSetDetail,statefulSetPods:resolveStatefulSetPods,statefulSetYML:resolveStatefulSetDetailYaml},views:{"":{controller:_statefulsetdetail_controller.StatefulSetDetailController,controllerAs:"$ctrl",templateUrl:"statefulset/detail/statefulsetdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatefulSetDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_statefulsetdetail_state=(__webpack_require__(205),__webpack_require__(98)),_detail_state=__webpack_require__(102),_detail_state2=__webpack_require__(73),_detail_state3=__webpack_require__(79),_namespacedetail_state=__webpack_require__(57);exports.StatefulSetDetailController=function(){function StatefulSetDetailController($state,statefulSetDetail,statefulSetPods,$cookies,$stateParams,$scope,horModifyService,$resource,horStatefulSetService,statefulSetYML,horStatefulSetYmlArr,horStatefulSetDetailYml,$mdToast,horManagePod,NgTableParams){_classCallCheck(this,StatefulSetDetailController),this._state=$state,this._resource=$resource,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this.statefulSetPods=statefulSetPods,this.podTableParams=null,this.statefulSetPods&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.statefulSetPods})),this._horManagePod=horManagePod,this._mdToast=$mdToast,this._horStatefulSetService=horStatefulSetService,this._horModifyService=horModifyService,this._horStatefulSetYmlArr=horStatefulSetYmlArr,this._horStatefulSetDetailYml=horStatefulSetDetailYml,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.data=statefulSetDetail,void 0==this.data.availableReplicas&&(this.data.availableReplicas=0),this.item={namespace:this.data.namespace,name:this.data.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(statefulSetYML,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.defaultAceModel=this.aceModel,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Stateful Sets",state:"statefulset"},sub:this.data.name+" Details"})}return StatefulSetDetailController.$inject=["$state","statefulSetDetail","statefulSetPods","$cookies","$stateParams","$scope","horModifyService","$resource","horStatefulSetService","statefulSetYML","horStatefulSetYmlArr","horStatefulSetDetailYml","$mdToast","horManagePod","NgTableParams"],_createClass(StatefulSetDetailController,[{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.data.namespace,namespace))}},{key:"getServiceDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._horStatefulSetService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._state.go(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"saveChange",value:function(data){var _this=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horStatefulSetYmlArr.changeYaml(this.item.name,this.item.namespace,jsonData).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent("JSON changs success").position("w320 success").hideDelay(3e3)),"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(ns,name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent("JSON changs failure").position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horStatefulSetDetailYml.get(obj).$promise.then(function(data){_this2.aceModel=JSON.stringify(data,null,2)})}},{key:"showNothingState",value:function(){return 0===this.podTableParams.count()}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"deleteNodePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}}]),StatefulSetDetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _statefulsetlist_state=__webpack_require__(205),_new_controller=__webpack_require__(211),_hormain_state=__webpack_require__(30);exports.config={url:_statefulsetlist_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"statefulset/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_statefulsetdetail_state=__webpack_require__(98);exports.NewController=function(){function NewController(horStatefulSetService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._horStatefulSetService=horStatefulSetService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.selectedRegistryConfig,this.registryConfigList=registryConfigList,this._translate=$translate,this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: apps/v1beta1\nkind: StatefulSet\nmetadata:\n  name: example\n  namespace: "+this.namespaceString+"\nspec:\n  serviceName: nginx\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      terminationGracePeriodSeconds: 10\n      containers:\n        - name: nginx\n          image: 'gcr.io/google_containers/nginx-slim:0.8'\n          ports:\n            - containerPort: 80\n              name: web\n          volumeMounts:\n            - name: www\n              mountPath: /usr/share/nginx/html\n  volumeClaimTemplates:\n    - metadata:\n        name: www\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        storageClassName: my-storage-class\n        resources:\n          requests:\n            storage: 1Gi",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),statefulSetSpec={name:"sfs.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horStatefulSetService.createResource().save(statefulSetSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(error){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: apps/v1beta1\nkind: StatefulSet\nmetadata:\n  name: example\n  namespace: "+this.namespaceString+"\nspec:\n  serviceName: nginx\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      terminationGracePeriodSeconds: 10\n      containers:\n        - name: nginx\n          image: 'gcr.io/google_containers/nginx-slim:0.8'\n          ports:\n            - containerPort: 80\n              name: web\n          volumeMounts:\n            - name: www\n              mountPath: /usr/share/nginx/html\n  volumeClaimTemplates:\n    - metadata:\n        name: www\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        storageClassName: my-storage-class\n        resources:\n          requests:\n            storage: 1Gi":this.aceModel="apiVersion: apps/v1beta1\nkind: StatefulSet\nmetadata:\n  name: example\n  namespace: "+this.namespaceString+"\nspec:\n  serviceName: nginx\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      terminationGracePeriodSeconds: 10\n      containers:\n        - name: nginx\n          image: 'gcr.io/google_containers/nginx-slim:0.8'\n          ports:\n            - containerPort: 80\n              name: web\n          volumeMounts:\n            - name: www\n              mountPath: /usr/share/nginx/html\n      imagePullSecrets:\n        - name: "+this.selectedRegistryConfig+"         \n  volumeClaimTemplates:\n    - metadata:\n        name: www\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        storageClassName: my-storage-class\n        resources:\n          requests:\n            storage: 1Gi",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(213),_secret_service=__webpack_require__(214),_detail_service=__webpack_require__(215),_secret_stateconfig=__webpack_require__(216),_secret_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_secret_stateconfig);exports.default=angular.module("horApp.secret",["ngMaterial","ngResource","ui.router"]).config(_secret_stateconfig2.default).factory("horSecretListResource",_list_service.secretListResource).service("horSecretSerivce",_secret_service.secretSerivce).factory("horSecretDetailResource",_detail_service.secretDetailResource).factory("horSecretYmlArr",_detail_service.secretYmlArr).factory("horSecretDetailYml",_detail_service.secretDetailYml)},function(module,exports,__webpack_require__){"use strict";function secretListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/secrets")}secretListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.secretListResource=secretListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.secretSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.secretSerivce=function(){function secretSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,secretSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(secretSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/secret/namespace/"+ns+"/name/"+objName}},{key:"createResources",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Secret")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Secret")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("secret",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,replicaSetData){this.replicaSetData=replicaSetData.data,this.obj={data:this.replicaSetData,options:{mode:"tree",name:"secret"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"secret/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{replicaSetData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),secretSerivce}()},function(module,exports,__webpack_require__){"use strict";function secretDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/secrets/:objectName")}function secretDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/secret/namespace/:namespace/name/:objectName")}function secretYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/secret/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}secretDetailResource.$inject=["$resource"],secretDetailYml.$inject=["$resource"],secretYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.secretDetailResource=secretDetailResource,exports.secretDetailYml=secretDetailYml,exports.secretYmlArr=secretYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("secret.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(217)),_detail_state=__webpack_require__(78),_list_stateconfig=__webpack_require__(218),_detail_stateconfig=__webpack_require__(220),_new_stateconfig=__webpack_require__(222)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="secret",exports.stateUrl="/secret"},function(module,exports,__webpack_require__){"use strict";function resolveSecretList(horSecretListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horSecretListResource.get(obj).$promise.then(function(secretList){return horUtilsService.recombineSecretList(secretList)})}resolveSecretList.$inject=["horSecretListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveSecretList=resolveSecretList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(219),_list_state=__webpack_require__(217);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{secretList:resolveSecretList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"secret/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(78),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController(secretList,$state,$stateParams,$scope,NgTableParams,horModifyService,horSecretSerivce){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this._horSecretSerivce=horSecretSerivce,this._state=$state,angular.forEach(secretList,function(item){var ss=[];angular.forEach(item.data,function(value,key){ss.push(key),item.dataArr=ss.length})}),this.secretValue=secretList,this.namespace=$stateParams.namespace,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.secretValue}),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Config & Store",subNav:{title:"Secrets",state:"secret"}})}return ListController.$inject=["secretList","$state","$stateParams","$scope","NgTableParams","horModifyService","horSecretSerivce"],_createClass(ListController,[{key:"showNotingState",value:function(){return!1}},{key:"applyGlobalFilter",value:function(){
var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"over"))}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deleteService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._horSecretSerivce.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){var namespace=item.namespace,objName=item.name;return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"json"))}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveSecretDetail(horSecretDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horSecretDetailResource.get(obj).$promise.then(function(secretDetailList){return horUtilsService.recombineSecretDetailList(secretDetailList)})}function resolveSecretYml(horSecretDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horSecretDetailYml.get(obj).$promise}resolveSecretDetail.$inject=["horSecretDetailResource","$stateParams","horUtilsService"],resolveSecretYml.$inject=["horSecretDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveSecretDetail=resolveSecretDetail,exports.resolveSecretYml=resolveSecretYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(78),_detail_controller=__webpack_require__(221);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{secretDetail:resolveSecretDetail,secretYml:resolveSecretYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"secret/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_state=(__webpack_require__(11),__webpack_require__(217)),_utils=(__webpack_require__(78),__webpack_require__(4)),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController(secretDetail,secretYml,$mdDialog,$http,$state,$mdToast,$stateParams,$window,horSecretSerivce,$scope,horModifyService,horSecretYmlArr,horSecretDetailYml,$translate){_classCallCheck(this,DetailController),this._http=$http,this._state=$state,this._mdToast=$mdToast,this._dialog=$mdDialog,this._window=$window,this._horModifyService=horModifyService,this._horSecretDetailYml=horSecretDetailYml,this.namespace=$stateParams.namespace,this._stateParams=$stateParams,this._translate=$translate,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"json"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this._horSecretYmlArr=horSecretYmlArr;var acctionArr=[];angular.forEach(secretDetail.metadata.annotations,function(value,key){var str=key+" = "+value;acctionArr.push(str),secretDetail.dataArr=acctionArr.length});var labelNewArr=[];angular.forEach(secretDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelNewArr.push(str)}else{var _str=key+"="+value;labelNewArr.push(_str)}}),this.labelNewArr=labelNewArr,this.acctionArr=acctionArr,this.secretDetail=secretDetail,this.secretData=secretDetail.data,this._horSecretSerivce=horSecretSerivce,this.secretSetItem={namespace:this.secretDetail.metadata.namespace,name:this.secretDetail.metadata.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(secretYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return _createClass(DetailController,[{key:"formatDataValue",value:function(valueB64){return valueB64?this._window.atob(valueB64):"—"}},{key:"deleteSecret",value:function(event){var item=this.secretSetItem;return this._horSecretSerivce.showDeleteDialog(event,item)}},{key:"updateSecret",value:function(event){var item=this.secretSetItem;return this._horSecretSerivce.showEditDialog(event,item)}},{key:"getListHref",value:function(objName){return this._state.href(_list_state.stateName,{objectName:objName})}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deleteService",value:function(event){var item={};return item.namespace=this.secretSetItem.namespace,item.name=this.secretSetItem.name,this._horSecretSerivce.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._horDeploymentService.showEditDialog(event,item)}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"saveChange",value:function(){var _this=this,aceName=this.secretDetail.metadata.name,aceNamespace=this.secretDetail.metadata.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horSecretYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,_this._stateParams.lastPage,_this._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horSecretDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(217),_new_controller=__webpack_require__(223),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"secret/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(78);exports.NewController=function(){function NewController(horSecretSerivce,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate){_classCallCheck(this,NewController),this._horSecretSerivce=horSecretSerivce,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: Secret\nmetadata:\n  name: mysecret\n  namespace: "+namespaceString+"\ntype: Opaque\ndata:\n  username: YWRtaW4=\n  password: MWYyZDFlMmU2N2Rm"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("type:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName;this.aceModel;this._horSecretSerivce.createResources().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open("系统提示","创建失败");_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _components_module=__webpack_require__(2),_components_module2=_interopRequireDefault(_components_module),_history_module=__webpack_require__(225),_history_module2=_interopRequireDefault(_history_module),_deploy_stateconfig=__webpack_require__(227),_deploy_stateconfig2=_interopRequireDefault(_deploy_stateconfig),_upload_directive=__webpack_require__(109),_filereader_directive=(_interopRequireDefault(_upload_directive),__webpack_require__(108)),_errorhandling_module=(_interopRequireDefault(_filereader_directive),__webpack_require__(111)),_errorhandling_module2=_interopRequireDefault(_errorhandling_module);exports.default=angular.module("horApp.deploy",["ngMaterial","ngResource","ui.router",_components_module2.default.name,_history_module2.default.name,_errorhandling_module2.default.name]).config(_deploy_stateconfig2.default)},function(module,exports,__webpack_require__){"use strict";function initHistoryService(horHistoryService){horHistoryService.init()}initHistoryService.$inject=["horHistoryService"],Object.defineProperty(exports,"__esModule",{value:!0});var _history_service=__webpack_require__(226);exports.default=angular.module("hor.common.history",["ui.router"]).service("horHistoryService",_history_service.HistoryService).run(initHistoryService)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.HistoryService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(9),exports.HistoryService=function(){function HistoryService($state,$rootScope){_classCallCheck(this,HistoryService),this._state=$state,this._scope=$rootScope,this._previousStateName="",this._previousStateParams=null}return HistoryService.$inject=["$state","$rootScope"],_createClass(HistoryService,[{key:"init",value:function(){var _this=this;this._scope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){var prevName=fromState.name||"";_this._previousStateName=prevName,_this._previousStateParams=fromParams})}},{key:"back",value:function(defaultState){this._state.go(this._previousStateName||defaultState,this._previousStateParams)}}]),HistoryService}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function stateConfig($stateProvider){$stateProvider.state(_deploy_state.baseStateName,{controller:_deploy_controller2.default,controllerAs:"$ctrl",url:"/deploy",parent:_hormain_state.stateName,abstract:!0,templateUrl:"deploy/deploy.html"}).state(_deploy_state.deployFileStateName,{controller:_deployfromfile_controller2.default,controllerAs:"$ctrl",url:"/file",parent:_deploy_state.baseStateName,templateUrl:"deploy/deployfromfile.html"})}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _hormain_state=__webpack_require__(30),_deploy_controller=__webpack_require__(228),_deploy_controller2=_interopRequireDefault(_deploy_controller),_deploy_state=__webpack_require__(9),_deployfromfile_controller=__webpack_require__(229),_deployfromfile_controller2=_interopRequireDefault(_deployfromfile_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_deploy_state=__webpack_require__(9),DeployController=function(){function DeployController($state){_classCallCheck(this,DeployController),this.selection=$state.current.name,this.appOption=_deploy_state.deployAppStateName,this.fileOption=_deploy_state.deployFileStateName,this._state=$state}return DeployController.$inject=["$state"],_createClass(DeployController,[{key:"changeSelection",value:function(){this._state.go(this.selection)}}]),DeployController}();exports.default=DeployController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespacelist_state=__webpack_require__(61),_constant=__webpack_require__(11),DeployFromFileController=(__webpack_require__(9),function(){function DeployFromFileController($resource,$q,horHistoryService,errorDialog,$mdDialog,$state,$scope){_classCallCheck(this,DeployFromFileController),this.form,this.file={name:"",content:""},this._q=$q,this._resource=$resource,this._errorDialog=errorDialog,this._horHistoryService=horHistoryService,this._isDeployInProgress=!1,this._mdDialog=$mdDialog,this._state=$state,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Establish"})}return DeployFromFileController.$inject=["$resource","$q","horHistoryService","errorDialog","$mdDialog","$state","$scope"],_createClass(DeployFromFileController,[{key:"deploy",value:function(){var _this=this,validate=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],deploymentSpec={name:this.file.name,content:this.file.content,validate:validate};if(deploymentSpec.name){var strName=deploymentSpec.name;if(!strName||!strName.endsWith(".yml")&&!strName.endsWith(".yaml"))return void this._errorDialog.open("系统提示","无效的文件类型,请选择.yml或.yaml格式的文件！");var defer=this._q.defer(),deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",arrKinds=[],content=deploymentSpec.content;_constant.HOR_KIND_NAME.map(function(item){-1!=content.indexOf(item)&&arrKinds.push(item)});var createKindNameStr="";arrKinds.map(function(item){item=item.replace("kind: ",""),createKindNameStr+=item+" "});var kindState=void 0;_constant.HOR_KIND_NAME_STATE.map(function(item){item.name==createKindNameStr.trim()&&(kindState=item.state)});var resource=this._resource(deployUrl,{},{save:{method:"POST"}});this._isDeployInProgress=!0,resource.save(deploymentSpec,function(response){if(defer.resolve(response),console.log("Deployment is completed: ",response),response.Error.length>0)return void _this._errorDialog.open("系统提示","创建失败");_this._mdDialog.show(_this._mdDialog.alert().clickOutsideToClose(!0).title("系统提示").textContent("成功创建 "+createKindNameStr+"对象").ok("关闭")).then(function(result){_this._state.go(kindState,{},{reload:!0})})},function(err){defer.reject(err),_this._hasValidationError(err.data)?_this._handleDeployAnywayDialog(err.data):_this._errorDialog.open("系统提示","创建失败")}),defer.promise.finally(function(){_this._state.go(".",{},{reload:!0}),_this._isDeployInProgress=!1})}}},{key:"_hasValidationError",value:function(err){return err.indexOf("validate=false")>-1}},{key:"isDeployDisabled",value:function(){return this._isDeployInProgress}},{key:"_handleDeployAnywayDialog",value:function(err){var _this2=this;showDeployAnywayDialog(this.mdDialog_,"发生验证错误","确定想继续部署?",err,"是","否").then(function(){_this2.deploy(!1)})}},{key:"cancel",value:function(){this._horHistoryService.back(_namespacelist_state.stateName)}}]),DeployFromFileController}());exports.default=DeployFromFileController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(231),_detail_service=__webpack_require__(232),_configmaps_service=__webpack_require__(233),_configmaps_stateconfig=__webpack_require__(237),_configmaps_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_configmaps_stateconfig);exports.default=angular.module("horApp.configmaps",["ngMaterial","ngResource","ui.router","ngMaterial","ngMaterialSidemenu"]).config(_configmaps_stateconfig2.default).service("horConfigmapsService",_configmaps_service.configmapsService).factory("horConfigMapsListResource",_list_service.configMapsListResource).factory("horConfigMapsDetailResource",_detail_service.configmapsDetailResource).factory("horConfigMapsDetailYaml",_detail_service.configmapsDetailYaml).factory("horConfigmapYmlArr",_detail_service.configmapYmlArr)},function(module,exports,__webpack_require__){"use strict";function configMapsListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/configmaps")}configMapsListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.configMapsListResource=configMapsListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function configmapsDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/configmaps/:objectName")}function configmapsDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/:namespace/name/:objectName")}function configmapYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}configmapsDetailResource.$inject=["$resource"],configmapYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.configmapsDetailResource=configmapsDetailResource,exports.configmapsDetailYaml=configmapsDetailYaml,exports.configmapYmlArr=configmapYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.configmapsService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);__webpack_require__(234),exports.configmapsService=function(){function configmapsService($http,$state,$mdDialog,$resource,$translate,$stateParams,$mdToast){_classCallCheck(this,configmapsService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate,this._stateParams=$stateParams,this._mdToast=$mdToast}return _createClass(configmapsService,[{key:"goToNamespaceDetail",value:function(objNamespace,objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"getUrl",value:function(obj){var ns=obj.namespace,configmap=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+configmap}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Config Map")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+" ？").targetEvent(event).ok(this._translate.instant("Delete Config Map")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("configmap",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,configmapsData){console.log(configmapsData),this.configmapsData=configmapsData.data,console.log(this.configmapsData),this.obj={data:this.configmapsData,options:{mode:"tree",name:"Configmaps"}},this.onLoad=function(instance){console.log(instance),console.log(instance.expandAll()),instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"configmaps/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{configmapsData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})}},{key:"showCreatConfigMapsDialog",value:function(event){var self=this,url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this._dialog.show({controller:function($mdDialog){this.onLoad=function(instance){instance.expandAll()},this.answer=function(name){this.aceModel="apiVersion: v1\nkind: ConfigMap\nmetadata:\n    name: "+name+"\n    namespace: "+namespaceString+"\ndata:\n";var obj={name:"dp.yaml",content:this.aceModel,validate:!0};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"configmaps/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return self._http({url:url,method:"POST",data:answer},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})})}},{key:"showCreatConfigMapDialog",value:function(item){var ns=item.metadata.namespace,name=item.metadata.name,confimapUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+name,self=this;self.configdata=item;"all"===this._stateParams.namespace||this._stateParams.namespace;this._dialog.show({controller:function($mdDialog){this.onLoad=function(instance){instance.expandAll()},this.answer=function(name,con,index){var configkey=[];if(angular.forEach(self.configdata.data,function(value,key){configkey.push(key)}),configkey.indexOf(name)){self.configdata.data[name]=con;var _obj={apiVersion:"v1",data:self.configdata.data,kind:"ConfigMap",metadata:self.configdata.metadata};$mdDialog.hide(_obj)}else{self._mdToast.show(self._mdToast.simple().textContent(self._translate.instant("配置名称已存在")).position("w320").hideDelay(3e3))}},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"configmaps/add_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){if(console.log(answer),""!=answer)return self._http({url:confimapUrl,method:"PUT",data:answer}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})})}},{key:"showEditConfigMapDialog",value:function(item,key,value){var ns=item.metadata.namespace,name=item.metadata.name,confimapUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+name,self=this;self.configdata=item;"all"===this._stateParams.namespace||this._stateParams.namespace;this._dialog.show({controller:function($mdDialog){this.obj={name:key,con:value},this.onLoad=function(instance){instance.expandAll()},this.answer=function(name,con){self.configdata.data[name]=con;var obj={apiVersion:"v1",data:self.configdata.data,kind:"ConfigMap",metadata:self.configdata.metadata};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"configmaps/edit_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return console.log(answer),self._http({url:confimapUrl,method:"PUT",data:answer}).then(function(data){200==data.status&&self._mdToast.show(self._mdToast.simple().textContent(self._translate.instant("修改配置文件成功")).position("w320").hideDelay(3e3)),self._state.go(".",{},{reload:!0})},function(){})})}},{key:"showDeleteConfigMapDialog",value:function(item,key,value){var ns=item.metadata.namespace,name=item.metadata.name,confimapUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+name,self=this;self.configdata=item;"all"===this._stateParams.namespace||this._stateParams.namespace;this._dialog.show({controller:function($mdDialog){this.obj={name:key,con:value},this.onLoad=function(instance){instance.expandAll()},this.answer=function(){var delname=this.obj.name;delete self.configdata.data[delname];var obj={apiVersion:"v1",data:self.configdata.data,kind:"ConfigMap",metadata:self.configdata.metadata};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"configmaps/delete_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}).then(function(answer){return self._http({url:confimapUrl,method:"PUT",data:answer}).then(function(data){console.log(data),200==data.status&&self._mdToast.show(self._mdToast.simple().textContent(self._translate.instant("删除成功")).position("w320").hideDelay(3e3)),self._state.go(".",{},{reload:!0})},function(reason){})})}}]),configmapsService}()},function(module,exports,__webpack_require__){"use strict";function resolveConfigmapsDetail(horConfigMapsDetailResource,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horConfigMapsDetailResource.get(objParams).$promise}function resolveConfigmapsYaml(horConfigMapsDetailYaml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horConfigMapsDetailYaml.get(objParams).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveConfigmapsDetail=resolveConfigmapsDetail,exports.resolveConfigmapsYaml=resolveConfigmapsYaml;var _detail_state=__webpack_require__(99),_detail_controller=__webpack_require__(235),_utils=__webpack_require__(4),_hormain_state=__webpack_require__(30);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{configmapsDetail:resolveConfigmapsDetail,configmapsYaml:resolveConfigmapsYaml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"configmaps/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}
}(),_utils=__webpack_require__(4),_list_state=__webpack_require__(236),_detail_state=__webpack_require__(99),_constant=__webpack_require__(11);__webpack_require__(57),exports.DetailController=function(){function DetailController($sce,configmapsDetail,configmapsYaml,horConfigmapsService,$state,$cookies,$scope,$http,$stateParams,horModifyService,$resource,horConfigmapYmlArr,$mdToast,horConfigMapsDetailYaml,$translate){_classCallCheck(this,DetailController),this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this.namespace=$stateParams.namespace,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,this._translate=$translate,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this._horConfigmapsService=horConfigmapsService,this._horConfigmapYmlArr=horConfigmapYmlArr,this._horConfigMapsDetailYaml=horConfigMapsDetailYaml,this.data=configmapsDetail,this._state=$state,this._scope=$scope,this._cookies=$cookies,this._http=$http,this._horModifyService=horModifyService,this.editFlag=!0,this.arr=[];for(var item in configmapsDetail.data){var obj={};obj.title=item,obj.data=$sce.trustAsHtml(configmapsDetail.data[item].replace(/\n/g,"<br/>")),this.arr.push(obj)}var labels=configmapsDetail.metadata.labels,arrLabels=[],withStyle=!0;if(labels){for(var _item in labels)if(0==(""+labels[_item]).length){var label=""+_item;arrLabels.push(label)}else{var _label=_item+"="+labels[_item];arrLabels.push(_label)}withStyle=!0}else withStyle=!1;configmapsDetail.metadata.withStyle=withStyle,configmapsDetail.metadata.arrLabels=arrLabels;var annotationsArr=[];if(configmapsDetail.metadata.annotations)for(var _item2 in configmapsDetail.metadata.annotations){var _label2=_item2+"="+configmapsDetail.metadata.annotations[_item2];annotationsArr.push(_label2)}configmapsDetail.metadata.annotationsArr=annotationsArr,this.item={namespace:configmapsDetail.metadata.namespace,name:configmapsDetail.metadata.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var yml=JSON.stringify(configmapsYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(yml))}return DetailController.$inject=["$sce","configmapsDetail","configmapsYaml","horConfigmapsService","$state","$cookies","$scope","$http","$stateParams","horModifyService","$resource","horConfigmapYmlArr","$mdToast","horConfigMapsDetailYaml","$translate"],_createClass(DetailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1),this.onLoad=function(instance){instance.expandAll()}}},{key:"getNamespaceDetail",value:function(objName){return this._horConfigmapsService.goToNamespaceDetail(objName,objName)}},{key:"deleteService",value:function(event){var item=this.item;return this._horConfigmapsService.showDeleteDialog(event,item)}},{key:"updateService",value:function(){this.selectedIndex=1}},{key:"getListHref",value:function(namespace){return this._state.href(_list_state.stateName,namespace)}},{key:"daemonsetUpdateService",value:function(event){var _this=this,ns=this.data.metadata.namespace,deployment=this.data.metadata.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this._state.go(".",{},{reload:!0})})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horConfigMapsDetailYaml.get(obj).$promise.then(function(data){var yml=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(yml))})}},{key:"saveChange",value:function(){var _this3=this,aceName=this.data.metadata.name,aceNamespace=this.data.metadata.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(console.log(newModel),0!=this.aceModel.length)return this._horConfigmapYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){console.log(newModel),console.log(data),200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_detail_state.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="configmap",exports.stateUrl="/configmaps"},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("configmap.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(236),_list_stateconfig=__webpack_require__(238),_detail_state=__webpack_require__(99),_detail_stateconfig=__webpack_require__(234),_new_stateconfig=__webpack_require__(240)},function(module,exports,__webpack_require__){"use strict";function resolveConfigmapsList(horConfigMapsListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horConfigMapsListResource.get(obj).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveConfigmapsList=resolveConfigmapsList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(236),_list_controller=__webpack_require__(239);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{configmapsList:resolveConfigmapsList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"configmaps/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(99),_constant=__webpack_require__(11);exports.ListController=function(){function ListController(configmapsList,horConfigMapsListResource,horConfigmapsService,$state,$stateParams,$cookies,$scope,$filter,NgTableParams,horModifyService){_classCallCheck(this,ListController),this.globalSearchTerm,this._state=$state,this._stateParams=$stateParams,this._cookies=$cookies,this._horModifyService=horModifyService,this._horConfigmapsService=horConfigmapsService,this.editFlag=!0,this.currentUser=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY),console.log(this.currentUser),angular.forEach(configmapsList.items,function(item){var labels=item.metadata.labels,arrLabels=[];for(var _item in labels)if(0==(""+labels[_item]).length){var label=""+_item;arrLabels.push(label)}else{var _label=_item+"="+labels[_item];arrLabels.push(_label)}var dataLength=0,data=item.data;for(var _item2 in data)dataLength++;item.metadata.dataLength=dataLength,item.metadata.arrLabels=arrLabels}),this.configmapsList=configmapsList,angular.forEach(this.configmapsList.items,function(item){var annotationsArr=[];if(item.metadata.annotations)for(var data in item.metadata.annotations){var annotations=data+"="+item.metadata.annotations[data];annotationsArr.push(annotations)}item.metadata.annotationsArr=annotationsArr}),this.data=this.configmapsList.items,console.log("data",this.data);var configmapLsit=[];angular.forEach(this.data,function(item){console.log(item);var valuearr=[];void 0==item.data?item.data={}:angular.forEach(item.data,function(key,value){var arr=value;valuearr.push(arr)}),configmapLsit.push([item,valuearr])}),this.configmapLsit=configmapLsit,console.log(configmapLsit),this.show=!1,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.configmapLsit})}return ListController.$inject=["configmapsList","horConfigMapsListResource","horConfigmapsService","$state","$stateParams","$cookies","$scope","$filter","NgTableParams","horModifyService"],_createClass(ListController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"hasSubpanes",value:function(arr){return angular.isArray(arr)&&arr.length>0}},{key:"toNamespaceDetail",value:function(objNamespace){return this._horConfigmapsService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({"metadata.name":term})}},{key:"dataLength",value:function(data){var dataLength=0;for(var item in data)dataLength++;return dataLength}},{key:"deleteService",value:function(event,item){return this._horConfigmapsService.showDeleteDialog(event,item)}},{key:"deleteConfigMap",value:function(item,key,value){return this._horConfigmapsService.showDeleteConfigMapDialog(item,key,value)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.metadata.namespace,item.metadata.name,"yaml"))}},{key:"creatConfigMaps",value:function(event){return this._horConfigmapsService.showCreatConfigMapsDialog(event)}},{key:"creatConfigMap",value:function(event){return this._horConfigmapsService.showCreatConfigMapDialog(event)}},{key:"editConfigMap",value:function(event,key,value){return this._horConfigmapsService.showEditConfigMapDialog(event,key,value)}},{key:"$onInit",value:function(){}},{key:"hasSubpanes",value:function(arr){return angular.isArray(arr)&&arr.length>0}},{key:"panePermission",value:function(p){return!0}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(236),_new_controller=__webpack_require__(241),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"configmaps/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(4),__webpack_require__(99),exports.NewController=function(){function NewController(horConfigmapsService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate){_classCallCheck(this,NewController),this._horConfigmapsService=horConfigmapsService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: example-config\n  namespace: "+namespaceString+"\ndata:\n  example.property.1: hello\n  example.property.2: world\n  example.property.file: |-\n    property.1=value-1\n    property.2=value-2\n    property.3=value-3\n"}return _createClass(NewController,[{key:"createResource",value:function(){var defer=this._q.defer(),configmapSpec={name:"dp.yaml",content:this.aceModel,validate:!0};console.log(configmapSpec),0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horConfigmapsService.createResource().save(configmapSpec,function(response){defer.resolve(response)})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _deployment_stateconfig=__webpack_require__(243),_deployment_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_deployment_stateconfig),_deployment_service=__webpack_require__(251),_replicaset_service=__webpack_require__(202),_hpa_service=__webpack_require__(163),_list_service=__webpack_require__(252),_detail_service=__webpack_require__(253),_pod_service=__webpack_require__(84),_list_service2=__webpack_require__(107);exports.default=angular.module("horApp.deployment",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_deployment_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).service("horHpaService",_hpa_service.HpaService).service("horManageReplicaSet",_replicaset_service.ReplicaSetSerivce).service("horDeploymentService",_deployment_service.deploymentService).factory("horDeploymentListResource",_list_service.deploymentListResource).factory("horDeploymentDetailResource",_detail_service.deploymentDetailResource).factory("horNewReplicaSetDetailResource",_detail_service.newReplicaSetDetailResource).factory("horOldReplicaSetsDetailResource",_detail_service.oldReplicaSetsDetailResource).factory("horDeploymentHpaDetailResource",_detail_service.deploymentHpaDetailResource).factory("horEvnetDetailResource",_detail_service.eventDetailResource).factory("horDeploymentResoruceUsage",_list_service.getDeploymentResourceUsage).factory("horDeploymentDetailResourceUsage",_detail_service.getDeploymentDetailResourceUsage).factory("horDeploymentYmlArr",_detail_service.deploymentYmlArr).factory("horDeploymentDetailYml",_detail_service.deploymentDetailYml).factory("horDeploymentPodResource",_detail_service.deploymentPodsResource).factory("horRegistryConfigListResource",_list_service2.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("deployment.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(244),_list_stateconfig=__webpack_require__(245),_detail_state=__webpack_require__(101),_detail_stateconfig=__webpack_require__(247),_new_stateconfig=__webpack_require__(249)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="deployment",exports.stateUrl="/deployment"},function(module,exports,__webpack_require__){"use strict";function resolveDeploymentList(horDeploymentListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horDeploymentListResource.get(obj).$promise.then(function(deploymentList){return horUtilsService.recombineDeploymentList(deploymentList)},function(reason){console.log(reason)})}resolveDeploymentList.$inject=["horDeploymentListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDeploymentList=resolveDeploymentList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(244),_list_controller=__webpack_require__(246);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{deploymentList:resolveDeploymentList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"deployment/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(101),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController(deploymentList,$state,$stateParams,horDeploymentService,$cookies,horDeploymentResoruceUsage,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this._state=$state,this._stateParams=$stateParams,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.namespace=$stateParams.namespace,this.deploymentList=deploymentList,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.deploymentList}),this._horDeploymentService=horDeploymentService,this.horDeploymentResoruceUsage=horDeploymentResoruceUsage,this.deploymentResourceUsageData}return ListController.$inject=["deploymentList","$state","$stateParams","horDeploymentService","$cookies","horDeploymentResoruceUsage","$scope","NgTableParams","horModifyService"],_createClass(ListController,[{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horDeploymentResoruceUsage.setCallBack(self.deploymentResourceUsageCallBack.bind(self)),this.horDeploymentResoruceUsage.startWSMonitor(),this._scope.$on("$destroy",function(){_this.horDeploymentResoruceUsage.stopWSMonitor()})}},{key:"deploymentResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.deploymentResourceUsageData=responseData.deploymentList.cumulativeMetrics)}},{key:"deleteService",value:function(event,item){return this._horDeploymentService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getPodlHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod"))}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveDeploymentDetail(horDeploymentDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentDetailResource.get(objParams).$promise.then(function(deploymentDetail){return horUtilsService.recombineDeploymentDetail(deploymentDetail)})}function resolveDeploymentPod(horDeploymentPodResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentPodResource.get(objParams).$promise.then(function(deploymentPods){return horUtilsService.recombinePodList(deploymentPods)})}function resolveNewReplicasetsDetail(horNewReplicaSetDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horNewReplicaSetDetailResource.get(objParams).$promise.then(function(rsList){return horUtilsService.recombineReplicaSetList(rsList)})}function resolveOldReplicasetsDetail(horOldReplicaSetsDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horOldReplicaSetsDetailResource.get(objParams).$promise.then(function(rsList){return horUtilsService.recombineReplicaSetList(rsList)})}function resolveHpaDetail(horDeploymentHpaDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentHpaDetailResource.get(objParams).$promise.then(function(hpaList){return horUtilsService.recombineHpaList(hpaList)})}function resolveEventDetail(horEvnetDetailResource,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horEvnetDetailResource.get(objParams).$promise}function resolveDeploymentYml(horDeploymentDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentDetailYml.get(obj).$promise}resolveDeploymentYml.$inject=["horDeploymentDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDeploymentDetail=resolveDeploymentDetail,exports.resolveDeploymentPod=resolveDeploymentPod,exports.resolveNewReplicasetsDetail=resolveNewReplicasetsDetail,exports.resolveOldReplicasetsDetail=resolveOldReplicasetsDetail,exports.resolveHpaDetail=resolveHpaDetail,exports.resolveEventDetail=resolveEventDetail,exports.resolveDeploymentYml=resolveDeploymentYml;var _detail_state=__webpack_require__(101),_detail_controller=__webpack_require__(248),_utils=__webpack_require__(4),_hormain_state=__webpack_require__(30);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{deploymentDetail:resolveDeploymentDetail,deploymentPods:resolveDeploymentPod,deploymentYml:resolveDeploymentYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"deployment/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=(__webpack_require__(94),__webpack_require__(244),__webpack_require__(11)),_detail_state2=__webpack_require__(101),_detail_state3=__webpack_require__(79),_detail_state4=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($state,deploymentDetail,deploymentPods,horDeploymentService,$cookies,$stateParams,horDeploymentDetailResourceUsage,$scope,deploymentYml,horModifyService,$resource,horDeploymentYmlArr,$mdToast,horDeploymentDetailYml,horManagePod,NgTableParams,$translate){_classCallCheck(this,DetailController),this._state=$state,this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this._translate=$translate,this.deploymentPods=deploymentPods,this.podTableParams=null,this.deploymentPods&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.deploymentPods})),this._horManagePod=horManagePod,this._horDeploymentYmlArr=horDeploymentYmlArr,this.namespace=$stateParams.namespace,this._horModifyService=horModifyService,this._horDeploymentDetailYml=horDeploymentDetailYml,this.horDeploymentDetailResourceUsage=horDeploymentDetailResourceUsage,this.deploymentDetailResoruceUsageData,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.data=deploymentDetail,void 0==this.data.availableReplicas&&(this.data.availableReplicas=0),this._horDeploymentService=horDeploymentService,this.item={namespace:this.data.namespace,name:this.data.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(deploymentYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return DetailController.$inject=["$state","deploymentDetail","deploymentPods","horDeploymentService","$cookies","$stateParams","horDeploymentDetailResourceUsage","$scope","deploymentYml","horModifyService","$resource","horDeploymentYmlArr","$mdToast","horDeploymentDetailYml","horManagePod","NgTableParams","$translate"],_createClass(DetailController,[{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horDeploymentDetailResourceUsage.setCallBack(self.deploymentDetailResourceUsageCallBack.bind(self)),this.horDeploymentDetailResourceUsage.startWSMonitor(this.item.namespace),this._scope.$on("$destroy",function(){_this.horDeploymentDetailResourceUsage.stopWSMonitor()})}},{key:"deploymentDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.deploymentDetailResoruceUsageData=responseData.deploymentDetail.podList.cumulativeMetrics)}},{key:"deleteService",value:function(event){var item=this.item;return this._horDeploymentService.showDeleteDialog(event,item)}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"updateService",value:function(event){var _this2=this,ns=this.data.namespace,deployment=this.data.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(".",{},{reload:!0})})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"saveChange",value:function(){var _this3=this,aceName=this.data.name,aceNamespace=this.data.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horDeploymentYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"getUbavailableResource",value:function(){void 0==this.data.availableReplicas&&(this.data.availableReplicas=0);var num=this.data.allreplicas-this.data.availableReplicas;return Math.abs(num)}},{key:"reload",value:function(){var _this4=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName}
;this._horDeploymentDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this4.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteNodePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showNothingState",value:function(){return!this.podTableParams||0===this.podTableParams.count()}},{key:"refreshPage",value:function(){return this._state.go(".",{},{reload:!0})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _list_state=__webpack_require__(244),_new_controller=__webpack_require__(250),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"deployment/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(101);exports.NewController=function(){function NewController(horDeploymentService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._horDeploymentService=horDeploymentService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.selectedRegistryConfig,this.registryConfigList=registryConfigList,this._translate=$translate,this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horDeploymentService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80":this.aceModel="apiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80\n      imagePullSecrets:\n        - name: "+this.selectedRegistryConfig,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deploymentService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.deploymentService=function(){function deploymentService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,deploymentService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(deploymentService,[{key:"getUrl",value:function(obj){var ns=obj.namespace,deployment=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/"+ns+"/name/"+deployment}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Deployment Delete Deployment")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Deployment Delete Deployment")).cancel(this._translate.instant("Deployment Change Count Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(data){console.log("click",data,status),self._state.go("deployment",{},{reload:!0})})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,deploymentData){this.deploymentData=deploymentData.data,this.obj={data:this.deploymentData,options:{mode:"tree",name:"Deployment"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"deployment/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{deploymentData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}}]),deploymentService}()},function(module,exports,__webpack_require__){"use strict";function deploymentListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments")}function getDeploymentResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/deployments";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}deploymentListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.deploymentListResource=deploymentListResource,exports.getDeploymentResourceUsage=getDeploymentResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function deploymentDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/:objectName")}function deploymentPodsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/:objectName/pods")}function newReplicaSetDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/:objectName/newreplicasets")}function oldReplicaSetsDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/:objectName/oldreplicasets")}function deploymentHpaDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpas/Deployment/:objectName")}function eventDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/:objectName/events")}function getDeploymentDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"===obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/deployments/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}function deploymentDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/:namespace/name/:objectName")}function deploymentYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}deploymentDetailYml.$inject=["$resource"],deploymentYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.deploymentDetailResource=deploymentDetailResource,exports.deploymentPodsResource=deploymentPodsResource,exports.newReplicaSetDetailResource=newReplicaSetDetailResource,exports.oldReplicaSetsDetailResource=oldReplicaSetsDetailResource,exports.deploymentHpaDetailResource=deploymentHpaDetailResource,exports.eventDetailResource=eventDetailResource,exports.getDeploymentDetailResourceUsage=getDeploymentDetailResourceUsage,exports.deploymentDetailYml=deploymentDetailYml,exports.deploymentYmlArr=deploymentYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _ingress_stateconfig=__webpack_require__(255),_ingress_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ingress_stateconfig),_ingress_service=__webpack_require__(263),_list_service=__webpack_require__(264),_detail_service=__webpack_require__(265);exports.default=angular.module("horApp.ingress",["ngMaterial","ngResource","ui.router"]).config(_ingress_stateconfig2.default).service("horIngressService",_ingress_service.ingressService).factory("horIngressListResource",_list_service.ingressListResource).factory("horIngressDetailResource",_detail_service.ingressDetailResource).factory("horIngressYmlArr",_detail_service.ingressYmlArr).factory("horIngressDetailYamle",_detail_service.ingressDetailYaml).factory("horServiceListResource",_detail_service.serviceListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("ingress.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(256),_list_stateconfig=__webpack_require__(257),_detail_state=__webpack_require__(100),_detail_stateconfig=__webpack_require__(259),_new_stateconfig=__webpack_require__(261)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="ingress",exports.stateUrl="/ingress"},function(module,exports,__webpack_require__){"use strict";function resolveIngressList(horIngressListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horIngressListResource.get(obj).$promise}resolveIngressList.$inject=["horIngressListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveIngressList=resolveIngressList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(256),_list_controller=__webpack_require__(258);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{ingressList:resolveIngressList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"ingress/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(100),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController(ingressList,$state,$stateParams,$cookies,$scope,NgTableParams,horModifyService,horIngressService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this._state=$state,this._stateParams=$stateParams,angular.forEach(ingressList.items,function(item){var annotations=item.metadata.annotations,arrAnnotations=[];if(annotations)for(var _item in annotations){var annotation=_item+"="+annotations[_item];arrAnnotations.push(annotation)}item.newannotation=arrAnnotations;var hostArr=[],hostStr=null;void 0===item.spec.rules[0].host?(hostStr="No hosts",hostArr.push(hostStr)):angular.forEach(item.spec.rules,function(rule){hostStr=rule.host,hostArr.push(hostStr)}),item.host=hostArr}),this.globalSearchTerm;var withStyle=!0;ingressList.items&&angular.forEach(ingressList.items,function(item){var labels=item.metadata.labels,labelsArr=[];if(labels){for(var _item2 in labels)if(0==labels[_item2].length){var label=""+_item2;labelsArr.push(label)}else{var _label=_item2+"="+labels[_item2];labelsArr.push(_label)}withStyle=!0}else withStyle=!1;item.newlabel=labelsArr}),console.log("uu---",ingressList),this._horIngressService=horIngressService,this.namespace=$stateParams.namespace,this.ingressList=ingressList,this._cookies=$cookies,this.editFlag=!0,this.tableParams=null,this.ingressList&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.ingressList.items})),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Discovery & LB",subNav:{title:"Ingresses",state:"ingress"}})}return _createClass(ListController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({"metadata.name":term})}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteService",value:function(event,item){var obj=item.metadata;return this._horIngressService.showDeleteDialog(event,obj)}},{key:"updateService",value:function(namespace,item){var obj=item.metadata;return this._horIngressService.showEditDialog(event,obj)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveIngressDetail(horIngressDetailResource,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horIngressDetailResource.get(objParams).$promise}function resolveIngressYaml(horIngressDetailYamle,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horIngressDetailYamle.get(objParams).$promise}function resolveServiceList(horServiceListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horServiceListResource.get(obj).$promise.then(function(serviceList){return horUtilsService.recombineServiceList(serviceList)})}resolveServiceList.$inject=["horServiceListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveIngressDetail=resolveIngressDetail,exports.resolveIngressYaml=resolveIngressYaml,exports.resolveServiceList=resolveServiceList;var _detail_state=__webpack_require__(100),_detail_controller=__webpack_require__(260),_utils=__webpack_require__(4),_hormain_state=__webpack_require__(30);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{ingressDetail:resolveIngressDetail,ingressYaml:resolveIngressYaml,serviceList:resolveServiceList},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"ingress/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_state=__webpack_require__(256),_constant=__webpack_require__(11),_utils=(__webpack_require__(100),__webpack_require__(4)),_namespacedetail_state=__webpack_require__(57),_detail_state2=__webpack_require__(102);exports.DetailController=function(){function DetailController(ingressDetail,ingressYaml,$mdToast,horIngressService,$state,$cookies,$stateParams,$scope,horModifyService,horIngressYmlArr,horIngressDetailYamle,serviceList,$translate){_classCallCheck(this,DetailController),this._state=$state,this._cookies=$cookies,this._mdToast=$mdToast,this._horModifyService=horModifyService,this.editFlag=!0,this._translate=$translate,this._stateParams=$stateParams,this._horIngressDetailYamle=horIngressDetailYamle,this.namespace=$stateParams.namespace,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"json"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this._horIngressYmlArr=horIngressYmlArr;var labels=ingressDetail.metadata.labels,arrLabels=[],withStyle=!0;if(labels){for(var item in labels)if(0==labels[item].length){var label=""+item;arrLabels.push(label)}else{var _label=item+"="+labels[item];arrLabels.push(_label)}withStyle=!0}else withStyle=!1;ingressDetail.metadata.withStyle=withStyle,ingressDetail.metadata.arrLabels=arrLabels,this.arrLabels=arrLabels;var annotations=ingressDetail.metadata.annotations,arrAnnotations=[];if(annotations)for(var _item in annotations){var annotation=_item+"="+annotations[_item];arrAnnotations.push(annotation)}ingressDetail.metadata.arrAnnotations=arrAnnotations,this.data=ingressDetail,angular.forEach(ingressDetail.spec.rules,function(item){angular.forEach(item,function(data){angular.forEach(data.paths,function(pathdata){angular.forEach(serviceList,function(serviceitem){serviceitem.name==pathdata.backend.serviceName&&(pathdata.backend.serviceNameNormal=1)})})})}),this._horIngressService=horIngressService,this.item={namespace:ingressDetail.metadata.namespace,name:ingressDetail.metadata.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(ingressYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return DetailController.$inject=["ingressDetail","ingressYaml","$mdToast","horIngressService","$state","$cookies","$stateParams","$scope","horModifyService","horIngressYmlArr","horIngressDetailYamle","serviceList","$translate"],_createClass(DetailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"deleteService",value:function(event){var item=this.item;return this._horIngressService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event){var item=this.item;return this._horIngressService.showEditDialog(event,item)}},{key:"getListHref",value:function(namespace){return this._state.href(_list_state.stateName,namespace)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getServiceHref",value:function(objName,namespace){return"all"===namespace&&(namespace=this.data.metadata.namespace),this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"saveChange",value:function(){var _this=this,aceName=this.data.metadata.name,aceNamespace=this.data.metadata.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horIngressYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,_this._stateParams.lastPage,_this._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horIngressDetailYamle.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveServiceList(horServiceListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horServiceListResource.get(obj).$promise.then(function(serviceList){return horUtilsService.recombineServiceList(serviceList)})}resolveServiceList.$inject=["horServiceListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceList=resolveServiceList;var _list_state=__webpack_require__(256),_new_controller=__webpack_require__(262),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}],serviceList:resolveServiceList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"ingress/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(100);exports.NewController=function(){function NewController(horIngressService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate,serviceList){_classCallCheck(this,NewController),this._horIngressService=horIngressService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.serviceList=serviceList,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.newIngreeName="",this.zfConfig=[{host:"",path:"",serviceName:"",servicePort:null,ports:[]}],this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.ingressTemplate={apiVersion:"extensions/v1beta1",kind:"Ingress",metadata:{name:"",namespace:this.namespaceString},spec:{rules:[]}}}return _createClass(NewController,[{key:"addZfConfig",value:function(){var obj={host:"",path:"",serviceName:"",servicePort:null,ports:[]};obj.ports=this.showServicePort(obj.serviceName),this.zfConfig.push(obj)}},{key:"deleteZfConfig",value:function(index){this.zfConfig.splice(index,1)}},{key:"showServicePort",value:function(service){var p=[];return angular.forEach(this.serviceList,function(value,key){value.name==service&&(p=value.ports)}),p}},{key:"changeServicePorts",value:function(serviceName){var _this=this;angular.forEach(this.zfConfig,function(value,key){value.serviceName==serviceName&&(value.servicePort=null,value.ports=_this.showServicePort(serviceName))})}},{key:"showCreateDialog",value:function(event,item){var self=this,zfConfigArr=[];angular.forEach(this.zfConfig,function(value,key){if(0==zfConfigArr.length){var obj={host:value.host,http:{paths:[{path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}}]}};zfConfigArr.push(obj)}else if(0!=zfConfigArr.length){var isUnique=void 0;if(angular.forEach(zfConfigArr,function(v,k){v.host==value.host?(isUnique=!1,v.http.paths.push({path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}})):v.host!=value.host&&(isUnique=!0)}),isUnique){var _obj={host:value.host,http:{paths:[{path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}}]}};zfConfigArr.push(_obj)}}}),this.ingressTemplate.spec.rules=zfConfigArr,this._mdDialog.show({controller:function($mdDialog){this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.aceModel=jsyaml.safeDump(self.ingressTemplate),this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"ingress/new/new_dialog.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}).then(function(answer){self.createResource(answer)},function(){}).then(function(data){})}},{key:"createResource",value:function(aceContent){var _this2=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:aceContent,validate:!0};if(0==aceContent.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=aceContent.substring(aceContent.indexOf("metadata:")+"metadata:".length,aceContent.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,
this._horIngressService.createResourcey().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this2._errorDialog.open("系统提示","创建失败");_this2._state.go(_detail_state.stateName,new _utils.UpdageStateParams(_this2.objNamespace,_this2.objName,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ingressService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.ingressService=function(){function ingressService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,ingressService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(ingressService,[{key:"getUrl",value:function(obj){var ns=obj.namespace,ingressName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/ingress/namespace/"+ns+"/name/"+ingressName}},{key:"createResourcey",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Ingress")).textContent(this._translate.instant("Are you sure you wangt to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Ingress")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("ingress",{},{reload:!0})})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,ingressData,serviceList){function showServicePort(service){var p=[];return angular.forEach(serviceList,function(value,key){value.name==service&&(p=value.ports)}),p}var _this2=this;this.ingressData=ingressData.data,this.serviceList=serviceList,this.zfConfig=[],angular.forEach(ingressData.data.spec.rules,function(value,key){angular.forEach(value.http.paths,function(v,k){var obj={host:value.host,path:v.path,serviceName:v.backend.serviceName,servicePort:v.backend.servicePort,ports:[]};angular.forEach(serviceList,function(sv,sk){v.backend.serviceName==sv.name&&(obj.ports=sv.ports)}),_this2.zfConfig.push(obj)})}),this.addZfConfig=function(){var obj={host:"",path:"",serviceName:"",servicePort:null,ports:[]};obj.ports=showServicePort(obj.serviceName),this.zfConfig.push(obj)},this.deleteZfConfig=function(index){this.zfConfig.splice(index,1)},this.changeServicePorts=function(serviceName){angular.forEach(this.zfConfig,function(value,key){value.servicePort=null,value.ports=showServicePort(serviceName)})},this.onLoad=function(instance){instance.expandAll()},this.answer=function(){var zfConfigArr=[];angular.forEach(this.zfConfig,function(value,key){if(0==zfConfigArr.length){var obj={host:value.host,http:{paths:[{path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}}]}};zfConfigArr.push(obj)}else if(0!=zfConfigArr.length){var isUnique=void 0;if(angular.forEach(zfConfigArr,function(v,k){v.host==value.host?(isUnique=!1,v.http.paths.push({path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}})):v.host!=value.host&&(isUnique=!0)}),isUnique){var _obj={host:value.host,http:{paths:[{path:value.path,backend:{serviceName:value.serviceName,servicePort:value.servicePort}}]}};zfConfigArr.push(_obj)}}}),this.ingressData.spec.rules=zfConfigArr,$mdDialog.hide(this.ingressData)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"ingress/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{ingressData:function(){return self._http.get(url)},serviceList:function(horServiceListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horServiceListResource.get(obj).$promise.then(function(serviceList){return horUtilsService.recombineServiceList(serviceList)})}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})}}]),ingressService}()},function(module,exports,__webpack_require__){"use strict";function ingressListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/ingresses")}ingressListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.ingressListResource=ingressListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function ingressDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/ingresses/:objectName")}function ingressDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/ingress/namespace/:namespace/name/:objectName")}function ingressYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/ingress/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function serviceListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services")}ingressYmlArr.$inject=["$http"],serviceListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.ingressDetailResource=ingressDetailResource,exports.ingressDetailYaml=ingressDetailYaml,exports.ingressYmlArr=ingressYmlArr,exports.serviceListResource=serviceListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _pod_service=__webpack_require__(267),_pod_stateconfig=__webpack_require__(268),_pod_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_pod_stateconfig),_detail_service=__webpack_require__(271);exports.default=angular.module("horApp.pods",["ngMaterial","ngResource","ui.router"]).config(_pod_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).factory("horPodDetailResource",_detail_service.podDetailResource).factory("horPodcControllerDetailResource",_detail_service.podControllerDetailResource).factory("horPodEventsDetailResource",_detail_service.podEventsDetailResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PodSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.PodSerivce=function(){function PodSerivce($http,$state,$mdDialog){_classCallCheck(this,PodSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return PodSerivce.$inject=["$http","$state","$mdDialog"],_createClass(PodSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,podName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/pod/namespace/"+ns+"/name/"+podName}},{key:"getResetUrl",value:function(namespace,name){var ns=namespace,objName=name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/"+ns+"/name/"+objName}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title("Delete Pod").textContent("Are you sure you wangt to delete "+item.name).targetEvent(event).ok("Delete Pod").cancel("cancel");this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("pod",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,podData){this.podData=podData.data,this.obj={data:this.podData,options:{mode:"tree",name:"Pod"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"pod/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{podData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showReplicaSetDelete",value:function(event,namespace,name){var _this2=this,self=this,url=this.getResetUrl(namespace,name),confirm=this._dialog.confirm().title("删除").textContent("您确定要删除 "+name+" 吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this2._http.delete(url)}).then(function(){self._state.go("replicaset",{},{reload:!0})},function(){})}},{key:"showReplicaSetEdit",value:function(event,namespace,name){var self=this,url=this.getResetUrl(namespace,name);this._dialog.show({controller:function($mdDialog,replicaSetData){this.replicaSetData=replicaSetData.data,this.obj={data:this.replicaSetData,options:{mode:"tree",name:"ReplicaSet"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"replicaset/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{replicaSetData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),PodSerivce}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _detail_state=__webpack_require__(89),_detail_stateconfig=__webpack_require__(269)},function(module,exports,__webpack_require__){"use strict";function resolvePodDetail(horPodDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodDetailResource.get(obj).$promise}function resolvePodControllerDetail(horPodcControllerDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodcControllerDetailResource.get(obj).$promise}function resolvePodEventDetail(horPodEventsDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodEventsDetailResource.get(obj).$promise}resolvePodDetail.$inject=["horPodDetailResource","$stateParams"],resolvePodControllerDetail.$inject=["horPodcControllerDetailResource","$stateParams"],resolvePodEventDetail.$inject=["horPodEventsDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodDetail=resolvePodDetail,exports.resolvePodControllerDetail=resolvePodControllerDetail,exports.resolvePodEventDetail=resolvePodEventDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(89),_detail_controller=__webpack_require__(270);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{podDetail:resolvePodDetail,podController:resolvePodControllerDetail,podEvent:resolvePodEventDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"pods/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_log_state=__webpack_require__(93),_detail_state2=(__webpack_require__(89),__webpack_require__(73)),_detail_state3=__webpack_require__(94),_detail_state4=__webpack_require__(95),_daemonsetdetail_state=__webpack_require__(96),_jobdetail_state=__webpack_require__(97),_statefulsetdetail_state=__webpack_require__(98),_detail_state5=__webpack_require__(99),_list_state=__webpack_require__(86);exports.DetailController=function(){function DetailController($http,$state,$mdDialog,podDetail,podController,podEvent,$stateParams,horManagePod,horManageReplicaSet,$cookies,$scope){_classCallCheck(this,DetailController),this.podDetail=podDetail,this.conditions=podDetail.conditions,this.podController=podController,this.selected=[],this._http=$http,this._state=$state,this._dialog=$mdDialog,this.namespace=$stateParams.namespace,this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.tabs=[{title:"Details"},{title:"Pods"}],this._horManagePod=horManagePod,this.item={namespace:this.podDetail.Pod.metadata.namespace,name:this.podDetail.Pod.metadata.name},this.podEvent=podEvent.items,this._horManageReplicaSet=horManageReplicaSet,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Pods",state:"pod"},sub:this.podDetail.Pod.metadata.name})}return DetailController.$inject=["$http","$state","$mdDialog","podDetail","podController","podEvent","$stateParams","horManagePod","horManageReplicaSet","$cookies","$scope"],_createClass(DetailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"hasWarnings",value:function(){return this.podController.pods.warnings.length>0}},{key:"isPending",value:function(){return!this.hasWarnings()&&this.podController.pods.pending>0}},{key:"isSuccess",value:function(){return!this.isPending()&&!this.hasWarnings()}},{key:"getNodeDetailHref",value:function(objName){return this._state.href(_detail_state2.stateName,{objectName:objName})}},{key:"getrReplicaSetDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.StateParams(namespace,objName))}},{key:"getReplicationcontrollerDetailHref",value:function(namespace,objName){return this._state.href(_detail_state4.stateName,new _utils.StateParams(namespace,objName))}},{key:"getDaemonsetDetailHref",value:function(namespace,objName){return this._state.href(_daemonsetdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getJobDetailHref",value:function(namespace,objName){return this._state.href(_jobdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getStatefulsetDetailHref",value:function(namespace,objName){return this._state.href(_statefulsetdetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getConfigDetailHref",value:function(objName){var namespace=this.namespace;return this._state.href(_detail_state5.stateName,new _utils.StateParams(namespace,objName))}},{key:"getLogDetailHref",value:function(namespace,objName,containerName){return this._state.href(_log_state.stateName,new _log_state.StateParams(namespace,objName,containerName))}},{key:"deletePod",value:function(event){var item=this.item;return this._horManagePod.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event){var item=this.item;return this._horManagePod.showEditDialog(event,item)}},{key:"getListHref",value:function(objName){return this._state.href(_list_state.stateName,{objectName:objName})}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"showReplicaSetEditDialog",value:function(event,namespace,name){return this._horManagePod.showReplicaSetEdit(event,namespace,name)}},{key:"showReplicaSetDeleteDialog",value:function(event,namespace,name){this.podController;return this._horManagePod.showReplicaSetDelete(event,namespace,name)}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function podDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName")}function podControllerDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/controller")}function podEventsDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/pods/:objectName/events")}podDetailResource.$inject=["$resource"],podControllerDetailResource.$inject=["$resource"],podEventsDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podDetailResource=podDetailResource,exports.podControllerDetailResource=podControllerDetailResource,exports.podEventsDetailResource=podEventsDetailResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _service_module=__webpack_require__(176),_service_module2=_interopRequireDefault(_service_module),_pod_module=__webpack_require__(83),_pod_module2=_interopRequireDefault(_pod_module),_replicaset_stateconfig=__webpack_require__(273),_replicaset_stateconfig2=_interopRequireDefault(_replicaset_stateconfig),_list_service=__webpack_require__(281),_detail_service=__webpack_require__(282),_replicaset_service=__webpack_require__(202),_pod_service=__webpack_require__(84),_list_service2=__webpack_require__(107);exports.default=angular.module("horApp.replicaSet",["ngMaterial","ngResource","ui.router","ngWebSocket",_service_module2.default.name,_pod_module2.default.name]).config(_replicaset_stateconfig2.default).service("horManagePod",_pod_service.PodSerivce).service("horManageReplicaSet",_replicaset_service.ReplicaSetSerivce).factory("horReplicaSetListResource",_list_service.replicaSetListResource).factory("horReplicaSetDetailResource",_detail_service.replicaSetDetailResource).factory("horReplicaSetDetailYaml",_detail_service.replicaSetDetailYaml).factory("horReplicaSetDetailPodListResource",_detail_service.replicaSetDetailPodListResource).factory("horReplicaSetDetailServiceListResource",_detail_service.replicaSetDetailServiceListResource).factory("horReplicaSetDetailEventListResource",_detail_service.replicaSetDetailEventListResource).factory("horReplicaSetDetailHPAListResource",_detail_service.replicaSetDetailHPAListResource).factory("horReplicaSetResourceUsage",_list_service.getReplicaSetResourceUsage).factory("horReplicaSetDetailResourceUsage",_detail_service.getReplicaSetDetailResourceUsage).factory("horReplicaSetYmlArr",_detail_service.replicaSetService).factory("horRegistryConfigListResource",_list_service2.registryConfigListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("replicaset.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(274),_detail_state=__webpack_require__(94),_list_stateconfig=__webpack_require__(275),_detail_stateconfig=__webpack_require__(277),_new_stateconfig=__webpack_require__(279)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="replicaset",exports.stateUrl="/replicaset"},function(module,exports,__webpack_require__){"use strict";function resolveReplicaSetList(horReplicaSetListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horReplicaSetListResource.get(obj).$promise.then(function(rsList){return horUtilsService.recombineReplicaSetList(rsList)})}resolveReplicaSetList.$inject=["horReplicaSetListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReplicaSetList=resolveReplicaSetList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(276),_list_state=__webpack_require__(274);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{replicaSetList:resolveReplicaSetList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"replicaset/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(94);exports.ListController=function(){function ListController($stateParams,$state,replicaSetList,horManageReplicaSet,horReplicaSetResourceUsage,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this.horReplicaSetResourceUsage=horReplicaSetResourceUsage,this.ReplicaSetResourceUsageData,this._scope=$scope,this.globalSearchTerm,this.data=replicaSetList,this.tableParams=null,this.data&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data})),this.namespace=$stateParams.namespace,this._state=$state,this._horManageReplicaSet=horManageReplicaSet}return ListController.$inject=["$stateParams","$state","replicaSetList","horManageReplicaSet","horReplicaSetResourceUsage","$scope","NgTableParams","horModifyService"],_createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"$onInit",value:function(){var _this=this,self=this;this.horReplicaSetResourceUsage.setCallBack(self.replicaSetResourceUsageCallBack.bind(self)),this.horReplicaSetResourceUsage.startWSMonitor(),this._scope.$on("$destroy",function(){_this.horReplicaSetResourceUsage.stopWSMonitor()})}},{key:"toNamespaceDetail",value:function(objNamespace){return this._horManageReplicaSet.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"replicaSetResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.ReplicaSetResourceUsageData=responseData.replicaSetList.cumulativeMetrics)}},{key:"showNothingState",value:function(){return 0===this.data.length}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getPodlHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod"))}},{key:"deleteReplicaSet",value:function(event,item){return this._horManageReplicaSet.showDeleteDialog(event,item)}},{key:"updateReplicaSet",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveReplicaSetDetail(horReplicaSetDetailResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailResource.get(obj).$promise.then(function(replicasetDetail){return horUtilsService.recombineReplicaSetDetail(replicasetDetail)})}function resolveReplicaSetYaml(horReplicaSetDetailYaml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailYaml.get(obj).$promise}function resolveReplicaSetDetailPodList(horReplicaSetDetailPodListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailPodListResource.get(obj).$promise.then(function(podList){return horUtilsService.recombinePodList(podList)})}function resolveReplicaSetDetailServiceList(horReplicaSetDetailServiceListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailServiceListResource.get(obj).$promise.then(function(serviceList){return horUtilsService.recombineServiceList(serviceList)})}function resolveReplicaSetDetailEventList(horReplicaSetDetailEventListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailEventListResource.get(obj).$promise}function resolveReplicaSetDetailHPAList(horReplicaSetDetailHPAListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horReplicaSetDetailHPAListResource.get(obj).$promise.then(function(hpaList){return horUtilsService.recombineHpaList(hpaList)})}resolveReplicaSetDetail.$inject=["horReplicaSetDetailResource","$stateParams","horUtilsService"],resolveReplicaSetYaml.$inject=["horReplicaSetDetailYaml","$stateParams"],resolveReplicaSetDetailPodList.$inject=["horReplicaSetDetailPodListResource","$stateParams","horUtilsService"],resolveReplicaSetDetailServiceList.$inject=["horReplicaSetDetailServiceListResource","$stateParams","horUtilsService"],resolveReplicaSetDetailEventList.$inject=["horReplicaSetDetailEventListResource","$stateParams","horUtilsService"],resolveReplicaSetDetailHPAList.$inject=["horReplicaSetDetailHPAListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReplicaSetDetail=resolveReplicaSetDetail,exports.resolveReplicaSetYaml=resolveReplicaSetYaml,exports.resolveReplicaSetDetailPodList=resolveReplicaSetDetailPodList,exports.resolveReplicaSetDetailServiceList=resolveReplicaSetDetailServiceList,exports.resolveReplicaSetDetailEventList=resolveReplicaSetDetailEventList,exports.resolveReplicaSetDetailHPAList=resolveReplicaSetDetailHPAList;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(94),_detail_controller=__webpack_require__(278);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{replicaSetDetail:resolveReplicaSetDetail,replicaSetYaml:resolveReplicaSetYaml,podList:resolveReplicaSetDetailPodList},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"replicaset/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(100),_detail_state2=__webpack_require__(99),_detail_state3=__webpack_require__(102),_daemonsetdetail_state=__webpack_require__(96),_detail_state4=__webpack_require__(101),_detail_state5=__webpack_require__(94),_detail_state6=__webpack_require__(95),_jobdetail_state=__webpack_require__(97),_detail_state7=__webpack_require__(79),_constant=__webpack_require__(11),_detail_state8=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($http,$state,$mdDialog,$stateParams,replicaSetDetail,replicaSetYaml,horManageReplicaSet,podList,horManageService,horModifyService,horManagePod,$cookies,horReplicaSetDetailResourceUsage,$scope,NgTableParams,$resource,$mdToast,$q,horReplicaSetYmlArr,$translate){_classCallCheck(this,DetailController),this._horReplicaSetYmlArr=horReplicaSetYmlArr,this._mdToast=$mdToast,this._resource=$resource,this._q=$q,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,
"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this.horReplicaSetDetailResourceUsage=horReplicaSetDetailResourceUsage,this.ReplicaSetDetailResourceUsageData,this._scope=$scope,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horManageReplicaSet=horManageReplicaSet,this._horManageService=horManageService,this._horModifyService=horModifyService,this._horManagePod=horManagePod,this.namespace=$stateParams.namespace,this.replicaSetDetail=replicaSetDetail,this.podList=podList,this.podTableParams=null,this.podList&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.podList})),this.replicaSetItem={namespace:this.replicaSetDetail.namespace,name:this.replicaSetDetail.name},this._cookies=$cookies,this.editFlag=!0,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(replicaSetYaml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.defaultAceModel=this.aceModel,this._translate=$translate}return DetailController.$inject=["$http","$state","$mdDialog","$stateParams","replicaSetDetail","replicaSetYaml","horManageReplicaSet","podList","horManageService","horModifyService","horManagePod","$cookies","horReplicaSetDetailResourceUsage","$scope","NgTableParams","$resource","$mdToast","$q","horReplicaSetYmlArr","$translate"],_createClass(DetailController,[{key:"getNamespaceDetail",value:function(objName){return this._horManageReplicaSet.goToNamespaceDetail(objName,objName)}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state8.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){var _this=this;"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1);var self=this;this.horReplicaSetDetailResourceUsage.setCallBack(self.replicaSetDetailResourceUsageCallBack.bind(self)),this.horReplicaSetDetailResourceUsage.startWSMonitor(this.replicaSetItem.namespace),this._scope.$on("$destroy",function(){_this.horReplicaSetDetailResourceUsage.stopWSMonitor()})}},{key:"goToDeploymentDetail",value:function(namespace,name){return this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(namespace,name,"list"))}},{key:"goToObjectDetail",value:function(item){return"ingress"===item.kind?this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"configmap"===item.kind?this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"service"===item.kind?this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"deployment"===item.kind?this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"daemonset"===item.kind?this._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"replicationcontroller"===item.kind?this._state.go(_detail_state6.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"replicaset"===item.kind?this._state.go(".",new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"job"===item.kind?this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):"pod"===item.kind?this._state.go(_detail_state7.stateName,new _utils.UpdageStateParams(this.replicaSetItem.namespace,item.name,"list")):void 0}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"rsUpdateService",value:function(){var _this2=this,ns=(this._q.defer(),this.replicaSetDetail.namespace),obj=this.replicaSetDetail.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/"+ns+"/name/"+obj;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this2._state.go(".",{},{reload:!0})})}},{key:"areDesiredPodsRunning",value:function(){return this.replicaSetDetail.PodInfo.running===this.replicaSetDetail.PodInfo.desired}},{key:"replicaSetDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.ReplicaSetDetailResourceUsageData=responseData.replicaSetDetail.podList.cumulativeMetrics)}},{key:"deleteReplicaSet",value:function(event){var item=this.replicaSetItem;return this._horManageReplicaSet.showDeleteDialog(event,item)}},{key:"updateReplicaSet",value:function(event){this.selectedIndex=1,console.log(this.selectedIndex)}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state7.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getServiceDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteService",value:function(event,item){return this._horManageService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._horManageService.showEditDialog(event,item)}},{key:"deletePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event,item){return this._state.go(_detail_state7.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"reload",value:function(){this.aceModel=this.defaultAceModel}},{key:"saveChange",value:function(data){var _this3=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horReplicaSetYmlArr.changeYaml(this.replicaSetItem.name,this.replicaSetItem.namespace,jsonData).then(function(data){200==data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this3._stateParams.lastPage?_this3._state.go(".",{},{reload:!0}):_this3._state.go(_detail_state5.stateName,new _utils.UpdageStateParams(_this3.replicaSetItem.namespace,_this3.replicaSetItem.name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _list_state=__webpack_require__(274),_new_controller=__webpack_require__(280),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"replicaset/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(94);exports.NewController=function(){function NewController(horManageReplicaSet,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,registryConfigList,$translate){_classCallCheck(this,NewController),this._mdToast=$mdToast,this._horManageReplicaSet=horManageReplicaSet,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this.registryConfigList=registryConfigList,this.selectedRegistryConfig,this._translate=$translate,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: extensions/v1beta1\nkind: ReplicaSet\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer();if(0===this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};this._horManageReplicaSet.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name;_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}},{key:"changeRegistryConfig",value:function(item){this.selectedRegistryConfig="all"==item?"all":item.name,"all"==this.selectedRegistryConfig?this.aceModel="apiVersion: extensions/v1beta1\nkind: ReplicaSet\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80":this.aceModel="apiVersion: extensions/v1beta1\nkind: ReplicaSet\nmetadata:\n  name: nginx\n  namespace: "+this.namespaceString+"\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      name: nginx\n      labels:\n        app: nginx\n    spec:\n      containers:\n        - name: nginx\n          image: nginx\n          ports:\n            - containerPort: 80\n      imagePullSecrets:\n        - name: "+this.selectedRegistryConfig,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function replicaSetListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicasets")}function getReplicaSetResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(){var obj={namespace:$stateParams.namespace},wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/replicasets";isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}replicaSetListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.replicaSetListResource=replicaSetListResource,exports.getReplicaSetResourceUsage=getReplicaSetResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function replicaSetDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicasets/:objectName")}function replicaSetDetailYaml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/:namespace/name/:objectName")}function replicaSetDetailPodListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicasets/:objectName/pods")}function replicaSetDetailServiceListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicasets/:objectName/services")}function replicaSetDetailEventListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/replicasets/:objectName/events")}function replicaSetDetailHPAListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpas/ReplicaSet/:objectName")}function replicaSetService($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/replicaset/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}function getReplicaSetDetailResourceUsage($websocket,$stateParams){var serviceInstance={},isConnected=!1,serverResponseData=void 0,setDataCallBack=void 0,socket=void 0,_startConnection=function(url){socket=$websocket(url),socket.onOpen(function(evt){isConnected=!0}),socket.onMessage(function(message){serverResponseData=JSON.parse(message.data),setDataCallBack(serverResponseData)}),socket.onError(function(evt){isConnected=!1}),socket.onClose(function(evt){})};return serviceInstance.startWSMonitor=function(currentItemNamespace){var obj={namespace:$stateParams.namespace,objectName:$stateParams.objectName};"all"===obj.namespace&&(obj.namespace=currentItemNamespace);var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/heapster/namespaces/"+obj.namespace+"/replicasets/"+obj.objectName;isConnected||_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.stopWSMonitor=function(){socket&&1==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}replicaSetService.$inject=["$http"],replicaSetDetailResource.$inject=["$resource"],replicaSetDetailYaml.$inject=["$resource"],replicaSetDetailPodListResource.$inject=["$resource"],replicaSetDetailServiceListResource.$inject=["$resource"],replicaSetDetailEventListResource.$inject=["$resource"],replicaSetDetailHPAListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.replicaSetDetailResource=replicaSetDetailResource,exports.replicaSetDetailYaml=replicaSetDetailYaml,exports.replicaSetDetailPodListResource=replicaSetDetailPodListResource,exports.replicaSetDetailServiceListResource=replicaSetDetailServiceListResource,exports.replicaSetDetailEventListResource=replicaSetDetailEventListResource,exports.replicaSetDetailHPAListResource=replicaSetDetailHPAListResource,exports.replicaSetService=replicaSetService,exports.getReplicaSetDetailResourceUsage=getReplicaSetDetailResourceUsage;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(284),_detail_service=__webpack_require__(285),_hpa_service=__webpack_require__(163),_hpa_stateconfig=__webpack_require__(286),_hpa_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_hpa_stateconfig);exports.default=angular.module("horApp.hpa",["ngMaterial","ngResource","ui.router"]).config(_hpa_stateconfig2.default).service("horHpaService",_hpa_service.HpaSerivce).factory("horHpaListResource",_list_service.hpaListResource).factory("horHpaDetailResource",_detail_service.hpaDetailResource).factory("horGetHpaNameKind",_list_service.getHpaNameKind).factory("horHpaResoruceUsage",_list_service.getHpaResourceUsage).factory("horHpaYmlArr",_detail_service.hpaYmlArr).factory("horHpaDetailYml",_detail_service.hpaDetailYml).factory("focus",["$timeout","$window",function($timeout,$window){return function(id){$timeout(function(){var element=$window.document.getElementById(id);element&&element.focus()})}}])},function(module,exports,__webpack_require__){"use strict";function hpaListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpas")}function getHpaNameKind($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/all/replicasets")}hpaListResource.$inject=["$resource"],getHpaNameKind.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.hpaListResource=hpaListResource,exports.getHpaNameKind=getHpaNameKind;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function hpaDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/hpas/:objectName")}function hpaDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/horizontalpodautoscaler/namespace/:namespace/name/:objectName")}function hpaYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/horizontalpodautoscaler/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}hpaDetailResource.$inject=["$resource"],hpaDetailYml.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.hpaDetailResource=hpaDetailResource,exports.hpaDetailYml=hpaDetailYml,exports.hpaYmlArr=hpaYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(287),_detail_state=__webpack_require__(288),_list_stateconfig=__webpack_require__(289),_detail_stateconfig=__webpack_require__(291)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="hpa",exports.stateUrl="/hpa"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="hpadetail",exports.stateUrl="/hpa"},function(module,exports,__webpack_require__){"use strict";function resolveHpaList(horHpaListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horHpaListResource.get(obj).$promise.then(function(hpaList){return horUtilsService.recombineHpaList(hpaList)})}resolveHpaList.$inject=["horHpaListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHpaList=resolveHpaList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(290),_list_state=__webpack_require__(287);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{hpaList:resolveHpaList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"hpa/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(288),_namespacedetail_state=(__webpack_require__(287),__webpack_require__(57));exports.ListController=function(){function ListController($state,$stateParams,hpaList,horHpaService,$cookies,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this._stateParams=$stateParams,this._state=$state,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.data=hpaList,this.namespace=$stateParams.namespace,this.globalSearchTerm,this.tableParams=null,null!=hpaList&&hpaList.length>0&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:hpaList})),this._horHpaService=horHpaService,this.hpaResourceUsageData,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Horizontal Pod Autoscalers",state:"hpa"}})}return ListController.$inject=["$state","$stateParams","hpaList","horHpaService","$cookies","$scope","NgTableParams","horModifyService"],_createClass(ListController,[{key:"$onInit",value:function(){var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);"view"===user.userRole.Name&&(this.editFlag=!1),this.cookiesName=user.userRole.Name}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"deleteService",value:function(event,item){return this._horHpaService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item,userRole){return this._horHpaService.showEditDialog(event,item,userRole)}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,namespace))}},{key:"addHpa",value:function(event,name,namespace){var item={name:name,namespace:namespace};return this._horHpaService.showAddDialog(event,item)}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveHpaDetail(horHpaDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHpaDetailResource.get(obj).$promise}function resolveHpaDetailYaml(horHpaDetailYml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHpaDetailYml.get(objParams).$promise}resolveHpaDetail.$inject=["horHpaDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHpaDetail=resolveHpaDetail,exports.resolveHpaDetailYaml=resolveHpaDetailYaml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(288),_detail_controller=__webpack_require__(292);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{hpaDetail:resolveHpaDetail,hpaDetailYml:resolveHpaDetailYaml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"hpa/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_detail_state=(__webpack_require__(287),__webpack_require__(288)),_namespacedetail_state=(__webpack_require__(102),__webpack_require__(73),__webpack_require__(57));exports.DetailController=function(){function DetailController($state,$stateParams,$resource,$mdToast,hpaDetail,horHpaService,$cookies,$scope,horHpaYmlArr,hpaDetailYml,horHpaDetailYml){_classCallCheck(this,DetailController),this._state=$state,this._resource=$resource,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this.hpaDetail=hpaDetail,this.metadata=this.hpaDetail.metadata,this.spec=this.hpaDetail.spec,this.status=this.hpaDetail.status,this._mdToast=$mdToast,this._horHpaService=horHpaService,this._horHpaYmlArr=horHpaYmlArr,this._horHpaDetailYml=horHpaDetailYml,this.item={namespace:this.metadata.namespace,name:this.metadata.name},this._cookies=$cookies,this.editFlag=!0,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(hpaDetailYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.defaultAceModel=this.aceModel,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Workloads",subNav:{title:"Horizontal Pod Autoscalers",state:"hpa"},sub:this.metadata.name})}return DetailController.$inject=["$state","$stateParams","$resource","$mdToast","hpaDetail","horHpaService","$cookies","$scope","horHpaYmlArr","hpaDetailYml","horHpaDetailYml"],_createClass(DetailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.item.namespace,namespace))}},{key:"deleteHpa",value:function(event){var item=this.item;return this._horHpaService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event){var item=this.item;return this._horHpaService.showEditDialog(event,item)}},{key:"saveChange",value:function(data){var _this=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horHpaYmlArr.changeYaml(this.item.name,this.item.namespace,jsonData).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent("JSON changs success").position("w320 success").hideDelay(3e3)),"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(ns,name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent("JSON changs failure").position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horHpaDetailYml.get(obj).$promise.then(function(data){_this2.aceModel=JSON.stringify(data,null,2)})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(294),_detail_service=__webpack_require__(295),_appstore_stateconfig=__webpack_require__(296),_appstore_stateconfig2=_interopRequireDefault(_appstore_stateconfig),_appstore_service=__webpack_require__(304),_filechange=__webpack_require__(306),_filechange2=_interopRequireDefault(_filechange);exports.default=angular.module("horApp.appstore",["ngMaterial","ngResource","ui.router"]).config(_appstore_stateconfig2.default).service("horManageAppstore",_appstore_service.appstoreSerivce).factory("horAppstoreResource",_list_service.appstoreResource).factory("horAppstoreListResource",_list_service.appstoreListResource).factory("horAppstoreDetailListResource",_detail_service.appstoreDetailListResource).factory("horAppstoreDetailResource",_detail_service.appstoreDetailResource).directive("fileChange",_filechange2.default).directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}})},function(module,exports,__webpack_require__){"use strict";function appstoreResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories")}function appstoreListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts")}appstoreResource.$inject=["$resource"],appstoreListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appstoreResource=appstoreResource,exports.appstoreListResource=appstoreListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function appstoreDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts/:chart")}function appstoreDetailListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts")}appstoreDetailResource.$inject=["$resource"],appstoreDetailListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appstoreDetailResource=appstoreDetailResource,exports.appstoreDetailListResource=appstoreDetailListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],
Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(297)),_detail_state=__webpack_require__(298),_list_stateconfig=__webpack_require__(299),_detail_stateconfig=__webpack_require__(301)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appstore",exports.stateUrl="/appstore"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appstoredetail",exports.stateUrl="/appstore"},function(module,exports,__webpack_require__){"use strict";function resolveAppstore(horAppstoreResource,$stateParams){return horAppstoreResource.get().$promise}function resolveAppstoreList(horAppstoreResource,horAppstoreListResource,$q,$stateParams,horUtilsService){return horAppstoreResource.get().$promise.then(function(appStore){var obj={};return angular.forEach(appStore.RawData,function(item){if("local"!=item.name){var ooo={repository:item.name};obj[item.name]=horAppstoreListResource.get(ooo).$promise}}),$q.all(obj).then(function(shopList){return horUtilsService.recombineShopList(shopList)})})}resolveAppstore.$inject=["horAppstoreResource","$stateParams"],resolveAppstoreList.$inject=["horAppstoreResource","horAppstoreListResource","$q","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAppstore=resolveAppstore,exports.resolveAppstoreList=resolveAppstoreList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(300),_list_state=__webpack_require__(297);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{appstoresList:resolveAppstoreList,appstores:resolveAppstore},views:{"":{controller:_list_controller.kshopController,controllerAs:"$ctrl",templateUrl:"appstore/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.kshopController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(298);exports.kshopController=function(){function kshopController($resource,appstores,appstoresList,$stateParams,$state,$interpolate,$filter,$scope){_classCallCheck(this,kshopController),this._resource=$resource;var appName=[{name:"全部"}];angular.forEach(appstores.RawData,function(item){if("local"!=item.name){var _ooName={name:item.name};appName.push(_ooName)}}),this.appName=appName,this.appstoresValue=appstoresList,this.appStoreArr=appstoresList,this.appstoreLength=this.appstoresValue.length,this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.namespace=$stateParams.namespace,this._interpolate=$interpolate,this._state=$state,this._$filter=$filter,this.abc="",this.noData=null,this.selectedData=this.appName[0].name,this.tagArr=_constant.CHART_TYPE_TAG,this.tags=[],this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"Charts",state:"appstore"}})}return kshopController.$inject=["$resource","appstores","appstoresList","$stateParams","$state","$interpolate","$filter","$scope"],_createClass(kshopController,[{key:"searchFeatured",value:function(item){var keyWord=item.key;if(!1===item.selected?item.selected=!0:item.selected=!1,!1===item.check?item.check=!0:item.check=!1,!0===item.check)this.tags.push(keyWord);else{!function(arr,val){for(var i=0;i<arr.length;i++)if(arr[i]==val){arr.splice(i,1);break}}(this.tags,keyWord)}}},{key:"getDetailHref",value:function(objName,reop){return this._state.href(_detail_state.stateName,new _utils.StateParams(reop,objName))}},{key:"initSelect",value:function(){this.search("",this.selectedData)}},{key:"search",value:function(searchData,selectedData){var _this=this,obj={repository:selectedData};if(void 0!=searchData&&0!=searchData.length||(searchData=null),"全部"==selectedData&&null==searchData)this._state.go(".",{repository:this.selectedNamespace}),this.appstoresValue=this.appStoreArr,this.appstoreLength=this.appstoresValue.length;else if("全部"==selectedData&&null!=searchData)this._state.go(".",{repository:this.selectedNamespace}),this.appstoresValue=this._$filter("filter")(this.appStoreArr,{name:searchData}),this.appstoreLength=this.appstoresValue.length;else{if("全部"!=selectedData&&null==searchData){var resource=this._resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts");return resource.get(obj).$promise.then(function(appsList){var appStoreArray=[];angular.forEach(appsList.RawData,function(item,value){item.reop=selectedData,appStoreArray.push(item)}),_this.appStoreArray=appStoreArray,_this.appstoresValue=_this.appStoreArray,_this.appstoreLength=_this.appstoresValue.length})}if("全部"!=selectedData&&null!=searchData){var _resource=this._resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts");return _resource.get(obj).$promise.then(function(appsList){var appStoreArray=[];angular.forEach(appsList.RawData,function(item,value){item.reop=selectedData,appStoreArray.push(item)}),_this.appStoreArray=appStoreArray,_this.appstoresValue=_this._$filter("filter")(_this.appStoreArray,{name:searchData}),_this.appstoreLength=_this.appstoresValue.length})}}}}]),kshopController}()},function(module,exports,__webpack_require__){"use strict";function resolveAppstoreDetail(horAppstoreDetailResource,$stateParams){var obj={repository:$stateParams.objectNamespace,chart:$stateParams.objectName};return horAppstoreDetailResource.get(obj).$promise}function resolveAppstoreListDetail(horAppstoreDetailListResource,$stateParams){var obj={repository:$stateParams.objectNamespace};return horAppstoreDetailListResource.get(obj).$promise}resolveAppstoreDetail.$inject=["horAppstoreDetailResource","$stateParams"],resolveAppstoreListDetail.$inject=["horAppstoreDetailListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAppstoreDetail=resolveAppstoreDetail,exports.resolveAppstoreListDetail=resolveAppstoreListDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(298),_detail_controller=__webpack_require__(302);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{appstoreDetail:resolveAppstoreDetail,appList:resolveAppstoreListDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"appstore/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(298),_detail_state2=__webpack_require__(78),_detail_state3=__webpack_require__(79),_list_state=__webpack_require__(297),_list_state2=__webpack_require__(303),DetailController=exports.DetailController=function(){function DetailController($resource,$http,$state,$mdDialog,$window,$sce,appstoreDetail,appList,$stateParams,horManageAppstore,$scope){_classCallCheck(this,DetailController),this._resource=$resource,angular.forEach(appList.RawData,function(key,value){appstoreDetail.RawData.metadata.name==value&&(appstoreDetail.newValue=key,appstoreDetail.readme=appstoreDetail.RawData.readme)}),this.newAPP=appstoreDetail.newValue,this.appstoreDetail=appstoreDetail.newValue[0],this.selected=[],this._window=$window,this._http=$http,this._sce=$sce,this._state=$state,this._dialog=$mdDialog;var appReadme=this._window.atob(appstoreDetail.readme),mdContent=decodeURIComponent(escape(appReadme)),newReadme=marked(mdContent);this.tpl=this._sce.trustAsHtml(newReadme),this._horManageAppstore=horManageAppstore,this.repName=$stateParams.objectNamespace,this.boxzlast,this.boxalast,this.boxblast;var box=marked(mdContent),databox="<h2>如何使用这些参数</h2>"+box.substring(box.indexOf("<pre>"),box.indexOf("</pre>"))+"</pre>",positionbox=[];if(positionbox.push({pzcs:box.indexOf("配置参数"),rhsy:box.indexOf("如何使用这些参数")}),-1!=positionbox[0].pzcs){var boxz=box.substring(0,box.indexOf("配置参数"));this.boxzlast=this._sce.trustAsHtml(boxz)}else if(-1==positionbox[0].pzcs){var _boxz=box.substring(0,box.length);this.boxzlast=this._sce.trustAsHtml(_boxz)}if(-1!=positionbox[0].pzcs&&-1!=positionbox[0].rhsy){var boxa="<h2>"+box.substring(box.indexOf("配置参数"),box.indexOf("如何使用这些参数"));this.boxalast=this._sce.trustAsHtml(boxa)}else if(-1!=positionbox[0].pzcs&&-1==positionbox[0].rhsy){var _boxa="<h2>"+box.substring(box.indexOf("配置参数"),box.length);this.boxalast=this._sce.trustAsHtml(_boxa)}if(-1!=positionbox[0].rhsy){var boxb="<h2>"+box.substring(box.indexOf("如何使用这些参数"),box.length);this.boxblast=this._sce.trustAsHtml(boxb)}else if(-1==positionbox[0].rhsy){var _boxb=databox;this.boxblast=this._sce.trustAsHtml(_boxb)}this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.selectedNamespace=appstoreDetail.newValue[0].version,this.selectedVersion=appstoreDetail.newValue[0].version,this.fileString,this.file={},this.inputFile={name:"",content:""},this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"Charts",state:"appstore"},sub:appstoreDetail.RawData.metadata.name+" Store"})}return DetailController.$inject=["$resource","$http","$state","$mdDialog","$window","$sce","appstoreDetail","appList","$stateParams","horManageAppstore","$scope"],_createClass(DetailController,[{key:"upload",value:function(){var self=this;self.inputFile.name=this.file.name;var reader=new FileReader;reader.readAsText(this.file,"UTF-8"),reader.onload=function(event){self.inputFile.content=event.target.result}}},{key:"getListHref",value:function(objName){return this._state.href(_list_state.stateName,{objectName:objName})}},{key:"listReleases",value:function(appstoreDetail){return this._state.go(_list_state2.stateName,new _utils.StateParams("all",appstoreDetail.name))}},{key:"changeContainer",value:function(){var aa=this.selectedNamespace,rr=void 0;angular.forEach(this.newAPP,function(item){item.version==aa&&(rr=item)}),this.appstoreDetail=rr}},{key:"runService",value:function(event){var version=this.newAPP,chart=this.appstoreDetail.name,repo=this.repName;return this._horManageAppstore.showRunServiceDialog(event,version,chart,repo)}},{key:"deployChart",value:function deployChart(event){if(""===this.inputFile.content&&""===this.inputFile.name)return alert=this._dialog.alert({title:"提示",textContent:"请上传配置文件!",ok:"关闭"}),void this._dialog.show(alert).finally(function(){alert=void 0});var configData=this.inputFile,configObj=void 0;try{configObj=eval("("+configData.content+")")}catch(exception){var _alert=this._dialog.alert({title:"提示",textContent:"请上传有效的配置文件!",ok:"关闭"});return void this._dialog.show(_alert).finally(function(){_alert=void 0})}var data={name:configData.name,content:configObj};this._horManageAppstore.showEditDialog(event,data)}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="apphistory",exports.stateUrl="/apphistory"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appstoreSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(305);exports.appstoreSerivce=function(){function appstoreSerivce($http,$state,$mdDialog){_classCallCheck(this,appstoreSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return appstoreSerivce.$inject=["$http","$state","$mdDialog"],_createClass(appstoreSerivce,[{key:"getUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/release/install"}},{key:"showRunServiceDialog",value:function(event,version,chart,repo){var _this=this;this.chartName=chart,this.repoName=repo,this.versionName=version;var self=this,url=this.getUrl();this._dialog.show({controller:function($mdDialog){this.obj={repo:self.repoName,chart:self.chartName,version:self.versionName,selectedVersion:self.versionName[0].version},this.onLoad=function(instance){instance.expandAll()},this.answer=function(name,namespace,appstoreDetailname,repName,selectedVersion){var obj={chart:appstoreDetailname,name:name,namespace:namespace,repo:repName,version:selectedVersion};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}).then(function(obj){_this._http({method:"POST",url:url,data:obj}).success()}).then(function(data){},function(){})}},{key:"showEditDialog",value:function(event,data){var self=this,inputData={name:data.name,content:data.content};this._dialog.show({controller:function($mdDialog,configData){this.configData=configData.content,this.obj={data:this.configData,options:{mode:"tree"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{configData:inputData}}).then(function(answer){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/",method:"POST",data:answer})}).then(function(data){self._state.go(_list_state.stateName,{},{reload:!0})},function(reason){})}},{key:"showUpdateEditDialog",value:function(event,data){var self=this,inputData={name:data.name,content:data.content};this._dialog.show({controller:function($mdDialog,configData){this.configData=configData.content,this.obj={data:this.configData,options:{mode:"tree"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{configData:inputData}}).then(function(answer){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/",method:"PUT",data:answer})}).then(function(data){self._state.go(_list_state.stateName,{},{reload:!0})},function(reason){})}}]),appstoreSerivce}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appinstances",exports.stateUrl="/appinstances"},function(module,exports){"use strict";function fileChange(){return{restrict:"A",require:"ngModel",scope:{fileChange:"&"},link:function(scope,element,attrs,ctrl){function onChange(){attrs.multiple?ctrl.$setViewValue(element[0].files):ctrl.$setViewValue(element[0].files[0]),scope.$apply(function(){scope.fileChange()})}element.on("change",onChange),scope.$on("destroy",function(){element.off("change",onChange)})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=fileChange},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _servicebroker_service=__webpack_require__(308),_list_service=__webpack_require__(310),_detail_service=__webpack_require__(311),_new_service=__webpack_require__(313),_servicebroker_stateconfig=__webpack_require__(314),_servicebroker_stateconfig2=_interopRequireDefault(_servicebroker_stateconfig),_detail_service2=__webpack_require__(328),_appstore_service=__webpack_require__(329),_filechange=__webpack_require__(330),_filechange2=_interopRequireDefault(_filechange);exports.default=angular.module("horApp.servicebroker",["ngMaterial","ngResource","ui.router"]).config(_servicebroker_stateconfig2.default).service("horServiceBrokerService",_servicebroker_service.serverBrokerService).factory("horServerBrokerResource",_list_service.serverBrokerResource).factory("horServerBrokerDetailResource",_detail_service.serviceBrokerDetailResource).factory("horServerBrokerCatalogsResource",_detail_service.serviceBrokerCatalogsResource).factory("horServiceBrokerListResource",_new_service.serviceBrokerListResource).service("horManageAppstore",_appstore_service.appstoreSerivce).factory("horAppstoreResource",_list_service.appstoreResource).factory("horAppstoreListResource",_list_service.appstoreListResource).factory("horAppstoreDetailListResource",_detail_service2.appstoreDetailListResource).factory("horAppstoreDetailResource",_detail_service2.appstoreDetailResource).directive("fileChange",_filechange2.default).directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}})},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.serverBrokerService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(309);exports.serverBrokerService=function(){function serverBrokerService($http,$state,$mdDialog,$mdToast,errorDialog,$timeout,$translate,$resource){_classCallCheck(this,serverBrokerService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._errorDialog=errorDialog,this._timeout=$timeout,this._mdToast=$mdToast,this._translate=$translate,this._resource=$resource,this._timeout=$timeout}return _createClass(serverBrokerService,[{key:"getUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/"}},{key:"getDeleteUrl",value:function(item){var name=item.name;return _constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/"+name}},{key:"getNamespaceUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getDeleteUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Service Management")).textContent(this._translate.instant("Are you sure you want to delete")+""+item.name).targetEvent(event).ok(this._translate.instant("Delete Service Management")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>正在删除服务.....</span></md-toast>',position:"w200 successS",hideDelay:1e4}),_this._http.delete(url)}).then(function(data){void 0==data?(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Service deletion failure")).position("w200 danger").hideDelay(3e3)),self._state.go("servicebroker",{tabIndex:1},{reload:!0})):void 0!=data&&200===data.status&&(1==data.data.status?_this._timeout(function(){self._state.go("servicebroker",{tabIndex:1},{reload:!0})},1e4).then(function(){_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Service deleting success")).position("w200 success").hideDelay(3e3))}):0==data.data.status&&_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("The service instance is present in the current service and is not allowed to delete")).position("w300 danger").hideDelay(3e3)))},function(){})}},{key:"showAddDialog",value:function(event){var _this2=this,self=this,url=this.getUrl();this._dialog.show({controller:function($mdDialog){this.onLoad=function(instance){instance.expandAll()},this.answer=function(brokerName,brokerUrl){var obj={metadata:{name:brokerName},spec:{url:brokerUrl}};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"servicebroker/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return _this2._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>正在创建服务.....</span></md-toast>',position:"w200 successS",hideDelay:2e4}),self._http({url:url,method:"POST",data:answer})}).then(function(data){void 0==data?(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("Service add failure")).position("w200 danger").hideDelay(3e3)),self._state.go("servicebroker",{tabIndex:1},{reload:!0})):void 0!=data&&200===data.status&&(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("Service add success")).position("w200 success").hideDelay(3e3)),self._state.go("servicebroker",{tabIndex:1},{reload:!0}))},function(reason){})}},{key:"showInstanceDialog",value:function(event,item,catalogsArr,serviceName){var _this3=this,namespaceurl=this.getNamespaceUrl();this.catalogsArr=catalogsArr,this.serviceName=serviceName,this.planArray=catalogsArr,this.selectPlan=catalogsArr[0].name;var self=this;this.environmentMaps=[],this._dialog.show({controller:function($mdDialog,namespaceData){var namespaceList=namespaceData.data.items,namespaceValue=namespaceData.data.items[0].metadata.name;this.obj={environmentMaps:self.environmentMaps,catalogsArr:self.catalogsArr,selectService:self.serviceName,planArray:self.planArray,selectPlan:self.selectPlan,nameSpace:namespaceList,appNamespace:namespaceValue},this.onLoad=function(instance){instance.expandAll()},this.addEnvironmentMap=function(){var addData={envKey:"",envValue:""};this.obj.environmentMaps.push(addData)},this.delEnvironmentMap=function(index){this.obj.environmentMaps.splice(index,1)},this.onLoad=function(instance){instance.expandAll()},this.answer=function(name,namespace,service_class_name,plan_name,connect_uri){var connecturi=connect_uri,planArray={};0==connecturi.length?(planArray.service_name=service_class_name,planArray.plan_name=plan_name):connecturi.length>0&&(angular.forEach(connecturi,function(item){0!=item.envKey.length&&0!=item.envValue.length&&(planArray[item.envKey]=item.envValue)}),planArray.service_name=service_class_name,planArray.plan_name=plan_name);var param={spec:{plan_name:plan_name,service_class_name:service_class_name,parameters:{credentials:planArray}}},obj={name:name,namespace:namespace,param:param};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"servicebroker/instance_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{namespaceData:function(){return self._http.get(namespaceurl)}}}).then(function(obj){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/"+obj.name+"?namespace="+obj.namespace,method:"PUT",data:obj.param})}).then(function(data){void 0==data?(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("Deployment service instance failure")).position("w300 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("Deployment service")).position("w200 ring").hideDelay(3e3)),self._state.go(_list_state.stateName,{namespace:data.data.Instance.metadata.namespace},{reload:!0}))},function(reason){})}},{key:"combineServiceBrokerList",value:function(serverBrokerList){var newBroker=[];return angular.forEach(serverBrokerList.BrokerList,function(item){var obj={name:item.Broker.metadata.name,url:item.Broker.spec.url};item.Broker.status&&item.Broker.status.conditions.length>0&&(obj.status=item.Broker.status.conditions[0].status),item.ServiceClass&&(item.ServiceClass.externalMetadata.imageUrl&&(obj.icon=item.ServiceClass.externalMetadata.imageUrl),item.ServiceClass.externalMetadata.serviceType&&(obj.keywords=item.ServiceClass.externalMetadata.serviceType)),newBroker.push(obj)}),newBroker}}]),serverBrokerService}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="brokerinstance",exports.stateUrl="/brokerinstance"},function(module,exports,__webpack_require__){"use strict";function serverBrokerResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/")}function appCatalogRepoResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories")}function appCatalogChartsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts")}serverBrokerResource.$inject=["$resource"],appCatalogRepoResource.$inject=["$resource"],appCatalogChartsResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serverBrokerResource=serverBrokerResource,exports.appCatalogRepoResource=appCatalogRepoResource,exports.appCatalogChartsResource=appCatalogChartsResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function serviceBrokerDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/:objectName")}function serviceBrokerCatalogsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/catalogs/")}serviceBrokerDetailResource.$inject=["$resource"],serviceBrokerCatalogsResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceBrokerDetailResource=serviceBrokerDetailResource,exports.serviceBrokerCatalogsResource=serviceBrokerCatalogsResource;var _constant=__webpack_require__(11);__webpack_require__(312)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="servicebroker",exports.stateUrl="/servicebroker"},function(module,exports,__webpack_require__){"use strict";function serviceBrokerListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/:objectName/service_instances")}serviceBrokerListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceBrokerListResource=serviceBrokerListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state(_new_state.stateName,_new_stateconfig.config).state(_detail_state2.stateName,_detail_stateconfig2.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(312)),_detail_state=__webpack_require__(315),_new_state=__webpack_require__(316),_list_stateconfig=__webpack_require__(317),_detail_stateconfig=__webpack_require__(320),_new_stateconfig=__webpack_require__(322),_detail_state2=__webpack_require__(319),_detail_stateconfig2=__webpack_require__(325)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="servicebrokerdetail",exports.stateUrl="/servicebroker"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="servicebrokerplan",exports.stateUrl="/servicebroker"},function(module,exports,__webpack_require__){"use strict";function resolveServerBroker(horServerBrokerResource){horServerBrokerResource.get().$promise;return horServerBrokerResource.get().$promise}function resolveAppCatalogRepo(horAppCatalogRepoResource,$stateParams){return horAppCatalogRepoResource.get().$promise}function resolveAppCatalogChartsList(horAppCatalogRepoResource,horAppCatalogChartsResource,$q,$stateParams,horUtilsService){return horAppCatalogRepoResource.get().$promise.then(function(catalog){var obj={};return angular.forEach(catalog.RawData,function(item){if("local"!=item.name&&""!=item.name){var ooo={repository:item.name};obj[item.name]=horAppCatalogChartsResource.get(ooo).$promise}}),$q.all(obj).then(function(appCatalogList){return horUtilsService.recombineAppCataLogList(appCatalogList)})})}resolveServerBroker.$inject=["horServerBrokerResource"],resolveAppCatalogRepo.$inject=["horAppCatalogRepoResource","$stateParams"],resolveAppCatalogChartsList.$inject=["horAppCatalogRepoResource","horAppCatalogChartsResource","$q","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServerBroker=resolveServerBroker,exports.resolveAppCatalogRepo=resolveAppCatalogRepo,exports.resolveAppCatalogChartsList=resolveAppCatalogChartsList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(318),_list_state=__webpack_require__(312);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{serverBrokerList:resolveServerBroker,appCatalogChartsList:resolveAppCatalogChartsList,appCatalogRepoList:resolveAppCatalogRepo},params:{tabIndex:null},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"servicebroker/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),
exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(315),_constant=(__webpack_require__(312),__webpack_require__(11)),_detail_state2=__webpack_require__(319);exports.ListController=function(){function ListController(serverBrokerList,$interval,$stateParams,$http,$state,$mdDialog,$resource,horServiceBrokerService,$scope,appCatalogChartsList,appCatalogRepoList,$filter,base64){var _this=this;_classCallCheck(this,ListController),this._state=$state,this._base64=base64,this.selectedIndex=0,1===$stateParams.tabIndex&&(this.selectedIndex=1),this.loading=$stateParams.loading,this.appCatalogChartsList=appCatalogChartsList,angular.forEach(this.appCatalogChartsList,function(item){for(var des=item.description,regexStr=_constant.README_REGEX_STR;-1!=des.search(regexStr);){var index=des.search(regexStr),end=des.search(_constant.README_REGEX_SUFFIX),endIndex=end+_constant.README_REGEX_SUFFIX.length,subString=des.substring(index+_constant.README_REGEX_PREFIX.length,end).trim(),dStr=$filter("I18N")(subString),decodeStr="";try{decodeStr=_this._base64.decode(dStr)}catch(err){decodeStr="No data returned for the time being."}var srcStr=des.substring(index,endIndex);des=des.replace(srcStr,decodeStr)}item.desI18N=des}),this.appCatalogRepoList=appCatalogRepoList.RawData||[],this.chartTypeList=_constant.CHART_TYPE_TAG,this.selectedType,this.selectedKey,this.selectedAppTypeName,this.allTypes="All",this.allRepos="All Repos",this._horServiceBrokerService=horServiceBrokerService,this.brokerData=this._horServiceBrokerService.combineServiceBrokerList(serverBrokerList),this.globalSearchTerm,this.namespace=$stateParams.namespace,this._http=$http,this._state=$state,this._dialog=$mdDialog,this.borkerSelect=[{id:"database",name:"数据库"},{id:"cache",name:"缓存"},{id:"message-queue",name:"消息队列"}],this.selectedType,this.selectedKey,this.selectedTypeName,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"ServiceStore",subNav:{title:"Service Market",state:"servicebroker"}})}return ListController.$inject=["serverBrokerList","$interval","$stateParams","$http","$state","$mdDialog","$resource","horServiceBrokerService","$scope","appCatalogChartsList","appCatalogRepoList","$filter","base64"],_createClass(ListController,[{key:"changeType",value:function(type){this.selectedKey=type.id}},{key:"getDetailHref",value:function(objName){return this._state.go(_detail_state.stateName,{objectName:objName})}},{key:"addService",value:function(event){return this._horServiceBrokerService.showAddDialog(event)}},{key:"deleteService",value:function(event,item){return this._horServiceBrokerService.showDeleteDialog(event,item)}},{key:"$onInit",value:function(){this.selectedType=this.allTypes,this.selectedRepo=this.allRepos}},{key:"changeType",value:function(type){this.selectedKey=type.key}},{key:"changeRepo",value:function(repo){this.selectedRepoName=repo.name}},{key:"goToCatalogDetail",value:function(objName,repo){return this._state.go(_detail_state2.stateName,new _utils.StateParams(repo,objName))}},{key:"showNothingState",value:function(){return 0===this.appcatalogList.length}}]),ListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appcatalogsdetail",exports.stateUrl="/appcatalogs"},function(module,exports,__webpack_require__){"use strict";function resolveServiceBrokerDetail(horServerBrokerDetailResource,$stateParams){var obj={objectName:$stateParams.objectName};return horServerBrokerDetailResource.get(obj).$promise}function resolveServiceBrokerCatalogs(horServerBrokerCatalogsResource,$stateParams){return horServerBrokerCatalogsResource.get().$promise}resolveServiceBrokerDetail.$inject=["horServerBrokerDetailResource","$stateParams"],resolveServiceBrokerCatalogs.$inject=["horServerBrokerCatalogsResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceBrokerDetail=resolveServiceBrokerDetail,exports.resolveServiceBrokerCatalogs=resolveServiceBrokerCatalogs;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(315),_detail_controller=__webpack_require__(321);exports.config={url:(0,_utils.appendGlobalDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{serviceBrokerDetail:resolveServiceBrokerDetail,brokerCatalogs:resolveServiceBrokerCatalogs},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"servicebroker/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_new_state=(__webpack_require__(11),__webpack_require__(316)),_utils=__webpack_require__(4);exports.DetailController=function(){function DetailController(serviceBrokerDetail,$sce,$stateParams,brokerCatalogs,$mdDialog,$http,$state,horServiceBrokerService,$scope,$filter,$translate,base64){if(_classCallCheck(this,DetailController),this._base64=base64,this._dialog=$mdDialog,this.brokerDetail=serviceBrokerDetail.Broker,this.cataLogArray=serviceBrokerDetail.ServiceClass,this.planArray=serviceBrokerDetail.ServiceClass.plans,void 0!=serviceBrokerDetail.ServiceClass.externalMetadata){this.readme=serviceBrokerDetail.ServiceClass.externalMetadata.longDescription;try{this.mdTel=$sce.trustAsHtml(marked(this.readme))}catch(err){this.readme="No data returned for the time being."}this.basicText=serviceBrokerDetail.ServiceClass.externalMetadata.basicInformation;try{this.basicTextTel=$sce.trustAsHtml(marked(this.basicText))}catch(err){this.basicText="No data returned for the time being."}this.deployText=serviceBrokerDetail.ServiceClass.externalMetadata.configParam;try{this.deployTextTel=$sce.trustAsHtml(marked(this.deployText))}catch(err){this.deployText="No data returned for the time being."}this.explainText=serviceBrokerDetail.ServiceClass.externalMetadata.howToUse;try{this.explainTextTel=$sce.trustAsHtml(marked(this.explainText))}catch(err){this.explainText="No data returned for the time being."}}this._http=$http,this._state=$state,this.tabs=[{title:"Details"},{title:"Pods"}],this.serviceBrokerItem={name:this.brokerDetail.metadata.name},this._horServiceBrokerService=horServiceBrokerService,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"ServiceStore",subNav:{title:"Service Market",state:"servicebroker"},sub:this.brokerDetail.metadata.name+" Details"})}return DetailController.$inject=["serviceBrokerDetail","$sce","$stateParams","brokerCatalogs","$mdDialog","$http","$state","horServiceBrokerService","$scope","$filter","$translate","base64"],_createClass(DetailController,[{key:"instanceDialog",value:function(event){var item=this.serviceBrokerItem,planArr=this.planArray,serviceName=this.cataLogArray.metadata.name;return this._horServiceBrokerService.showInstanceDialog(event,item,planArr,serviceName)}},{key:"getDeploysHref",value:function(objName){return this._state.go(_new_state.stateName,new _utils.UpdageStateParams("default",objName,"list"))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveServerBrokerList(horServiceBrokerListResource,$stateParams){var obj={objectName:$stateParams.objectName};return horServiceBrokerListResource.get(obj).$promise}resolveServerBrokerList.$inject=["horServiceBrokerListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServerBrokerList=resolveServerBrokerList;var _list_state=__webpack_require__(312),_new_controller=__webpack_require__(323),_hormain_state=__webpack_require__(30),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{brokerList:resolveServerBrokerList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"servicebroker/service_new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(324),_namespacedetail_state=__webpack_require__(57);exports.NewController=function(){function NewController(horManagePod,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,brokerList,horBrokerinstance,horManageService,$http,NgTableParams){_classCallCheck(this,NewController),angular.forEach(brokerList.instance_item,function(item){item.name=item.instance.metadata.name,item.namespace=item.instance.metadata.namespace,item.servicename=item.instance.spec.serviceClassName,item.planName=item.instance.spec.planName,item.instance.status&&item.instance.status.conditions.length>0?item.status=item.instance.status.conditions[0].status:item.status="creation",0==item.binding_list.length?item.binding="not binding":item.binding="binding"}),this.namespace=$stateParams.namespace,this.instanceList=brokerList.instance_item,this._http=$http,this._state=$state,this._horBrokerinstance=horBrokerinstance,this._horManageService=horManageService,this.globalSearchTerm;this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.instanceList})}return _createClass(NewController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(objNamespace,objName){return this._state.href(_detail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"toNamespaceDetail",value:function(objNamespace){return this._horManageService.goToNamespaceDetail(objNamespace,objNamespace)}},{key:"bundingInstance",value:function(event,item){return this._horBrokerinstance.showBundingInstance(event,item)}},{key:"unbundingInstance",value:function(event,item){return this._horBrokerinstance.showUnbundingInstance(event,item)}},{key:"deleteInstance",value:function(event,item){return this._horBrokerinstance.showDeleteInstance(event,item)}},{key:"refresh",value:function(){this._state.go(".",{},{reload:!0})}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}}]),NewController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="brokerinstancedetail",exports.stateUrl="/brokerinstance"},function(module,exports,__webpack_require__){"use strict";function resolveAppCatalogDetail(horAppCatalogDetailResource,$stateParams){var obj={repository:$stateParams.objectNamespace,chart:$stateParams.objectName};return horAppCatalogDetailResource.get(obj).$promise}resolveAppCatalogDetail.$inject=["horAppCatalogDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAppCatalogDetail=resolveAppCatalogDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(319),_detail_controller=__webpack_require__(326);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{appCatalogDetail:resolveAppCatalogDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"servicebroker/appstore_detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state2=(__webpack_require__(4),__webpack_require__(319),__webpack_require__(78),__webpack_require__(312),__webpack_require__(327));exports.DetailController=function(){function DetailController($state,$mdToast,$filter,$stateParams,appCatalogDetail,horAppCatalogReleseResource,$translate,base64){_classCallCheck(this,DetailController),this._base64=base64,this._filter=$filter,this._translate=$translate,this._state=$state,this._mdToast=$mdToast,this._horAppCatalogReleseResource=horAppCatalogReleseResource,this.appCatalogDetail=appCatalogDetail,this.appCatalogDetailMetadata=appCatalogDetail.RawData.metadata,this.parameterObject=appCatalogDetail.RawData.values,this.repo=$stateParams.objectNamespace,this.chart=$stateParams.objectName,this.applicationNamespace=$stateParams.namespace,this.readme=atob(appCatalogDetail.RawData.readme);try{for(var regexStr=_constant.README_REGEX_STR;-1!=this.readme.search(regexStr);){var index=this.readme.search(regexStr),end=this.readme.search(_constant.README_REGEX_SUFFIX),endIndex=end+_constant.README_REGEX_SUFFIX.length,subString=this.readme.substring(index+_constant.README_REGEX_PREFIX.length,end).trim(),dStr=$filter("I18N")(subString),decodeStr=this._base64.decode(dStr),srcStr=this.readme.substring(index,endIndex);this.readme=this.readme.replace(srcStr,decodeStr)}}catch(err){console.log(err),this.readme="No data returned for the time being."}this.applicationName="",this.showAdvConfig=!1,this.radioValue="appConfig",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"json",onLoad:this.aceOnLoad}}return _createClass(DetailController,[{key:"$onInit",value:function(){this.selectedVersion=this.appCatalogDetailMetadata.version,this.advConfigParams=this.getObjectKeyPaths(this.parameterObject),this.reload()}},{key:"showValueCheckbox",value:function(value){return"boolean"==(void 0===value?"undefined":_typeof(value))}},{key:"getObjectKeyPaths",value:function(obj){var results={},tempObj={},tempStr="";if(angular.isObject(obj)||obj instanceof Object)return function objKeys(obj){var currentKey=tempStr;angular.forEach(obj,function(value,key){tempStr=currentKey+"$"+key,angular.isObject(value)&&value instanceof Object?objKeys(value):tempObj[tempStr]=value})}(obj),angular.forEach(tempObj,function(value,key){results[key.substring(1)]=value}),results}},{key:"aceOnLoad",value:function(editor){editor.$blockScrolling=1/0}},{key:"reload",value:function(){this.aceModel=JSON.stringify({name:this.applicationName||"",namespace:this.applicationNamespace,repo:this.repo,chart:this.chart,version:this.selectedVersion,values:this.parameterObject},null,2)}},{key:"deployAppRelese",value:function(){var _this=this,advConfigParams=(this.parameterObject,this.advConfigParams),resultValues={},params=void 0;"appConfig"==this.radioValue?(angular.forEach(advConfigParams,function(v,k){var tempArr=k.split("$"),tempObj=v;tempArr.reverse().forEach(function(t){var o={};o[t]=tempObj,tempObj=o}),angular.merge(resultValues,tempObj)}),params={name:this.applicationName,namespace:this.applicationNamespace,repo:this.repo,chart:this.chart,version:this.selectedVersion,values:resultValues}):"configFile"==this.radioValue&&(params=this.aceModel);var applicationCreating=this._filter("I18N")("Application Creating");return this._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+applicationCreating+"</span></md-toast>",position:"top right",hideDelay:3e3,toastClass:"hor-toast"}),this._horAppCatalogReleseResource.save(params,function(data){_this._mdToast.hide(),_this._state.go(_list_state2.stateName)},function(err){console.error(err)})}},{key:"toggle",value:function(){this.showAdvConfig=!this.showAdvConfig}}]),DetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appdeployed",exports.stateUrl="/appdeployed"},function(module,exports,__webpack_require__){"use strict";function appCatalogDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts/:chart")}function deployAppReleseResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases")}appCatalogDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appCatalogDetailResource=appCatalogDetailResource,exports.deployAppReleseResource=deployAppReleseResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appstoreSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(305);exports.appstoreSerivce=function(){function appstoreSerivce($http,$state,$mdDialog){_classCallCheck(this,appstoreSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return appstoreSerivce.$inject=["$http","$state","$mdDialog"],_createClass(appstoreSerivce,[{key:"getUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/release/install"}},{key:"showRunServiceDialog",value:function(event,version,chart,repo){var _this=this;this.chartName=chart,this.repoName=repo,this.versionName=version;var self=this,url=this.getUrl();this._dialog.show({controller:function($mdDialog){this.obj={repo:self.repoName,chart:self.chartName,version:self.versionName,selectedVersion:self.versionName[0].version},this.onLoad=function(instance){instance.expandAll()},this.answer=function(name,namespace,appstoreDetailname,repName,selectedVersion){var obj={chart:appstoreDetailname,name:name,namespace:namespace,repo:repName,version:selectedVersion};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}).then(function(obj){_this._http({method:"POST",url:url,data:obj}).success()}).then(function(data){},function(){})}},{key:"showEditDialog",value:function(event,data){var self=this,inputData={name:data.name,content:data.content};this._dialog.show({controller:function($mdDialog,configData){this.configData=configData.content,this.obj={data:this.configData,options:{mode:"tree"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{configData:inputData}}).then(function(answer){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/",method:"POST",data:answer})}).then(function(data){self._state.go(_list_state.stateName,{},{reload:!0})},function(reason){})}},{key:"showUpdateEditDialog",value:function(event,data){var self=this,inputData={name:data.name,content:data.content};this._dialog.show({controller:function($mdDialog,configData){this.configData=configData.content,this.obj={data:this.configData,options:{mode:"tree"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appstore/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{configData:inputData}}).then(function(answer){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/",method:"PUT",data:answer})}).then(function(data){self._state.go(_list_state.stateName,{},{reload:!0})},function(reason){})}}]),appstoreSerivce}()},function(module,exports){"use strict";function fileChange(){return{restrict:"A",require:"ngModel",scope:{fileChange:"&"},link:function(scope,element,attrs,ctrl){function onChange(){attrs.multiple?ctrl.$setViewValue(element[0].files):ctrl.$setViewValue(element[0].files[0]),scope.$apply(function(){scope.fileChange()})}element.on("change",onChange),scope.$on("destroy",function(){element.off("change",onChange)})}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=fileChange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(332),_services_service=__webpack_require__(333),_services_stateconfig=__webpack_require__(337),_services_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_services_stateconfig),_detail_service=__webpack_require__(285);exports.default=angular.module("horApp.services",["ngMaterial","ngResource","ui.router"]).config(_services_stateconfig2.default).service("horManageService",_services_service.ServiceSerivce).factory("horServiceListResource",_list_service.serviceListResource).factory("horHpaDetailResource",_detail_service.hpaDetailResource)},function(module,exports,__webpack_require__){"use strict";function deploymentListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments")}deploymentListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.deploymentListResource=deploymentListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=(__webpack_require__(57),__webpack_require__(4)),_detail_state=__webpack_require__(334),_deploydetail_state=(__webpack_require__(335),__webpack_require__(336));exports.ServiceSerivce=function(){function ServiceSerivce($http,$state,$mdDialog,$resource,$mdToast,$timeout,$cookieStore){_classCallCheck(this,ServiceSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._mdToast=$mdToast,this._timeout=$timeout,this._cookieStore=$cookieStore}return ServiceSerivce.$inject=["$http","$state","$mdDialog","$resource","$mdToast","$timeout","$cookieStore"],_createClass(ServiceSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,deployment=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/"+ns+"/name/"+deployment}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title("删除操作").textContent("您是否确定删除服务 "+item.name+" ？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>正在删除服务.....</span></md-toast>',position:"w200 successS",hideDelay:1e4}),_this._http.delete(url)}).then(function(data){void 0==data?(_this._mdToast.show(_this._mdToast.simple().textContent("服务删除失败").position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200==data.status&&_this._timeout(function(){self._state.go(".",{},{reload:!0})},1e4).then(function(){_this._mdToast.show(_this._mdToast.simple().textContent("服务删除成功").position("w200 success").hideDelay(3e3))})},function(){})}},{key:"showStartDialog",value:function(event){var self=this;this._dialog.show({controller:function($mdDialog,servicesData){this.servicesData=servicesData;var runServices=servicesData.filter(function(item){return"运行中"==item.status});this.runCount=runServices.length;var stopService=servicesData.filter(function(item){return"已停止"==item.status});this.stopCount=stopService.length,this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"services/start_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showStopDialog",value:function(event){var self=this,confirm=this._dialog.confirm().title("停止操作").textContent("您是否确定停止这1个运行中的服务 ？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){}).then(function(){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showRestartDialog",value:function(event){var self=this,confirm=this._dialog.confirm().title("重启操作").textContent("您是否确定快速重启这1个可以快速重启的服务 ？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){}).then(function(){self._state.go("services",{},{reload:!0})},function(){})}},{key:"showRebuildDialog",value:function(event){var self=this,confirm=this._dialog.confirm().title("重新部署操作").textContent("您是否确定重新部署这1个可以重新部署的服务 ？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){}).then(function(){self._state.go("services",{},{reload:!0})},function(){})}},{key:"getNamespaceUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"getAppCatalogChartsList",value:function(){return _constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/dev/charts"}},{key:"getAppCatalogRepoList",value:function(){return _constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories"}},{key:"getRegistryPublicList",value:function(){return _constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects?public=1"}},{key:"getRegistryPrivateList",value:function(){return _constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects?name="+this._cookieStore.get(_constant.HOR_USER_COOKIES_KEY).userName}},{key:"repositoriesResource",value:function(){var url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?page=:page&page_size=:limit&projectId=:projectId";return this._resource(url,{},{get:{method:"GET",isArray:!0}})}},{key:"showCreateServices",value:function(event){var self=this,appCatalogCharts=this.getAppCatalogChartsList();this._dialog.show({controller:function($mdDialog,$mdToast,appCatalogChartsList,$filter,base64,$state){var _this2=this;this._base64=base64,this._state=$state,this.chartTypeList=_constant.CHART_TYPE_TAG,this.allTypes="All",this.selectedType=this.allTypes,this.selectedKey,this.selectedTypeName;var appcatalogArr=[];angular.forEach(appCatalogChartsList,function(value,key){var temp=value,repo=key;angular.forEach(temp.RawData,function(value,key){angular.forEach(value,function(v,key){v.repo=repo,appcatalogArr.push(v)})})}),this.appCatalogChartsList=appcatalogArr,angular.forEach(this.appCatalogChartsList,function(item){for(var des=item.description,regexStr=_constant.README_REGEX_STR;-1!=des.search(regexStr);){var index=des.search(regexStr),end=des.search(_constant.README_REGEX_SUFFIX),endIndex=end+_constant.README_REGEX_SUFFIX.length,subString=des.substring(index+_constant.README_REGEX_PREFIX.length,end).trim(),dStr=$filter("I18N")(subString),decodeStr="";try{decodeStr=_this2._base64.decode(dStr)}catch(err){decodeStr="No data returned for the time being."}var srcStr=des.substring(index,endIndex);des=des.replace(srcStr,decodeStr)}item.desI18N=des}),this.changeType=function(type){_this2.selectedKey=type.key},this.goToCatalogDetail=function(objName,repo){return $mdDialog.hide(),_this2._state.go(_detail_state.stateName,new _utils.StateParams("dev",objName))},this.mdToast=$mdDialog,this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"services/createservices_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{appCatalogChartsList:function(){return self._http.get(appCatalogCharts)}},locals:{}}).then(function(answer){}).then(function(data){})}},{key:"showRegistryCreateServices",value:function(event){var self=this,registryPublicList=this.getRegistryPublicList(),registryPrivateList=this.getRegistryPrivateList();this._dialog.show({controller:function($mdDialog,$mdToast,publicList,$resource,$state,$http,privateList){var _this3=this;this.selectedTab=1,this.selectedKey,this.selectedTypeName,this._resource=$resource,this._state=$state,this._http=$http,this.List=[];var _publicList=publicList.data;angular.forEach(_publicList,function(row){var objParams={projectId:row.project_id}
;_this3._resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?page=1&page_size=10&projectId="+objParams.projectId,{},{get:{method:"GET",isArray:!0}}).get().$promise.then(function(data){data.length>0&&angular.forEach(data,function(repositories){_this3.List.push(repositories)})})}),this.showPublicList=function(){_this3.selectedTab=1,_this3.List=[];var _publicList=publicList.data;angular.forEach(_publicList,function(row){var objParams={projectId:row.project_id};_this3._resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?page=1&page_size=10&projectId="+objParams.projectId,{},{get:{method:"GET",isArray:!0}}).get().$promise.then(function(data){data.length>0&&angular.forEach(data,function(repositories){_this3.List.push(repositories),console.log(_this3.publicList)})})})},this.showPrivateList=function(){_this3.selectedTab=2,_this3.List=[];var url=(privateList.data[0].project_id,_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+privateList.data[0].project_id);_this3._http({url:url,method:"GET"}).then(function(row){_this3.List=row.data})},this.publicTagsList=function(item){$mdDialog.hide();var projectName=item.name.split("/")[0],repoName=item.name.substring(item.name.indexOf("/")+1,item.name.length);return _this3._state.go(_deploydetail_state.stateName,new _utils.DeployDetailStateParams(projectName,repoName))},this.mdToast=$mdDialog,this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"services/createregistryservices_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{publicList:function(){return self._http.get(registryPublicList)},privateList:function(){return self._http.get(registryPrivateList)}},locals:{}}).then(function(answer){}).then(function(data){})}}]),ServiceSerivce}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appcatalogdetail",exports.stateUrl="/appcatalog"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="tags",exports.stateUrl="/tags"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="deploydetail",exports.stateUrl="/deploy"},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state("services.new",_new_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(338),_list_stateconfig=__webpack_require__(339),_new_stateconfig=__webpack_require__(342),_detail_stateconfig=__webpack_require__(344),_detail_state=__webpack_require__(341)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="services",exports.stateUrl="/services"},function(module,exports,__webpack_require__){"use strict";function resolveDeploymentList(horDeploymentListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horDeploymentListResource.get(obj).$promise.then(function(deploymentList){return horUtilsService.recombineDeploymentList(deploymentList)})}resolveDeploymentList.$inject=["horDeploymentListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDeploymentList=resolveDeploymentList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(338),_list_controller=__webpack_require__(340);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{deploymentList:resolveDeploymentList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"services/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(341);__webpack_require__(163),exports.ListController=function(){function ListController($stateParams,$http,$state,$scope,$filter,NgTableParams,horManageService,$element,deploymentList,$cookies,horModifyService,horHpaService,$resource,horUtilsService){_classCallCheck(this,ListController),this._horManageService=horManageService,this._horModifyService=horModifyService,this._horHpaService=horHpaService,this._resource=$resource,this.globalSearchTerm,this.select_all=!1,this.servicesAddrShow=!1,this._state=$state,this._http=$http,this._scope=$scope,this._filter=$filter,this.selectItems=[],this.namespace=$stateParams.namespace,this._cookies=$cookies,this._horUtilsService=horUtilsService,this.data=deploymentList,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data})}return ListController.$inject=["$stateParams","$http","$state","$scope","$filter","NgTableParams","horManageService","$element","deploymentList","$cookies","horModifyService","horHpaService","$resource","horUtilsService"],_createClass(ListController,[{key:"$onInit",value:function(){var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);"view"===user.userRole.Name&&(this.editFlag=!1),this.cookiesName=user.userRole.Name}},{key:"selectAll",value:function(checkall){var _this=this;this.selectItems=[],angular.forEach(this.data,function(value,key){value.checked=checkall,value.checked=checkall,value.checked&&_this.selectItems.push(value)})}},{key:"selectOne",value:function(){var _this2=this;this.selectItems=[],angular.forEach(this._filter("filter")(this.data,{checked:!0}),function(item){_this2.selectItems.push(item)}),this.select_all=this.selectItems.length==this.data.length}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"deleteService",value:function(event,item){return this._horManageService.showDeleteDialog(event,item)}},{key:"startService",value:function(event){return this._horManageService.showStartDialog(event)}},{key:"stopService",value:function(event){return this._horManageService.showStopDialog(event)}},{key:"refreshService",value:function(event){return null}},{key:"restartService",value:function(event){return this._horManageService.showRestartDialog(event)}},{key:"rebuildService",value:function(event){return this._horManageService.showRebuildDialog(event)}},{key:"showHorizontalScaling",value:function(event,item){return this._horManageService.showHorizontalScaling(event,item)}},{key:"showAutoScaling",value:function(event,item){return this._horManageService.showAutoScaling(event,item)}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"showModifyResourceObjectHS",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectHS(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"showHpa",value:function(event,name,namespace){var _this3=this,item={name:name,namespace:namespace};this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespace+"/hpas").get().$promise.then(function(hpaList){return void 0===hpaList.items.find(function(value,index,arr){return-1!=value.metadata.name.search(name)})?_this3._horHpaService.showAddDialog(event,item):_this3._horHpaService.showEditDialog(event,item)})}},{key:"showUpdatePage",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="servicesdetail",exports.stateUrl="/services"},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _list_state=__webpack_require__(338),_new_controller=__webpack_require__(343),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"services/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_deploy_state=(__webpack_require__(4),__webpack_require__(341),__webpack_require__(9));exports.NewController=function(){function NewController($state,horManageService){_classCallCheck(this,NewController),this._state=$state,this._horManageService=horManageService,this.selectedContentBox=1}return NewController.$inject=["$state","horManageService"],_createClass(NewController,[{key:"createServices",value:function(event,selectedContentBox){return 1==selectedContentBox?this._horManageService.showRegistryCreateServices(event):2==selectedContentBox?this._horManageService.showCreateServices(event):void this._state.go(_deploy_state.deployFileStateName,{},{reload:!0})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function resolveDeploymentDetail(horDeploymentDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentDetailResource.get(objParams).$promise.then(function(deploymentDetail){return horUtilsService.recombineDeploymentDetail(deploymentDetail)})}function resolveDeploymentPod(horDeploymentPodResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentPodResource.get(objParams).$promise.then(function(deploymentPods){return horUtilsService.recombinePodList(deploymentPods)})}function resolveNewReplicasetsDetail(horNewReplicaSetDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horNewReplicaSetDetailResource.get(objParams).$promise.then(function(rsList){return horUtilsService.recombineReplicaSetList(rsList)})}function resolveOldReplicasetsDetail(horOldReplicaSetsDetailResource,$stateParams,horUtilsService){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horOldReplicaSetsDetailResource.get(objParams).$promise.then(function(rsList){return horUtilsService.recombineReplicaSetList(rsList)})}function resolveEventDetail(horEvnetDetailResource,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horEvnetDetailResource.get(objParams).$promise}function resolveDeploymentYml(horDeploymentDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horDeploymentDetailYml.get(obj).$promise}resolveDeploymentYml.$inject=["horDeploymentDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDeploymentDetail=resolveDeploymentDetail,exports.resolveDeploymentPod=resolveDeploymentPod,exports.resolveNewReplicasetsDetail=resolveNewReplicasetsDetail,exports.resolveOldReplicasetsDetail=resolveOldReplicasetsDetail,exports.resolveEventDetail=resolveEventDetail,exports.resolveDeploymentYml=resolveDeploymentYml;var _detail_state=__webpack_require__(341),_detail_controller=__webpack_require__(345),_utils=__webpack_require__(4),_hormain_state=__webpack_require__(30);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{deploymentDetail:resolveDeploymentDetail,deploymentPods:resolveDeploymentPod,deploymentYml:resolveDeploymentYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"services/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=(__webpack_require__(94),__webpack_require__(338),__webpack_require__(11)),_detail_state2=__webpack_require__(341),_detail_state3=__webpack_require__(79),_detail_state4=__webpack_require__(73),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($state,deploymentDetail,deploymentPods,horManageService,$cookies,$stateParams,horDeploymentDetailResourceUsage,$scope,deploymentYml,horModifyService,$resource,horDeploymentYmlArr,$mdToast,horDeploymentDetailYml,horManagePod,NgTableParams,$translate,horHpaService){var _this=this;_classCallCheck(this,DetailController),this._state=$state,this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this._horHpaService=horHpaService,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this._translate=$translate,this.deploymentPods=deploymentPods,this.podTableParams=null,this.deploymentPods&&(this.podTableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.deploymentPods})),this._horManagePod=horManagePod,this._horDeploymentYmlArr=horDeploymentYmlArr,this.namespace=$stateParams.namespace,this._horModifyService=horModifyService,this._horDeploymentDetailYml=horDeploymentDetailYml,this.horDeploymentDetailResourceUsage=horDeploymentDetailResourceUsage,this.deploymentDetailResoruceUsageData,this._cookies=$cookies,this.editFlag=!0,this._scope=$scope,this.data=deploymentDetail,void 0==this.data.availableReplicas&&(this.data.availableReplicas=0),this._horManageService=horManageService,this.item={namespace:this.data.namespace,name:this.data.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(deploymentYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+this.namespace+"/hpas").get().$promise.then(function(hpaList){var list=hpaList.items,val=list.find(function(value,index,arr){return-1!=value.metadata.name.search(_this._stateParams.objectName)});_this.showHPA=void 0!==val})}return DetailController.$inject=["$state","deploymentDetail","deploymentPods","horManageService","$cookies","$stateParams","horDeploymentDetailResourceUsage","$scope","deploymentYml","horModifyService","$resource","horDeploymentYmlArr","$mdToast","horDeploymentDetailYml","horManagePod","NgTableParams","$translate","horHpaService"],_createClass(DetailController,[{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"$onInit",value:function(){var _this2=this,user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);"view"===user.userRole.Name&&(this.editFlag=!1),this.cookiesName=user.userRole.Name;var self=this;this.horDeploymentDetailResourceUsage.setCallBack(self.deploymentDetailResourceUsageCallBack.bind(self)),this.horDeploymentDetailResourceUsage.startWSMonitor(this.item.namespace),this._scope.$on("$destroy",function(){_this2.horDeploymentDetailResourceUsage.stopWSMonitor()})}},{key:"deploymentDetailResourceUsageCallBack",value:function(responseData){null!==responseData&&(this.deploymentDetailResoruceUsageData=responseData.deploymentDetail.podList.cumulativeMetrics)}},{key:"deleteService",value:function(event){var item=this.item;return this._horManageService.showDeleteDialog(event,item)}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"updateService",value:function(event){var _this3=this,ns=this.data.namespace,deployment=this.data.name,deployUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/deployment/namespace/"+ns+"/name/"+deployment;this._resource(deployUrl,{},{save:{method:"PUT"}}).save(this.aceModel,function(response){_this3._state.go(".",{},{reload:!0})})}},{key:"showModifyResourceObjectHS",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectHS(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,resourcePodSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"saveChange",value:function(){var _this4=this,aceName=this.data.name,aceNamespace=this.data.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horDeploymentYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this4._mdToast.show(_this4._mdToast.simple().textContent(_this4._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this4._stateParams.lastPage?_this4._state.go(".",{},{reload:!0}):_this4._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"getUbavailableResource",value:function(){void 0==this.data.availableReplicas&&(this.data.availableReplicas=0);var num=this.data.allreplicas-this.data.availableReplicas;return Math.abs(num)}},{key:"reload",value:function(){var _this5=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horDeploymentDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this5.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"getPodDetailHref",value:function(namespace,objName){return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteNodePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"updateNodePod",value:function(event,item){return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showNothingState",value:function(){return!this.podTableParams||0===this.podTableParams.count()}},{key:"refreshPage",value:function(){return this._state.go(".",{},{reload:!0})}},{key:"showHPAFn",value:function(){var _this6=this,namespace=this._stateParams.objectNamespace,objectName=this._stateParams.objectName;this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespace+"/hpas/"+objectName).get().$promise.then(function(hpaDetail){_this6.hpaDetail=hpaDetail,_this6.metadata=_this6.hpaDetail.metadata,_this6.spec=_this6.hpaDetail.spec,_this6.status=_this6.hpaDetail.status})}},{key:"showHpa",value:function(event,name,namespace){var _this7=this,item={name:name,namespace:namespace};this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespace+"/hpas").get().$promise.then(function(hpaList){return void 0===hpaList.items.find(function(value,index,arr){return-1!=value.metadata.name.search(name)})?_this7._horHpaService.showAddDialog(event,item):_this7._horHpaService.showEditDialog(event,item)})}},{key:"deleteHPA",value:function(event,name,namespace){var item={name:name,namespace:namespace};return this._horHpaService.showDeleteDialog(event,item)}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _brokerinstance_service=__webpack_require__(347),_list_service=__webpack_require__(348),_detail_service=__webpack_require__(349),_brokerinstance_stateconfig=__webpack_require__(350),_brokerinstance_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_brokerinstance_stateconfig);exports.default=angular.module("horApp.brokerinstance",["ngMaterial","ngResource","ui.router"]).config(_brokerinstance_stateconfig2.default).service("horBrokerinstance",_brokerinstance_service.brokerinstance).factory("horBrokerinstanceResource",_list_service.brokerinstanceResource).factory("horInstanceDetailResource",_detail_service.instanceDetailResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.brokerinstance=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);__webpack_require__(309),exports.brokerinstance=function(){function brokerinstance($http,$state,$mdToast,$mdDialog,errorDialog,$translate){_classCallCheck(this,brokerinstance),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this._translate=$translate}return _createClass(brokerinstance,[{key:"getUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER_BROKER+"/brokers/"}},{key:"getDeleteUrl",value:function(item){var name=item.name,namespace=item.namespace;return _constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/"+name+"?namespace="+namespace}},{key:"showDeleteInstance",value:function(event,item){var _this=this,self=this,url=this.getDeleteUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Service Instances")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Service Instances")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(data){void 0==data?(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Instance deletion failure")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(1==data.data.status?(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Instance deleting success")).position("w200 success").hideDelay(3e3)),self._state.go("brokerinstance",{},{reload:!0})):0==data.data.status&&_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("There is a binding in the current service instance, which is not allowed to delete")).position("w300 danger").hideDelay(3e3)))},function(){})}},{key:"showBundingInstance",value:function(event,item){var _this2=this;this.brokerName=item.name,this.brokerNamespace=item.namespace;var self=this;this.getUrl();this._dialog.show({controller:function($mdDialog){this.onLoad=function(instance){instance.expandAll()},this.answer=function(serviceName,serviceSercet){var param={spec:{secret_name:serviceSercet}},brokerName=self.brokerName,brokerNamespace=self.brokerNamespace,obj={name:serviceName,bname:brokerName,namespace:brokerNamespace,param:param};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"servicebrokerinstance/binding_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(obj){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/"+obj.bname+"/service_bindings/"+obj.name+"?namespace="+obj.namespace,method:"Put",data:obj.param})}).then(function(data){void 0==data?(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("Instance binding failure")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("Instance binding success")).position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(reason){})}},{key:"showUnbundingInstance",value:function(event,item){var _this3=this;this.bundingList=item.binding_list,this.bundingSelect=item.binding_list[0].metadata.name,this.brokerName=item.instance.metadata.name,this.brokerNamespace=item.instance.metadata.namespace;var self=this;this.environmentMaps=[],this._dialog.show({controller:function($mdDialog){this.obj={bundingList:self.bundingList,bundingSelect:self.bundingSelect},this.onLoad=function(instance){instance.expandAll()},this.answer=function(name){var brokerName=self.brokerName,brokerNamespace=self.brokerNamespace,obj={name:name,bname:brokerName,namespace:brokerNamespace};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"servicebrokerinstance/unbinding_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(obj){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/"+obj.bname+"/service_bindings/"+obj.name+"?namespace="+obj.namespace,method:"Delete"})}).then(function(data){void 0==data?(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("Failure of case Unbinding")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this3._mdToast.show(_this3._mdToast.simple().textContent(_this3._translate.instant("Successful case Unbinding")).position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(reason){})}}]),brokerinstance}()},function(module,exports,__webpack_require__){"use strict";function brokerinstanceResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/?namespace=:namespace")}brokerinstanceResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.brokerinstanceResource=brokerinstanceResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function instanceDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_BROKER+"/service_instances/:objectName?namespace=:objectNamespace")}instanceDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.instanceDetailResource=instanceDetailResource;var _constant=__webpack_require__(11);__webpack_require__(309)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(309)),_detail_state=__webpack_require__(324),_list_stateconfig=__webpack_require__(351),_detail_stateconfig=__webpack_require__(353)},function(module,exports,__webpack_require__){"use strict";function resolveInstanceList(horBrokerinstanceResource,$stateParams){var obj={namespace:$stateParams.namespace};return horBrokerinstanceResource.get(obj).$promise}resolveInstanceList.$inject=["horBrokerinstanceResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,
exports.resolveInstanceList=resolveInstanceList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(352),_list_state=__webpack_require__(309);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{instanceList:resolveInstanceList},views:{"":{controller:_list_controller.repositoriesCtrl,controllerAs:"$ctrl",templateUrl:"servicebrokerinstance/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.repositoriesCtrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_detail_state=__webpack_require__(324),_namespacedetail_state=(__webpack_require__(309),__webpack_require__(57));exports.repositoriesCtrl=function(){function repositoriesCtrl(instanceList,$interval,$stateParams,NgTableParams,$http,$state,$mdDialog,horBrokerinstance,$scope){_classCallCheck(this,repositoriesCtrl),angular.forEach(instanceList.instance_item,function(item){item.name=item.instance.metadata.name,item.namespace=item.instance.metadata.namespace,item.servicename=item.instance.spec.serviceClassName,item.planName=item.instance.spec.planName,item.instance.status&&item.instance.status.conditions.length>0?item.status=item.instance.status.conditions[0].status:item.status="creation",0==item.binding_list.length?item.binding="not binding":item.binding="binding"}),this.instanceList=instanceList.instance_item,this._http=$http,this._state=$state,this._horBrokerinstance=horBrokerinstance,this._interval=$interval,this.globalSearchTerm;this.namespace=$stateParams.namespace,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.instanceList}),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"ServiceStore",subNav:{title:"Broker Instances",state:"brokerinstance"}})}return _createClass(repositoriesCtrl,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(objNamespace,objName){return this._state.href(_detail_state.stateName,new _utils.StateParams(objNamespace,objName))}},{key:"bundingInstance",value:function(event,item){return this._horBrokerinstance.showBundingInstance(event,item)}},{key:"unbundingInstance",value:function(event,item){return this._horBrokerinstance.showUnbundingInstance(event,item)}},{key:"deleteInstance",value:function(event,item){return this._horBrokerinstance.showDeleteInstance(event,item)}},{key:"refresh",value:function(){this._state.go(".",{},{reload:!0})}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}}]),repositoriesCtrl}()},function(module,exports,__webpack_require__){"use strict";function resolveInstancerDetail(horInstanceDetailResource,$stateParams){var obj={objectName:$stateParams.objectName,objectNamespace:$stateParams.objectNamespace};return horInstanceDetailResource.get(obj).$promise}resolveInstancerDetail.$inject=["horInstanceDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveInstancerDetail=resolveInstancerDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(324),_detail_controller=__webpack_require__(354);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{instanceDetail:resolveInstancerDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"servicebrokerinstance/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(11),exports.DetailController=function(){function DetailController(instanceDetail,$mdDialog,$http,$state,horServiceBrokerService,$scope,NgTableParams){_classCallCheck(this,DetailController),this._dialog=$mdDialog,this.instanceData=instanceDetail.instance;var instanceData=instanceDetail.instance;this.bundingData=instanceDetail.binding_list;var lablesArr=[];instanceData.metadata.labels?angular.forEach(instanceData.metadata.labels,function(value,key){var str=key+":"+value;lablesArr.push(str)}):lablesArr="-",this.lablesArr=lablesArr;var credentialsArr=[];instanceData.spec.parameters.credentials?angular.forEach(instanceData.spec.parameters.credentials,function(value,key){var str=key+":"+value;credentialsArr.push(str)}):credentialsArr="-",this.credentialsArr=credentialsArr,this.globalSearchTerm,angular.forEach(this.bundingData,function(item){item.name=item.metadata.name}),this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.bundingData}),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"ServiceStore",subNav:{title:"Broker Instances",state:"brokerinstance"},sub:this.instanceData.metadata.name+" Details"})}return DetailController.$inject=["instanceDetail","$mdDialog","$http","$state","horServiceBrokerService","$scope","NgTableParams"],_createClass(DetailController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(356),_repositories_stateconfig=__webpack_require__(357),_repositories_stateconfig2=_interopRequireDefault(_repositories_stateconfig),_addrepositories_service=__webpack_require__(361),_repositories_service=__webpack_require__(364),_module=__webpack_require__(158),_module2=_interopRequireDefault(_module);exports.default=angular.module("horApp.repositories",["ngMaterial","ngResource","ui.router",_module2.default.name]).config(_repositories_stateconfig2.default).service("horAddRepositoriesService",_addrepositories_service.AddRepositoriesService).service("horRepositoriesManageService",_repositories_service.RepositoriesManageSerivce).factory("horRepositoriesResource",_list_service.repositoriesResource)},function(module,exports,__webpack_require__){"use strict";function repositoriesResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories")}function postNewRepositoriesResource($resource,data){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories?name="+data.name+"&url="+data.url+"&cache="+data.cache+"&caFile="+data.caFile+"&certFile="+data.certFile+"&keyFile="+data.keyFile;return strUrl&&strUrl.replace(/\@/g,"%40").replace(/\#/g,"%21").replace(/\$/g,"%24"),$resource(strUrl,{},actions)}repositoriesResource.$inject=["$resource"],postNewRepositoriesResource.$inject=["$resource","data"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.repositoriesResource=repositoriesResource,exports.postNewRepositoriesResource=postNewRepositoriesResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(358),_list_stateconfig=__webpack_require__(359)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="repositories",exports.stateUrl="/repositories"},function(module,exports,__webpack_require__){"use strict";function resolveRepositoriesList(horRepositoriesResource){return horRepositoriesResource.get().$promise}resolveRepositoriesList.$inject=["horRepositoriesResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRepositoriesList=resolveRepositoriesList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(360),_list_state=__webpack_require__(358);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{repositoriesList:resolveRepositoriesList},views:{"":{controller:_list_controller.repositoriesCtrl,controllerAs:"$ctrl",templateUrl:"repositories/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.repositoriesCtrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(11),__webpack_require__(4),exports.repositoriesCtrl=function(){function repositoriesCtrl(repositoriesList,horAddRepositoriesService,horRepositoriesManageService,$scope){_classCallCheck(this,repositoriesCtrl),this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this.data=repositoriesList.RawData,this._horAddRepositoriesService=horAddRepositoriesService,this._horRepositoriesManageService=horRepositoriesManageService,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"Repos",state:"repositories"}})}return repositoriesCtrl.$inject=["repositoriesList","horAddRepositoriesService","horRepositoriesManageService","$scope"],_createClass(repositoriesCtrl,[{key:"addStoreDialog",value:function(event){this._horAddRepositoriesService.showAddRepositoriesDialog()}},{key:"showDeleteDialog",value:function(event,name){var item={name:name};return this._horRepositoriesManageService.showDeleteDialog(event,item)}}]),repositoriesCtrl}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddRepositoriesService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_addrepositories_dialog=__webpack_require__(362),_addrepositories_dialog2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_addrepositories_dialog);exports.AddRepositoriesService=function(){function AddRepositoriesService($mdDialog){_classCallCheck(this,AddRepositoriesService),this._mdDialog=$mdDialog}return _createClass(AddRepositoriesService,[{key:"showAddRepositoriesDialog",value:function(){return(0,_addrepositories_dialog2.default)(this._mdDialog)}}]),AddRepositoriesService}()},function(module,exports,__webpack_require__){"use strict";function showAddRepositoriesDialog(mdDialog){return mdDialog.show({controller:_addrepositories_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"repositories/list/addrepositories.html"})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showAddRepositoriesDialog;var _addrepositories_controller=__webpack_require__(363),_addrepositories_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_addrepositories_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_service=__webpack_require__(356),AddRepositoriesController=function(){function AddRepositoriesController($mdDialog,$state,$resource){_classCallCheck(this,AddRepositoriesController),this._mdDialog=$mdDialog,this._state=$state,this._resource=$resource,this.name,this.cache,this.url,this.caFile,this.certFile,this.keyFile}return _createClass(AddRepositoriesController,[{key:"addRepositories",value:function(){var _this=this;if(this.addForm.$valid){void 0===this.caFile&&(this.caFile=""),void 0===this.certFile&&(this.certFile=""),void 0===this.keyFile&&(this.keyFile="");var data={name:this.name,cache:this.cache,url:this.url,caFile:this.caFile,certFile:this.certFile,keyFile:this.keyFile},resource=(0,_list_service.postNewRepositoriesResource)(this._resource,data,{save:{method:"POST"}}),requestBody={};resource.save(requestBody,function(response){_this._mdDialog.hide(),_this._state.reload()},function(err){_this._errorDialog.open("系统提示","更新失败！")})}}},{key:"cancel",value:function(){this._mdDialog.cancel()}}]),AddRepositoriesController}();exports.default=AddRepositoriesController},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RepositoriesManageSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.RepositoriesManageSerivce=function(){function RepositoriesManageSerivce($http,$state,$mdDialog){_classCallCheck(this,RepositoriesManageSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return _createClass(RepositoriesManageSerivce,[{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/{name}?name="+item.name,name=item.name,confirm=this._dialog.confirm().title("您确定要删除"+name+"吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("repositories",{},{reload:!0})})}}]),RepositoriesManageSerivce}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(366),_detail_service=__webpack_require__(367),_apphistory_service=__webpack_require__(368),_apphistory_stateconfig=__webpack_require__(369),_apphistory_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_apphistory_stateconfig);exports.default=angular.module("horApp.apphistory",["ngMaterial","ngResource","ui.router"]).config(_apphistory_stateconfig2.default).service("horAppHistoryService",_apphistory_service.appHistoryService).factory("horHistoryDeployedResource",_list_service.appHistoryDeployedResource).factory("horHistoryDeletedResource",_list_service.appHistoryDeletedResource).factory("horHistoryFailedResource",_list_service.appHistoryFailedResource).factory("horHistorySupersededResource",_list_service.appHistorySupersededResource).factory("horHistoryUnknownResource",_list_service.appHistoryUnknownResource).factory("horHistoryDeletingResource",_list_service.appHistoryDeletingResource).factory("horHistoryReleaseResource",_detail_service.getHistoryReleaseResource)},function(module,exports,__webpack_require__){"use strict";function appHistoryDeployedResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deployed")}function appHistoryDeletedResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleted")}function appHistoryFailedResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=failed")}function appHistorySupersededResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=superseded")}function appHistoryUnknownResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=unknown")}function appHistoryDeletingResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleting")}appHistoryDeployedResource.$inject=["$resource"],appHistoryDeletedResource.$inject=["$resource"],appHistoryFailedResource.$inject=["$resource"],appHistorySupersededResource.$inject=["$resource"],appHistoryUnknownResource.$inject=["$resource"],appHistoryDeletingResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appHistoryDeployedResource=appHistoryDeployedResource,exports.appHistoryDeletedResource=appHistoryDeletedResource,exports.appHistoryFailedResource=appHistoryFailedResource,exports.appHistorySupersededResource=appHistorySupersededResource,exports.appHistoryUnknownResource=appHistoryUnknownResource,exports.appHistoryDeletingResource=appHistoryDeletingResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function getHistoryReleaseResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/:releaseName/history")}function getReleaseContent($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/content?version="+version;return $http.get(strUrl)}function getReleaseStatus($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/status?version="+version;return $http.get(strUrl)}getHistoryReleaseResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHistoryReleaseResource=getHistoryReleaseResource,exports.getReleaseContent=getReleaseContent,exports.getReleaseStatus=getReleaseStatus;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appHistoryService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.appHistoryService=function(){function appHistoryService($http,$q,$state,$mdDialog){_classCallCheck(this,appHistoryService),this._http=$http,this._q=$q,this._state=$state,this._dialog=$mdDialog}return _createClass(appHistoryService,[{key:"showRollBackDialog",value:function(event,item){var _this=this,self=this,historyListUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name+"/history";this.rollBackUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name,this._q.all({releaseHistory:this._http.get(historyListUrl)}).then(function(data){var historyData=data.releaseHistory.data.RawData.releases,releaseName=historyData[0].name,versionArr=[{value:"请选择要回滚的版本！"}];angular.forEach(historyData,function(item){var selectItem={name:item.name,value:item.version};versionArr.push(selectItem)}),_this._dialog.show({controller:function($mdDialog,historyData,releaseName){this.rollBackVersions=historyData,this.releaseName=releaseName,this.currentVersion=this.rollBackVersions[0].value,this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){answer===this.rollBackVersions[0].value&&(answer=this.rollBackVersions[1].value),$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"apphistory/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{historyData:versionArr,releaseName:releaseName}}).then(function(answer){return self._http({url:self.rollBackUrl+"/rollback/?version="+answer,method:"POST"})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})})}},{key:"showDeleteDialog",value:function(event,item){var _this2=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name,name=item.name,confirm=this._dialog.confirm().title("您确定要删除"+name+"吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this2._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})})}},{key:"showDeletePurgeDialog",value:function(event,item){var _this3=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name+"?purge=true",name=item.name,confirm=this._dialog.confirm().title("您确定要删除"+name+"吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this3._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})})}}]),appHistoryService}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(303),_list_stateconfig=__webpack_require__(370),_detail_state=__webpack_require__(372),_detail_stateconfig=__webpack_require__(374)},function(module,exports,__webpack_require__){"use strict";function resolveDeletingList(horHistoryDeletingResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistoryDeletingResource.get().$promise.then(function(historyDeletingData){var sortByDeletingDate=[];return angular.forEach(historyDeletingData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortByDeletingDate.push(item)}),sortByDeletingDate})}function resolveUnknownList(horHistoryUnknownResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistoryUnknownResource.get().$promise.then(function(historyUnknownData){var sortByUnknownDate=[];return angular.forEach(historyUnknownData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortByUnknownDate.push(item)}),sortByUnknownDate})}function resolveSupersededList(horHistorySupersededResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistorySupersededResource.get().$promise.then(function(historySupersededData){var sortBySupersededDate=[];return angular.forEach(historySupersededData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortBySupersededDate.push(item)}),sortBySupersededDate})}function resolveFailedList(horHistoryFailedResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistoryFailedResource.get().$promise.then(function(historyFailedData){var sortByFailedDate=[];return angular.forEach(historyFailedData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortByFailedDate.push(item)}),sortByFailedDate})}function resolveDeletedList(horHistoryDeletedResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistoryDeletedResource.get().$promise.then(function(historyDeletedData){var sortByDeletedDate=[];return angular.forEach(historyDeletedData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortByDeletedDate.push(item)}),sortByDeletedDate})}function resolveDeployedList(horHistoryDeployedResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horHistoryDeployedResource.get().$promise.then(function(historyDeployedData){var sortByDeployedDate=[];return angular.forEach(historyDeployedData.releases,function(item){item.chart.metadata.name===obj.objectName&&sortByDeployedDate.push(item)}),sortByDeployedDate})}resolveDeletingList.$inject=["horHistoryDeletingResource","$stateParams"],resolveUnknownList.$inject=["horHistoryUnknownResource","$stateParams"],resolveSupersededList.$inject=["horHistorySupersededResource","$stateParams"],resolveFailedList.$inject=["horHistoryFailedResource","$stateParams"],resolveDeletedList.$inject=["horHistoryDeletedResource","$stateParams"],resolveDeployedList.$inject=["horHistoryDeployedResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveDeletingList=resolveDeletingList,exports.resolveUnknownList=resolveUnknownList,exports.resolveSupersededList=resolveSupersededList,exports.resolveFailedList=resolveFailedList,exports.resolveDeletedList=resolveDeletedList,exports.resolveDeployedList=resolveDeployedList;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_list_controller=__webpack_require__(371),_list_state=__webpack_require__(303);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{appHistoryDeployedList:resolveDeployedList,appHistoryDeletedList:resolveDeletedList,appHistoryFailedList:resolveFailedList,appHistorySupersededList:resolveSupersededList,appHistoryUnknownList:resolveUnknownList,appHistoryDeletingList:resolveDeletingList},views:{"":{controller:_list_controller.AppHistoryController,controllerAs:"$ctrl",templateUrl:"apphistory/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppHistoryController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=__webpack_require__(372),_list_state=__webpack_require__(373),_utils=__webpack_require__(4);exports.AppHistoryController=function(){function AppHistoryController($state,$filter,appHistoryDeployedList,appHistoryDeletedList,appHistoryFailedList,appHistorySupersededList,appHistoryUnknownList,appHistoryDeletingList,horAppHistoryService){_classCallCheck(this,AppHistoryController),this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.query={order:"name",limit:5,page:1},this.limitOptions=[5,10,15],this._filter=$filter,this.deployedReleaseListSpec=this._filter("orderBy")(appHistoryDeployedList,"-info.last_deployed.seconds"),this.deletedReleaseListSpec=this._filter("orderBy")(appHistoryDeletedList,"-info.last_deployed.seconds"),this.failedReleaseListSpec=this._filter("orderBy")(appHistoryFailedList,"-info.last_deployed.seconds"),this.supersededReleaseListSpec=this._filter("orderBy")(appHistorySupersededList,"-info.last_deployed.seconds"),this.unknownReleaseListSpec=this._filter("orderBy")(appHistoryUnknownList,"-info.last_deployed.seconds"),this.deletingReleaseListSpec=this._filter("orderBy")(appHistoryDeletingList,"-info.last_deployed.seconds"),this.noData=!1,0===this.deployedReleaseListSpec.length&&0===this.deletedReleaseListSpec.length&&0===this.failedReleaseListSpec.length&&0===this.supersededReleaseListSpec.length&&0===this.unknownReleaseListSpec.length&&0===this.deletingReleaseListSpec.length&&(this.noData=!0),this._state=$state,this._horAppHistoryService=horAppHistoryService}return AppHistoryController.$inject=["$state","$filter","appHistoryDeployedList","appHistoryDeletedList","appHistoryFailedList","appHistorySupersededList","appHistoryUnknownList","appHistoryDeletingList","horAppHistoryService"],_createClass(AppHistoryController,[{key:"getDetailHref",value:function(releaseName,version){return this._state.href(_detail_state.stateName,new _utils.StateParams(releaseName,version))}},{key:"getReleaseUpgradeHref",value:function(event,releaseName,version){return this._state.go(_list_state.stateName,new _utils.UpdageStateParams(releaseName,version,"history"))}},{key:"showDeleteDialog",value:function(event,name){var item={name:name};this._horAppHistoryService.showDeleteDialog(event,item)}},{key:"showDeletePurgeDialog",value:function(event,name){var item={name:name};this._horAppHistoryService.showDeletePurgeDialog(event,item)}},{key:"showRollBackDialog",value:function(event,name){var item={name:name};this._horAppHistoryService.showRollBackDialog(event,item)}}]),AppHistoryController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="apphistorydetail",exports.stateUrl="/apphistorydetail"
},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appupgrade",exports.stateUrl="/appupgrade"},function(module,exports,__webpack_require__){"use strict";function resolveHistoryReleases(horHistoryReleaseResource,$stateParams){var obj={releaseName:$stateParams.objectNamespace,version:$stateParams.objectName};return horHistoryReleaseResource.get(obj).$promise.then(function(releasesData){var historyReleases=releasesData.RawData.releases,historyCount=historyReleases.length,lastVersion=historyReleases[0].version,version=historyReleases[0].chart.metadata.version;return{releaseName:$stateParams.objectNamespace,historyReleases:historyReleases,historyCount:historyCount,lastVersion:lastVersion,chartVersion:version}})}resolveHistoryReleases.$inject=["horHistoryReleaseResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHistoryReleases=resolveHistoryReleases;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_controller=__webpack_require__(375),_detail_state=__webpack_require__(372);__webpack_require__(11),exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{historyReleases:resolveHistoryReleases},views:{"":{controller:_detail_controller.AppHistoryDetailController,controllerAs:"$ctrl",templateUrl:"apphistory/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppHistoryDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_service=__webpack_require__(367),_utils=__webpack_require__(4),_list_state=__webpack_require__(303),_podsinfo_state=__webpack_require__(376),_constant=__webpack_require__(11);exports.AppHistoryDetailController=function(){function AppHistoryDetailController($state,$http,$q,$sce,historyReleases,horAppInstancesService){_classCallCheck(this,AppHistoryDetailController),this.lastVersion=historyReleases.lastVersion,this.historyCount=historyReleases.historyCount,this.historyReleasesData=historyReleases.historyReleases,this.chartName=this.historyReleasesData[0].chart.metadata.name,this.releaseName=historyReleases.releaseName,this.version=historyReleases.chartVersion,this._http=$http,this._state=$state,this._horAppInstancesService=horAppInstancesService,this.content={},this.releaseStatus={},this.resourceArray=[],this.resourceDataArray=[],this.resourceNamespace,this.help,this.mdHelp,this.icon,this.cname,this.first_deployed,this.statusCode,this.notes,this.mdTel,this._q=$q,this._sce=$sce}return _createClass(AppHistoryDetailController,[{key:"$onInit",value:function(){var self=this;self._q.all({releaseContent:(0,_detail_service.getReleaseContent)(self._http,self.releaseName,self.lastVersion),releaseStatus:(0,_detail_service.getReleaseStatus)(self._http,self.releaseName,self.lastVersion)}).then(function(result){var response=result.releaseContent,releaseStatusResponse=result.releaseStatus,content=response.data.RawData.release,status=releaseStatusResponse.data.RawData;if(self.content=content,self.releaseStatus=status,self.resourceNamespace=self.releaseStatus.namespace,self.releaseStatus.resources){var resourcesData=self.releaseStatus.resources;resourcesData.length>0?angular.forEach(resourcesData,function(resourceItemData){var resourceObj={objName:"",head:[],value:[],headStr:"",resourceData:"",couldListLogs:!1,showEditFlag:!0};if(resourceItemData.type){var typeLine=resourceItemData.type,typeArr=typeLine.split("/");typeArr.length>1&&""!==typeArr[1]?(resourceObj.objName=typeArr[1],"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(resourceObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase()&&"serviceaccount"!==resourceObj.objName.toLowerCase()&&"cluster"!==resourceObj.objName.toLowerCase()&&"clusterrole"!==resourceObj.objName.toLowerCase()||(resourceObj.showEditFlag=!1)):resourceObj.objName="MISSING"}else console.log("without type");if(resourceItemData.Thead){var tmp=[],lineItem=resourceItemData.Thead;if(resourceObj.headStr=lineItem,"MISSING"===resourceObj.objName){tmp=lineItem.split("\t");var resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&resourceTableHead.push(tmpItem)}),resourceTableHead.push("操作"),resourceObj.head=resourceTableHead}else{tmp=lineItem.split(" ");var _resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&_resourceTableHead.push(tmpItem)}),_resourceTableHead.push("操作"),resourceObj.head=_resourceTableHead}}else console.log("without Thead");if(resourceItemData.Items){var resourceItems=resourceItemData.Items;"MISSING"===resourceObj.objName?(resourceObj.resourceData=resourceObj.headStr+"\r\n",angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),item.Name&&(itemObj.Name=item.Name),itemObj.Type=resoruceObj.objName;var lineData=void 0;lineData=item.RawData?item.RawData:item,itemObj.valueStr=item.RawData,resoruceObj.resourceData=resourceObj.resourceData+item.RawData+"\r\n";var tmp=lineData.split("\t");angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa"),resourceObj.value.push(itemObj);var ttt=resourceObj.headStr+"\r\n";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})):angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),itemObj.Name=item.Name;var lineData=item.RawData;itemObj.valueStr=item.RawData,resourceObj.resourceData=resourceObj.resourceData+item.RawData;for(var tmp=lineData.split(" "),valueLength=resourceObj.head.length-1,headArray=[],i=0;i<valueLength;i++)headArray[i]="[none]";angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa");var ttt=resourceObj.headStr+"\r";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})}else console.log("without items");self.resourceArray.push(resourceObj)}):console.log("without resources")}else console.log("获取resoures信息失败！");self.icon=content.chart.metadata.icon,self.cname=content.chart.metadata.name,self.first_deployed=1e3*content.info.first_deployed.seconds,self.statusCode=content.info.status.code,self.help=status.info.status.notes,self.notes=content.chart.metadata.description,self.help&&(self.mdHelp=self._sce.trustAsHtml(marked(self.help)))})}},{key:"updateService",value:function(resourceNamespace,type,name){var item={};return item.namespace=resourceNamespace,item.type=type,item.name=name,this._horAppInstancesService.showEditDialog(event,item)}},{key:"getPodList",value:function(resourceNamespace,type,name){var self=this,item={};return item.namespace=resourceNamespace,item.type=type,item.name=name,item.releaseName=self.releaseName,item.version=self.version,item.currentDir="release",this._state.go(_podsinfo_state.stateName,new _utils.AppInstancePodsParams(resourceNamespace,name,type,self.releaseName,self.version,"release"))}},{key:"getDetailHref",value:function(data,resourceNamespace){var objName=data.Name,objType=data.Type,kindState=void 0;if(_constant.HOR_KIND_DETAIL_STATE.map(function(item){item.name.toLowerCase()==objType.toLowerCase().trim()&&(kindState=item.state)}),kindState)return this._state.href(kindState,new _utils.StateParams(resourceNamespace,objName));this._dialog.show(this._dialog.alert().clickOutsideToClose(!0).title("系统提示").textContent(objType+"类型的"+objName+"对象没有详细信息").ok("关闭"))}},{key:"listReleases",value:function(chartName){return this._state.href(_list_state.stateName,new _utils.StateParams("all",chartName))}}]),AppHistoryDetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appinstancespods",exports.stateUrl="/appinstancespods"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _appupdate_stateconfig=__webpack_require__(378),_appupdate_stateconfig2=_interopRequireDefault(_appupdate_stateconfig),_detail_service=__webpack_require__(367),_filechange=__webpack_require__(330),_filechange2=_interopRequireDefault(_filechange),_appstore_service=__webpack_require__(329);exports.default=angular.module("horApp.appupgrade",["ngMaterial","ngResource","ui.router"]).config(_appupdate_stateconfig2.default).factory("horReleaseHistoryResource",_detail_service.getHistoryReleaseResource).service("horAppstoreService",_appstore_service.appstoreSerivce).directive("fileChnage",_filechange2.default)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(373),_list_stateconfig=__webpack_require__(379)},function(module,exports,__webpack_require__){"use strict";function resolveHistoryReleases(horReleaseHistoryResource,$stateParams){var obj={releaseName:$stateParams.objectNamespace,version:$stateParams.objectName};return horReleaseHistoryResource.get(obj).$promise.then(function(releasesData){var historyReleases=releasesData.RawData.releases,historyCount=historyReleases.length,lastVersion=historyReleases[0].version,version=historyReleases[0].chart.metadata.version;return{releaseName:$stateParams.objectNamespace,historyReleases:historyReleases,historyCount:historyCount,lastVersion:lastVersion,chartVersion:version}})}resolveHistoryReleases.$inject=["horReleaseHistoryResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHistoryReleases=resolveHistoryReleases;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(380),_list_state=__webpack_require__(373),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{historyReleases:resolveHistoryReleases},views:{"":{controller:_list_controller.appUpgradeCtrl,controllerAs:"$ctrl",templateUrl:"appupdate/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appUpgradeCtrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_state=__webpack_require__(303),_utils=__webpack_require__(4),_detail_service=__webpack_require__(367),_list_state2=__webpack_require__(305),appUpgradeCtrl=exports.appUpgradeCtrl=function(){function appUpgradeCtrl($state,$http,$q,$sce,$mdDialog,$stateParams,historyReleases,horAppstoreService,$scope){_classCallCheck(this,appUpgradeCtrl),this.historyReleases=historyReleases,this.lastVersion=historyReleases.lastVersion,this.historyCount=historyReleases.historyCount,this.historyReleasesData=historyReleases.historyReleases,this.chartName=this.historyReleasesData[0].chart.metadata.name,this.releaseName=historyReleases.releaseName,this.version=historyReleases.chartVersion,this.releaseVersions=[];for(var i=0;i<this.historyReleasesData.length;i++)this.releaseVersions.push(this.historyReleasesData[i].version);this._http=$http,this._state=$state,this._q=$q,this._sce=$sce,this._dialog=$mdDialog,this.help,this.mdHelp,this.icon,this.cname,this.first_deployed,this.statusCode,this.notes,this.file={},this.inputFile={name:"",content:""},this._horAppstoreService=horAppstoreService,this.lastPage=$stateParams.lastPage,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"App Instances",state:"appinstances"},sub:"Instances Upgrade"})}return _createClass(appUpgradeCtrl,[{key:"$onInit",value:function(){var self=this;self._q.all({releaseContent:(0,_detail_service.getReleaseContent)(self._http,self.releaseName,self.lastVersion),releaseStatus:(0,_detail_service.getReleaseStatus)(self._http,self.releaseName,self.lastVersion)}).then(function(result){var response=result.releaseContent,releaseStatusResponse=result.releaseStatus,content=response.data.RawData.release,status=releaseStatusResponse.data.RawData;if(self.content=content,self.releaseStatus=status,self.releaseStatus.info.status.resources){var md=marked(self.releaseStatus.info.status.resources),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}self.mdTel=self._sce.trustAsHtml(marked(md))}self.icon=content.chart.metadata.icon,self.cname=content.chart.metadata.name,self.first_deployed=1e3*content.info.first_deployed.seconds,self.statusCode=content.info.status.code,self.help=status.info.status.notes,self.notes=content.chart.metadata.description,self.help&&(self.mdHelp=self._sce.trustAsHtml(marked(self.help)))})}},{key:"listReleases",value:function(chartName){return"instances"===this.lastPage?this._state.href(_list_state2.stateName,new _utils.StateParams("all",chartName)):this._state.href(_list_state.stateName,new _utils.StateParams("all",chartName))}},{key:"cancel",value:function(){return"instances"===this.lastPage?this._state.go(_list_state2.stateName,new _utils.StateParams("all",this.chartName)):"history"===this.lastPage?this._state.go(_list_state.stateName,new _utils.StateParams("all",this.chartName)):void 0}},{key:"upload",value:function(){var self=this;self.inputFile.name=this.file.name;var reader=new FileReader;reader.readAsText(this.file,"UTF-8"),reader.onload=function(event){self.inputFile.content=event.target.result}}},{key:"upgradeChart",value:function upgradeChart(event){if(""===this.inputFile.content&&""===this.inputFile.name)return alert=this._dialog.alert({title:"提示",textContent:"请上传有效的配置文件!",ok:"关闭"}),void this._dialog.show(alert).finally(function(){alert=void 0});var configData=this.inputFile,configObj=void 0;try{configObj=eval("("+configData.content+")")}catch(exception){var _alert=this._dialog.alert({title:"提示",textContent:"请上传有效的配置文件!",ok:"关闭"});return void this._dialog.show(_alert).finally(function(){_alert=void 0})}var data={name:configData.name,content:configObj};this._horAppstoreService.showUpdateEditDialog(event,data)}}]),appUpgradeCtrl}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(382),_appinstances_stateconfig=__webpack_require__(383),_appinstances_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_appinstances_stateconfig),_podsinfo_service=__webpack_require__(392),_detail_service=__webpack_require__(389),_appinstances_service=__webpack_require__(393);exports.default=angular.module("horApp.appinstances",["ngMaterial","ngResource","ui.router"]).config(_appinstances_stateconfig2.default).service("horAppInstancesService",_appinstances_service.appInstancesService).factory("horReleasesResource",_list_service.releasesResource).factory("horFailedReleaseList",_list_service.failedReleaseList).factory("horDeletedReleaseList",_list_service.deletedReleaseList).factory("horSupersededReleaseList",_list_service.supersededReleaseList).factory("horUnknownReleaseList",_list_service.unknownReleaseList).factory("horDeletingReleaseList",_list_service.deletingReleaseList).factory("horHistoryReleaseResource",_detail_service.getHistoryReleaseResource).factory("horHistoryReleaseContentResource",_detail_service.getHistoryReleaseContentResource).factory("horReleaseContentResource",_podsinfo_service.releaseContentResource)},function(module,exports,__webpack_require__){"use strict";function releasesResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all")}function failedReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=failed")}function deletedReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleted")}function supersededReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=superseded")}function unknownReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=unknown")}function deletingReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleting")}releasesResource.$inject=["$resource"],failedReleaseList.$inject=["$resource"],deletedReleaseList.$inject=["$resource"],supersededReleaseList.$inject=["$resource"],unknownReleaseList.$inject=["$resource"],deletingReleaseList.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.releasesResource=releasesResource,exports.failedReleaseList=failedReleaseList,exports.deletedReleaseList=deletedReleaseList,exports.supersededReleaseList=supersededReleaseList,exports.unknownReleaseList=unknownReleaseList,exports.deletingReleaseList=deletingReleaseList;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state(_podsinfo_state.stateName,_podsinfo_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(305)),_detail_state=__webpack_require__(384),_podsinfo_state=__webpack_require__(376),_list_stateconfig=__webpack_require__(385),_detail_stateconfig=__webpack_require__(387),_podsinfo_stateconfig=__webpack_require__(390)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appinstancesdetail",exports.stateUrl="/appinstancesdetail"},function(module,exports,__webpack_require__){"use strict";function resolveReleasesList(horReleasesResource){return horReleasesResource.get().$promise}function failedReleaseList(horFailedReleaseList){return horFailedReleaseList.get().$promise}function deletedReleaseList(horDeletedReleaseList){return horDeletedReleaseList.get().$promise}function supersededReleaseList(horSupersededReleaseList){return horSupersededReleaseList.get().$promise}function unknownReleaseList(horUnknownReleaseList){return horUnknownReleaseList.get().$promise}function deletingReleaseList(horDeletingReleaseList){return horDeletingReleaseList.get().$promise}resolveReleasesList.$inject=["horReleasesResource"],failedReleaseList.$inject=["horFailedReleaseList"],deletedReleaseList.$inject=["horDeletedReleaseList"],supersededReleaseList.$inject=["horSupersededReleaseList"],unknownReleaseList.$inject=["horUnknownReleaseList"],deletingReleaseList.$inject=["horDeletingReleaseList"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReleasesList=resolveReleasesList,exports.failedReleaseList=failedReleaseList,exports.deletedReleaseList=deletedReleaseList,exports.supersededReleaseList=supersededReleaseList,exports.unknownReleaseList=unknownReleaseList,exports.deletingReleaseList=deletingReleaseList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(386),_list_state=__webpack_require__(305);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{releasesList:resolveReleasesList,failedReleaseList:failedReleaseList,deletedReleaseList:deletedReleaseList,supersededReleaseList:supersededReleaseList,unknownReleaseList:unknownReleaseList,deletingReleaseList:deletingReleaseList},views:{"":{controller:_list_controller.releasesCtrl,controllerAs:"$ctrl",templateUrl:"appinstances/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.releasesCtrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_detail_state=__webpack_require__(384),_list_state=__webpack_require__(373);exports.releasesCtrl=function(){function releasesCtrl(releasesList,failedReleaseList,deletedReleaseList,supersededReleaseList,unknownReleaseList,deletingReleaseList,$stateParams,$state,$filter,$scope,horAppInstancesService,NgTableParams){_classCallCheck(this,releasesCtrl),this._filter=$filter,this.data=releasesList.releases,this.data=this._filter("orderBy")(this.data,"-info.last_deployed.seconds"),this.faildata=failedReleaseList.releases,this.faildata=this._filter("orderBy")(this.faildata,"-info.last_deployed.seconds"),this.deletedata=deletedReleaseList.releases,this.deletedata=this._filter("orderBy")(this.deletedata,"-info.last_deployed.seconds"),this.supersededdata=supersededReleaseList.releases,this.supersededdata=this._filter("orderBy")(this.supersededdata,"-info.last_deployed.seconds"),this.unknowndata=unknownReleaseList.releases,this.unknowndata=this._filter("orderBy")(this.unknowndata,"-info.last_deployed.seconds"),this.deletingdata=deletingReleaseList.releases,this.deletingdata=this._filter("orderBy")(this.deletingdata,"-info.last_deployed.seconds"),this._state=$state,this._horAppInstancesService=horAppInstancesService,this.data=this.releasesList.items,console.log("1111",this.data),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"App Instances",state:"appinstances"}})}return _createClass(releasesCtrl,[{key:"showRollBackDialog",value:function(event,name){var item={name:name};this._horAppInstancesService.showRollBackDialog(event,item)}},{key:"showDeleteDialog",value:function(event,name){var item={name:name};this._horAppInstancesService.showDeleteDialog(event,item)}},{key:"showDeletePurgeDialog",value:function(event,name){var item={name:name};this._horAppInstancesService.showDeletePurgeDialog(event,item)}},{key:"getReleaseUpgradeHref",value:function(event,releaseName,version){return this._state.go(_list_state.stateName,new _utils.UpdageStateParams(releaseName,version,"instances"))}},{key:"getDetailHref",value:function(objName,reop){return this._state.href(_detail_state.stateName,new _utils.StateParams(objName,reop))}}]),releasesCtrl}()},function(module,exports,__webpack_require__){"use strict";function resolveHistoryReleases(horHistoryReleaseResource,$stateParams){var obj={releaseName:$stateParams.objectNamespace,version:$stateParams.objectName};return horHistoryReleaseResource.get(obj).$promise.then(function(releasesData){var historyReleases=releasesData.RawData.releases,historyCount=historyReleases.length,lastVersion=historyReleases[0].version,version=historyReleases[0].chart.metadata.version;return{releaseName:$stateParams.objectNamespace,historyReleases:historyReleases,historyCount:historyCount,lastVersion:lastVersion,chartVersion:version}})}function resolveReleaseContent($q,$http,$stateParams,horHistoryReleaseResource){resolveHistoryReleases(horHistoryReleaseResource,$stateParams,$q).$promise.then(function(data){return $q.all({releaseContent:getReleaseContent($http,data.releaseName,data.lastVersion),releaseStatus:getReleaseStatus($http,data.releaseName,data.lastVersion)})}).then(function(result){})}function getHistoryReleaseContentResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+$stateParams.objectNamespace+"/content?version="+$stateParams.objectName,{},actions)}resolveHistoryReleases.$inject=["horHistoryReleaseResource","$stateParams"],resolveReleaseContent.$inject=["$q","$http","$stateParams","horHistoryReleaseResource"],getHistoryReleaseContentResource.$inject=["$stateParams","$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHistoryReleases=resolveHistoryReleases,exports.resolveReleaseContent=resolveReleaseContent,exports.getHistoryReleaseContentResource=getHistoryReleaseContentResource;var _hormain_state=__webpack_require__(30),_detail_controller=__webpack_require__(388),_detail_state=__webpack_require__(384),_utils=__webpack_require__(4),_constant=__webpack_require__(11);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{historyReleases:resolveHistoryReleases},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"appinstances/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_list_state=(__webpack_require__(384),__webpack_require__(305)),_podsinfo_state=__webpack_require__(376),_detail_service=(__webpack_require__(387),__webpack_require__(389)),_constant=__webpack_require__(11);exports.DetailController=function(){function DetailController($resource,$state,$http,$q,$sce,historyReleases,$scope,horAppInstancesService,$mdDialog){_classCallCheck(this,DetailController),this.lastVersion=historyReleases.lastVersion,this.historyCount=historyReleases.historyCount,this.historyReleasesData=historyReleases.historyReleases,this._horAppInstancesService=horAppInstancesService,this.chartName=this.historyReleasesData[0].chart.metadata.name,this.releaseName=historyReleases.releaseName,this.version=historyReleases.chartVersion,this._resource=$resource,this._http=$http,this._state=$state,this.content={},this.releaseStatus={},this.resourceArray=[],this.resourceDataArray=[],this.resourceNamespace,this.selected=[],this.help,this.mdHelp,this.icon,this.cname,this.first_deployed,this.statusCode,this.notes,this.mdTel,this._q=$q,this._sce=$sce,this._dialog=$mdDialog,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"AppStore",subNav:{title:"App Instances",state:"appinstances"},sub:this.releaseName+" 基本信息"})}return _createClass(DetailController,[{key:"$onInit",value:function(){var self=this;self._q.all({releaseContent:(0,_detail_service.getReleaseContent)(self._http,self.releaseName,self.lastVersion),releaseStatus:(0,_detail_service.getReleaseStatus)(self._http,self.releaseName,self.lastVersion)}).then(function(result){var response=result.releaseContent,releaseStatusResponse=result.releaseStatus,content=response.data.RawData.release,status=releaseStatusResponse.data.RawData;if(self.content=content,self.releaseStatus=status,self.resourceNamespace=self.releaseStatus.namespace,self.releaseStatus.resources){var resourcesData=self.releaseStatus.resources;resourcesData.length>0?angular.forEach(resourcesData,function(resourceItemData){var resourceObj={objName:"",head:[],value:[],headStr:"",resourceData:"",couldListLogs:!1,showEditFlag:!0};if(resourceItemData.type){var typeLine=resourceItemData.type,typeArr=typeLine.split("/");typeArr.length>1&&""!==typeArr[1]?(resourceObj.objName=typeArr[1],
"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(resourceObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase()&&"serviceaccount"!==resourceObj.objName.toLowerCase()&&"cluster"!==resourceObj.objName.toLowerCase()&&"clusterrole"!==resourceObj.objName.toLowerCase()||(resourceObj.showEditFlag=!1)):resourceObj.objName="MISSING"}else console.log("without type");if(resourceItemData.Thead){var tmp=[],lineItem=resourceItemData.Thead;if(resourceObj.headStr=lineItem,"MISSING"===resourceObj.objName){tmp=lineItem.split("\t");var resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&resourceTableHead.push(tmpItem)}),resourceTableHead.push("操作"),resourceObj.head=resourceTableHead}else{tmp=lineItem.split(" ");var _resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&_resourceTableHead.push(tmpItem)}),_resourceTableHead.push("操作"),resourceObj.head=_resourceTableHead}}else console.log("without Thead");if(resourceItemData.Items){var resourceItems=resourceItemData.Items;"MISSING"===resourceObj.objName?(resourceObj.resourceData=resourceObj.headStr+"\r\n",angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),item.Name&&(itemObj.Name=item.Name),itemObj.Type=resoruceObj.objName;var lineData=void 0;lineData=item.RawData?item.RawData:item,itemObj.valueStr=item.RawData,resoruceObj.resourceData=resourceObj.resourceData+item.RawData+"\r\n";var tmp=lineData.split("\t");angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa"),resourceObj.value.push(itemObj);var ttt=resourceObj.headStr+"\r\n";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})):angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),itemObj.Name=item.Name;var lineData=item.RawData;itemObj.valueStr=item.RawData,resourceObj.resourceData=resourceObj.resourceData+item.RawData;for(var tmp=lineData.split(" "),valueLength=resourceObj.head.length-1,headArray=[],i=0;i<valueLength;i++)headArray[i]="[none]";angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa");var ttt=resourceObj.headStr+"\r";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})}else console.log("without items");self.resourceArray.push(resourceObj)}):console.log("without resources")}else console.log("获取resoures信息失败！");self.icon=content.chart.metadata.icon,self.cname=content.chart.metadata.name,self.first_deployed=1e3*content.info.first_deployed.seconds,self.statusCode=content.info.status.code,self.help=status.info.status.notes,self.notes=content.chart.metadata.description,self.help&&(self.mdHelp=self._sce.trustAsHtml(marked(self.help)))})}},{key:"updateService",value:function(resourceNamespace,type,name){var item={};return item.namespace=resourceNamespace,item.type=type,item.name=name,this._horAppInstancesService.showEditDialog(event,item)}},{key:"getPodList",value:function(resourceNamespace,type,name){var self=this,item={};return item.namespace=resourceNamespace,item.type=type,item.name=name,item.releaseName=self.releaseName,item.version=self.version,item.currentDir="release",this._state.go(_podsinfo_state.stateName,new _utils.AppInstancePodsParams(resourceNamespace,name,type,self.releaseName,self.version,"release"))}},{key:"listReleases",value:function(chartName){return this._state.href(_list_state.stateName,new _utils.StateParams("all",chartName))}},{key:"getDetailHref",value:function(data,resourceNamespace){var objName=data.Name,objType=data.Type,kindState=void 0;if(_constant.HOR_KIND_DETAIL_STATE.map(function(item){item.name.toLowerCase()==objType.toLowerCase().trim()&&(kindState=item.state)}),kindState)return this._state.href(kindState,new _utils.StateParams(resourceNamespace,objName));this._dialog.show(this._dialog.alert().clickOutsideToClose(!0).title("系统提示").textContent(objType+"类型的"+objName+"对象没有详细信息").ok("关闭"))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function getHistoryReleaseResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/:releaseName/history")}function getReleaseContent($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/content?version="+version;return $http.get(strUrl)}function getReleaseStatus($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/status?version="+version;return $http.get(strUrl)}getHistoryReleaseResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHistoryReleaseResource=getHistoryReleaseResource,exports.getReleaseContent=getReleaseContent,exports.getReleaseStatus=getReleaseStatus;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function resolvePodsDataList(horReleaseContentResource,$stateParams,$http){var data=$stateParams,strUrl=void 0;return strUrl="replicaset"===data.type.toLowerCase()?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/replicasets/"+data.name+"/pods":"replicationcontroller"===data.type.toLowerCase()?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/replicationcontrollers/"+data.name+"/pods":"daemonset"===data.type.toLowerCase()?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/daemonsets/"+data.name+"/pods":"statefulset"===data.type.toLowerCase()?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/statefulsets/"+data.name+"/pods":"service"===data.type.toLowerCase()?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/services/"+data.name+"/pods":_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/namespaces/"+data.objectNamespace+"/pods",$http.get(strUrl)}resolvePodsDataList.$inject=["horReleaseContentResource","$stateParams","$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodsDataList=resolvePodsDataList;var _hormain_state=__webpack_require__(30),_podsinfo_controller=__webpack_require__(391),_podsinfo_state=__webpack_require__(376),_utils=__webpack_require__(4),_constant=__webpack_require__(11);exports.config={url:(0,_utils.appendPodsInfoParamsToUrl)(_podsinfo_state.stateUrl),parent:_hormain_state.stateName,resolve:{podsDataList:resolvePodsDataList},views:{"":{controller:_podsinfo_controller.PodsInfoCtrl,controllerAs:"$ctrl",templateUrl:"appinstances/podsinfo/podsinfo_list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PodsInfoCtrl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_detail_state=__webpack_require__(79),_detail_state2=__webpack_require__(89);exports.PodsInfoCtrl=function(){function PodsInfoCtrl(podsDataList,$state,$stateParams,$scope,$filter,$interpolate,$cookies){function getPodStatus(item){var ready=!1,initialized=!1;return"Failed"===item.status.phase?"failed":"Succeeded"===item.status.phase?"success":"running"===item.status.phase.toLowerCase()?"success":(angular.forEach(item.status.conditions,function(c){"Ready"===c.type&&(ready="True"===c.status),"Initialized"===c.type&&(initialized="True"===c.status)}),initialized&&ready?"success":"pending")}_classCallCheck(this,PodsInfoCtrl),this._state=$state,this._stateParams=$stateParams,this.editFlag=!0,this._scope=$scope,this.data=podsDataList,this._cookies=$cookies;var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);this.role=user.userRole.Name,this.resourceParams=$stateParams,this.namespace=$stateParams.namespace,this.resourceType=$stateParams.type,this.objName=$stateParams.name,this.releaseName=$stateParams.releaseName,this.version=$stateParams.version,this.currentDir=$stateParams.currentDir;var list=[];"service"===this.resourceType.toLowerCase()||"pod"===this.resourceType.toLowerCase()?list=this.data.data.items:"statefulset"===this.resourceType.toLowerCase()&&(list=this.data.data);var tmpPodsList=[];angular.forEach(list,function(item){var pod=void 0,restartCount=0;pod=item.Pod?item.Pod:item,pod.status.containerStatuses&&angular.forEach(pod.status.containerStatuses,function(c){restartCount+=c.restartCount});var podCreateTime=pod.metadata.creationTimestamp,podAge=$filter("relativeTime")(pod.metadata.creationTimestamp);podCreateTime={nodesTime:$interpolate("{{date | date}}")({date:podCreateTime})};var obj={state:getPodStatus(pod),name:pod.metadata.name,namespace:pod.metadata.namespace,restartCount:restartCount,age:podAge,createTime:"创建于 "+podCreateTime.nodesTime,podData:pod};tmpPodsList.push(obj)}),this.podsList=tmpPodsList}return PodsInfoCtrl.$inject=["podsDataList","$state","$stateParams","$scope","$filter","$interpolate","$cookies"],_createClass(PodsInfoCtrl,[{key:"getDetailHref",value:function(data){return"view"==this.role?this._state.href(_detail_state2.stateName,new _utils.StateParams(data.namespace,data.name)):this._state.href(_detail_state.stateName,new _utils.StateParams(data.namespace,data.name))}},{key:"getPodLogs",value:function(data){var namespace=data.namespace,objname=data.name,lastPage=data.podData.spec.containers[0].name;return this._state.go(upgradeStateName,new UpdageStateParams(namespace,objname,lastPage))}}]),PodsInfoCtrl}()},function(module,exports,__webpack_require__){"use strict";function releaseContentResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/:releaseName/content?version=:version")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.releaseContentResource=releaseContentResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appInstancesService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.appInstancesService=function(){function appInstancesService($http,$q,$state,$mdDialog){_classCallCheck(this,appInstancesService),this._http=$http,this._q=$q,this._state=$state,this._dialog=$mdDialog}return _createClass(appInstancesService,[{key:"showRollBackDialog",value:function(event,item){var _this=this,self=this,historyListUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name+"/history";this.rollBackUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name,this._q.all({releaseHistory:this._http.get(historyListUrl)}).then(function(data){var historyData=data.releaseHistory.data.RawData.releases,releaseName=historyData[0].name,versionArr=[{value:"请选择要回滚的版本！"}];angular.forEach(historyData,function(item){var selectItem={name:item.name,value:item.version};versionArr.push(selectItem)}),_this._dialog.show({controller:function($mdDialog,historyData,releaseName){this.rollBackVersions=historyData,this.releaseName=releaseName,this.currentVersion=this.rollBackVersions[0].value,this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){answer===this.rollBackVersions[0].value&&(answer=this.rollBackVersions[1].value),$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appinstances/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{historyData:versionArr,releaseName:releaseName}}).then(function(answer){return self._http({url:self.rollBackUrl+"/rollback/?version="+answer,method:"POST"})},function(){}).then(function(data){self._state.go(".",{},{reload:!0})})})}},{key:"showDeleteDialog",value:function(event,item){var _this2=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name,name=item.name,confirm=this._dialog.confirm().title("您确定要删除"+name+"吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this2._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})})}},{key:"showDeletePurgeDialog",value:function(event,item){var _this3=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name+"?purge=true",name=item.name,confirm=this._dialog.confirm().title("您确定要删除"+name+"吗？").targetEvent(event).ok("确定").cancel("取消");this._dialog.show(confirm).then(function(){return _this3._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})})}},{key:"getEditUrl",value:function(params){var strUrl=void 0;if(""!==params.type){var newType=params.type.toLowerCase();console.log(newType),strUrl="configmap"===newType||"daemonset"===newType||"deployment"===newType||"event"===newType||"horizontalpodautoscaler"===newType||"ingress"===newType||"job"===newType||"limitrange"===newType||"persistentvolumeclaim"===newType||"pod"===newType||"replicaset"===newType||"replicationcontroller"===newType||"resourcequota"===newType||"secret"===newType||"service"===newType||"statefulset"===newType||"thirdpartyresource"===newType?_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/_raw/"+newType+"/namespace/"+params.namespace+"/name/"+params.name:_constant.backendApi.HOR_K8S_SERVER_HELM+"/kubernetes/_raw/"+newType+"/name/"+params.name}return strUrl}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getEditUrl(item);this._dialog.show({controller:function($mdDialog,resourceData,itemData){this.resourceData=resourceData.data,this.itemData=itemData,this.obj={data:this.resourceData,options:{mode:"tree",name:this.itemData.name}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appinstances/edit_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{resourceData:function(){return self._http.get(url)}},locals:{itemData:item}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}}]),appInstancesService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _usermanagement_service=__webpack_require__(395),_usermanagement_stateconfig=__webpack_require__(396),_usermanagement_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_usermanagement_stateconfig),_list_service=__webpack_require__(400);exports.default=angular.module("horApp.userManagement",["ngMaterial","ngResource","ui.router"]).config(_usermanagement_stateconfig2.default).service("horUserManagementService",_usermanagement_service.userManagementService).factory("horUserInfoListResource",_list_service.userInfoListResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.userManagementService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.userManagementService=function(){function userManagementService($http,$state,$mdDialog,$mdToast,$cookies,$translate){_classCallCheck(this,userManagementService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._mdToast=$mdToast,this._cookies=$cookies,this._translate=$translate}return _createClass(userManagementService,[{key:"getAddUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/user/"}},{key:"getUrl",value:function(obj){var objName=(obj.Role.namespace,obj.Id);return _constant.backendApi.HOR_K8S_SERVER+"/user/"+objName}},{key:"getNamespaceUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"getTenantUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/tenant"}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete User")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.Name+"？").targetEvent(event).ok(this._translate.instant("Delete User")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("usermanagement",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,user=self._cookies.getObject(_constant.HOR_USER_COOKIES_KEY),userRoleNamespace=item.Role.Namespace,powerType=[{name:"admin"},{name:"cluster-admin"},{name:"edit"},{name:"view"}];this.powerType=powerType,this.powerValue=item.Role.Name;var url=this.getUrl(item),currentUserUrl=_constant.backendApi.HOR_K8S_SERVER+"/user/"+user.userId,namespaceurl=this.getNamespaceUrl(),tenantUrl=this.getTenantUrl();this._dialog.show({controller:function($mdDialog,selectUserData,namespaceData,tenantData,currentUserData,currentNamespace){var namespaceList=namespaceData.data.items,namespaceArray=[],tenantList=tenantData.data;angular.forEach(namespaceList,function(namespace){"all"!==namespace.metadata.name&&namespaceArray.push(namespace)});var namespaceValue=currentNamespace;""===namespaceValue&&(namespaceValue="-"),this.selectUserData=selectUserData.data,this.currentUserData=currentUserData.data;var showRole=!1;showRole=1!==this.selectUserData.Kind&&this.selectUserData.Id!==this.currentUserData.Id,this.showNamespace=!0,this.obj={data:this.selectUserData,powerType:self.powerType,powerValue:self.powerValue,namespaceList:namespaceArray,namespaceValue:namespaceValue,tenantList:tenantList,showRole:showRole},this.onLoad=function(instance){instance.expandAll()},this.answer=function(email,secret,powerValue,namespaceValue,showNamespace){if(1==showNamespace){var obj={Email:email,Password:secret,Role:{Name:powerValue,Namespace:namespaceValue}};$mdDialog.hide(obj)}else if(0==showNamespace){var _obj={Email:email,Password:secret,Role:{Name:powerValue}};$mdDialog.hide(_obj)}},this.cancel=function(){$mdDialog.cancel()},this.changeType=function(powerValue){this.showNamespace="cluster-admin"!=powerValue}},controllerAs:"$ctrl",templateUrl:"usermanagement/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{selectUserData:function(){return self._http.get(url)},namespaceData:function(){return self._http.get(namespaceurl)},currentUserData:function(){return self._http.get(currentUserUrl)},tenantData:function(){return self._http.get(tenantUrl)}},locals:{currentNamespace:userRoleNamespace}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showAddUserDialog",value:function(event){var _this2=this,self=this,powerType=[{name:"admin"},{name:"cluster-admin"},{name:"edit"},{name:"view"}];this.powerType=powerType,this.powerValue=powerType[0].name;var url=this.getAddUrl(),namespaceurl=this.getNamespaceUrl(),tenantUrl=this.getTenantUrl();this._dialog.show({controller:function($mdDialog,namespaceData,tenantData){var namespaceList=namespaceData.data.items,tenantList=tenantData.data,namespaceArray=[];angular.forEach(namespaceList,function(namespace){"all"!==namespace.metadata.name&&namespaceArray.push(namespace)});var namespaceValue=namespaceData.data.items[0].metadata.name;this.showNamespace=!0,this.obj={powerType:self.powerType,powerValue:self.powerValue,namespaceList:namespaceArray,namespaceValue:namespaceValue,tenantList:tenantList},this.onLoad=function(instance){instance.expandAll()},this.answer=function(appName,email,secret,powerValue,namespaceValue,showNamespace){if(1==showNamespace){var obj={Email:email,Name:appName,Password:secret,Role:{Name:powerValue,Namespace:namespaceValue}};$mdDialog.hide(obj)}else if(0==showNamespace){var _obj2={Email:email,Name:appName,Password:secret,Role:{Name:powerValue}};$mdDialog.hide(_obj2)}},this.cancel=function(){$mdDialog.cancel()},this.changeType=function(powerValue){this.showNamespace="cluster-admin"!=powerValue}},controllerAs:"$ctrl",templateUrl:"usermanagement/create_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{namespaceData:function(){return self._http.get(namespaceurl)},tenantData:function(){return self._http.get(tenantUrl)}}}).then(function(answer){return self._http({url:url,method:"POST",data:answer})}).then(function(data){void 0==data?(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("failed!")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this2._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+_this2._translate.instant("User created successed!")+"</span></md-toast>",position:"top right",hideDelay:3e3,toastClass:"hor-toast"}),self._state.go(".",{},{reload:!0}))},function(reason){})}}]),userManagementService}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(397),_list_stateconfig=__webpack_require__(398)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="usermanagement",exports.stateUrl="/usermanagement"},function(module,exports,__webpack_require__){"use strict";function resolveUsersInfoList(horUserInfoListResource){return horUserInfoListResource.get().$promise}resolveUsersInfoList.$inject=["horUserInfoListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveUsersInfoList=resolveUsersInfoList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(399),_list_state=__webpack_require__(397);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{usersInfoList:resolveUsersInfoList},views:{"":{controller:_list_controller.usersManagementListController,controllerAs:"$ctrl",templateUrl:"usermanagement/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.usersManagementListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);__webpack_require__(4),__webpack_require__(397),exports.usersManagementListController=function(){function usersManagementListController(usersInfoList,$stateParams,$http,$state,$mdDialog,$resource,horUserManagementService,$cookies,$scope,NgTableParams){_classCallCheck(this,usersManagementListController),this.usersInfoList=usersInfoList,this.tableParams=null,this.usersInfoList&&(this.tableParams=new NgTableParams({sorting:{name:"asc"},count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.usersInfoList})),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horUserManagementService=horUserManagementService,this._cookies=$cookies,this._currentLoginUserId,this.globalSearchTerm,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"User",subNav:{title:"Users",state:"usermanagement"}})}return usersManagementListController.$inject=["usersInfoList","$stateParams","$http","$state","$mdDialog","$resource","horUserManagementService","$cookies","$scope","NgTableParams"],_createClass(usersManagementListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({Name:term})}},{key:"$onInit",value:function(){var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY),currentLoginUserId=user.userId;this._currentLoginUserId=currentLoginUserId}},{key:"addUser",value:function(event){return this._horUserManagementService.showAddUserDialog(event)}},{key:"update",value:function(event,item){if(1!==item.Kind||item.Id===this._currentLoginUserId)return this._horUserManagementService.showEditDialog(event,item);alert=this._dialog.alert({title:this._translate.instant("System Information"),textContent:this._translate.instant("Option failed!"),ok:this._translate.instant("close")}),this._dialog.show(alert)}},{key:"delete",value:function(event,item){if("cluster-admin"!==item.Role.Name||item.Id!==this._currentLoginUserId)return this._horUserManagementService.showDeleteDialog(event,item);alert=this._dialog.alert({title:this._translate.instant("System Information"),textContent:this._translate.instant("The super administrator who is landing can't delete itself!"),ok:this._translate.instant("close")}),this._dialog.show(alert)}}]),usersManagementListController}()},function(module,exports,__webpack_require__){"use strict";function userInfoListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/user/",{},{get:{method:"GET",isArray:!0}})}userInfoListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.userInfoListResource=userInfoListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(402),_role_stateconfig=__webpack_require__(403),_role_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_role_stateconfig);exports.default=angular.module("horApp.role",["ngMaterial","ngResource","ui.router"]).config(_role_stateconfig2.default).factory("horRoleListResource",_list_service.roleListResource).factory("horClusterRoleListResource",_list_service.clusterRoleListResource)},function(module,exports,__webpack_require__){"use strict";function roleListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/roles")}function clusterRoleListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/clusterroles")}roleListResource.$inject=["$resource"],clusterRoleListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.roleListResource=roleListResource,exports.clusterRoleListResource=clusterRoleListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state("role.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(404)),_list_stateconfig=__webpack_require__(405),_new_stateconfig=__webpack_require__(407)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="role",exports.stateUrl="/role"},function(module,exports,__webpack_require__){"use strict";function resolveRoleList(horRoleListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace}
;return horRoleListResource.get(obj).$promise.then(function(roleList){return horUtilsService.recombineroleList(roleList)})}function resolveClusterRoleList(horClusterRoleListResource,$stateParams,horUtilsService){return horClusterRoleListResource.get().$promise.then(function(clusterRoleList){return horUtilsService.recombineclusterRoleList(clusterRoleList)})}resolveRoleList.$inject=["horRoleListResource","$stateParams","horUtilsService"],resolveClusterRoleList.$inject=["horClusterRoleListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRoleList=resolveRoleList,exports.resolveClusterRoleList=resolveClusterRoleList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(406),_list_state=__webpack_require__(404);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{roleList:resolveRoleList,clusterRoleList:resolveClusterRoleList},views:{"":{controller:_list_controller.roleListController,controllerAs:"$ctrl",templateUrl:"role/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.roleListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespacedetail_state=(__webpack_require__(404),__webpack_require__(57)),_utils=__webpack_require__(4);exports.roleListController=function(){function roleListController($state,$stateParams,roleList,clusterRoleList,NgTableParams){_classCallCheck(this,roleListController),this._state=$state,this.roleList=roleList,this.clusterRoleList=clusterRoleList,this.globalSearchTerm,this.clusterRoleglobalSearchTerm,this.namespace=$stateParams.namespace,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:roleList}),this.tableclusterRoleListParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:clusterRoleList})}return roleListController.$inject=["$state","$stateParams","roleList","clusterRoleList","NgTableParams"],_createClass(roleListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"clusterRoleapplyGlobalFilter",value:function(){var term=this.clusterRoleglobalSearchTerm;this.tableclusterRoleListParams.filter({name:term})}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}}]),roleListController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(404),_new_controller=__webpack_require__(408),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"role/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4);exports.NewController=function(){function NewController(horSecretSerivce,$q,$state,$mdDialog,$mdToast,errorDialog,$translate){_classCallCheck(this,NewController),this._horSecretSerivce=horSecretSerivce,this._translate=$translate,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: Secret\nmetadata:\n  name: mysecret\n  namespace: "+namespaceString+"\ntype: Opaque\ndata:\n  username: YWRtaW4=\n  password: MWYyZDFlMmU2N2Rm"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("type:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName;this.aceModel;this._horSecretSerivce.createResources().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System Information"),_this._translate.instant("Create Failure"));_this._state.go(detailStateName,new _utils.UpdageStateParams(_this.objNamespace,_this.objName,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(410),_edit_service=__webpack_require__(411),_rolebinding_stateconfig=__webpack_require__(412),_rolebinding_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_rolebinding_stateconfig),_rolebinding_service=__webpack_require__(421);exports.default=angular.module("horApp.rolebing",["ngMaterial","ngResource","ui.router"]).config(_rolebinding_stateconfig2.default).service("horRolebindingSerivces",_rolebinding_service.rolebindingSerivces).factory("horRolebingListResource",_list_service.rolebingListResource).factory("horClusterRolebingListResource",_list_service.clusterRolebingListResource).factory("horRoleBindingResource",_edit_service.roleBindingResource).factory("horRoleBindingYml",_edit_service.roleBindingYml)},function(module,exports,__webpack_require__){"use strict";function rolebingListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/rolebindings")}function clusterRolebingListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/clusterrolebindings")}rolebingListResource.$inject=["$resource"],clusterRolebingListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.rolebingListResource=rolebingListResource,exports.clusterRolebingListResource=clusterRolebingListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function roleBindingResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/rolebinding/:objectName")}function roleBindingYml($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespace+"/rolebinding/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}roleBindingResource.$inject=["$resource"],roleBindingYml.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.roleBindingResource=roleBindingResource,exports.roleBindingYml=roleBindingYml;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state("rolebinding.new",_new_stateconfig.config).state(_edit_state.stateName,_edit_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(413)),_list_stateconfig=__webpack_require__(414),_new_stateconfig=__webpack_require__(417),_edit_stateconfig=__webpack_require__(419),_edit_state=__webpack_require__(416)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="rolebinding",exports.stateUrl="/rolebinding"},function(module,exports,__webpack_require__){"use strict";function resolveRolebingList(horRolebingListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horRolebingListResource.get(obj).$promise.then(function(rolebindingList){return horUtilsService.recombinerolebindingList(rolebindingList)})}function resolveClusterRolebingList(horClusterRolebingListResource,horUtilsService){return horClusterRolebingListResource.get().$promise.then(function(clusterrolebindingList){return horUtilsService.recombineclusterrolebindingList(clusterrolebindingList)})}resolveRolebingList.$inject=["horRolebingListResource","$stateParams","horUtilsService"],resolveClusterRolebingList.$inject=["horClusterRolebingListResource","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRolebingList=resolveRolebingList,exports.resolveClusterRolebingList=resolveClusterRolebingList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(415),_list_state=__webpack_require__(413);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{rolebingList:resolveRolebingList,clusterRolebingList:resolveClusterRolebingList},views:{"":{controller:_list_controller.roleListController,controllerAs:"$ctrl",templateUrl:"rolebinding/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.roleListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_edit_state=(__webpack_require__(413),__webpack_require__(416)),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4);exports.roleListController=function(){function roleListController($scope,rolebingList,clusterRolebingList,$state,$stateParams,NgTableParams,horRolebindingSerivces){_classCallCheck(this,roleListController);var clusterRolebingListArr=[];angular.forEach(clusterRolebingList,function(item,index){if(item.subjects)angular.forEach(item.subjects,function(value,index){var obj={name:item.name,namespace:"all",roleref:item.roleref,kind:item.kind,subjects:item.subjects,index:index,subjectkind:value.kind,subjectname:value.name};clusterRolebingListArr.push(obj)});else{var obj={name:item.name,namespace:"all",roleref:item.roleref,kind:item.kind,subjects:item.subjects,index:index,subjectkind:"-",subjectname:"-"};clusterRolebingListArr.push(obj)}}),this._horRolebindingSerivces=horRolebindingSerivces,this.globalSearchTerm,this.clusterRolebindingglobalSearchTerm,this.rolebingList=rolebingList,this.clusterRolebingList=clusterRolebingListArr,this._state=$state,this.namespace=$stateParams.namespace,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.rolebingList}),this.tableclusterRolebingParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.clusterRolebingList})}return roleListController.$inject=["$scope","rolebingList","clusterRolebingList","$state","$stateParams","NgTableParams","horRolebindingSerivces"],_createClass(roleListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"clusterRoleBindingapplyGlobalFilter",value:function(){var term=this.clusterRolebindingglobalSearchTerm;this.tableclusterRolebingParams.filter({name:term})}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"deleteRoleBinding",value:function(event,item){return this._horRolebindingSerivces.showDeleteDialog(event,item)}},{key:"deleteClusterRoleBinding",value:function(event,item){return item.subjects?this._horRolebindingSerivces.showClusterRoleBindingDeleteDialog(event,item):this._horRolebindingSerivces.showClusterRoleBindingDeleteDialogs(event,item)}},{key:"editRoleBinding",value:function(event,item,kind){return this._state.go(_edit_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,kind))}}]),roleListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="rolebindingedit",exports.stateUrl="/rolebinding"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(413),_new_controller=__webpack_require__(418),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",params:{tabIndex:null},parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"rolebinding/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(4),exports.NewController=function(){function NewController(horRolebindingSerivces,$q,$state,$mdDialog,$stateParams,$mdToast,errorDialog,$translate,horNamespaceListResource,horRoleListResource,horClusterRoleListResource){_classCallCheck(this,NewController),this._horNamespaceListResource=horNamespaceListResource,this._horRoleListResource=horRoleListResource,this._horClusterRoleListResource=horClusterRoleListResource,this._horRolebindingSerivces=horRolebindingSerivces,this._stateParams=$stateParams,this.selectedIndex=this._stateParams.tabIndex,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this._translate=$translate,this.data={group1:"User",group2:"User"}}return _createClass(NewController,[{key:"$onInit",value:function(){var self=this,obj={namespace:self._stateParams.namespace};self._q.all({namespaceArr:self._horNamespaceListResource.get().$promise,roleListArr:self._horRoleListResource.get(obj).$promise,clusterRoleListArr:self._horClusterRoleListResource.get().$promise}).then(function(result){angular.forEach(result.clusterRoleListArr.items,function(data){data.metadata.kind="ClusterRole"}),angular.forEach(result.roleListArr.items,function(data){data.metadata.kind="Role"}),self.namespaceName=result.namespaceArr.items,self.appNamespace=result.namespaceArr.items[0].metadata.name,self.newNamespace=result.namespaceArr.items[0].metadata.name,self.newclusterNamespace=result.namespaceArr.items[0].metadata.name;var allRoleArr=result.clusterRoleListArr.items.concat(result.roleListArr.items);self.allRoleArr=allRoleArr,self.clusterRoleArr=result.clusterRoleListArr.items,self.appRole=allRoleArr[0].metadata.name,self.appclusterRole=result.clusterRoleListArr.items[0].metadata.name})}},{key:"createResource",value:function(roleBindingName,appNamespace,appRole,group,newNamespace,subjectName){var _this=this,roleKind=void 0;angular.forEach(this.allRoleArr,function(data){data.metadata.name==appRole&&(roleKind=data.metadata.kind)});var defer=this._q.defer(),namespaceName=this._stateParams.namespace,subject=[];subject="ServiceAccount"==group?[{kind:group,name:subjectName,namespace:newNamespace}]:[{kind:group,name:subjectName}];var namespaceObj={namespace:namespaceName},obj={name:roleBindingName,namespace:namespaceName,roleRef:{apiGroup:"rbac.authorization.k8s.io",kind:roleKind,name:appRole},subjects:subject};this._horRolebindingSerivces.createResource(namespaceObj).save(obj,function(response){defer.resolve(response),_this._state.go("rolebinding",{},{reload:!0})})}},{key:"createclusterResource",value:function(roleBindingName,appRole,group,newNamespace,subjectName){var _this2=this,defer=this._q.defer(),subject=(this._stateParams.namespace,[]);subject="ServiceAccount"==group?[{kind:group,name:subjectName,namespace:newNamespace}]:[{kind:group,name:subjectName}];var obj={name:roleBindingName,roleRef:{apiGroup:"rbac.authorization.k8s.io",kind:"ClusterRole",name:appRole},subjects:subject};this._horRolebindingSerivces.createclusterResource().save(obj,function(response){defer.resolve(response),_this2._state.go("rolebinding",{},{reload:!0})})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function resolveRoleBindingDetail(horRoleBindingResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horRoleBindingResource.get(obj).$promise}resolveRoleBindingDetail.$inject=["horRoleBindingResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRoleBindingDetail=resolveRoleBindingDetail;var _list_state=__webpack_require__(413),_edit_controller=__webpack_require__(420),_hormain_state=__webpack_require__(30),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{roleBindingDetail:resolveRoleBindingDetail},views:{"":{controller:_edit_controller.EditController,controllerAs:"$ctrl",templateUrl:"rolebinding/edit/edit.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(4),exports.EditController=function(){function EditController($q,$state,$mdDialog,$stateParams,$mdToast,errorDialog,roleBindingDetail,horRoleBindingYml,$translate){_classCallCheck(this,EditController),this._translate=$translate,this._horRoleBindingYml=horRoleBindingYml,this._stateParams=$stateParams,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this.roleBindingDetail=roleBindingDetail.metadata,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=("all"===this._stateParams.namespace||this._stateParams.namespace,JSON.stringify(roleBindingDetail,null,2));this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return _createClass(EditController,[{key:"saveChange",value:function(){var _this=this,aceName=this.roleBindingDetail.name,aceNamespace=this.roleBindingDetail.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horRoleBindingYml.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this._state.go("rolebinding",{},{reload:!0}))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"cancel",value:function(){this._state.go("rolebinding",{},{reload:!0})}}]),EditController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rolebindingSerivces=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.rolebindingSerivces=function(){function rolebindingSerivces($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,rolebindingSerivces),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return rolebindingSerivces.$inject=["$http","$state","$mdDialog","$resource","$translate"],_createClass(rolebindingSerivces,[{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+item.namespace+"/rolebinding/"+item.name,confirm=this._dialog.confirm().title(this._translate.instant("Delete Role Binding")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Role Binding")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showClusterRoleBindingDeleteDialogs",value:function(event,item){var _this2=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/clusterrolebinding/"+item.name,confirm=this._dialog.confirm().title(this._translate.instant("Delete Cluster Role Binding")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Cluster Role Binding")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this2._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showClusterRoleBindingDeleteDialog",value:function(event,item){var _this3=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/clusterrolebinding/"+item.name+"/subjects",newObj={op:"remove",path:item.index.toString()},confirm=this._dialog.confirm().title(this._translate.instant("Delete Cluster Role Binding")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Cluster Role Binding")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this3._http({url:url,method:"PUT",data:newObj})}).then(function(){self._state.go(".",{},{reload:!0})},function(){})}},{key:"createResource",value:function(namespaceObj){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+namespaceObj.namespace+"/rolebinding",{},{save:{method:"POST"}})}},{key:"createclusterResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/clusterrolebinding",{},{save:{method:"POST"}})}}]),rolebindingSerivces}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _stateconfig=__webpack_require__(423),_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_stateconfig),_service=__webpack_require__(426);exports.default=angular.module("horApp.dashboard",["ngMaterial","ngResource","ui.router"]).config(_stateconfig2.default).factory("dashBoardWSService",_service.dashBoardWSService).factory("horDBEventListService",_service.getEventListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_state.stateName,{url:_state.stateUrl,parent:_hormain_state.stateName,resolve:{eventList:resolveEventList},views:{"":{controller:_controller.DashBoardController,controllerAs:"$ctrl",templateUrl:"dashboard/dashboard.html"}}})}function resolveEventList(horDBEventListService,$stateParams){var obj={namespace:$stateParams.namespace};return horDBEventListService.get(obj).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig,exports.resolveEventList=resolveEventList;var _hormain_state=__webpack_require__(30),_controller=__webpack_require__(424),_state=__webpack_require__(425)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DashBoardController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.DashBoardController=function(){function DashBoardController($scope,$stateParams,$cookies,dashBoardWSService,eventList,horDBEventListService,$translate){_classCallCheck(this,DashBoardController),this._translate=$translate;var _formatTime=function(value){var unixTimestamp=new Date(1e3*value),hours=unixTimestamp.getHours(),minutes=unixTimestamp.getMinutes();return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,hours+":"+minutes},_ChartConfig=function(title,tooltipCb,yAxisCb){return{tooltip:{trigger:"axis",formatter:tooltipCb},title:{left:15,top:10,text:title,textStyle:{fontFamily:"Source Sans Pro",fontSize:14,fontWeight:700}},legend:{right:15,top:10,itemWidth:10,itemHeight:10,data:[{name:title,icon:"circle",textStyle:{fontFamily:"Source Sans Pro",fontSize:14}}]},grid:{left:"20",right:"30",bottom:"15",containLabel:!0},xAxis:{type:"time",boundaryGap:[0,"100%"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#ccc",width:1}},axisLabel:{textStyle:{color:"#333"},formatter:function(value,index){return _formatTime(value)}},splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitNumber:5,axisLine:{lineStyle:{color:"#ccc",width:1}},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:yAxisCb,textStyle:{color:"#333"}}},series:[{name:title,type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(1, 128, 223)"}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:1,color:"rgb(211, 236, 249)"},{offset:0,color:"rgb(114, 186, 233)"}])}},data:[]}]}};this._scope=$scope,this._cookies=$cookies,this._stateParams=$stateParams,this._dashBoardWSService=dashBoardWSService,this._horDBEventListService=horDBEventListService,this.eventList=eventList.items,this.eventlistLimit=10,this.dbSockets={},this.cpuUsageChartData,this.cpuUsageChartConfig=function(){var title=$translate.instant("CPU Usage");return new _ChartConfig(title,function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=(Number(p.data[1])/100).toFixed(2),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"%"},function(value,index){return parseInt(Number(value)/100)})}(),this.memoryUsageChartData,this.memoryUsageChartConfig=function(){var title=$translate.instant("Memory Usage");return new _ChartConfig(title,function(params,ticket,callback){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=parseInt(Number(p.data[1])/1073741824),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis+"GiB"},function(value,index){return parseInt(Number(value)/1073741824)})}(),this.runningPods=0,this.deploymentsAvailable=0,this.runningContainers=0,this.totalNodes=0,this.availableNodes=0}return _createClass(DashBoardController,[{key:"$onInit",value:function(){var _this=this;this.userInfomation=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY),this.dbSockets.cpuUsageDataSocket=this._dashBoardWSService.getClustersDockerContainerCpuUsageResource(this.cpuUsageDataCb.bind(this)),this.dbSockets.memoryUsageDataSocket=this._dashBoardWSService.getClustersDockerContainerMemoryUsageResource(this.memoryUsageDataCb.bind(this)),this.dbSockets.nodeStatusSocket=this._dashBoardWSService.getNodeStatus(this.nodeStatusCb.bind(this));var namespace=this._stateParams.namespace;this.dbSockets.workloadsInfoSocket=this._dashBoardWSService.workloadsInfo(namespace,this.workloadsCallback.bind(this)),this._scope.$on("$destroy",function(){var dbSockets=_this.dbSockets;angular.forEach(dbSockets,function(value,key){value.socket.close()})})}},{key:"workloadsCallback",value:function(data){try{if(data){var runningPodCount=data.podList.status.running;data.podList.status.succeeded;this.runningPods=runningPodCount,this.podsStatus=data.podList.status;var totalDeployment=data.deploymentList.listMeta.totalItems,runningDeployment=data.deploymentList.status.running,availableDeployment=(data.deploymentList.status.succeeded,runningDeployment);this.deploymentsStatus=data.deploymentList.status,this.deploymentsAvailable=totalDeployment?Math.floor(availableDeployment/totalDeployment*100):0,
this.totalAppCounts=data.deploymentList.listMeta.totalItems+data.daemonSetList.listMeta.totalItems+data.replicationControllerList.listMeta.totalItems+data.statefulSetList.listMeta.totalItems,this.availableAppCounts=data.deploymentList.status.running+data.daemonSetList.status.running+data.replicationControllerList.status.running+data.statefulSetList.status.running;var totalContainers=data.statefulSetList.listMeta.totalItems,runningCount=data.statefulSetList.status.running,availableContainers=(data.statefulSetList.status.succeeded,runningCount);this.runningContainers=totalContainers?Math.floor(availableContainers/totalContainers*100):0,this.containersStatus=data.statefulSetList.status}else this.runningPods=0,this.deploymentsAvailable=0,this.runningContainers=0}catch(err){console.log(err)}}},{key:"refreshEventList",value:function(){var _this2=this,obj={namespace:this._stateParams.namespace};this._horDBEventListService.get(obj).$promise.then(function(data){_this2.eventList=data.items})}},{key:"cpuUsageDataCb",value:function(data){data&&data.length>0?this.cpuUsageChartData=data[0].values?data[0].values:[]:this.cpuUsageChartData=[]}},{key:"memoryUsageDataCb",value:function(data){data&&data.length>0?this.memoryUsageChartData=data[0].values?data[0].values:[]:this.memoryUsageChartData=[]}},{key:"runningPodsCb",value:function(data){var podsArr=void 0;if(podsArr=data&&data.length>0&&data[0].values?data[0].values:[],podsArr.length>0){var last=podsArr.length-1;this.runningPods=podsArr[last][1]}else this.runningPods=0}},{key:"deploymentsAvailableCb",value:function(data){var deploymentsArr=void 0;if(deploymentsArr=data&&data.length>0&&data[0].values?data[0].values:[],deploymentsArr.length>0){var last=deploymentsArr.length-1;this.deploymentsAvailable=Math.round(deploymentsArr[last][1])}else this.deploymentsAvailable=0}},{key:"runningContainersCb",value:function(data){var containersArr=void 0;if(containersArr=data&&data.length>0&&data[0].values?data[0].values:[],containersArr.length>0){var last=containersArr.length-1;this.runningContainers=containersArr[last][1]}else this.runningContainers=0}},{key:"nodeStatusCb",value:function(data){var nodesArr=[],availableNodes=0;data&&data.length>0&&(this.totalNodes=data.length,data.forEach(function(d){var obj={};d.metric&&d.metric.node&&d.values&&(obj.node=d.metric.node,obj.status=d.values[d.values.length-1][1],nodesArr.push(obj))})),nodesArr.length>0&&nodesArr.forEach(function(n){"1"==n.status&&(availableNodes+=1)}),this.availableNodes=availableNodes}}]),DashBoardController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="dashboard",exports.stateUrl="/dashboard"},function(module,exports,__webpack_require__){"use strict";function dashBoardWSService($websocket){function genStartWSConnect(url,callback){var socketObj=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},serverResponseData=void 0;return socketObj.socket=$websocket(url),socketObj.socket.onOpen(function(evt){socketObj.isConnected=!0,console.info("connection open")}),socketObj.socket.onMessage(function(evt){serverResponseData=JSON.parse(evt.data),callback(serverResponseData)}),socketObj.socket.onError(function(evt){socketObj.isConnected=!1,console.info("connection error")}),socketObj.socket.onClose(function(evt){socketObj.isConnected=!1,console.info("connection closed")}),socketObj}function workloadsInfo(namespace,callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/kubernetes/namespaces/"+namespace+"/workloads",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function clustersDockerContainerCpuUsage(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/docker/container/cpu/usage",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function clustersDockerContainerMemoryUsage(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/docker/container/memory/usage",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function getKubeletRunningPods(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/kubelet/running/pods/quantum",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function getKubeletDeploymentsReplicasAvailable(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/kubelet/deployments/replicas/available",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function getRunningContainers(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/docker/running/containers/quantum",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}function getNodeStatus(callback){var wsUrl=_constant.backendApi.HOR_K8S_PROMETHEUS+"/prometheus/clusters/kubelet/node/status/quantum",socketObj={};if(socketObj.isConnected=!1,!socketObj.isConnected)return socketObj=genStartWSConnect(wsUrl,callback,socketObj)}var serviceInstance={};return serviceInstance.getClustersDockerContainerCpuUsageResource=clustersDockerContainerCpuUsage,serviceInstance.getClustersDockerContainerMemoryUsageResource=clustersDockerContainerMemoryUsage,serviceInstance.getKubeletDeploymentsReplicasAvailable=getKubeletDeploymentsReplicasAvailable,serviceInstance.getKubeletRunningPods=getKubeletRunningPods,serviceInstance.getRunningContainers=getRunningContainers,serviceInstance.getNodeStatus=getNodeStatus,serviceInstance.workloadsInfo=workloadsInfo,serviceInstance}function getEventListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/events")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dashBoardWSService=dashBoardWSService,exports.getEventListResource=getEventListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _log_stateconfig=__webpack_require__(428),_log_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_log_stateconfig),_log_service=__webpack_require__(430);exports.default=angular.module("horApp.log",["ngMaterial","md.data.table","ngResource","ui.router","moment-picker"]).config(_log_stateconfig2.default).factory("horTypeListResource",_log_service.typeListResource).factory("horLoglistResource",_log_service.logListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_log_state.stateName,{url:_log_state.stateUrl,parent:_hormain_state.stateName,resolve:{logList:resolveLoglist,podList:resolveTypeList},views:{"":{controller:_log_controller.LogController,controllerAs:"$ctrl",templateUrl:"log/log.html"}}})}function resolveLoglist(horLoglistResource,$stateParams){var obj={from:0,keywords:"",size:10,level:0,timestamp_gte:"",timestamp_lte:"",type:0};return horLoglistResource.save(obj).$promise}function resolveTypeList(horTypeListResource,$stateParams){return horTypeListResource.get().$promise}stateConfig.$inject=["$stateProvider"],resolveLoglist.$inject=["horLoglistResource","$stateParams"],resolveTypeList.$inject=["horTypeListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig,exports.resolveLoglist=resolveLoglist,exports.resolveTypeList=resolveTypeList;var _hormain_state=(__webpack_require__(4),__webpack_require__(30)),_log_state=__webpack_require__(93),_log_controller=__webpack_require__(429)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_detail_state=__webpack_require__(73);exports.LogController=function(){function LogController($state,$http,$resource,$stateParams,$mdToast,logList,podList,$filter,$scope,NgTableParams,$translate){_classCallCheck(this,LogController),LogController._resource=$resource,LogController._self=this,this._NgTableParams=NgTableParams,this.selected=[],this.options={rowSelection:!1,multiSelect:!1,autoSelect:!1,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this.total=logList.hits.total,this._translate=$translate,podList.level[0]=this._translate.instant("All Level"),this.levelData=podList.level[0];var levelArr=[];angular.forEach(podList.level,function(key,value){levelArr.push(key)}),this.levels=levelArr,podList.level[0]=this._translate.instant("All Level"),this.levelData=podList.level[0],podList.type[0]=this._translate.instant("All Type"),this.levelDatas=podList.type[0];var typeArr=[];angular.forEach(podList.type,function(key,value){typeArr.push(key)}),this.types=typeArr,this.query={order:"name",limit:10,page:1,keywords:"",level:this.levelData,timestamp_gte:"",timestamp_lte:"",type:this.levelDatas,pagesize:0},this.limitOptions=[5,10,15],this._http=$http,this._state=$state,this._resource=$resource,this._filter=$filter,this.namespace=$stateParams.namespace,angular.forEach(logList.hits.hits,function(item){var unixTimestamp=new Date(1e3*parseInt(item._source.formatted_time)),commonTime=unixTimestamp.toString(),d=new Date(commonTime),newTime=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();item._source.formatted_time=newTime,item.id=item._id}),this.logList=logList.hits.hits,this._mdToast=$mdToast,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.logList}),this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Logging",subNav:{title:"Host&Pod Logs",state:"hostlog"}}),this.visible=!1,this.isMultiNamespace=!0}return _createClass(LogController,[{key:"getDetailHref",value:function(objName){var self=this;return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(self.namespace,objName,"list"))}},{key:"level",value:function(){void 0==LogController._self.query.timestamp_gte?LogController._self.query.timestamp_gte="":void 0==LogController._self.query.timestamp_lte&&(LogController._self.query.timestamp_lte=""),""==LogController._self.query.timestamp_gte&&""!=LogController._self.query.timestamp_lte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入开始时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_lte&&""!=LogController._self.query.timestamp_gte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入结束时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_gte&&""==LogController._self.query.timestamp_lte?(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList()):0!=LogController._self.query.timestamp_gte.length&&0!=LogController._self.query.timestamp_lte.length&&(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList())}},{key:"type",value:function(){void 0==LogController._self.query.timestamp_gte?LogController._self.query.timestamp_gte="":void 0==LogController._self.query.timestamp_lte&&(LogController._self.query.timestamp_lte=""),""==LogController._self.query.timestamp_gte&&""!=LogController._self.query.timestamp_lte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入开始时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_lte&&""!=LogController._self.query.timestamp_gte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入结束时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_gte&&""==LogController._self.query.timestamp_lte?(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList()):0!=LogController._self.query.timestamp_gte.length&&0!=LogController._self.query.timestamp_lte.length&&(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList())}},{key:"search",value:function(){void 0==LogController._self.query.timestamp_gte?LogController._self.query.timestamp_gte="":void 0==LogController._self.query.timestamp_lte&&(LogController._self.query.timestamp_lte=""),""==LogController._self.query.timestamp_gte&&""!=LogController._self.query.timestamp_lte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入开始时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_lte&&""!=LogController._self.query.timestamp_gte?LogController._self._mdToast.show(LogController._self._mdToast.simple().textContent("请输入结束时间!").position("w200 danger").hideDelay(3e3)):""==LogController._self.query.timestamp_gte&&""==LogController._self.query.timestamp_lte?(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList()):0!=LogController._self.query.timestamp_gte.length&&0!=LogController._self.query.timestamp_lte.length&&(LogController._self.query.pagesize=0,LogController._self.query.page=1,LogController.refreshLogList())}},{key:"reset",value:function(){LogController._self.query.timestamp_gte="",LogController._self.query.timestamp_lte=""}},{key:"getDesserts",value:function(page,limit){var pageSize=10*(page-1);LogController._self.query.pagesize=pageSize,LogController.refreshLogList()}},{key:"keywordCleaner",value:function(){this.query.keywords=""}},{key:"dataToggle",value:function(){this.visible=!this.visible}}],[{key:"refreshLogList",value:function(){var rankData=LogController._self.query.level,categoryData=LogController._self.query.type,start=LogController._self.query.timestamp_gte,end=LogController._self.query.timestamp_lte,keyWord=LogController._self.query.keywords,pageSize=LogController._self.query.pagesize;if("All Level"==rankData?rankData=0:"debug"==rankData?rankData=1:"info"==rankData?rankData=2:"warn"==rankData?rankData=3:"error"==rankData?rankData=4:"fatal"==rankData&&(rankData=5),"All Type"==categoryData?categoryData=0:"pod"==categoryData?categoryData=1:"host"==categoryData&&(categoryData=2),0!=start.length&&0!=end.length)var startTime=start._d,endTime=end._d,formatDateTime=function(date){var y=date.getFullYear(),m=date.getMonth()+1;m=m<10?"0"+m:m;var d=date.getDate();d=d<10?"0"+d:d;var h=date.getHours();h=h<10?"0"+h:h;var minute=date.getMinutes();minute=minute<10?"0"+minute:minute;var seconds=date.getSeconds();return seconds=seconds<10?"0"+seconds:seconds,y+"-"+m+"-"+d+" "+h+":"+minute+":"+seconds},startValue=formatDateTime(startTime),endValue=formatDateTime(endTime),obj={from:pageSize||"",keywords:keyWord||"",size:10,level:rankData,timestamp_gte:startValue,timestamp_lte:endValue,type:categoryData};else var obj={from:pageSize||"",keywords:keyWord||"",size:10,level:rankData,timestamp_gte:"",timestamp_lte:"",type:categoryData};return LogController._resource(_constant.backendApi.HOR_K8S_LOGS+"/logging/logs").save(obj).$promise.then(function(logs){angular.forEach(logs.hits.hits,function(item){var unixTimestamp=new Date(1e3*parseInt(item._source.formatted_time)),commonTime=unixTimestamp.toString(),d=new Date(commonTime),newTime=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();item._source.formatted_time=newTime,item.id=item._id}),LogController._self.logList=logs.hits.hits,LogController._self.total=logs.hits.total,LogController._self.tableParams=new LogController._self._NgTableParams({count:10},{counts:[],dataset:LogController._self.logList})})}}]),LogController}()},function(module,exports,__webpack_require__){"use strict";function logListResource($resource){return $resource(_constant.backendApi.HOR_K8S_LOGS+"/logging/logs")}function typeListResource($resource){return $resource(_constant.backendApi.HOR_K8S_LOGS+"/logging/type")}logListResource.$inject=["$resource"],typeListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.logListResource=logListResource,exports.typeListResource=typeListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _alarmconfiguration_service=__webpack_require__(432),_alarmconfiguration_stateconfig=__webpack_require__(433),_alarmconfiguration_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_alarmconfiguration_stateconfig),_list_service=__webpack_require__(437);exports.default=angular.module("horApp.alarmconfiguration",["ngMaterial","ngResource","ui.router"]).config(_alarmconfiguration_stateconfig2.default).service("horManageAlarm",_alarmconfiguration_service.AlarmSerivce).factory("horAlarmListAllResource",_list_service.alarmListAllResource).factory("horAlarmListResource",_list_service.alarmListResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlarmSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.AlarmSerivce=function(){function AlarmSerivce($http,$state,$mdDialog){_classCallCheck(this,AlarmSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return AlarmSerivce.$inject=["$http","$state","$mdDialog"],_createClass(AlarmSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,alarmName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+alarmName}},{key:"postUrl",value:function(){return _constant.backendApi.HOR_K8S_ALARM+"/prometheus/-/reload"}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,alarmData){this.alarmData=alarmData.data,this.obj={data:this.alarmData,options:{mode:"tree",name:"prometheus-rules"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"alarmconfiguration/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{alarmData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showreload",value:function(){var _this=this,postUrl=this.postUrl();this._http({url:postUrl,method:"POST"}).then(function(data){"Reload prometheus configuration successed."==data.data&&_this._dialog.show(_this._dialog.alert().clickOutsideToClose(!0).textContent("加载完成").ok("关闭"))})}}]),AlarmSerivce}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(434),_list_stateconfig=__webpack_require__(435)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="alarmconfiguration",exports.stateUrl="/alarmconfiguration"},function(module,exports,__webpack_require__){"use strict";function resolvePodList(horAlarmListAllResource){var obj={configmap:"prometheus-rules",namespace:"monitoring"};return horAlarmListAllResource.get(obj).$promise.then(function(podList){var alarmList=[];return angular.forEach(podList,function(item){"string"==typeof item&&(item.split("ALERT").length>2?alarmList.push({alertname:item.split("ALERT")[1].split(/\s/g)[1],content:"ALERT"+item.split("ALERT")[1]},{alertname:item.split("ALERT")[2].split(/\s/g)[1],content:"ALERT"+item.split("ALERT")[2]}):alarmList.push({alertname:item.split(/\s/g)[1],content:item,active:0}))}),alarmList})}function resolveAlarmList(horAlarmListResource){return horAlarmListResource.query().$promise.then(function(alarmList){var alarm=[],arrLabels=[];return angular.forEach(alarmList,function(item){if("1"==item.values[item.values.length-1][1]){angular.forEach(item.metric,function(value,key){if(""+key!="__name__"&&""+key!="alertstate"){var _str=key+'="'+value+'"';arrLabels.push(_str)}});var str=item.values[item.values.length-1][0];str=str.toString().replace(".",""),13==str.length?alarm.push({alertname:item.metric.alertname,alertstate:item.metric.alertstate,labels:arrLabels,value:{time:str,active:item.values[item.values.length-1][1]}}):(str+="0",alarm.push({alertname:item.metric.alertname,alertstate:item.metric.alertstate,labels:arrLabels,value:{time:str,active:item.values[item.values.length-1][1]}})),arrLabels=[]}}),alarm})}resolvePodList.$inject=["horAlarmListAllResource"],resolveAlarmList.$inject=["horAlarmListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodList=resolvePodList,exports.resolveAlarmList=resolveAlarmList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(436),_list_state=__webpack_require__(434);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{alarmListAll:resolvePodList,alarmList:resolveAlarmList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"alarmconfiguration/list/list.html"}}}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.ListController=function(){function ListController(alarmListAll,horManageAlarm,alarmList,$scope){_classCallCheck(this,ListController),this._horManageAlarm=horManageAlarm;var alarmActive=[],listAlarm=alarmListAll,listNum=0;angular.forEach(alarmList,function(alarm){angular.forEach(alarmListAll,function(alarmAll){alarm.alertname==alarmAll.alertname&&(alarmActive.push({alertname:alarm.alertname,alertstate:alarm.alertstate,labels:alarm.labels,value:alarm.value,content:alarmAll.content}),listAlarm.splice(listNum,1)),listNum++}),listNum=0}),this.alarmActive=alarmActive,this.listAlarm=listAlarm,this.alarmContent=this.alarmActive[0],this.item={namespace:"monitoring",name:"prometheus-rules"},this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Cluster",subNav:{title:"Monitor Rules",state:"alarmconfiguration"}})}return _createClass(ListController,[{key:"alarmClick",value:function(index){this.alarmContent=index}},{key:"updateAlarm",value:function(event){var items=this.item;return this._horManageAlarm.showEditDialog(event,items)}},{key:"reload",value:function(){return this._horManageAlarm.showreload()}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function alarmListAllResource($resource){return $resource(_constant.backendApi.HOR_K8S_ALARM+"/prometheus/alerts")}function alarmListResource($resource){return $resource(_constant.backendApi.HOR_K8S_ALARM+"/prometheus/alerts/firing",{query:{method:"GET"}})}alarmListAllResource.$inject=["$resource"],alarmListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.alarmListAllResource=alarmListAllResource,exports.alarmListResource=alarmListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _alertmanagertemplates_service=__webpack_require__(439),_alertmanagertemplates_stateconfig=__webpack_require__(440),_alertmanagertemplates_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_alertmanagertemplates_stateconfig),_list_service=__webpack_require__(444);exports.default=angular.module("horApp.alertmanagertemplates",["ngMaterial","ngResource","ui.router"]).config(_alertmanagertemplates_stateconfig2.default).service("horManageAlertmanager",_alertmanagertemplates_service.AlertmanagerSerivce).factory("horAlertmanagerListResource",_list_service.AlertmanagerListResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlertmanagerSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.AlertmanagerSerivce=function(){function AlertmanagerSerivce($http,$state,$mdDialog){_classCallCheck(this,AlertmanagerSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog}return AlertmanagerSerivce.$inject=["$http","$state","$mdDialog"],_createClass(AlertmanagerSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,alarmName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/configmap/namespace/"+ns+"/name/"+alarmName}},{key:"postUrl",value:function(){return _constant.backendApi.HOR_K8S_ALARM+"/alertmanager/-/reload"}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this.postUrl();this._dialog.show({controller:function($mdDialog,alertmanagerData){this.alertmanagerData=alertmanagerData.data,this.obj={data:this.alertmanagerData,options:{mode:"tree",name:"prometheus-rules"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"alertmanagertemplates/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{alertmanagerData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}},{key:"showreload",value:function(){var _this=this,postUrl=this.postUrl();this._http({url:postUrl,method:"POST"}).then(function(data){console.log(data),"Reload alertmanager configuration successed."==data.data&&_this._dialog.show(_this._dialog.alert().clickOutsideToClose(!0).textContent("加载完成").ok("关闭"))})}}]),AlertmanagerSerivce}()},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(441),_list_stateconfig=__webpack_require__(442)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="alertmanagertemplates",exports.stateUrl="/alertmanagertemplates"},function(module,exports,__webpack_require__){"use strict";function resolveAlertmanagerList(horAlertmanagerListResource){return horAlertmanagerListResource.get().$promise.then(function(alertmanagerList){return alertmanagerList.data})}resolveAlertmanagerList.$inject=["horAlertmanagerListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAlertmanagerList=resolveAlertmanagerList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(443),_list_state=__webpack_require__(441);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{alertmanagerList:resolveAlertmanagerList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"alertmanagertemplates/list/list.html"}}}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.ListController=function(){function ListController(alertmanagerList,horManageAlertmanager,$scope){_classCallCheck(this,ListController),this._horManageAlertmanager=horManageAlertmanager,this.data=alertmanagerList,this.item={namespace:"monitoring",name:"alertmanager"},this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Cluster",subNav:{title:"Alert Rules",state:"alertmanagertemplates"}})}return _createClass(ListController,[{key:"updateAlarm",value:function(event){var items=this.item;return this._horManageAlertmanager.showEditDialog(event,items)}},{key:"reload",value:function(){return this._horManageAlertmanager.showreload()}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function AlertmanagerListResource($resource){return $resource(_constant.backendApi.HOR_K8S_ALARM+"/alertmanager/status")}AlertmanagerListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlertmanagerListResource=AlertmanagerListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _builds_stateconfig=__webpack_require__(446),_builds_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}
}(_builds_stateconfig),_list_service=__webpack_require__(459),_detail_service=__webpack_require__(460),_logdetail_service=__webpack_require__(461),_bluegreen_service=__webpack_require__(462);exports.default=angular.module("horApp.builds",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_builds_stateconfig2.default).factory("horBuildReposResource",_list_service.buildReposResource).factory("horBuildsListResource",_list_service.buildsListResource).factory("horRepoInfoResource",_detail_service.repoInfoResource).factory("horRepoSecretResource",_detail_service.repoSecretResource).factory("horBuildInfoResource",_detail_service.buildInfoResource).factory("horBuildLogsResource",_logdetail_service.buildLogsResource).factory("horBuildsEventSourceService",_logdetail_service.buildsEventSourceService).factory("horBlueGreenDpList",_bluegreen_service.blueGreenDpList).factory("horBlueGreenSwtich",_bluegreen_service.blueGreenSwitch)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config),$stateProvider.state("buildslist",_list_stateconfig2.config),$stateProvider.state(_detail_state.stateName,_detail_stateconfig.config),$stateProvider.state("logdetail",_logdetail_stateconfig.config),$stateProvider.state("bluegreen",_bluegreen_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(447),_list_stateconfig=__webpack_require__(448),_detail_state=__webpack_require__(450),_list_stateconfig2=__webpack_require__(451),_detail_stateconfig=__webpack_require__(453),_logdetail_stateconfig=__webpack_require__(455),_bluegreen_stateconfig=__webpack_require__(457)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="builds",exports.stateUrl="/builds"},function(module,exports,__webpack_require__){"use strict";function resolveBuildRepos(horBuildReposResource){return horBuildReposResource.query().$promise}function resolveBuilds(horBuildReposResource,horBuildsListResource,$q){return horBuildReposResource.query().$promise.then(function(buildRepo){var obj={};return angular.forEach(buildRepo,function(value,key){var oo={owner:value.owner,repo:value.name};obj[value.name]=horBuildsListResource.query(oo).$promise}),$q.all(obj).then(function(result){return result})})}resolveBuildRepos.$inject=["horBuildReposResource"],resolveBuilds.$inject=["horBuildReposResource","horBuildsListResource","$q"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveBuildRepos=resolveBuildRepos,exports.resolveBuilds=resolveBuilds;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(447),_list_controller=__webpack_require__(449);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{buildRepos:resolveBuildRepos,buildsList:resolveBuilds},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"builds/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;__webpack_require__(11),__webpack_require__(4),__webpack_require__(450),exports.ListController=function ListController(buildRepos,buildsList,NgTableParams,$state){_classCallCheck(this,ListController),this._NgTableParams=NgTableParams,this.globalSearchTerm,this._state=$state,angular.forEach(buildRepos,function(value,key){angular.forEach(buildsList,function(v,k){value.name==k&&v.length>0&&(value.created_at=v[0].created_at,value.finished_at=v[0].finished_at,value.started_at=v[0].started_at,value.status=v[0].status)})}),this.buildRepos=buildRepos,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.buildRepos}),setTimeout(function(){document.getElementById("accounts-title").style.display="none"},2e4)}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="buildsdetail",exports.stateUrl="/builds"},function(module,exports,__webpack_require__){"use strict";function resolveBuilds(horBuildsListResource,$stateParams){var obj={owner:$stateParams.owner,repo:$stateParams.name};return horBuildsListResource.query(obj).$promise}resolveBuilds.$inject=["horBuildsListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveBuilds=resolveBuilds;var _list_controller=__webpack_require__(452);exports.config={url:"/buildslist",parent:"buildsdetail",resolve:{buildsList:resolveBuilds},views:{content:{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"builds/buildslist/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;__webpack_require__(11),__webpack_require__(4),exports.ListController=function ListController($state,$stateParams,NgTableParams,buildsList){_classCallCheck(this,ListController),this._NgTableParams=NgTableParams,this._stateParams=$stateParams,this.buildsList=buildsList,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.buildsList})}},function(module,exports,__webpack_require__){"use strict";function resolveRepoInfo(horRepoInfoResource,$stateParams){var obj={name:$stateParams.name,owner:$stateParams.owner};return horRepoInfoResource.get(obj).$promise}function resolveSettings(horRepoInfoResource,$stateParams){var obj={owner:$stateParams.owner,name:$stateParams.name};return horRepoInfoResource.get(obj).$promise}function resolveSecrets(horRepoSecretResource,$stateParams){var obj={owner:$stateParams.owner,repo:$stateParams.name};return horRepoSecretResource.query(obj).$promise}function resolveBuilds(horBuildReposResource,horBuildsListResource,$q){return horBuildReposResource.query().$promise.then(function(buildRepo){var obj={};return angular.forEach(buildRepo,function(value,key){var oo={owner:value.owner,repo:value.name};obj[value.name]=horBuildsListResource.query(oo).$promise}),$q.all(obj).then(function(result){return result})})}resolveRepoInfo.$inject=["horRepoInfoResource","$stateParams"],resolveSettings.$inject=["horRepoInfoResource","$stateParams"],resolveSecrets.$inject=["horRepoSecretResource","$stateParams"],resolveBuilds.$inject=["horBuildReposResource","horBuildsListResource","$q"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRepoInfo=resolveRepoInfo,exports.resolveSettings=resolveSettings,exports.resolveSecrets=resolveSecrets,exports.resolveBuilds=resolveBuilds;var _detail_controller=(__webpack_require__(447),__webpack_require__(454)),_hormain_state=__webpack_require__(30);__webpack_require__(11),exports.config={url:"/:owner/:name",parent:_hormain_state.stateName,resolve:{repoInfo:resolveRepoInfo,buildsList:resolveBuilds,settings:resolveSettings,secretData:resolveSecrets},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"builds/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);__webpack_require__(4),exports.DetailController=function(){function DetailController($stateParams,$http,$state,repoInfo,buildsList,$resource,$mdToast,settings,secretData,$scope){_classCallCheck(this,DetailController),this._stateParams=$stateParams,this._http=$http,this._state=$state,this._resource=$resource,this._mdToast=$mdToast,settings.allow_tag=settings.allow_tags,settings.allow_deploy=settings.allow_deploys,this.settings=settings,this.selectedIndex,this._scope=$scope,this.dpLabelKey=$stateParams.owner+"-"+$stateParams.name,angular.forEach(buildsList,function(value,key){repoInfo.name==key&&value.length>0&&(repoInfo.created_at=value[0].created_at,repoInfo.finished_at=value[0].finished_at,repoInfo.started_at=value[0].started_at)}),this.repoInfo=repoInfo,angular.forEach(secretData,function(value,key){value.eventObj={push:!1,tag:!1,deployment:!1},angular.forEach(value.event,function(v,k){value.eventObj[v]=!0})}),this.secretData=secretData}return DetailController.$inject=["$stateParams","$http","$state","repoInfo","buildsList","$resource","$mdToast","settings","secretData","$scope"],_createClass(DetailController,[{key:"saveSettings",value:function(settings){var _this=this,owner=this._stateParams.owner,name=this._stateParams.name,saveUrl=_constant.backendApi.HOR_K8S_CICD+"/cicd/repo?owner="+owner+"&name="+name;this._resource(saveUrl,{},{save:{method:"PUT"}}).save(settings,function(response){_this._mdToast.show(_this._mdToast.simple().textContent("成功保存设置").position("w300 success").hideDelay(3e3))},function(error){_this._mdToast.show(_this._mdToast.simple().textContent('错误:"设置保存异常"').position("w320 danger").hideDelay(3e3))})}},{key:"saveSecret",value:function(secretData){var _this2=this,currentOwner=this._stateParams.owner,currentRepo=this._stateParams.name;angular.forEach(secretData,function(value,key){value.event=[],value.value="a",value.owner=currentOwner,value.repo=currentRepo,angular.forEach(value.eventObj,function(v,k){1==v&&value.event.push(k)})}),angular.forEach(secretData,function(value,key){_this2._http({url:_constant.backendApi.HOR_K8S_CICD+"/cicd/secret",method:"PATCH",data:value}).then(function(data){})}),this._mdToast.show(this._mdToast.simple().textContent("成功保存密钥").position("w300 success").hideDelay(3e3))}},{key:"$onInit",value:function(){"logdetail"===this._state.current.name||("bluegreen"===this._state.current.name?this.selectedIndex=3:this._state.go("buildslist"))}},{key:"addSecret",value:function(){var _this3=this,currentOwner=this._stateParams.owner,currentRepo=this._stateParams.name,obj={name:this.secretName,value:this.secretValue,owner:currentOwner,repo:currentRepo,event:["push","tag","deployment"]},addUrl=_constant.backendApi.HOR_K8S_CICD+"/cicd/secret";this._resource(addUrl,{},{save:{method:"POST"}}).save(obj,function(response){_this3.secretName="",_this3.secretValue="",response.eventObj={push:!1,tag:!1,deployment:!1},angular.forEach(response.event,function(v,k){response.eventObj[v]=!0}),response&&_this3.secretData.push(response),console.log(_this3.secretData),_this3._scope.$apply(),_this3._mdToast.show(_this3._mdToast.simple().textContent("成功添加密钥").position("w300 success").hideDelay(3e3))},function(error){})}},{key:"deleteSecret",value:function(item,event){var _this4=this,currentOwner=this._stateParams.owner,currentRepo=this._stateParams.name,delUrl=_constant.backendApi.HOR_K8S_CICD+"/cicd/secret?name="+item.name+"&owner="+currentOwner+"&repo="+currentRepo;this._resource(delUrl,{},{delete:{method:"DELETE"}}).delete(function(response){angular.forEach(_this4.secretData,function(value,key){value.id==item.id&&_this4.secretData.splice(key,1)}),_this4._mdToast.show(_this4._mdToast.simple().textContent("成功删除密钥").position("w300 success").hideDelay(3e3))},function(error){_this4._mdToast.show(_this4._mdToast.simple().textContent('错误:"密钥删除异常"').position("w320 danger").hideDelay(3e3))})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _logdetail_controller=(__webpack_require__(30),__webpack_require__(447),__webpack_require__(456));__webpack_require__(11),exports.config={url:"/:id/log",parent:"buildsdetail",resolve:{},views:{content:{controller:_logdetail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"builds/logdetail/logdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.DetailController=function(){function DetailController($stateParams,$http,$scope,$q,$mdToast,horBuildInfoResource,horBuildsEventSourceService,horBuildLogsResource){_classCallCheck(this,DetailController),this._stateParams=$stateParams,this._scope=$scope,this._http=$http,this._q=$q,this._mdToast=$mdToast,this._horBuildLogsResource=horBuildLogsResource,this._horBuildsEventSourceService=horBuildsEventSourceService,this._horBuildInfoResource=horBuildInfoResource,this.buildInfo=null,this.keyArray=[],this.buildLogsObj={},this.currentBuildLogs=null,this.reqObj={name:$stateParams.name,owner:$stateParams.owner,number:$stateParams.id},this.buildStepState(this.reqObj)}return DetailController.$inject=["$stateParams","$http","$scope","$q","$mdToast","horBuildInfoResource","horBuildsEventSourceService","horBuildLogsResource"],_createClass(DetailController,[{key:"buildingLogsCb",value:function(data){var _this=this,self=this,procs=this.buildInfo.procs[0].children;angular.forEach(procs,function(value,key){value.name==data.proc&&(angular.isArray(_this.buildLogsObj[value.name])?_this.buildLogsObj[value.name].push(data):_this.buildLogsObj[value.name]=[data])}),this._scope.$apply(function(){self.currentBuildLogs=self.buildLogsObj[data.proc]}),this.currentProc!=data.proc&&(this.currentProc=data.proc,this.buildStepState(this.reqObj))}},{key:"buildEofCb",value:function(evt){"eof"==evt.data&&this.buildStepState(this.reqObj)}},{key:"buildStepState",value:function(obj){var _this2=this;return this._horBuildInfoResource.get(obj).$promise.then(function(data){_this2.buildInfo=data})}},{key:"$onInit",value:function(){var _this3=this,self=this,unbingWatch=this._scope.$watch(function(){return _this3.buildInfo},function(value){if(value)if(unbingWatch(),"success"==value.status||"failure"==value.status){_this3.doneBuildLogs=!0;var children=value.procs[0].children,promises={};angular.forEach(children,function(v,key){if("success"==v.state||"failure"==v.state){var obj={owner:_this3._stateParams.owner,repo:_this3._stateParams.name,number:_this3.buildInfo.number,ppid:v.ppid,proc:v.name};promises[v.name]=_this3._horBuildLogsResource.query(obj).$promise}}),_this3._q.all(promises).then(function(result){_this3.result=result;var keyArray=void 0,buildName=void 0;angular.forEach(_this3.buildInfo.procs,function(procs){buildName=procs.children[0].name,angular.forEach(procs.children,function(data){angular.forEach(_this3.result,function(value,key,index){key==data.name&&(value.exit_code="exit code "+data.exit_code),key==buildName&&(keyArray=value)})})}),_this3.keyArray=keyArray},function(reason){console.log(reason)})}else if("running"==value.status){_this3.doneBuildLogs=!1,_this3.pid=value.procs[0].pid;var location=_this3._stateParams.owner+"/"+_this3._stateParams.name+"/"+_this3._stateParams.id+"/"+_this3.pid;self._horBuildsEventSourceService.startBuildWSConnect(location,self.buildingLogsCb.bind(self),self.buildEofCb.bind(self))}},!0)}},{key:"buildStep",value:function(name){var _this4=this;if(this.doneBuildLogs){var keyArray=void 0;angular.forEach(this.result,function(value,key,index){name==key&&(keyArray=value)}),this.keyArray=keyArray,console.log(this.keyArray)}else angular.forEach(this.buildLogsObj,function(value,key){name==key&&(_this4.currentBuildLogs=value)})}},{key:"restart",value:function(){var _this5=this;console.log(this._stateParams);var url=_constant.backendApi.HOR_K8S_CICD+"/cicd/build/start?owner="+this._stateParams.owner+"&repo="+this._stateParams.name+"&number="+this._stateParams.id+"&latest=false&fork=false";this._http({url:url,method:"POST"}).then(function(data){_this5._mdToast.show({template:'<md-toast><span class="md-toast-text" flex>重新构建成功</span></md-toast>',position:"top right",hideDelay:1e3,toastClass:"hor-toast"})})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveBlueGreenDpList(horBlueGreenDpList,$stateParams){var obj={namespace:"default",labelSelector:$stateParams.owner+"-"+$stateParams.name};return horBlueGreenDpList.get(obj).$promise}function resolveBlueGreenSvc(horServiceDetailResource,$stateParams){var obj={namespace:"default",objectName:$stateParams.owner+"-"+$stateParams.name};return horServiceDetailResource.get(obj).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveBlueGreenDpList=resolveBlueGreenDpList,exports.resolveBlueGreenSvc=resolveBlueGreenSvc;var _bluegreen_controller=(__webpack_require__(447),__webpack_require__(458));exports.config={url:"/bluegreen/deploy",parent:"buildsdetail",resolve:{blueGreenDpList:resolveBlueGreenDpList,blueGreenSvc:resolveBlueGreenSvc},views:{content:{controller:_bluegreen_controller.BluegreenController,controllerAs:"$ctrl",templateUrl:"builds/bluegreen/bluegreen.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BluegreenController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(11),__webpack_require__(4),exports.BluegreenController=function(){function BluegreenController($state,$stateParams,blueGreenDpList,blueGreenSvc,horBlueGreenSwtich){_classCallCheck(this,BluegreenController),this._stateParams=$stateParams,this._horBlueGreenSwtich=horBlueGreenSwtich,this.switchToBlue=!1,this.switchToGreen=!1,this.dpLabelKey=$stateParams.owner+"-"+$stateParams.name,angular.forEach(blueGreenDpList.items,function(value,key){if(value.Deployment.spec.selector.matchLabels.version){var v=value.Deployment.spec.selector.matchLabels.version,vArr=v.split(".");value.version=vArr[vArr.length-1]}}),blueGreenDpList.items.sort(function(a,b){return a.version-b.version}),this.blueGreenDpList=blueGreenDpList.items,this.blueGreenSvc=blueGreenSvc}return _createClass(BluegreenController,[{key:"$onInit",value:function(){var _this=this;if(this.blueGreenDpList.length>0){var svcVersion=this.blueGreenSvc.Service.spec.selector.version,length=this.blueGreenDpList.length,dpVersionBlue=void 0,dpVersionGreen=void 0;this.blueGreenDpList.forEach(function(dp,index){dp.Deployment.spec.selector.matchLabels.version==svcVersion&&(index==length-1&&(dpVersionGreen=dp.Deployment.spec.selector.matchLabels.version,dpVersionBlue=_this.blueGreenDpList[0].Deployment.spec.selector.matchLabels.version,_this.newBlueGreenDpList=[_this.blueGreenDpList[0],dp]),index<length-1&&(dpVersionBlue=dp.Deployment.spec.selector.matchLabels.version,dpVersionGreen=_this.blueGreenDpList[length-1].Deployment.spec.selector.matchLabels.version,_this.newBlueGreenDpList=[dp,_this.blueGreenDpList[length-1]]))}),dpVersionBlue==svcVersion&&(this.switchToBlue=!0,this.switchToGreen=!1),dpVersionGreen==svcVersion&&(this.switchToBlue=!1,this.switchToGreen=!0)}else this.switchToBlue=!1,this.switchToGreen=!1}},{key:"switchBlueGreen",value:function(str){var _this2=this,params={namespace:"default",service:this.blueGreenSvc.Service.metadata.name};if(0!=this.newBlueGreenDpList.length){if("blue"==str){if(this.switchToBlue)return;var obj={version:this.newBlueGreenDpList[0].Deployment.spec.selector.matchLabels.version};this._horBlueGreenSwtich.save(params,obj,function(res){_this2.switchToBlue=!0,_this2.switchToGreen=!1})}if("green"==str){if(this.switchToGreen)return;var _obj={version:this.newBlueGreenDpList[1].Deployment.spec.selector.matchLabels.version};this._horBlueGreenSwtich.save(params,_obj,function(res){_this2.switchToBlue=!1,_this2.switchToGreen=!0})}}}}]),BluegreenController}()},function(module,exports,__webpack_require__){"use strict";function buildReposResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repos?all=false&flush=true")}function buildsListResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/builds")}buildReposResource.$inject=["$resource"],buildsListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildReposResource=buildReposResource,exports.buildsListResource=buildsListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function repoInfoResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repo/info?owner=:owner&name=:name")}function buildInfoResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/build/info?owner=:owner&repo=:name&number=:number&latest=false")}function repoSecretResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/secrets?owner=:owner&repo=:repo")}repoInfoResource.$inject=["$resource"],buildInfoResource.$inject=["$resource"],repoSecretResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.repoInfoResource=repoInfoResource,exports.buildInfoResource=buildInfoResource,exports.repoSecretResource=repoSecretResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function buildLogsResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/build/logs?owner=:owner&repo=:repo&number=:number&ppid=:ppid&proc=:proc")}function buildsEventSourceService(){function genStartWSConnect(url,callback,eofCallback){var evtSourceObj=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},serverResponseData=void 0;return evtSourceObj.socket=new EventSource(url),evtSourceObj.socket.onopen=function(evt){evtSourceObj.isConnected=!0,console.info("connection open")},evtSourceObj.socket.onmessage=function(message){serverResponseData=JSON.parse(message.data),callback(serverResponseData)},evtSourceObj.socket.onerror=function(evt){evtSourceObj.isConnected=!1,console.info("connection error"),eofCallback(evt)},evtSourceObj.socket.onclose=function(evt){evtSourceObj.isConnected=!1,console.info("connection closed")},evtSourceObj}function startBuildWSConnect(location,callback,eofCallback){var wsUrl=_constant.backendApi.HOR_K8S_CICD+"/cicd/sse/log/"+location+"?token="+_constant.HOR_K8S_CICD_TOKEN,evtSourceObj={};if(evtSourceObj.isConnected=!1,!evtSourceObj.isConnected)return evtSourceObj=genStartWSConnect(wsUrl,callback,eofCallback,evtSourceObj)}var serviceInstance={};return serviceInstance.startBuildWSConnect=startBuildWSConnect,serviceInstance}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildLogsResource=buildLogsResource,exports.buildsEventSourceService=buildsEventSourceService;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function blueGreenDpList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/deployments/search?labelSelector=:labelSelector")}function blueGreenSwitch($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services/:service/podselector",{},{save:{method:"PUT"}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.blueGreenDpList=blueGreenDpList,exports.blueGreenSwitch=blueGreenSwitch;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _coderepository_stateconfig=__webpack_require__(464),_coderepository_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_coderepository_stateconfig),_list_service=__webpack_require__(468);exports.default=angular.module("horApp.coderepository",["ngMaterial","ngResource","ui.router"]).config(_coderepository_stateconfig2.default).factory("horAccountListResource",_list_service.accountListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(465)),_list_stateconfig=__webpack_require__(466)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="coderepository",exports.stateUrl="/coderepository"},function(module,exports,__webpack_require__){"use strict";function resolveAccountList(horAccountListResource){var obj={all:!0,flush:!0};return horAccountListResource.query(obj).$promise}function resolveActiveAccountList(horAccountListResource){var obj={all:!1,flush:!0};return horAccountListResource.query(obj).$promise}resolveAccountList.$inject=["horAccountListResource"],resolveActiveAccountList.$inject=["horAccountListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAccountList=resolveAccountList,exports.resolveActiveAccountList=resolveActiveAccountList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(467),_list_state=__webpack_require__(465);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{accountListAll:resolveAccountList,activeAccountList:resolveActiveAccountList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"coderepository/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=(__webpack_require__(4),__webpack_require__(11));__webpack_require__(447),exports.ListController=function(){function ListController($scope,$state,$stateParams,$mdDialog,accountListAll,activeAccountList,$http,$resource,$mdToast,NgTableParams){_classCallCheck(this,ListController),this._dialog=$mdDialog,this._state=$state,this._http=$http,this._resource=$resource,this._mdToast=$mdToast,angular.forEach(accountListAll,function(value,key){value.active=!1,angular.forEach(activeAccountList,function(v,k){value.full_name==v.full_name&&(value.active=!0)})}),this.accountListAll=accountListAll,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.accountListAll}),setTimeout(function(){document.getElementById("accounts-title").style.display="none"},2e4)}return _createClass(ListController,[{key:"showToken",value:function(){this._dialog.show(this._dialog.alert().clickOutsideToClose(!0).title("TOKEN").textContent(_constant.HOR_K8S_CICD_TOKEN).ok("关闭"))}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({full_name:term})}},{key:"listSwitch",value:function(item){var _this=this,data=(this._resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repos?all=:all&flush=:flush",{query:{method:"GET"}}),this._resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repos?all=:all&flush=:flush",{query:{method:"GET"}}),{owner:item.owner,name:item.name}),resource=this._resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repo/activation?owner=:owner&name=:name",data,{save:{method:"POST"}}),requestBody={};if(0==item.active&&resource.save(requestBody,function(response){angular.forEach(_this.dashboardNav,function(value){angular.forEach(value.children,function(data){data.full_name==item.full_name&&(data.active=!0)})});var textName="成功激活 "+item.name;_this._mdToast.show(_this._mdToast.simple().textContent(textName).position("w300 success").hideDelay(3e3))},function(err){_this._mdToast.show(_this._mdToast.simple().textContent('错误:"激活失败."').position("w320 danger").hideDelay(3e3))}),1==item.active){var self=this,textNames="成功解除激活 "+item.name,url=_constant.backendApi.HOR_K8S_CICD+"/cicd/repo?owner="+item.owner+"&name="+item.name;this._http.delete(url).then(function(datad){angular.forEach(self.dashboardNav,function(value){angular.forEach(value.children,function(data){data.full_name==item.full_name&&(data.state=!1)})}),self._mdToast.show(self._mdToast.simple().textContent(textNames).position("w320 success").hideDelay(3e3))})}}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function accountListResource($resource){return $resource(_constant.backendApi.HOR_K8S_CICD+"/cicd/repos?all=:all&flush=:flush")}accountListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.accountListResource=accountListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _serviceaccounts_stateconfig=__webpack_require__(470),_serviceaccounts_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_serviceaccounts_stateconfig),_list_service=__webpack_require__(479),_serviceacconts_service=__webpack_require__(480),_detail_service=__webpack_require__(481);exports.default=angular.module("horApp.serviceaccounts",["ngMaterial","ngResource","ui.router"]).config(_serviceaccounts_stateconfig2.default).factory("horServiceAccountsListResource",_list_service.serviceaccountsListResource).service("horserviceAccountSerivces",_serviceacconts_service.serviceAccountSerivces).factory("horServiceAccountsDetailResource",_detail_service.ServiceAccountsDetailResource).factory("horSecretServiceAccountListResource",_detail_service.secretServiceAccountListResource).factory("horServiceAccountsDetailYml",_detail_service.serviceAccountsDetailYml).factory("horServiceAccountsDetailYmlArr",_detail_service.serviceAccountsDetailYmlArr)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){
$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("serviceaccount.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(471)),_detail_state=__webpack_require__(472),_list_stateconfig=__webpack_require__(473),_detail_stateconfig=__webpack_require__(475),_new_stateconfig=__webpack_require__(477)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="serviceaccount",exports.stateUrl="/serviceaccount"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="serviceaccountsdetail",exports.stateUrl="/serviceaccount"},function(module,exports,__webpack_require__){"use strict";function resolveServiceAccountsList(horServiceAccountsListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horServiceAccountsListResource.get(obj).$promise}resolveServiceAccountsList.$inject=["horServiceAccountsListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceAccountsList=resolveServiceAccountsList;var _list_state=__webpack_require__(471),_hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(474);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{serviceAccountsList:resolveServiceAccountsList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"serviceaccounts/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_detail_state=__webpack_require__(472),_namespacedetail_state=(__webpack_require__(471),__webpack_require__(57));exports.ListController=function(){function ListController(serviceAccountsList,$state,NgTableParams,horserviceAccountSerivces,$stateParams){_classCallCheck(this,ListController),this._state=$state,this.serviceAccountsList=serviceAccountsList.items,angular.forEach(this.serviceAccountsList,function(item){item.name=item.metadata.name,item.age=item.metadata.creationTimestamp}),this.namespace=$stateParams.namespace,this.globalSearchTerm,this._horserviceAccountSerivces=horserviceAccountSerivces,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.serviceAccountsList})}return _createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"deleteServiceAccount",value:function(event,item){return this._horserviceAccountSerivces.showDeleteDialog(event,item)}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveServiceAccountsDetail(horServiceAccountsDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceAccountsDetailResource.get(obj).$promise}function resolveSecretServiceAccountList(horSecretServiceAccountListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.objectNamespace};return horSecretServiceAccountListResource.get(obj).$promise.then(function(secretServiceAccountList){return horUtilsService.recombineSecretServiceAccountList(secretServiceAccountList)})}function resolveServiceAccountYml(horServiceAccountsDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceAccountsDetailYml.get(obj).$promise}resolveServiceAccountsDetail.$inject=["horServiceAccountsDetailResource","$stateParams"],resolveSecretServiceAccountList.$inject=["horSecretServiceAccountListResource","$stateParams","horUtilsService"],resolveServiceAccountYml.$inject=["horServiceAccountsDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveServiceAccountsDetail=resolveServiceAccountsDetail,exports.resolveSecretServiceAccountList=resolveSecretServiceAccountList,exports.resolveServiceAccountYml=resolveServiceAccountYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(472),_detail_controller=__webpack_require__(476);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{serviceAccountsDetail:resolveServiceAccountsDetail,sercetList:resolveSecretServiceAccountList,serviceAccountYml:resolveServiceAccountYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"serviceaccounts/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(471),__webpack_require__(472),__webpack_require__(4)),_detail_state2=__webpack_require__(78),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController(serviceAccountsDetail,$mdDialog,$http,$state,$mdToast,horserviceAccountSerivces,horSecretSerivce,horModifyService,$stateParams,NgTableParams,$scope,sercetList,serviceAccountYml,horServiceAccountsDetailYml,horServiceAccountsDetailYmlArr,$translate){_classCallCheck(this,DetailController),this._translate=$translate,this.namespace=$stateParams.namespace;var labelsArr=[];serviceAccountsDetail.metadata.labels&&angular.forEach(serviceAccountsDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}});var annotationsArr=[];serviceAccountsDetail.metadata.annotations&&angular.forEach(serviceAccountsDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var serviceAccountsArr={name:serviceAccountsDetail.metadata.name,namespace:serviceAccountsDetail.metadata.namespace,labels:labelsArr,annotations:annotationsArr,createAt:serviceAccountsDetail.metadata.creationTimestamp};this.serviceAccountsDetail=serviceAccountsArr,this.namespace=$stateParams.namespace,this._state=$state,this._mdToast=$mdToast,this._stateParams=$stateParams;var serviceAccountsSercet=[];this._horserviceAccountSerivces=horserviceAccountSerivces,this._horServiceAccountsDetailYml=horServiceAccountsDetailYml,this._horServiceAccountsDetailYmlArr=horServiceAccountsDetailYmlArr,this._horSecretSerivce=horSecretSerivce,this._horModifyService=horModifyService,angular.forEach(sercetList,function(item){var dataArr=[];angular.forEach(item.data,function(value,key){dataArr.push(key),item.dataArr=dataArr.length}),angular.forEach(serviceAccountsDetail.secrets,function(value){item.name==value.name&&serviceAccountsSercet.push(item)})}),this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:serviceAccountsSercet}),this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(serviceAccountYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return _createClass(DetailController,[{key:"deleteServiceAccounts",value:function(event,item){var obj={namespace:item.namespace,name:item.name},objArr={metadata:obj};return this._horserviceAccountSerivces.showDeleteDialog(event,objArr)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showNotingState",value:function(){return!1}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"over"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deleteService",value:function(event,item){return item.namespace=item.namespace,item.name=item.name,this._horSecretSerivce.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){var namespace=item.namespace,objName=item.name;return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"json"))}},{key:"saveChange",value:function(){var _this=this,aceName=this.serviceAccountsDetail.name,aceNamespace=this.serviceAccountsDetail.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horServiceAccountsDetailYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horServiceAccountsDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(471),_new_controller=__webpack_require__(478),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"serviceaccounts/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(472);exports.NewController=function(){function NewController($q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,horserviceAccountSerivces,$translate){_classCallCheck(this,NewController),this._horserviceAccountSerivces=horserviceAccountSerivces,this._translate=$translate,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams;var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: example\n  namespace: "+namespaceString+"\n  \n",this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.length).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horserviceAccountSerivces.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System Information"),_this._translate.instant("Create Failure"));_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function serviceaccountsListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/serviceaccounts")}serviceaccountsListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceaccountsListResource=serviceaccountsListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.serviceAccountSerivces=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.serviceAccountSerivces=function(){function serviceAccountSerivces($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,serviceAccountSerivces),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return serviceAccountSerivces.$inject=["$http","$state","$mdDialog","$resource","$translate"],_createClass(serviceAccountSerivces,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+item.metadata.namespace+"/serviceaccount/"+item.metadata.name,confirm=this._dialog.confirm().title(this._translate.instant("Delete Service Account")).textContent(this._translate.instant("Are you sure you want to delete")+""+item.metadata.name).targetEvent(event).ok(this._translate.instant("Delete Service Account")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("serviceaccount",{},{reload:!0})},function(){})}}]),serviceAccountSerivces}()},function(module,exports,__webpack_require__){"use strict";function ServiceAccountsDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/serviceaccount/:objectName")}function secretServiceAccountListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/secrets")}function serviceAccountsDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/serviceaccount/namespace/:namespace/name/:objectName")}function serviceAccountsDetailYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/serviceaccount/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}ServiceAccountsDetailResource.$inject=["$resource"],secretServiceAccountListResource.$inject=["$resource"],serviceAccountsDetailYml.$inject=["$resource"],serviceAccountsDetailYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceAccountsDetailResource=ServiceAccountsDetailResource,exports.secretServiceAccountListResource=secretServiceAccountListResource,exports.serviceAccountsDetailYml=serviceAccountsDetailYml,exports.serviceAccountsDetailYmlArr=serviceAccountsDetailYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _appcatalog_stateconfig=__webpack_require__(483),_appcatalog_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_appcatalog_stateconfig),_list_service=__webpack_require__(489),_appcatalog_service=__webpack_require__(490),_detail_service=__webpack_require__(491);exports.default=angular.module("horApp.appcatalog",["ngMaterial","ngResource","ui.router"]).config(_appcatalog_stateconfig2.default).factory("horAppCatalogRepoResource",_list_service.appCatalogRepoResource).factory("horAppCatalogChartsResource",_list_service.appCatalogChartsResource).factory("horAppCatalogDetailResource",_detail_service.appCatalogDetailResource).factory("horAppCatalogReleseResource",_detail_service.deployAppReleseResource).service("horManageSAService",_appcatalog_service.AppCatalogSerivce)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(484)),_list_stateconfig=__webpack_require__(485),_detail_state=__webpack_require__(334),_detail_stateconfig=__webpack_require__(487)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appcatalog",exports.stateUrl="/appcatalog"},function(module,exports,__webpack_require__){"use strict";function resolveAppCatalogRepo(horAppCatalogRepoResource,$stateParams){return horAppCatalogRepoResource.get().$promise}function resolveAppCatalogChartsList(horAppCatalogRepoResource,horAppCatalogChartsResource,$q,$stateParams,horUtilsService){return horAppCatalogRepoResource.get().$promise.then(function(catalog){var obj={};return angular.forEach(catalog.RawData,function(item){if("local"!=item.name&&""!=item.name){var ooo={repository:item.name};obj[item.name]=horAppCatalogChartsResource.get(ooo).$promise}}),$q.all(obj).then(function(appCatalogList){return horUtilsService.recombineAppCataLogList(appCatalogList)})})}resolveAppCatalogChartsList.$inject=["horAppCatalogRepoResource","horAppCatalogChartsResource","$q","$stateParams","horUtilsService"],resolveAppCatalogRepo.$inject=["horAppCatalogRepoResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAppCatalogRepo=resolveAppCatalogRepo,exports.resolveAppCatalogChartsList=resolveAppCatalogChartsList;var _list_state=__webpack_require__(484),_hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(486);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{appCatalogChartsList:resolveAppCatalogChartsList,appCatalogRepoList:resolveAppCatalogRepo},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"appcatalog/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(334);exports.ListController=function(){function ListController($state,appCatalogChartsList,appCatalogRepoList,$filter,base64){var _this=this;_classCallCheck(this,ListController),this._state=$state,this._base64=base64,this.appCatalogChartsList=appCatalogChartsList,angular.forEach(this.appCatalogChartsList,function(item){for(var des=item.description,regexStr=_constant.README_REGEX_STR;-1!=des.search(regexStr);){var index=des.search(regexStr),end=des.search(_constant.README_REGEX_SUFFIX),endIndex=end+_constant.README_REGEX_SUFFIX.length,subString=des.substring(index+_constant.README_REGEX_PREFIX.length,end).trim(),dStr=$filter("I18N")(subString),decodeStr="";try{decodeStr=_this._base64.decode(dStr)}catch(err){decodeStr="No data returned for the time being."}var srcStr=des.substring(index,endIndex);des=des.replace(srcStr,decodeStr)}item.desI18N=des}),this.appCatalogRepoList=appCatalogRepoList.RawData||[],this.chartTypeList=_constant.CHART_TYPE_TAG,this.selectedType,this.selectedKey,this.selectedTypeName,this.allTypes="All",this.allRepos="All Repos"}return ListController.$inject=["$state","appCatalogChartsList","appCatalogRepoList","$filter","base64"],_createClass(ListController,[{key:"$onInit",value:function(){this.selectedType=this.allTypes,this.selectedRepo=this.allRepos}},{key:"changeType",value:function(type){this.selectedKey=type.key}},{key:"changeRepo",value:function(repo){this.selectedRepoName=repo.name}},{key:"goToCatalogDetail",value:function(objName,repo){return this._state.go(_detail_state.stateName,new _utils.StateParams(repo,objName))}},{key:"showNothingState",value:function(){return 0===this.appcatalogList.length}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveAppCatalogDetail(horAppCatalogDetailResource,$stateParams){var obj={repository:$stateParams.objectNamespace,chart:$stateParams.objectName};return horAppCatalogDetailResource.get(obj).$promise}resolveAppCatalogDetail.$inject=["horAppCatalogDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveAppCatalogDetail=resolveAppCatalogDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(334),_detail_controller=__webpack_require__(488);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{appCatalogDetail:resolveAppCatalogDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"appcatalog/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state2=(__webpack_require__(4),__webpack_require__(334),__webpack_require__(78),__webpack_require__(484),__webpack_require__(327));exports.DetailController=function(){function DetailController($state,$mdToast,$filter,$stateParams,appCatalogDetail,horAppCatalogReleseResource,$translate,base64){_classCallCheck(this,DetailController),this._base64=base64,this._filter=$filter,this._translate=$translate,this._state=$state,this._mdToast=$mdToast,this._horAppCatalogReleseResource=horAppCatalogReleseResource,this.appCatalogDetail=appCatalogDetail,this.appCatalogDetailMetadata=appCatalogDetail.RawData.metadata,this.parameterObject=appCatalogDetail.RawData.values,this.repo=$stateParams.objectNamespace,this.chart=$stateParams.objectName,this.applicationNamespace=$stateParams.namespace,this.readme=atob(appCatalogDetail.RawData.readme);try{for(var regexStr=_constant.README_REGEX_STR;-1!=this.readme.search(regexStr);){var index=this.readme.search(regexStr),end=this.readme.search(_constant.README_REGEX_SUFFIX),endIndex=end+_constant.README_REGEX_SUFFIX.length,subString=this.readme.substring(index+_constant.README_REGEX_PREFIX.length,end).trim(),dStr=$filter("I18N")(subString),decodeStr=this._base64.decode(dStr),srcStr=this.readme.substring(index,endIndex);this.readme=this.readme.replace(srcStr,decodeStr)}}catch(err){console.log(err),this.readme="No data returned for the time being."}this.applicationName="",this.showAdvConfig=!1,this.radioValue="appConfig",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"json",onLoad:this.aceOnLoad}}return _createClass(DetailController,[{key:"$onInit",value:function(){this.selectedVersion=this.appCatalogDetailMetadata.version,this.advConfigParams=this.getObjectKeyPaths(this.parameterObject),this.reload()}},{key:"showValueCheckbox",value:function(value){return"boolean"==(void 0===value?"undefined":_typeof(value))}},{key:"getObjectKeyPaths",value:function(obj){var results={},tempObj={},tempStr="";if(angular.isObject(obj)||obj instanceof Object)return function objKeys(obj){var currentKey=tempStr;angular.forEach(obj,function(value,key){tempStr=currentKey+"$"+key,angular.isObject(value)&&value instanceof Object?objKeys(value):tempObj[tempStr]=value})}(obj),angular.forEach(tempObj,function(value,key){results[key.substring(1)]=value}),results}},{key:"aceOnLoad",value:function(editor){editor.$blockScrolling=1/0}},{key:"reload",value:function(){this.aceModel=JSON.stringify({name:this.applicationName||"",namespace:this.applicationNamespace,repo:this.repo,chart:this.chart,version:this.selectedVersion,values:this.parameterObject},null,2)}},{key:"deployAppRelese",value:function(){var _this=this,advConfigParams=(this.parameterObject,this.advConfigParams),resultValues={},params=void 0;"appConfig"==this.radioValue?(angular.forEach(advConfigParams,function(v,k){var tempArr=k.split("$"),tempObj=v;tempArr.reverse().forEach(function(t){var o={};o[t]=tempObj,tempObj=o}),angular.merge(resultValues,tempObj)}),params={name:this.applicationName,namespace:this.applicationNamespace,repo:this.repo,chart:this.chart,version:this.selectedVersion,values:resultValues}):"configFile"==this.radioValue&&(params=this.aceModel);var applicationCreating=this._filter("I18N")("Application Creating");return this._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+applicationCreating+"</span></md-toast>",position:"top right",hideDelay:3e3,toastClass:"hor-toast"}),this._horAppCatalogReleseResource.save(params,function(data){_this._mdToast.hide(),_this._state.go(_list_state2.stateName)},function(err){console.error(err)})}},{key:"toggle",value:function(){this.showAdvConfig=!this.showAdvConfig}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function appCatalogRepoResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories")}function appCatalogChartsResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts")}appCatalogRepoResource.$inject=["$resource"],appCatalogChartsResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appCatalogRepoResource=appCatalogRepoResource,exports.appCatalogChartsResource=appCatalogChartsResource;var _constant=__webpack_require__(11)},function(module,exports){"use strict"},function(module,exports,__webpack_require__){"use strict";function appCatalogDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/:repository/charts/:chart")}function deployAppReleseResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases")}appCatalogDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appCatalogDetailResource=appCatalogDetailResource,exports.deployAppReleseResource=deployAppReleseResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(493),_appdeployed_service=__webpack_require__(494),_detail_service=__webpack_require__(495),_appdeployed_stateconfig=__webpack_require__(496),_appdeployed_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_appdeployed_stateconfig)
;exports.default=angular.module("horApp.appdeployed",["ngMaterial","ngResource","ui.router"]).config(_appdeployed_stateconfig2.default).factory("horAppDeployeRepoResource",_list_service.appDeployedRepoResource).factory("horappDeployedChartsResource",_list_service.appDeployedChartsResource).factory("horAppDeployedDetailResource",_detail_service.appDeployedDetailResource).factory("horHistoryReleaseResource",_detail_service.getHistoryReleaseResource).factory("horHistoryReleaseContentResource",_detail_service.getHistoryReleaseContentResource).factory("horReleasesResource",_list_service.releasesResource).factory("horFailedReleaseList",_list_service.failedReleaseList).factory("horDeletedReleaseList",_list_service.deletedReleaseList).factory("horSupersededReleaseList",_list_service.supersededReleaseList).factory("horUnknownReleaseList",_list_service.unknownReleaseList).factory("horDeletingReleaseList",_list_service.deletingReleaseList).service("horAppdeployedService",_appdeployed_service.AppDeployedService)},function(module,exports,__webpack_require__){"use strict";function releasesResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all")}function failedReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=failed")}function deletedReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleted")}function supersededReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=superseded")}function unknownReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=unknown")}function deletingReleaseList($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases?namespace=all&statusCode=deleting")}releasesResource.$inject=["$resource"],failedReleaseList.$inject=["$resource"],deletedReleaseList.$inject=["$resource"],supersededReleaseList.$inject=["$resource"],unknownReleaseList.$inject=["$resource"],deletingReleaseList.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.releasesResource=releasesResource,exports.failedReleaseList=failedReleaseList,exports.deletedReleaseList=deletedReleaseList,exports.supersededReleaseList=supersededReleaseList,exports.unknownReleaseList=unknownReleaseList,exports.deletingReleaseList=deletingReleaseList;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppDeployedService=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.AppDeployedService=function(){function AppDeployedService($http,$state,$mdDialog,$resource,$mdToast,$translate,$filter){_classCallCheck(this,AppDeployedService),this._http=$http,this._state=$state,this._mdDialog=$mdDialog,this._resource=$resource,this._mdToast=$mdToast,this._translate=$translate,this._filter=$filter}return _createClass(AppDeployedService,[{key:"getUrl",value:function(obj){var releaseName=obj.name;return _constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/history"}},{key:"showUpgradeDialog",value:function(event,name,chart,repoArr,applicationNamespace){var self=this;this._mdDialog.show({controller:function($mdDialog){this.obj={name:name,repoArr:repoArr,repo:repoArr[0].name,showAdvConfig:!1,radioValue:"appConfig",applicationNamespace:applicationNamespace},this.onLoad=function(instance){instance.expandAll()},this.toggle=function(){this.obj.showAdvConfig=!this.obj.showAdvConfig},this.ok=function(item){var _this=this;return this.Upgrade=!0,self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/"+item+"/charts/"+chart,method:"get"}).then(function(data){_this.obj.show=!0,_this.obj.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"json",onLoad:_this.aceOnLoad},_this.obj.chartName=data.data.RawData.metadata.name,_this.obj.versionArr=data.data.RawData.metadata.version,_this.obj.version=data.data.RawData.metadata.version,_this.obj.values=_this.getObjectKeyPaths(data.data.RawData.values),_this.obj.aceModel=JSON.stringify(data.data.RawData.values,null,2)},function(reason){$mdDialog.cancel();var internalServerError=_this._filter("I18N")("Internal Server Error");self._mdToast.show({template:'<md-toast><span class="md-toast-text" flex>'+internalServerError+"</span></md-toast>",position:"center w300 md-danger",hideDelay:3e3,toastClass:"hor-toast"})})},this.getObjectKeyPaths=function(obj){var results={},tempObj={},tempStr="";if(angular.isObject(obj)||obj instanceof Object)return function objKeys(obj){var currentKey=tempStr;angular.forEach(obj,function(value,key){tempStr=currentKey+"$"+key,angular.isObject(value)&&value instanceof Object?objKeys(value):tempObj[tempStr]=value})}(obj),angular.forEach(tempObj,function(value,key){results[key.substring(1)]=value}),results},this.showValueCheckbox=function(value){return"boolean"==(void 0===value?"undefined":_typeof(value))},this.answer=function(chart,name,namespace,repo,version,aceModel,values){var resultValues={},params=void 0;if("appConfig"==this.obj.radioValue)angular.forEach(values,function(v,k){var tempArr=k.split("$"),tempObj=v;tempArr.reverse().forEach(function(t){var o={};o[t]=tempObj,tempObj=o}),angular.merge(resultValues,tempObj)}),params={name:name,namespace:namespace,repo:repo,chart:chart,version:version,values:resultValues},$mdDialog.hide(params);else if("configFile"==this.obj.radioValue){var aceModelObj=JSON.parse(aceModel);params={name:name,namespace:namespace,repo:repo,chart:chart,version:version,values:aceModelObj},$mdDialog.hide(params)}},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appdeployed/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(params){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases",method:"PUT",data:params})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._mdDialog.show({controller:function($mdDialog,releaseData){this.releaseData=releaseData.data,this.obj={data:this.releaseData,options:{mode:"tree",name:"Deployed"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"deployment/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{releaseData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}},{key:"showRollBackDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._mdDialog.show({controller:function($mdDialog,historyData){var versionArr=[];angular.forEach(historyData.data.RawData.releases,function(item){var versionObj={name:item.version};versionArr.push(versionObj)}),this.obj={data:versionArr,version:versionArr[0].name,name:item.name},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){var newObj={name:this.obj.name,version:answer};$mdDialog.hide(newObj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"appdeployed/rollback_dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{historyData:function(){return self._http.get(url)}}}).then(function(newObj){return self._http({url:_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+newObj.name+"/rollback?version="+newObj.version,method:"POST"})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}},{key:"showDeleteDialog",value:function(event,item){var _this2=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name,confirm=this._mdDialog.confirm().title(this._translate.instant("Delete Release")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Release")).cancel(this._translate.instant("Cancel"));this._mdDialog.show(confirm).then(function(){var releaseDeleting=_this2._filter("I18N")("Release Deleting");return _this2._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+releaseDeleting+"</span></md-toast>",position:"top right",hideDelay:3e4,toastClass:"hor-toast"}),_this2._http.delete(url)}).then(function(data){_this2._mdToast.hide(),_this2._state.go("appdeployed",{},{reload:!0})},function(reason){})}},{key:"showPurgeDialog",value:function(event,item){var _this3=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+item.name+"?purge=true",confirm=this._mdDialog.confirm().title(this._translate.instant("Purge Release")).textContent(this._translate.instant("Are you sure you want to purge")+" "+item.name).targetEvent(event).ok(this._translate.instant("Purge Release")).cancel(this._translate.instant("Cancel"));return this._mdDialog.show(confirm).then(function(){var releasepurging=_this3._filter("I18N")("Release purging");return _this3._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+releasepurging+"</span></md-toast>",position:"top right",hideDelay:3e4,toastClass:"hor-toast"}),_this3._http.delete(url)}).then(function(data){_this3._mdToast.hide()},function(reason){})}}]),AppDeployedService}()},function(module,exports,__webpack_require__){"use strict";function getHistoryReleaseResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/:releaseName/history")}function getReleaseContent($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/content?version="+version;return $http.get(strUrl)}function getReleaseStatus($http,releaseName,version){var strUrl=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+releaseName+"/status?version="+version;return $http.get(strUrl)}getHistoryReleaseResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHistoryReleaseResource=getHistoryReleaseResource,exports.getReleaseContent=getReleaseContent,exports.getReleaseStatus=getReleaseStatus;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(327)),_list_stateconfig=__webpack_require__(497),_detail_state=__webpack_require__(499),_detail_stateconfig=__webpack_require__(500)},function(module,exports,__webpack_require__){"use strict";function resolveReleasesList(horReleasesResource){return horReleasesResource.get().$promise}function failedReleaseList(horFailedReleaseList){return horFailedReleaseList.get().$promise}function deletedReleaseList(horDeletedReleaseList){return horDeletedReleaseList.get().$promise}function supersededReleaseList(horSupersededReleaseList){return horSupersededReleaseList.get().$promise}function unknownReleaseList(horUnknownReleaseList){return horUnknownReleaseList.get().$promise}function deletingReleaseList(horDeletingReleaseList){return horDeletingReleaseList.get().$promise}function resolveRepoList(horAppCatalogRepoResource){return horAppCatalogRepoResource.get().$promise}resolveReleasesList.$inject=["horReleasesResource"],failedReleaseList.$inject=["horFailedReleaseList"],deletedReleaseList.$inject=["horDeletedReleaseList"],supersededReleaseList.$inject=["horSupersededReleaseList"],unknownReleaseList.$inject=["horUnknownReleaseList"],deletingReleaseList.$inject=["horDeletingReleaseList"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveReleasesList=resolveReleasesList,exports.failedReleaseList=failedReleaseList,exports.deletedReleaseList=deletedReleaseList,exports.supersededReleaseList=supersededReleaseList,exports.unknownReleaseList=unknownReleaseList,exports.deletingReleaseList=deletingReleaseList,exports.resolveRepoList=resolveRepoList;var _list_state=__webpack_require__(327),_hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(498);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{releasesList:resolveReleasesList,failedReleaseList:failedReleaseList,deletedReleaseList:deletedReleaseList,supersededReleaseList:supersededReleaseList,unknownReleaseList:unknownReleaseList,deletingReleaseList:deletingReleaseList,repoList:resolveRepoList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"appdeployed/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_detail_state=__webpack_require__(499),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController($state,$filter,$mdDialog,$stateParams,releasesList,failedReleaseList,deletedReleaseList,supersededReleaseList,unknownReleaseList,deletingReleaseList,NgTableParams,horAppdeployedService,horDeletedReleaseList,horSupersededReleaseList,repoList){_classCallCheck(this,ListController),this._filter=$filter,this._state=$state,this._stateParams=$stateParams,this._mdDialog=$mdDialog,this._horAppdeployedService=horAppdeployedService,this._horDeletedReleaseList=horDeletedReleaseList,this._horSupersededReleaseList=horSupersededReleaseList,this.namespace=$stateParams.namespace,this.repoArr=repoList.RawData,this.applicationNamespace=$stateParams.namespace,this.data=releasesList.releases||[],this.failData=failedReleaseList.releases||[],this.deletedData=deletedReleaseList.releases||[],this.supersededData=supersededReleaseList.releases||[],this.unknownData=unknownReleaseList.releases,this.deletingData=deletingReleaseList.releases,this.globalSearchTerm,this.globalSearchTermFailure,this.globalSearchTermDeleted,this.globalSearchTermDeprecated,this.NgTableParams=NgTableParams,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data}),this.tableParamsFailure=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.failData}),this.tableParamsDeleted=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.deletedData}),this.tableParamsDeprecated=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.supersededData})}return _createClass(ListController,[{key:"getDetailHref",value:function(objName,version){return this._state.href(_detail_state.stateName,new _utils.StateParams(objName,version))}},{key:"upgradeRelease",value:function(event,item){var name=item.name,chart=item.chart.metadata.name,repoArr=this.repoArr,applicationNamespace=this.applicationNamespace;return this._horAppdeployedService.showUpgradeDialog(event,name,chart,repoArr,applicationNamespace)}},{key:"deleteRelease",value:function(event,item){return this._horAppdeployedService.showDeleteDialog(event,item)}},{key:"rollBackRelease",value:function(event,item){return this._horAppdeployedService.showRollBackDialog(event,item)}},{key:"purgeRelease",value:function(event,item){var _this=this,NgTableParams=this.NgTableParams;return this._horAppdeployedService.showPurgeDialog(event,item).then(function(){_this._horDeletedReleaseList.get().$promise.then(function(data){_this.tableParamsDeleted=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:data.releases})}),_this._horSupersededReleaseList.get().$promise.then(function(data){_this.tableParamsDeprecated=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:data.releases})})})}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"applyGlobalFilterFailure",value:function(){var term=this.globalSearchTermFailure;this.tableParamsFailure.filter({name:term})}},{key:"applyGlobalFilterDeleted",value:function(){var term=this.globalSearchTermDeleted;this.tableParamsDeleted.filter({name:term})}},{key:"applyGlobalFilterDeprecated",value:function(){var term=this.globalSearchTermDeprecated;this.tableParamsDeprecated.filter({name:term})}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}}]),ListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="appdeployeddetail",exports.stateUrl="/appdeployeddetail"},function(module,exports,__webpack_require__){"use strict";function resolveHistoryReleases(horHistoryReleaseResource,$stateParams){var obj={releaseName:$stateParams.objectNamespace,version:$stateParams.objectName};return horHistoryReleaseResource.get(obj).$promise.then(function(releasesData){var historyReleases=releasesData.RawData.releases,historyCount=historyReleases.length,lastVersion=historyReleases[0].version,version=historyReleases[0].chart.metadata.version;return{releaseName:$stateParams.objectNamespace,historyReleases:historyReleases,historyCount:historyCount,lastVersion:lastVersion,chartVersion:version}})}function resolveReleaseContent($q,$http,$stateParams,horHistoryReleaseResource){resolveHistoryReleases(horHistoryReleaseResource,$stateParams,$q).$promise.then(function(data){return $q.all({releaseContent:getReleaseContent($http,data.releaseName,data.lastVersion),releaseStatus:getReleaseStatus($http,data.releaseName,data.lastVersion)})}).then(function(result){})}function getHistoryReleaseContentResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/releases/"+$stateParams.objectNamespace+"/content?version="+$stateParams.objectName,{},actions)}resolveHistoryReleases.$inject=["horHistoryReleaseResource","$stateParams"],resolveReleaseContent.$inject=["$q","$http","$stateParams","horHistoryReleaseResource"],getHistoryReleaseContentResource.$inject=["$stateParams","$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveHistoryReleases=resolveHistoryReleases,exports.resolveReleaseContent=resolveReleaseContent,exports.getHistoryReleaseContentResource=getHistoryReleaseContentResource;var _hormain_state=__webpack_require__(30),_detail_controller=__webpack_require__(501),_detail_state=__webpack_require__(499),_utils=__webpack_require__(4),_constant=__webpack_require__(11);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{historyReleases:resolveHistoryReleases},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"appdeployed/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_service=(__webpack_require__(499),__webpack_require__(500),__webpack_require__(495)),_constant=__webpack_require__(11);exports.DetailController=function(){function DetailController($resource,$state,$http,$q,$sce,historyReleases,$scope,$mdDialog,NgTableParams){_classCallCheck(this,DetailController),this.lastVersion=historyReleases.lastVersion,this.historyCount=historyReleases.historyCount,this.historyReleasesData=historyReleases.historyReleases,angular.forEach(this.historyReleasesData,function(item,index){0==item.info.status.code?item.newStatus="unknown error":1==item.info.status.code?item.newStatus="normal":2==item.info.status.code?item.newStatus="Deleted":3==item.info.status.code?item.newStatus="Deprecated":4==item.info.status.code?item.newStatus="Deployment failure":5==item.info.status.code&&(item.newStatus="Deleting")}),this.chartName=this.historyReleasesData[0].chart.metadata.name,this.releaseName=historyReleases.releaseName,this.version=historyReleases.chartVersion,this._resource=$resource,this._http=$http,this._state=$state,this.content={},this.releaseStatus={},this.resourceArray=[],this.resourceDataArray=[],this.resourceNamespace,this.selected=[],this.help,this.mdHelp,this.icon,this.cname,this.first_deployed,this.statusCode,this.notes,this.mdTel,this._q=$q,this._sce=$sce,this._dialog=$mdDialog,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.resourceDataArray}),this.tableParamsHistory=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.historyReleasesData}),this._scope=$scope}return _createClass(DetailController,[{key:"$onInit",value:function(){var self=this;self._q.all({releaseContent:(0,_detail_service.getReleaseContent)(self._http,self.releaseName,self.lastVersion),releaseStatus:(0,_detail_service.getReleaseStatus)(self._http,self.releaseName,self.lastVersion)}).then(function(result){var response=result.releaseContent,releaseStatusResponse=result.releaseStatus,content=response.data.RawData.release,status=releaseStatusResponse.data.RawData;if(self.content=content,self.releaseStatus=status,self.resourceNamespace=self.releaseStatus.namespace,self.releaseStatus.resources){var resourcesData=self.releaseStatus.resources;resourcesData.length>0?angular.forEach(resourcesData,function(resourceItemData){var resourceObj={objName:"",head:[],value:[],headStr:"",resourceData:"",couldListLogs:!1,showEditFlag:!0};if(resourceItemData.type){var typeLine=resourceItemData.type,typeArr=typeLine.split("/");typeArr.length>1&&""!==typeArr[1]?(resourceObj.objName=typeArr[1],"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(resourceObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase()&&"serviceaccount"!==resourceObj.objName.toLowerCase()&&"cluster"!==resourceObj.objName.toLowerCase()&&"clusterrole"!==resourceObj.objName.toLowerCase()||(resourceObj.showEditFlag=!1)):resourceObj.objName="MISSING"}else console.log("without type");if(resourceItemData.Thead){var tmp=[],lineItem=resourceItemData.Thead;if(resourceObj.headStr=lineItem,"MISSING"===resourceObj.objName){tmp=lineItem.split("\t");var resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&resourceTableHead.push(tmpItem)}),resourceTableHead.push("操作"),resourceObj.head=resourceTableHead}else{tmp=lineItem.split(" ");var _resourceTableHead=[];angular.forEach(tmp,function(tmpItem){""!=tmpItem&&_resourceTableHead.push(tmpItem)}),_resourceTableHead.push("操作"),resourceObj.head=_resourceTableHead}}else console.log("without Thead");if(resourceItemData.Items){var resourceItems=resourceItemData.Items;"MISSING"===resourceObj.objName?(resourceObj.resourceData=resourceObj.headStr+"\r\n",angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),item.Name&&(itemObj.Name=item.Name),itemObj.Type=resoruceObj.objName;var lineData=void 0;lineData=item.RawData?item.RawData:item,itemObj.valueStr=item.RawData,resoruceObj.resourceData=resourceObj.resourceData+item.RawData+"\r\n";var tmp=lineData.split("\t");angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa"),resourceObj.value.push(itemObj);var ttt=resourceObj.headStr+"\r\n";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})):angular.forEach(resourceItems,function(item){var itemObj={Name:"",Type:"",Data:[],valueStr:"",itemStr:"",couldListLogs:!1,showEditFlag:!0};itemObj.Type=resourceObj.objName,"replicaset"!==resourceObj.objName.toLowerCase().trim()&&"replicationcontroller"!==resourceObj.objName.toLowerCase().trim()&&"daemonset"!==resourceObj.objName.toLowerCase().trim()&&"statefulset"!==resourceObj.objName.toLowerCase().trim()&&"pod"!==resourceObj.objName.toLowerCase().trim()&&"service"!==resourceObj.objName.toLowerCase().trim()||(itemObj.couldListLogs=!0),"clusterrolebinding"!==resourceObj.objName.toLowerCase().trim()&&"serviceaccount"!==resourceObj.objName.toLowerCase().trim()&&"cluster"!==resourceObj.objName.toLowerCase().trim()&&"clusterrole"!==resourceObj.objName.toLowerCase().trim()||(itemObj.showEditFlag=!1),itemObj.Name=item.Name;var lineData=item.RawData;itemObj.valueStr=item.RawData,resourceObj.resourceData=resourceObj.resourceData+item.RawData;for(var tmp=lineData.split(" "),valueLength=resourceObj.head.length-1,headArray=[],i=0;i<valueLength;i++)headArray[i]="[none]";angular.forEach(tmp,function(tmpItem){""!=tmpItem&&itemObj.Data.push(tmpItem)}),itemObj.Data.push("aa");var ttt=resourceObj.headStr+"\r";ttt+=item.RawData,ttt=ttt.trim();var md=marked(ttt),nodesIndex=md.indexOf("<nodes>");if(-1!==nodesIndex){md=md.substring(0,nodesIndex)+"[nodes]"+md.substring(nodesIndex+"<nodes>".length,md.length)}var noneIndex=md.indexOf("<none>");if(-1!==noneIndex){md=md.substring(0,noneIndex)+"[none]"+md.substring(noneIndex+"<none>".length,md.length)}itemObj.itemStr=self._sce.trustAsHtml(marked(md)),resourceObj.value.push(itemObj),self.resourceDataArray.push(itemObj)})}else console.log("without items");self.resourceArray.push(resourceObj)}):console.log("without resources")}else console.log("获取resoures信息失败！");self.icon=content.chart.metadata.icon,self.cname=content.chart.metadata.name,self.first_deployed=1e3*content.info.first_deployed.seconds,self.statusCode=content.info.status.code,self.help=status.info.status.notes,self.notes=content.chart.metadata.description,self.help&&(self.mdHelp=self._sce.trustAsHtml(marked(self.help)))})}},{key:"getDetailHref",value:function(data,resourceNamespace){var objName=data.Name,objType=data.Type,kindState=void 0;if(_constant.HOR_KIND_DETAIL_STATE.map(function(item){item.name.toLowerCase()==objType.toLowerCase().trim()&&(kindState=item.state)}),kindState)return this._state.href(kindState,new _utils.UpdageStateParams(resourceNamespace,objName,"list"))}},{key:"getLabelFirstletter",value:function(value){var regexp=/[A-Z]/g,matchesArr=value.toString().match(regexp),newStr="";return matchesArr.forEach(function(chr){newStr+=chr}),newStr}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _apprepository_stateconfig=__webpack_require__(503),_apprepository_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_apprepository_stateconfig),_list_service=__webpack_require__(507);exports.default=angular.module("horApp.apprepository",["ngMaterial","ngResource","ui.router"]).config(_apprepository_stateconfig2.default).factory("horAppRepositoryRepoResource",_list_service.appRepositoryRepoResource).service("horAppRepositoryService",_list_service.appRepositoryService)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(504),_list_stateconfig=__webpack_require__(505)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="apprepository",exports.stateUrl="/apprepository"},function(module,exports,__webpack_require__){"use strict";function resolveRepoList(horAppRepositoryRepoResource){return horAppRepositoryRepoResource.get().$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRepoList=resolveRepoList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(504),_list_controller=__webpack_require__(506);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{repoList:resolveRepoList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"apprepository/list/list.html"}}}
},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(11),__webpack_require__(4),exports.ListController=function(){function ListController(repoList,NgTableParams,horAppRepositoryService){_classCallCheck(this,ListController),this.repoList=repoList.RawData,this._horAppRepositoryService=horAppRepositoryService,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.repoList})}return _createClass(ListController,[{key:"appRepository",value:function(){return this._horAppRepositoryService.showAppRepositoryDialog()}},{key:"deleteRelease",value:function(event,item){return this._horAppRepositoryService.showDeleteDialog(event,item)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function appRepositoryRepoResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories")}appRepositoryRepoResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.appRepositoryService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.appRepositoryRepoResource=appRepositoryRepoResource;var _constant=__webpack_require__(11);exports.appRepositoryService=function(){function appRepositoryService($http,$state,$mdDialog,$resource,$mdToast,$translate,$filter){_classCallCheck(this,appRepositoryService),this._http=$http,this._state=$state,this._mdDialog=$mdDialog,this._resource=$resource,this._mdToast=$mdToast,this._translate=$translate,this._filter=$filter}return _createClass(appRepositoryService,[{key:"showAppRepositoryDialog",value:function(){var _this=this,self=this;return this._mdDialog.show({controller:function($mdDialog){this.repoObj={},this.repoObj.name,this.repoObj.cache,this.repoObj.url,this.repoObj.caFile="",this.repoObj.certFile="",this.repoObj.keyFile="",this.answer=function(obj){$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"apprepository/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}).then(function(answer){var url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories?name="+answer.name+"&url="+answer.url+"&cache="+answer.cache+"&caFile="+answer.caFile+"&certFile="+answer.certFile+"&keyFile="+answer.keyFile;return self._http({url:url,method:"POST"})}).then(function(data){void 0!=data&&200===data.status?data.data.Error?_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Failed")+" "+data.data.Error).position("w300 danger").hideDelay(3e3)):(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Successed")).position("w200 success ").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0==data&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("Failed")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(reason){})}},{key:"showDeleteDialog",value:function(event,item){var _this2=this,url=_constant.backendApi.HOR_K8S_SERVER_HELM+"/helm/repositories/"+item.name,confirm=this._mdDialog.confirm().title(this._translate.instant("Delete Repository")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Repository")).cancel(this._translate.instant("Cancel"));this._mdDialog.show(confirm).then(function(){var repositoryDeleting=_this2._filter("I18N")("Repository Deleting");return _this2._mdToast.show({template:'<md-toast><i class="icon-spinner-ring fw animation-load"></i><span class="md-toast-text" flex>'+repositoryDeleting+"</span></md-toast>",position:"top right",hideDelay:3e4,toastClass:"hor-toast"}),_this2._http.delete(url)}).then(function(data){_this2._mdToast.hide(),_this2._state.go(".",{},{reload:!0})},function(reason){})}}]),appRepositoryService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(509),_podproset_service=__webpack_require__(510),_detail_service=__webpack_require__(511),_podproset_stateconfig=__webpack_require__(512),_podproset_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_podproset_stateconfig);exports.default=angular.module("horApp.podproset",["ngMaterial","ngResource","ui.router"]).config(_podproset_stateconfig2.default).factory("horPodprosetListResource",_list_service.podprosetListResource).service("horPodprosetSerivce",_podproset_service.podprosetSerivce).factory("horPodprosetDetailResource",_detail_service.podprosetDetailResource).factory("horGetPodprosetDetailYml",_detail_service.getPodprosetDetailYml).factory("horPodprosetDetailYml",_detail_service.podprosetDetailYml)},function(module,exports,__webpack_require__){"use strict";function podprosetListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/:namespace/podpresets")}podprosetListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podprosetListResource=podprosetListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.podprosetSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.podprosetSerivce=function(){function podprosetSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,podprosetSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(podprosetSerivce,[{key:"getUrl",value:function(obj){var ns=obj.namespace,objName=obj.name;return _constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+ns+"/podpresets/"+objName}},{key:"createResources",value:function(){return this._resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Pod Preset")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Pod Preset")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("podproset",{},{reload:!0})},function(){})}}]),podprosetSerivce}()},function(module,exports,__webpack_require__){"use strict";function podprosetDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/:namespace/podpresets/:objectName")}function getPodprosetDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/podpreset/namespace/:namespace/name/:objectName")}function podprosetDetailYml($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/podpreset/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}podprosetDetailResource.$inject=["$resource"],podprosetDetailYml.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podprosetDetailResource=podprosetDetailResource,exports.getPodprosetDetailYml=getPodprosetDetailYml,exports.podprosetDetailYml=podprosetDetailYml;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("podproset.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(513)),_detail_state=__webpack_require__(514),_list_stateconfig=__webpack_require__(515),_detail_stateconfig=__webpack_require__(517),_new_stateconfig=__webpack_require__(519)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="podproset",exports.stateUrl="/podproset"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="podprosetdetail",exports.stateUrl="/podproset"},function(module,exports,__webpack_require__){"use strict";function resolvePodprosetListResource(horPodprosetListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horPodprosetListResource.get(obj).$promise.then(function(podpresetList){return horUtilsService.recombinePodprosetList(podpresetList)})}resolvePodprosetListResource.$inject=["horPodprosetListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodprosetListResource=resolvePodprosetListResource;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(516),_list_state=__webpack_require__(513);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{podPresetList:resolvePodprosetListResource},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"podproset/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(514),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController($state,$stateParams,$scope,$cookies,NgTableParams,podPresetList,horModifyService,horPodprosetSerivce){_classCallCheck(this,ListController),this.podPresetList=podPresetList,this._scope=$scope,this._state=$state,this._horModifyService=horModifyService,this._horPodprosetSerivce=horPodprosetSerivce,this.namespace=$stateParams.namespace,this._cookies=$cookies,this.globalSearchTerm,this.role=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.podPresetList})}return ListController.$inject=["$state","$stateParams","$scope","$cookies","NgTableParams","podPresetList","horModifyService","horPodprosetSerivce"],_createClass(ListController,[{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName){var namespace=this.namespace;return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"deletePodpreset",value:function(event,item){return this._horPodprosetSerivce.showDeleteDialog(event,item)}},{key:"updatePodpreset",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolvePodprosetDetail(horPodprosetDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodprosetDetailResource.get(obj).$promise}function resolveGetPodprosetDetailYml(horGetPodprosetDetailYml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horGetPodprosetDetailYml.get(objParams).$promise}resolvePodprosetDetail.$inject=["horPodprosetDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodprosetDetail=resolvePodprosetDetail,exports.resolveGetPodprosetDetailYml=resolveGetPodprosetDetailYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(514),_detail_controller=__webpack_require__(518);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{podpresetDetail:resolvePodprosetDetail,podpresetYmlValue:resolveGetPodprosetDetailYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"podproset/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=(__webpack_require__(11),__webpack_require__(513),__webpack_require__(514)),_utils=__webpack_require__(4),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController(podpresetDetail,$mdDialog,$http,$state,$mdToast,$stateParams,$window,$scope,horPodprosetDetailYml,horPodprosetDetailResource,horModifyService,podpresetYmlValue,horGetPodprosetDetailYml,horPodprosetSerivce,$translate){_classCallCheck(this,DetailController),this._http=$http,this._state=$state,this._mdToast=$mdToast,this._dialog=$mdDialog,this._stateParams=$stateParams,this._window=$window,this._horPodprosetDetailYml=horPodprosetDetailYml,this._horPodprosetDetailResource=horPodprosetDetailResource,this._horModifyService=horModifyService,this._horGetPodprosetDetailYml=horGetPodprosetDetailYml,this.namespace=$stateParams.namespace,this._horPodprosetSerivce=horPodprosetSerivce,this._translate=$translate;var labelsArr=[];podpresetDetail.metadata.labels&&angular.forEach(podpresetDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}});var annotationsArr=[];podpresetDetail.metadata.annotations&&angular.forEach(podpresetDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var podSelectorArr=[];podpresetDetail.spec.selector.matchLabels&&angular.forEach(podpresetDetail.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;podSelectorArr.push(str)}else{var _str2=key+"="+value;podSelectorArr.push(_str2)}});var podpresetDetailArr={name:podpresetDetail.metadata.name,namespace:podpresetDetail.metadata.namespace,labels:labelsArr,annotations:annotationsArr,podSelector:podSelectorArr,createAt:podpresetDetail.metadata.creationTimestamp};this.podpresetData=podpresetDetailArr,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(podpresetYmlValue,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0}return _createClass(DetailController,[{key:"saveChange",value:function(){var _this=this,aceName=this.podpresetData.name,aceNamespace=this.podpresetData.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horPodprosetDetailYml.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horGetPodprosetDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deletePodpresetDetail",value:function(event,item){return this._horPodprosetSerivce.showDeleteDialog(event,item)}},{key:"updatePodpresetDetail",value:function(event,item){this.selectedIndex=1}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(513),_new_controller=__webpack_require__(520),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"secret/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(514);exports.NewController=function(){function NewController(horManagePod,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,horPodprosetSerivce,$translate){_classCallCheck(this,NewController),this._mdToast=$mdToast,this._horManagePod=horManagePod,this._horPodprosetSerivce=horPodprosetSerivce,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.namespaceData="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="apiVersion: settings.k8s.io/v1alpha1 \nkind: PodPreset\nmetadata:\n  name: allow-database\n  namespace: "+namespaceString+'\nspec:\n  selector:\n    matchLabels:\n      role: frontend\n  env:\n    - name: DB_PORT\n      value: "6379"\n  volumeMounts:\n    - mountPath: /cache\n      name: cache-volume\n  volumes:\n    - name: cache-volume\n      emptyDir: {}\n'}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"pod.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horPodprosetSerivce.createResources().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open("系统提示","创建失败");_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(522),_storageclass_service=__webpack_require__(523),_detail_service=__webpack_require__(524),_storageclass_stateconfig=__webpack_require__(525),_storageclass_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_storageclass_stateconfig);exports.default=angular.module("horApp.storageclass",["ngMaterial","ngResource","ui.router"]).config(_storageclass_stateconfig2.default).factory("horStorageclassListResource",_list_service.storageclassListResource).service("horStorageclassSerivce",_storageclass_service.storageclassSerivce).factory("horStorageclassDetailResource",_detail_service.storageclassDetailResource).factory("horGetStorageclassDetailYml",_detail_service.getStorageclassDetailYml).factory("horStorageclassDetailYml",_detail_service.storageclassDetailYml)},function(module,exports,__webpack_require__){"use strict";function storageclassListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/storageclasses")}storageclassListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.storageclassListResource=storageclassListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.storageclassSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.storageclassSerivce=function(){function storageclassSerivce($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,storageclassSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(storageclassSerivce,[{key:"getUrl",value:function(obj){var objName=obj.name;return _constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/storageclasses/"+objName}},{key:"createResources",value:function(){return this._resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Storage Class")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Storage Class")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("storageclass",{},{reload:!0})},function(){})}}]),storageclassSerivce}()},function(module,exports,__webpack_require__){"use strict";function storageclassDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/storageclasses/:objectName")}function getStorageclassDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/storageclass/name/:objectName")}function storageclassDetailYml($http){function changeYaml(name,data){var url=_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/storageclass/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}storageclassDetailResource.$inject=["$resource"],storageclassDetailYml.$inject=["$http"],getStorageclassDetailYml.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.storageclassDetailResource=storageclassDetailResource,exports.getStorageclassDetailYml=getStorageclassDetailYml,exports.storageclassDetailYml=storageclassDetailYml;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("storageclass.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(526)),_detail_state=__webpack_require__(126),_list_stateconfig=__webpack_require__(527),_detail_stateconfig=__webpack_require__(529),_new_stateconfig=__webpack_require__(531)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="storageclass",exports.stateUrl="/storageclass"},function(module,exports,__webpack_require__){"use strict";function resolveStorageclassListResource(horStorageclassListResource,horUtilsService){return horStorageclassListResource.get().$promise.then(function(storageclassLists){return horUtilsService.recombineStorageclassList(storageclassLists)})}resolveStorageclassListResource.$inject=["horStorageclassListResource","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveStorageclassListResource=resolveStorageclassListResource;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(528),_list_state=__webpack_require__(526);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{storageclassList:resolveStorageclassListResource},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"storageclass/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(126),_constant=__webpack_require__(11);exports.ListController=function(){function ListController($state,$stateParams,$scope,$cookies,NgTableParams,storageclassList,horModifyService,horStorageclassSerivce){_classCallCheck(this,ListController),this.storageclassList=storageclassList,this._scope=$scope,this._state=$state,this._horModifyService=horModifyService,this._horStorageclassSerivce=horStorageclassSerivce,this.namespace=$stateParams.namespace,this._cookies=$cookies,this.globalSearchTerm,
this.role=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name,this.tableParams=null,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.storageclassList})}return ListController.$inject=["$state","$stateParams","$scope","$cookies","NgTableParams","storageclassList","horModifyService","horStorageclassSerivce"],_createClass(ListController,[{key:"getDetailHref",value:function(objName){return this._state.href(_detail_state.stateName,new _utils.NewUpdageStateParams(objName,"list"))}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"deletePodpreset",value:function(event,item){return this._horStorageclassSerivce.showDeleteDialog(event,item)}},{key:"updatePodpreset",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolvestorageclassDetail(horStorageclassDetailResource,$stateParams){var obj={objectName:$stateParams.objectName};return horStorageclassDetailResource.get(obj).$promise}function resolvestorageclassYmlDetail(horGetStorageclassDetailYml,$stateParams){var obj={objectName:$stateParams.objectName};return horGetStorageclassDetailYml.get(obj).$promise}resolvestorageclassDetail.$inject=["horStorageclassDetailResource","$stateParams"],resolvestorageclassYmlDetail.$inject=["horGetStorageclassDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvestorageclassDetail=resolvestorageclassDetail,exports.resolvestorageclassYmlDetail=resolvestorageclassYmlDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(126),_detail_controller=__webpack_require__(530);exports.config={url:(0,_utils.newappendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{storageclassDetail:resolvestorageclassDetail,scYml:resolvestorageclassYmlDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"storageclass/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=(__webpack_require__(11),__webpack_require__(526),__webpack_require__(126)),_utils=__webpack_require__(4);exports.DetailController=function(){function DetailController(storageclassDetail,$mdDialog,$http,$state,$mdToast,$stateParams,$window,$scope,$translate,horPodprosetDetailYml,horPodprosetDetailResource,horModifyService,scYml,horStorageclassSerivce,horGetStorageclassDetailYml,horStorageclassDetailYml){_classCallCheck(this,DetailController),this._translate=$translate,this._http=$http,this._state=$state,this._mdToast=$mdToast,this._dialog=$mdDialog,this._stateParams=$stateParams,this._window=$window,this.__horPodprosetDetailYml=horPodprosetDetailYml,this._horPodprosetDetailResource=horPodprosetDetailResource,this._horModifyService=horModifyService,this._horStorageclassSerivce=horStorageclassSerivce,this._horGetStorageclassDetailYml=horGetStorageclassDetailYml,this._horStorageclassDetailYml=horStorageclassDetailYml;var labelsArr=[];storageclassDetail.metadata.labels&&angular.forEach(storageclassDetail.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}});var annotationsArr=[];storageclassDetail.metadata.annotations&&angular.forEach(storageclassDetail.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var storageclassDetailArr={name:storageclassDetail.metadata.name,namespace:storageclassDetail.metadata.namespace,labels:labelsArr,annotations:annotationsArr,createAt:storageclassDetail.metadata.creationTimestamp};this.storageclassData=storageclassDetailArr,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(scYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:"pod"===this.currentTab?this.selectedIndex=2:this.selectedIndex=0}return _createClass(DetailController,[{key:"saveChange",value:function(){var _this=this,aceName=this.storageclassData.name,aceModel=(this.storageclassData.namespace,this.aceModel),newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horStorageclassDetailYml.changeYaml(aceName,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={objectName:this._stateParams.objectName};this._horGetStorageclassDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"deleteStorageclassDetail",value:function(event,item){return this._horStorageclassSerivce.showDeleteDialog(event,item)}},{key:"updateStorageclassDetail",value:function(event,item){this.selectedIndex=1}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(526),_new_controller=__webpack_require__(532),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new/new/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"storageclass/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(126);exports.NewController=function(){function NewController(horManagePod,$q,$state,$mdDialog,errorDialog,$mdToast,$stateParams,$translate,horPodprosetSerivce){_classCallCheck(this,NewController),this._translate=$translate,this._mdToast=$mdToast,this._horManagePod=horManagePod,this._horPodprosetSerivce=horPodprosetSerivce,this._q=$q,this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate,this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};"all"===this._stateParams.namespace||this._stateParams.namespace;this.namespaceData="all"===this._stateParams.namespace?"default":this._stateParams.namespace,this.aceModel="kind: StorageClass\napiVersion: storage.k8s.io/v1 \nmetadata:\n  name: slow\n  labels:\n    type: local \nprovisioner: kubernetes.io/gce-pd \nparameters:\n  type: pd-standard\n  zones: us-central1-a, us-central1-b"}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"pod.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("labels:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName;"all"===this._stateParams.namespace||this._stateParams.namespace;this._horPodprosetSerivce.createResources().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System Information"),_this._translate.instant("Create Failure"));_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _errorhandling_module=__webpack_require__(111),_errorhandling_module2=_interopRequireDefault(_errorhandling_module),_list_service=__webpack_require__(534),_detail_service=__webpack_require__(535),_resourcequota_stateconfig=__webpack_require__(536),_resourcequota_stateconfig2=_interopRequireDefault(_resourcequota_stateconfig),_resourcequota_service=__webpack_require__(545);exports.default=angular.module("horApp.resourcequota",["ngMaterial","ngResource","ui.router",_errorhandling_module2.default.name]).config(_resourcequota_stateconfig2.default).service("horResourcequotaManageService",_resourcequota_service.resourcequotaManageService).factory("horResourcequotaListResource",_list_service.resourcequotaListResource).factory("horResourcequotaDetailResource",_detail_service.resourcequotaDetailResource).factory("horResourcequotaDetailYml",_detail_service.resourcequotaDetailYml).factory("horResourcequotaDetailYmlArray",_detail_service.resourcequotaDetailYmlArr)},function(module,exports,__webpack_require__){"use strict";function resourcequotaListResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/resourcequotas")}resourcequotaListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.resourcequotaListResource=resourcequotaListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function resourcequotaDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/resourcequotas/:objectName")}function resourcequotaDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/resourcequota/namespace/:namespace/name/:objectName")}function resourcequotaDetailYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/resourcequota/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}resourcequotaDetailResource.$inject=["$resource"],resourcequotaDetailYml.$inject=["$resource"],resourcequotaDetailYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.resourcequotaDetailResource=resourcequotaDetailResource,exports.resourcequotaDetailYml=resourcequotaDetailYml,exports.resourcequotaDetailYmlArr=resourcequotaDetailYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("resourcequota.new",_new_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(537),_detail_state=__webpack_require__(538),_list_stateconfig=__webpack_require__(539),_detail_stateconfig=__webpack_require__(541),_new_stateconfig=__webpack_require__(543)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="resourcequota",exports.stateUrl="/resourcequota"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="resourcequotadetail",exports.stateUrl="/resourcequota"},function(module,exports,__webpack_require__){"use strict";function resolveResourcequotaList(horResourcequotaListResource,$stateParams,horUtilsService){var obj={namespace:$stateParams.namespace};return horResourcequotaListResource.get(obj).$promise.then(function(rqlist){return horUtilsService.recombineRqList(rqlist)})}resolveResourcequotaList.$inject=["horResourcequotaListResource","$stateParams","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveResourcequotaList=resolveResourcequotaList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(540),_list_state=__webpack_require__(537);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{resourcequotaList:resolveResourcequotaList},views:{"":{controller:_list_controller.persistentVolumeClaimListController,controllerAs:"$ctrl",templateUrl:"resourcequota/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.persistentVolumeClaimListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(538),_constant=__webpack_require__(11),_namespacedetail_state=__webpack_require__(57);exports.persistentVolumeClaimListController=function(){function persistentVolumeClaimListController(resourcequotaList,$stateParams,$state,$interpolate,$cookies,$scope,NgTableParams,horResourcequotaManageService,horModifyService){_classCallCheck(this,persistentVolumeClaimListController),this.selected=[],this._horResourcequotaManageService=horResourcequotaManageService,this.options={rowSelection:!1,multiSelect:!1,autoSelect:!0,mdOnSelect:this.onSelect,mdOnDeselect:this.onDeselect},this._horModifyService=horModifyService,this.resourcequotaList=resourcequotaList,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.resourcequotaList}),this.namespace=$stateParams.namespace,this._state=$state,this._interpolate=$interpolate,this._cookies=$cookies,this.editFlag=!0,this.globalSearchTerm,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Config & Store",subNav:{title:"Persistent Volume Claims",state:"persistentvolumeclaim"}})}return persistentVolumeClaimListController.$inject=["resourcequotaList","$stateParams","$state","$interpolate","$cookies","$scope","NgTableParams","horResourcequotaManageService","horModifyService"],_createClass(persistentVolumeClaimListController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(namespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"areMultipleNamespacesSelected",value:function(){return"all"===this.namespace}},{key:"deletePvcService",value:function(event,item){return this._horResourcequotaManageService.showDeleteDialog(event,item)}},{key:"showEditPvcDialog",value:function(event,item){this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),persistentVolumeClaimListController}()},function(module,exports,__webpack_require__){"use strict";function resolveResourcequotaDetail(horResourcequotaDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horResourcequotaDetailResource.get(obj).$promise}function resolveRqYml(horResourcequotaDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horResourcequotaDetailYml.get(obj).$promise}resolveResourcequotaDetail.$inject=["horResourcequotaDetailResource","$stateParams"],resolveRqYml.$inject=["horResourcequotaDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveResourcequotaDetail=resolveResourcequotaDetail,exports.resolveRqYml=resolveRqYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(538),_detail_controller=__webpack_require__(542);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{rqDetail:resolveResourcequotaDetail,rqYml:resolveRqYml},views:{"":{controller:_detail_controller.detailController,controllerAs:"$ctrl",templateUrl:"resourcequota/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.detailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_list_state=__webpack_require__(537),_utils=__webpack_require__(4),_namespacedetail_state=(__webpack_require__(538),__webpack_require__(57));exports.detailController=function(){function detailController(rqDetail,horModifyService,horResourcequotaDetailYml,$mdDialog,$stateParams,$http,$state,$cookies,horResourcequotaManageService,$scope,rqYml,horResourcequotaDetailYmlArray,$mdToast,$translate){if(_classCallCheck(this,detailController),this.pvcDetailValue,this.item,this._horResourcequotaManageService=horResourcequotaManageService,this._horResourcequotaDetailYmlArray=horResourcequotaDetailYmlArray,this._stateParams=$stateParams,this._horResourcequotaDetailYml=horResourcequotaDetailYml,this.namespace=$stateParams.namespace,null!=rqDetail){var pvcDetailObject={};pvcDetailObject.name=rqDetail.metadata.name,pvcDetailObject.namespace=rqDetail.metadata.namespace,pvcDetailObject.lables=this.formatObject(rqDetail.metadata.labels),pvcDetailObject.annotations=this.formatObject(rqDetail.metadata.annotations),pvcDetailObject.createTime=rqDetail.metadata.creationTimestamp,pvcDetailObject.status=rqDetail.status.phase,pvcDetailObject.volume=rqDetail.spec.volumeName||"-",pvcDetailObject.capacity=this.formatObject(rqDetail.status.capacity)||"-",pvcDetailObject.accessModes=this.formatObject(rqDetail.spec.accessModes),this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0;var acctionArr=[];angular.forEach(pvcDetailObject.annotations,function(item){var str=item.name+"="+item.value;acctionArr.push(str),pvcDetailObject.dataArr=acctionArr.length});var labelNewArr=[];angular.forEach(pvcDetailObject.lables,function(item){if(0==item.value.length){var str=""+item.name;labelNewArr.push(str)}else{var _str=item.name+"="+item.value;labelNewArr.push(_str)}}),pvcDetailObject.labelArr=labelNewArr,pvcDetailObject.acctionArr=acctionArr,this.pvcDetailValue=pvcDetailObject,this.item={namespace:this.pvcDetailValue.namespace,name:this.pvcDetailValue.name},this.showLabels=!1,this.pvcDetailValue.lables.length>0?this.showLabels=!0:this.showLabels=!1}else this.pvcDetailValue=null;this._horModifyService=horModifyService,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(rqYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this._dialog=$mdDialog,this._http=$http,this._state=$state,this._cookies=$cookies,this.editFlag=!0,this._mdToast=$mdToast,this._translate=$translate,this._scope=$scope,this._scope.$emit("currentNav",{mainNav:"Config & Store",subNav:{title:"Persistent Volume Claims",state:"persistentvolumeclaim"},sub:this.pvcDetailValue.name+" Details"})}return detailController.$inject=["rqDetail","horModifyService","horResourcequotaDetailYml","$mdDialog","$stateParams","$http","$state","$cookies","horResourcequotaManageService","$scope","rqYml","horResourcequotaDetailYmlArray","$mdToast","$translate"],_createClass(detailController,[{key:"$onInit",value:function(){"view"===this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY).userRole.Name&&(this.editFlag=!1)}},{key:"formatObject",value:function(obj){var newStr="",valueArr=[],nameArr=[],formatObject=[];for(var name in obj)nameArr.push(name);angular.forEach(obj,function(value){newStr=value,valueArr.push(newStr)});for(var i in nameArr){var _obj={name:nameArr[i],value:valueArr[i]};formatObject.push(_obj)}return formatObject}},{key:"showDeleteDialog",value:function(event){var item=this.item;return this._horResourcequotaManageService.showDeleteDialog(event,item)}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showEditDialog",value:function(event){this.selectedIndex=1}},{key:"getListHref",value:function(namespace){return this._state.href(_list_state.stateName,namespace)}},{key:"saveChange",value:function(){var _this=this,aceName=this.pvcDetailValue.name,aceNamespace=this.pvcDetailValue.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horResourcequotaDetailYmlArray.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),_this.selectedIndex=0,"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.href(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horResourcequotaDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),detailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(537),_new_controller=__webpack_require__(544),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"resourcequota/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(538);exports.NewController=function(){function NewController(horResourcequotaManageService,$q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$translate){_classCallCheck(this,NewController),this._horResourcequotaManageService=horResourcequotaManageService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate;var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: example\n  namespace: "+namespaceString+"\nspec:\n  hard:\n    pods: '4'\n    requests.cpu: '1'\n    requests.memory: 1Gi\n    limits.cpu: '2'\n    limits.memory: 2Gi",this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),resourceQuotaSpec={name:"rq.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horResourcequotaManageService.createResource().save(resourceQuotaSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var resourceObj=response.ResourceObject;resourceObj.namespace,resourceObj.name;_this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))}catch(error){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resourcequotaManageService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);__webpack_require__(537),exports.resourcequotaManageService=function(){function resourcequotaManageService($http,$state,$mdDialog,errorDialog,$resource,$translate){_classCallCheck(this,resourcequotaManageService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._errorDialog=errorDialog,this._resource=$resource,this._translate=$translate}return _createClass(resourcequotaManageService,[{key:"getUrl",value:function(obj){var ns=obj.namespace,pvcName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/resourcequota/namespace/"+ns+"/name/"+pvcName}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Resource Quota")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name).targetEvent(event).ok(this._translate.instant("Delete Resource Quota")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){
return _this._http.delete(url)}).then(function(){self._state.go("resourcequota",{},{reload:!0})},function(){})}}]),resourcequotaManageService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _event_stateconfig=__webpack_require__(547),_event_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_event_stateconfig);exports.default=angular.module("horApp.event",["ngMaterial","ngResource","ui.router"]).config(_event_stateconfig2.default)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_event_state.stateName,{url:_event_state.stateUrl,parent:_hormain_state.stateName,resolve:{eventList:resolveEventList},views:{"":{controller:_event_controller.EventController,controllerAs:"$ctrl",templateUrl:"event/event.html"}}})}function resolveEventList(horDBEventListService,$stateParams){var obj={namespace:$stateParams.namespace};return horDBEventListService.get(obj).$promise.then(function(data){return data},function(reason){console.log(reason)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig,exports.resolveEventList=resolveEventList;var _hormain_state=__webpack_require__(30),_event_controller=__webpack_require__(548),_event_state=__webpack_require__(549)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.EventController=function(){function EventController($filter,$stateParams,eventList,horDBEventListService){_classCallCheck(this,EventController),this._stateParams=$stateParams,this._filter=$filter,this.eventList=eventList.items,this.eventListData=eventList.items,this.eventlistLimit=100,this._horDBEventListService=horDBEventListService,this.selectedEventType="all",this.selectedEventCategory="all"}return _createClass(EventController,[{key:"refreshEventList",value:function(){var _this=this,obj={namespace:this._stateParams.namespace};return this._horDBEventListService.get(obj).$promise.then(function(data){_this.eventList=data.items,_this.eventListData=data.items})}},{key:"changeEventType",value:function(){var data=this.eventListData,type=this.selectedEventType,category=this.selectedEventCategory;this.eventList=this._filter("filter")(data,function(d){return"all"==type&&"all"==category||("all"==type&&"all"!=category?d.type==category:"all"!=type&&"all"==category?d.involvedObject.kind==type:d.involvedObject.kind==type&&d.type==category)})||[]}},{key:"showNothingState",value:function(){if(this.eventList)return 0===this.eventList.length}}]),EventController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="event",exports.stateUrl="/event"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _search_stateconfig=__webpack_require__(551),_search_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_search_stateconfig),_list_service=__webpack_require__(558);exports.default=angular.module("horApp.search",["ngMaterial","ngResource","ui.router"]).config(_search_stateconfig2.default).factory("horSearchListResource",_list_service.searchListResource).factory("horNoSearchListResource",_list_service.noSearchListResource).factory("horDeploymentSearchListResource",_list_service.deploymentSearchListResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state("search.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(552)),_list_stateconfig=__webpack_require__(553),_new_stateconfig=__webpack_require__(557)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="search",exports.stateUrl="/search"},function(module,exports,__webpack_require__){"use strict";function resolveSearchList($stateParams,horUtilsService,horSearchListResource,horNoSearchListResource){var kind=$stateParams.kind||"pod",resourceInstance=ResourceRecombined();if("node"==kind||"namespace"==kind||"persistentvolume"==kind){var obj={kind:kind,label:$stateParams.label||null};return horNoSearchListResource.get(obj).$promise.then(function(data){return"node"==kind?resourceInstance.nodeRecombined(data.items):"namespace"==kind?resourceInstance.namespaceRecombined(data.items):"persistentvolume"==kind?resourceInstance.persistentvolumeRecombined(data.items):"clusterrole"==kind?resourceInstance.clusterroleRecombined(data.items):"clusterrolebinding"==kind?resourceInstance.clusterrolebindingRecombined(data.items):"podsecuritypolicy"==kind?resourceInstance.podsecuritypolicieRecombined(data.items):void 0})}if("deployment"==kind){var _obj={namespace:$stateParams.namespace,label:$stateParams.label||null};return horDeploymentSearchListResource.get(_obj).$promise.then(function(data){return resourceInstance.deploymentRecombined(data.items)})}var _obj2={namespace:$stateParams.namespace,kind:kind,label:$stateParams.label||null};return horSearchListResource.get(_obj2).$promise.then(function(data){return"service"==kind?resourceInstance.serviceRecombined(data.items):"job"==kind?resourceInstance.jobRecombined(data.items):"pod"==kind?resourceInstance.podRecombined(data.items):"daemonset"==kind?resourceInstance.daemonsetRecombined(data.items):"replicaset"==kind?resourceInstance.replicasetRecombined(data.items):"replicationcontroller"==kind?resourceInstance.replicationcontrollerRecombined(data.items):"statefulset"==kind?resourceInstance.statefulsetRecombined(data.items):"horizontalpodautoscaler"==kind?resourceInstance.horizontalpodautoscalerRecombined(data.items):"configmap"==kind?resourceInstance.configmapRecombined(data.items):"secret"==kind?resourceInstance.secretRecombined(data.items):"podpreset"==kind?resourceInstance.podpresetRecombined(data.items):"resourcequota"==kind?resourceInstance.resourcequotaRecombined(data.items):"ingress"==kind?resourceInstance.ingressRecombined(data.items):"persistentvolumeclaim"==kind?resourceInstance.persistentvolumeclaimRecombined(data.items):"serviceaccount"==kind?resourceInstance.serviceaccountRecombined(data.items):"role"==kind?resourceInstance.roleRecombined(data.items):"rolebinding"==kind?resourceInstance.rolebindingRecombined(data.items):"storageclass"==kind?resourceInstance.storageclassRecombined(data.items):"networkpolicy"==kind?resourceInstance.networkpolicieRecombined(data.items):void 0})}function ResourceRecombined(){function networkpolicieRecombined(arr){var listArr=[];return arr.forEach(function(a){var labelsArr=[],annotationsArr=[];a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str=key+"="+value;labelsArr.push(_str)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,obj.arrAnnotations=annotationsArr,obj.labels=labelsArr,listArr.push(obj)}),listArr}function podsecuritypolicieRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={name:a.metadata.name,creatTime:a.metadata.creationTimestamp,seLinux:a.spec.seLinux.rule,runAsUser:a.spec.runAsUser.rule,supplementalGroups:a.spec.supplementalGroups.rule,fsGroup:a.spec.fsGroup.rule};listArr.push(obj)}),listArr}function clusterrolebindingRecombined(arr){var listArr=[];return arr.forEach(function(a,index){if(a.subjects)a.subjects.forEach(function(b,index){var obj={name:a.metadata.name,namespace:"all",roleref:a.roleRef.name,subjectkind:b.kind,subjectname:b.name,kind:a.roleRef.kind,index:index,subjects:a.subjects};listArr.push(obj)});else{var obj={name:a.metadata.name,namespace:"all",roleref:a.roleRef.name,subjectkind:"-",subjectname:"-",kind:a.roleRef.kind,index:index,subjects:a.subjects};listArr.push(obj)}}),listArr}function clusterroleRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,listArr.push(obj)}),listArr}function deploymentRecombined(arr){var listArr=[];return arr.forEach(function(item){var labelsArr=[],matchLabelArr=[],annotationsArr=[];item.Deployment.metadata.labels&&angular.forEach(item.Deployment.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str)}else{var _str2=key+"="+value;labelsArr.push(_str2)}}),item.Deployment.spec.selector.matchLabels&&angular.forEach(item.Deployment.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;matchLabelArr.push(str)}else{var _str3=key+"="+value;matchLabelArr.push(_str3)}}),item.Deployment.metadata.annotations&&angular.forEach(item.Deployment.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)});var statusString=void 0,hasDetailInfo=void 0;if(item.Deployment.status.unavailableReplicas){statusString=item.PodInfo.desired-item.Deployment.status.unavailableReplicas+" / "+item.PodInfo.desired+" pods",hasDetailInfo=!1}else statusString=item.PodInfo.current+" / "+item.PodInfo.desired+" pods",hasDetailInfo=!0;var obj={name:item.Deployment.metadata.name,namespace:item.Deployment.metadata.namespace,label:labelsArr,status:statusString,hasDetailInfo:hasDetailInfo,matchLabels:matchLabelArr,annotations:annotationsArr,PodInfo:item.PodInfo};listArr.push(obj)}),listArr}function serviceRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.location=a.spec.clusterIP+":"+a.spec.ports[0].port,obj.clusterIP=a.spec.clusterIP||"None",obj.ports=a.spec.ports,obj.show=!0,obj.labels=[],obj.annotations=[],obj.podSelector=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str4=key+"="+value;obj.labels.push(_str4)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),a.spec.selector?angular.forEach(a.spec.selector,function(value,key){var pStr=key+"="+value;obj.podSelector.push(pStr)}):obj.podSelector="-",listArr.push(obj)}),listArr}function nodeRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status="a",obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str5=key+":"+value;obj.labels.push(_str5)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)});var readyType=a.metadata.annotations["volumes.kubernetes.io/controller-managed-attach-detach"],conditions=null;a.status.conditions&&(conditions=a.status.conditions);var nodeStatus={ready:null,status:null};"False"===conditions[3].status||"Unknown"===conditions[3].status?(nodeStatus.ready="False",nodeStatus.status="Not Ready"):"True"===conditions[3].status&&"False"===conditions[0].status&&"False"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="True",nodeStatus.status="Ready"):"True"===conditions[3].status&&"True"===conditions[0].status&&"False"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk"):"True"===conditions[3].status&&"True"===conditions[0].status&&"True"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Memory Pressure"):"True"===conditions[3].status&&"True"===conditions[0].status&&"False"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Disk Pressure"):"True"===conditions[3].status&&"True"===conditions[0].status&&"True"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Out Of Disk & Memory Pressure & Disk Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"True"===conditions[1].status&&"False"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Memory Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"True"===conditions[1].status&&"True"===conditions[2].status?(nodeStatus.ready="Pending",nodeStatus.status="Memory Pressure & Disk Pressure"):"True"===conditions[3].status&&"False"===conditions[0].status&&"False"===conditions[1].status&&"True"===conditions[2].status&&(nodeStatus.ready="Pending",nodeStatus.status="Disk Pressure");"true"==readyType?"True":(readyType="false")?"False":(readyType="unknown")&&"Unknown",obj.nodeStatus=nodeStatus,listArr.push(obj)}),listArr}function namespaceRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.phase,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str6=key+"="+value;obj.labels.push(_str6)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function daemonsetRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.currentNumberScheduled+" of "+a.status.desiredNumberScheduled+" pods",obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],obj.podSelectorArr=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str7=key+"="+value;obj.labels.push(_str7)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),a.spec.selector.matchLabels&&angular.forEach(a.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;obj.podSelectorArr.push(str)}else{var _str8=key+"="+value;obj.podSelectorArr.push(_str8)}}),listArr.push(obj)}),listArr}function jobRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,a.status.succeeded?obj.completions=a.status.succeeded+" of "+a.spec.parallelism:obj.completions="0 of "+a.spec.parallelism,obj.parallelism=a.spec.parallelism,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str9=key+"="+value;obj.labels.push(_str9)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),a.spec.completions>a.spec.parallelism?obj.type="None Parallel":a.spec.completions<a.spec.parallelism?obj.type="Parallel":a.spec.completions===a.spec.parallelism&&a.spec.completions>1&&a.spec.parallelism>1?obj.type="Parallel":a.spec.completions===a.spec.parallelism&&1==a.spec.parallelism&&1==a.spec.completions&&(obj.type="None Parallel"),listArr.push(obj)}),listArr}function podRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=(0,_podstatus.getPodStatus)(a),obj.node=a.spec.nodeName,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str10=key+"="+value;obj.labels.push(_str10)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)});var conditions=null;a.status.conditions&&(conditions=a.status.conditions),conditions?conditions.forEach(function(i){"Ready"==i.type&&"True"==i.status?obj.readiness="Ready":"Ready"==i.type&&"False"==i.status&&(obj.readiness=i.reason)}):obj.readiness="-",listArr.push(obj)}),listArr}function replicasetRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.age=a.metadata.creationTimestamp,obj.namespace=a.metadata.namespace;var availableReplicas=a.status.availableReplicas||0,replicas=a.status.replicas||0;obj.status=availableReplicas+" of "+replicas+" pods",obj.labels=[],obj.podSelectorArr=[],obj.annotationsArr=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str11=key+"="+value;obj.labels.push(_str11)}}),a.spec.selector.matchLabels&&angular.forEach(a.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;obj.podSelectorArr.push(str)}else{var _str12=key+"="+value;obj.podSelectorArr.push(_str12)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotationsArr.push(str)}),obj.replicas=a.spec.replicas,listArr.push(obj)}),listArr}function replicationcontrollerRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.availableReplicas+" of "+a.status.replicas+" pods",obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.podSelector=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str13=key+"="+value;obj.labels.push(_str13)}}),a.spec.selector.matchLabels&&angular.forEach(a.spec.selector.matchLabels,function(value,key){if(0==value.length){var str=""+key;obj.podSelector.push(str)}else{var _str14=key+"="+value;obj.podSelector.push(_str14)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),obj.replicas=a.spec.replicas,listArr.push(obj)}),listArr}function statefulsetRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.phase,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str15=key+"="+value;obj.labels.push(_str15)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function persistentvolumeclaimRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.state=a.status.phase,obj.storage=a.spec.resources.requests.storage,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str16=key+"="+value;obj.labels.push(_str16)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function horizontalpodautoscalerRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.target=a.spec.scaleTargetRef.kind+":"+a.spec.scaleTargetRef.name,obj.tarCpuUtilization=a.spec.targetCPUUtilizationPercentage+"%",obj.currentCpuUtilization=void 0==a.status.currentCPUUtilizationPercentage?"0%":a.status.currentCPUUtilizationPercentage+"%",obj.minReplicas=a.spec.minReplicas,obj.maxReplicas=a.spec.maxReplicas,obj.age=a.metadata.creationTimestamp,listArr.push(obj)}),listArr}function configmapRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str17=key+"="+value;obj.labels.push(_str17)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)});var dataLength=0,data=a.data;for(var _a in data)dataLength++;obj.dataLength=dataLength,listArr.push(obj)}),listArr}function secretRecombined(arr){var listArr=[];return arr.forEach(function(a){var labelsArr=[],annotationsArr=[];a.metadata.labels&&angular.forEach(a.metadata.labels,function(key,value){if(0==key.length){var str=""+value;labelsArr.push(str)}else{var _str18=value+"="+key;labelsArr.push(_str18)}}),a.metadata.annotations?angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;annotationsArr.push(str)}):annotationsArr.push("No annotation");var ss=[];angular.forEach(a.data,function(value,key){ss.push(key)});var obj={name:a.metadata.name,namespace:a.metadata.namespace,age:a.metadata.creationTimestamp,dataArr:ss.length,label:labelsArr,annotations:annotationsArr,type:a.type};listArr.push(obj)}),listArr}function podpresetRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str19=key+"="+value;obj.labels.push(_str19)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function resourcequotaRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.phase,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str20=key+"="+value;obj.labels.push(_str20)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function ingressRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.phase,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str21=key+"="+value;obj.labels.push(_str21)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),obj.hostArr=[];var hostStr=null;void 0===a.spec.rules[0].host?(hostStr="No hosts",obj.hostArr.push(hostStr)):angular.forEach(a.spec.rules,function(rule){hostStr=rule.host,obj.hostArr.push(hostStr)}),obj.host=obj.hostArr,listArr.push(obj)}),listArr}function persistentvolumeRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.status=a.status.phase,obj.age=a.metadata.creationTimestamp,obj.storage=a.spec.capacity.storage,obj.reclaimpolicy=a.spec.persistentVolumeReclaimPolicy,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str22=key+"="+value;obj.labels.push(_str22)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}function serviceaccountRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj=a,obj.kind=a.kind,obj.name=a.metadata.name,obj.metadata.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,obj.labels=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str23=key+"="+value;obj.labels.push(_str23)}}),listArr.push(obj)}),listArr}function roleRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.creatTime=a.metadata.creationTimestamp,listArr.push(obj)}),listArr}function rolebindingRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.roleref=a.roleRef.name,obj.subjects=a.subjects,obj.kind=a.roleRef.kind,listArr.push(obj)}),listArr}function storageclassRecombined(arr){var listArr=[];return arr.forEach(function(a){var obj={};obj=a,obj.kind=a.kind,obj.name=a.metadata.name,obj.namespace=a.metadata.namespace,obj.age=a.metadata.creationTimestamp,obj.labels=[],obj.annotations=[],a.metadata.labels&&angular.forEach(a.metadata.labels,function(value,key){if(0==value.length){var str=""+key;obj.labels.push(str)}else{var _str24=key+"="+value;obj.labels.push(_str24)}}),a.metadata.annotations&&angular.forEach(a.metadata.annotations,function(value,key){var str=key+"="+value;obj.annotations.push(str)}),listArr.push(obj)}),listArr}var instance={};return instance.serviceRecombined=serviceRecombined,instance.nodeRecombined=nodeRecombined,instance.namespaceRecombined=namespaceRecombined,instance.daemonsetRecombined=daemonsetRecombined,instance.jobRecombined=jobRecombined,instance.podRecombined=podRecombined,instance.replicasetRecombined=replicasetRecombined,instance.replicationcontrollerRecombined=replicationcontrollerRecombined,instance.statefulsetRecombined=statefulsetRecombined,instance.persistentvolumeclaimRecombined=persistentvolumeclaimRecombined,instance.horizontalpodautoscalerRecombined=horizontalpodautoscalerRecombined,instance.configmapRecombined=configmapRecombined,instance.secretRecombined=secretRecombined,instance.podpresetRecombined=podpresetRecombined,instance.resourcequotaRecombined=resourcequotaRecombined,instance.ingressRecombined=ingressRecombined,instance.persistentvolumeRecombined=persistentvolumeRecombined,instance.serviceaccountRecombined=serviceaccountRecombined,instance.roleRecombined=roleRecombined,instance.rolebindingRecombined=rolebindingRecombined,instance.storageclassRecombined=storageclassRecombined,instance.deploymentRecombined=deploymentRecombined,instance.clusterroleRecombined=clusterroleRecombined,instance.clusterrolebindingRecombined=clusterrolebindingRecombined,instance.podsecuritypolicieRecombined=podsecuritypolicieRecombined,instance.networkpolicieRecombined=networkpolicieRecombined,instance}resolveSearchList.$inject=["$stateParams","horUtilsService","horSearchListResource","horNoSearchListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveSearchList=resolveSearchList,exports.ResourceRecombined=ResourceRecombined;var _hormain_state=__webpack_require__(30),_podstatus=__webpack_require__(37),_list_state=__webpack_require__(552),_list_controller=__webpack_require__(554);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{searchList:resolveSearchList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"search/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(4)),_list_stateconfig=__webpack_require__(553),_detail_state=__webpack_require__(79),_namespacedetail_state=__webpack_require__(57),_daemonsetdetail_state=__webpack_require__(96),_detail_state2=__webpack_require__(94),_detail_state3=__webpack_require__(95),_statefulsetdetail_state=__webpack_require__(98),_jobdetail_state=__webpack_require__(97),_pvcdetail_state=__webpack_require__(134),_detail_state4=__webpack_require__(288),_detail_state5=__webpack_require__(99),_detail_state6=__webpack_require__(78),_detail_state7=__webpack_require__(514),_detail_state8=__webpack_require__(538),_detail_state9=__webpack_require__(102),_detail_state10=__webpack_require__(100),_detail_state11=__webpack_require__(73),_detail_state12=__webpack_require__(121),_detail_state13=__webpack_require__(472),_edit_state=__webpack_require__(416),_detail_state14=__webpack_require__(126),_detail_state15=__webpack_require__(101),_detail_state16=__webpack_require__(555),_detail_state17=__webpack_require__(556);exports.ListController=function(){function ListController($state,$stateParams,searchList,NgTableParams,horSearchListResource,horNoSearchListResource,horModifyService,horManagePod,horDaemonsetService,horManageReplicaSet,horManageRCService,horStatefulSetService,horJobService,horPvcManageService,horHpaService,horConfigmapsService,horSecretSerivce,horPodprosetSerivce,horResourcequotaManageService,horManageService,horIngressService,horPersistentVolumeService,horserviceAccountSerivces,horRolebindingSerivces,horStorageclassSerivce,horDeploymentSearchListResource,horDeploymentService,horPodsecuritypolicieService,horNetworkPolicyService,horNamespaceService){var _this=this;_classCallCheck(this,ListController),this._state=$state,this._stateParams=$stateParams,this._horModifyService=horModifyService,this._horDaemonsetService=horDaemonsetService,this._horManageReplicaSet=horManageReplicaSet,this._horManageRCService=horManageRCService,this._horStatefulSetService=horStatefulSetService,this._horJobService=horJobService,this._horPvcManageService=horPvcManageService,this._horHpaService=horHpaService,this._horConfigmapsService=horConfigmapsService,this._horSecretSerivce=horSecretSerivce,this._horPodprosetSerivce=horPodprosetSerivce,this._horResourcequotaManageService=horResourcequotaManageService,this._horManageService=horManageService,this._horIngressService=horIngressService,
this._horPersistentVolumeService=horPersistentVolumeService,this._horserviceAccountSerivces=horserviceAccountSerivces,this._horRolebindingSerivces=horRolebindingSerivces,this._horStorageclassSerivce=horStorageclassSerivce,this._horDeploymentSearchListResource=horDeploymentSearchListResource,this._horManagePod=horManagePod,this._horDeploymentService=horDeploymentService,this._horPodsecuritypolicieService=horPodsecuritypolicieService,this._horNetworkPolicyService=horNetworkPolicyService,this._horNamespaceService=horNamespaceService,this.resourceKind=$stateParams.kind||"pod",this.panels=[{icon:"N",name:"Namespaces",label:"label-Namespace",kind:"namespace"},{icon:"DS",name:"Daemon Sets",label:"label-DaemonSet",kind:"daemonset",namespace:"namespace"},{icon:"RS",name:"Replica Set",label:"label-ReplicaSet",kind:"replicaset",namespace:"namespace"},{icon:"RC",name:"Replication Controller",label:"label-ReplicationController",kind:"replicationcontroller",namespace:"namespace"},{icon:"SS",name:"Stateful Sets",label:"label-StatefulSet",kind:"statefulset",namespace:"namespace"},{icon:"P",name:"Pods",label:"label-Pod",kind:"pod",namespace:"namespace"},{icon:"J",name:"Jobs",label:"label-Job",kind:"job",namespace:"namespace"},{icon:"PVC",name:"Persistent Volume Claims",label:"label-PersistentVolumeClaim",kind:"persistentvolumeclaim",namespace:"namespace"},{icon:"HPA",name:"Horizontal Pod Autoscalers",label:"label-HorizontalPodAutoscaler",kind:"horizontalpodautoscaler",namespace:"namespace"},{icon:"CM",name:"Config Maps",label:"label-ConfigMap",kind:"configmap",namespace:"namespace"},{icon:"S",name:"Secrets",label:"label-Secret",kind:"secret",namespace:"namespace"},{icon:"PP",name:"Pod Presets",label:"label-PodPreset",kind:"podpreset",namespace:"namespace"},{icon:"RQ",name:"Resource Quotas",label:"label-ResourceQuota",kind:"resourcequota",namespace:"namespace"},{icon:"S",name:"Services",label:"label-Service",kind:"service",namespace:"namespace"},{icon:"I",name:"Ingresses",label:"label-Ingress",kind:"ingress",namespace:"namespace"},{icon:"N",name:"Nodes",label:"label-Node",kind:"node"},{icon:"PV",name:"Persistent Volumes",label:"label-PersistentVolume",kind:"persistentvolume"},{icon:"SA",name:"Service Accounts",label:"label-ServiceAccount",kind:"serviceaccount",namespace:"namespace"},{icon:"SC",name:"Storage Classes",label:"label-StorageClass",kind:"storageclass"},{icon:"D",name:"Deployments",label:"label-Deployment",kind:"deployment",namespace:"namespace"},{icon:"PSP",name:"Pod Security Policies",label:"label-PersistentVolume",kind:"podsecuritypolicy"},{icon:"NP",name:"Network Policies",label:"label-NetworkPolies",kind:"networkpolicy",namespace:"namespace"},{icon:"R",name:"Roles",label:"label-Role",kind:"role",namespace:"namespace"},{icon:"CR",name:"Cluster Role",label:"label-Role",kind:"clusterrole"},{icon:"RB",name:"Role Bindings",label:"label-RoleBinding",kind:"rolebinding",namespace:"namespace"},{icon:"CRB",name:"Cluster Role Bindings",label:"label-RoleBinding",kind:"clusterrolebinding"}],angular.forEach(this.panels,function(value,key){value.kind==_this.resourceKind&&(_this.selected=value)}),this.readonly=!1,this.chipsNames=[],this.searchList=searchList,this.namespace=this.panels.namespace,this._horSearchListResource=horSearchListResource,this._horNoSearchListResource=horNoSearchListResource,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.searchList}),this._NgTableParams=NgTableParams,this.listData=this.searchList,this.namespace=$stateParams.namespace}return ListController.$inject=["$state","$stateParams","searchList","NgTableParams","horSearchListResource","horNoSearchListResource","horModifyService","horManagePod","horDaemonsetService","horManageReplicaSet","horManageRCService","horStatefulSetService","horJobService","horPvcManageService","horHpaService","horConfigmapsService","horSecretSerivce","horPodprosetSerivce","horResourcequotaManageService","horManageService","horIngressService","horPersistentVolumeService","horserviceAccountSerivces","horRolebindingSerivces","horStorageclassSerivce","horDeploymentSearchListResource","horDeploymentService","horPodsecuritypolicieService","horNetworkPolicyService","horNamespaceService"],_createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"test",value:function(){var _this2=this,resourceInstance=(0,_list_stateconfig.ResourceRecombined)(),kind=this.selected.kind;if(this.selected.namespace&&"deployment"!=this.selected.kind){var obj={namespace:this._stateParams.namespace,kind:this.selected.kind,label:this.chipsNames};return this._horSearchListResource.get(obj).$promise.then(function(data){var newData=null;"service"==kind&&(newData=resourceInstance.serviceRecombined(data.items)),"job"==kind&&(newData=resourceInstance.jobRecombined(data.items)),"pod"==kind&&(newData=resourceInstance.podRecombined(data.items)),"daemonset"==kind&&(newData=resourceInstance.daemonsetRecombined(data.items)),"replicaset"==kind&&(newData=resourceInstance.replicasetRecombined(data.items)),"replicationcontroller"==kind&&(newData=resourceInstance.replicationcontrollerRecombined(data.items)),"statefulset"==kind&&(newData=resourceInstance.statefulsetRecombined(data.items)),"horizontalpodautoscaler"==kind&&(newData=resourceInstance.horizontalpodautoscalerRecombined(data.items)),"configmap"==kind&&(newData=resourceInstance.configmapRecombined(data.items)),"secret"==kind&&(newData=resourceInstance.secretRecombined(data.items)),"podpreset"==kind&&(newData=resourceInstance.podpresetRecombined(data.items)),"resourcequota"==kind&&(newData=resourceInstance.resourcequotaRecombined(data.items)),"ingress"==kind&&(newData=resourceInstance.ingressRecombined(data.items)),"persistentvolumeclaim"==kind&&(newData=resourceInstance.persistentvolumeclaimRecombined(data.items)),"serviceaccount"==kind&&(newData=resourceInstance.serviceaccountRecombined(data.items)),"rolebinding"==kind&&(newData=resourceInstance.rolebindingRecombined(data.items)),"role"==kind&&(newData=resourceInstance.roleRecombined(data.items)),"networkpolicy"==kind&&(newData=resourceInstance.networkpolicieRecombined(data.items)),_this2.tableParams=new _this2._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData}),_this2.listData=newData;var term=_this2.globalSearchTerm;_this2.tableParams.filter({name:term})})}if(this.selected.namespace&&"deployment"==this.selected.kind){var _obj={namespace:this._stateParams.namespace,label:this.chipsNames};return this._horDeploymentSearchListResource.get(_obj).$promise.then(function(data){var newData=null;newData=resourceInstance.deploymentRecombined(data.items),_this2.tableParams=new _this2._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData}),_this2.listData=newData;var term=_this2.globalSearchTerm;_this2.tableParams.filter({name:term})})}var _obj2={kind:this.selected.kind,label:this.chipsNames},newData=null;return this._horNoSearchListResource.get(_obj2).$promise.then(function(data){"node"==kind&&(newData=resourceInstance.nodeRecombined(data.items)),"namespace"==kind&&(newData=resourceInstance.namespaceRecombined(data.items)),"persistentvolume"==kind&&(newData=resourceInstance.persistentvolumeRecombined(data.items)),"storageclass"==kind&&(newData=resourceInstance.storageclassRecombined(data.items)),"clusterrole"==kind&&(newData=resourceInstance.clusterroleRecombined(data.items)),"clusterrolebinding"==kind&&(newData=resourceInstance.clusterrolebindingRecombined(data.items)),"podsecuritypolicy"==kind&&(newData=resourceInstance.podsecuritypolicieRecombined(data.items)),_this2.tableParams=new _this2._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData});var term=_this2.globalSearchTerm;_this2.tableParams.filter({name:term}),_this2.listData=newData})}},{key:"change",value:function(){var _this3=this,resourceInstance=(0,_list_stateconfig.ResourceRecombined)(),kind=this.selected.kind,labelValue=void 0;if(0==this.chipsNames.length?labelValue=null:this.chipsNames.length>0&&(labelValue=this.chipsNames),this.selected.namespace&&"deployment"!=this.selected.kind){var obj={namespace:this._stateParams.namespace,kind:this.selected.kind,label:labelValue};return this._horSearchListResource.get(obj).$promise.then(function(data){var newData=null;"service"==kind&&(newData=resourceInstance.serviceRecombined(data.items)),"job"==kind&&(newData=resourceInstance.jobRecombined(data.items)),"pod"==kind&&(newData=resourceInstance.podRecombined(data.items)),"daemonset"==kind&&(newData=resourceInstance.daemonsetRecombined(data.items)),"replicaset"==kind&&(newData=resourceInstance.replicasetRecombined(data.items)),"replicationcontroller"==kind&&(newData=resourceInstance.replicationcontrollerRecombined(data.items)),"statefulset"==kind&&(newData=resourceInstance.statefulsetRecombined(data.items)),"horizontalpodautoscaler"==kind&&(newData=resourceInstance.horizontalpodautoscalerRecombined(data.items)),"configmap"==kind&&(newData=resourceInstance.configmapRecombined(data.items)),"secret"==kind&&(newData=resourceInstance.secretRecombined(data.items)),"podpreset"==kind&&(newData=resourceInstance.podpresetRecombined(data.items)),"resourcequota"==kind&&(newData=resourceInstance.resourcequotaRecombined(data.items)),"ingress"==kind&&(newData=resourceInstance.ingressRecombined(data.items)),"persistentvolumeclaim"==kind&&(newData=resourceInstance.persistentvolumeclaimRecombined(data.items)),"serviceaccount"==kind&&(newData=resourceInstance.serviceaccountRecombined(data.items)),"rolebinding"==kind&&(newData=resourceInstance.rolebindingRecombined(data.items)),"role"==kind&&(newData=resourceInstance.roleRecombined(data.items)),"networkpolicy"==kind&&(newData=resourceInstance.networkpolicieRecombined(data.items)),_this3.tableParams=new _this3._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData}),_this3.listData=newData;var term=_this3.globalSearchTerm;_this3.tableParams.filter({name:term})})}if(this.selected.namespace&&"deployment"==this.selected.kind){var _obj3={namespace:this._stateParams.namespace,label:labelValue};return this._horDeploymentSearchListResource.get(_obj3).$promise.then(function(data){var newData=null;newData=resourceInstance.deploymentRecombined(data.items),_this3.tableParams=new _this3._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData}),_this3.listData=newData;var term=_this3.globalSearchTerm;_this3.tableParams.filter({name:term})})}var _obj4={kind:this.selected.kind,label:labelValue},newData=null;return this._horNoSearchListResource.get(_obj4).$promise.then(function(data){"node"==kind&&(newData=resourceInstance.nodeRecombined(data.items)),"namespace"==kind&&(newData=resourceInstance.namespaceRecombined(data.items)),"persistentvolume"==kind&&(newData=resourceInstance.persistentvolumeRecombined(data.items)),"storageclass"==kind&&(newData=resourceInstance.storageclassRecombined(data.items)),"clusterrole"==kind&&(newData=resourceInstance.clusterroleRecombined(data.items)),"clusterrolebinding"==kind&&(newData=resourceInstance.clusterrolebindingRecombined(data.items)),"podsecuritypolicy"==kind&&(newData=resourceInstance.podsecuritypolicieRecombined(data.items)),_this3.tableParams=new _this3._NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:newData});var term=_this3.globalSearchTerm;_this3.tableParams.filter({name:term}),_this3.listData=newData})}},{key:"getNamespaceHref",value:function(objName){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,objName))}},{key:"getDetailHref",value:function(namespace,objName){var kind=this.selected.kind;if(this.selected.namespace){if("service"==kind)return this._state.href(_detail_state9.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("job"==kind)return this._state.href(_jobdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("pod"==kind)return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("daemonset"==kind)return this._state.href(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("replicaset"==kind)return this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("replicationcontroller"==kind)return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("statefulset"==kind)return this._state.href(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("horizontalpodautoscaler"==kind)return this._state.href(_detail_state4.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("configmap"==kind)return this._state.href(_detail_state5.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("secret"==kind)return this._state.href(_detail_state6.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("podpreset"==kind)return this._state.href(_detail_state7.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("resourcequota"==kind)return this._state.href(_detail_state8.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("ingress"==kind)return this._state.href(_detail_state10.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("persistentvolumeclaim"==kind)return this._state.href(_pvcdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("serviceaccount"==kind)return this._state.href(_detail_state13.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("rolebinding"==kind)return this._state.href(_edit_state.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("role"==kind)return this._state.href(roleDetailStateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("deployment"==kind)return this._state.href(_detail_state15.stateName,new _utils.UpdageStateParams(namespace,objName,"list"));if("networkpolicy"==kind)return this._state.href(_detail_state17.stateName,new _utils.UpdageStateParams(namespace,objName,"list"))}else{if("node"==kind)return this._state.href(_detail_state11.stateName,new _utils.UpdageStateParams(this.namespace,objName,"list"));if("namespace"==kind)return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,objName));if("persistentvolume"==kind)return this._state.href(_detail_state12.stateName,new _utils.NewUpdageStateParams(objName,"list"));if("storageclass"==kind)return this._state.href(_detail_state14.stateName,new _utils.NewUpdageStateParams(objName,"list"));if("podsecuritypolicy"==kind)return this._state.href(_detail_state16.stateName,new _utils.NewUpdageStateParams(objName,"list"))}}},{key:"deletePod",value:function(event,item){return this._horManagePod.showDeleteDialog(event,item)}},{key:"deleteDaemonset",value:function(event,item){return this._horDaemonsetService.showDeleteDialog(event,item)}},{key:"deleteReplicaSet",value:function(event,item){return this._horManageReplicaSet.showDeleteDialog(event,item)}},{key:"deleteReplicontroller",value:function(event,item){return this._horManageRCService.showDeleteDialog(event,item)}},{key:"deleteStatefulset",value:function(event,item){return this._horStatefulSetService.showDeleteDialog(event,item)}},{key:"deleteJob",value:function(event,item){return this._horJobService.showDeleteDialog(event,item)}},{key:"deletePvcService",value:function(event,item){return this._horPvcManageService.showDeleteDialog(event,item)}},{key:"deleteHpaService",value:function(event,item){return this._horHpaService.showDeleteDialog(event,item)}},{key:"deleteconfigmapService",value:function(event,item){return this._horConfigmapsService.showDeleteDialog(event,item)}},{key:"deleteService",value:function(event,item){return this._horSecretSerivce.showDeleteDialog(event,item)}},{key:"deletePodpreset",value:function(event,item){return this._horPodprosetSerivce.showDeleteDialog(event,item)}},{key:"deleteRqService",value:function(event,item){return this._horResourcequotaManageService.showDeleteDialog(event,item)}},{key:"deleteServiceService",value:function(event,item){return this._horManageService.showDeleteDialog(event,item)}},{key:"deleteIngressService",value:function(event,item){return this._horIngressService.showDeleteDialog(event,item)}},{key:"deletePvService",value:function(event,item){return this._horPersistentVolumeService.showDeleteDialog(event,item)}},{key:"deleteServiceAccount",value:function(event,item){return this._horserviceAccountSerivces.showDeleteDialog(event,item)}},{key:"deleteClusterRoleBinding",value:function(event,item){return item.subjects?this._horRolebindingSerivces.showClusterRoleBindingDeleteDialog(event,item):this._horRolebindingSerivces.showClusterRoleBindingDeleteDialogs(event,item)}},{key:"deleteSC",value:function(event,item){return this._horStorageclassSerivce.showDeleteDialog(event,item)}},{key:"deleteDeploymentService",value:function(event,item){return this._horDeploymentService.showDeleteDialog(event,item)}},{key:"deletePspService",value:function(event,item){return this._horPodsecuritypolicieService.showDeleteDialog(event,item)}},{key:"deletenetworkService",value:function(event,item){return this._horNetworkPolicyService.showDeleteDialog(event,item)}},{key:"deleteNamespaceService",value:function(event,item){return this._horNamespaceService.showDeleteDialog(event,item)}},{key:"updatePod",value:function(event,item){var kind=this.selected.kind;if(this.selected.namespace){if("service"==kind)return this._state.go(_detail_state9.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("job"==kind)return this._state.go(_jobdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("pod"==kind)return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("daemonset"==kind)return this._state.go(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("replicaset"==kind)return this._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("replicationcontroller"==kind)return this._state.go(_detail_state3.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("statefulset"==kind)return this._state.go(_statefulsetdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("horizontalpodautoscaler"==kind)return this._state.go(_detail_state4.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("configmap"==kind)return this._state.go(_detail_state5.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("secret"==kind)return this._state.go(_detail_state6.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"json"));if("podpreset"==kind)return this._state.go(_detail_state7.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("resourcequota"==kind)return this._state.go(_detail_state8.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("ingress"==kind)return this._state.go(_detail_state10.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"json"));if("persistentvolumeclaim"==kind)return this._state.go(_pvcdetail_state.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("serviceaccount"==kind)return this._state.go(_detail_state13.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("rolebinding"==kind)return this._state.href(_edit_state.stateName,new _utils.UpdageStateParams(namespace,objName,"kind"));if("role"==kind)return this._state.href(roleDetailStateName,new _utils.UpdageStateParams(namespace,objName,"yaml"));if("deployment"==kind)return this._state.go(_detail_state15.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"));if("networkpolicy"==kind)return this._state.go(_detail_state17.stateName,new _utils.UpdageStateParams(item.namespace,item.name,"yaml"))}else{if("node"==kind){var self=this;return this._state.go(_detail_state11.stateName,new _utils.UpdageStateParams(self.namespace,item.name,"yaml"))}if("namespace"==kind)return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,objName));if("persistentvolume"==kind)return this._state.go(_detail_state12.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"));if("storageclass"==kind)return this._state.go(_detail_state14.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"));if("podsecuritypolicy"==kind)return this._state.go(_detail_state16.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"))}}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"showModifyResourceObjectPodSelector",value:function(event,namespace,resourceObjType,resourceObjName,resourcePodSelector){var objPodSelector=angular.copy(resourcePodSelector);this._horModifyService.showModifyResourceObjectPodSelector(namespace,resourceObjType,resourceObjName,objPodSelector)}},{key:"showModifyResourceObjectCount",value:function(event,namespace,resourceObjType,resourceObjName,resourceCount){this._horModifyService.showModifyResourceObjectCount(namespace,resourceObjType,resourceObjName,resourceCount)}},{key:"nodeDetail",value:function(event,item){return this._state.go(_detail_state11.stateName,new _utils.UpdageStateParams(item.namespace,item.node,"list"))}},{key:"getPodlHref",value:function(namespace,objName){var kind=this.selected.kind;return"daemonset"==kind?this._state.href(_daemonsetdetail_state.stateName,new _utils.UpdageStateParams(namespace,objName,"pod")):"replicaset"==kind?this._state.href(_detail_state2.stateName,new _utils.UpdageStateParams(namespace,objName,"pod")):"replicationcontroller"==kind?this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"pod")):void 0}}]),ListController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="podsecuritypoliciedetail",exports.stateUrl="/podsecuritypolicie"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="networkpolicydetail",exports.stateUrl="/networkpolicy"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _hormain_state=(__webpack_require__(552),__webpack_require__(30));exports.config={url:"/deployment",parent:_hormain_state.stateSearchName,views:{"":{controllerAs:"$ctrl",templateUrl:"deployment/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function searchListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/:kind/namespace/:namespace/search?labelSelector=:label")}function noSearchListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/:kind/search?labelSelector=:label")}function deploymentSearchListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/:namespace/deployments/search?labelSelector=:label")}searchListResource.$inject=["$resource"],noSearchListResource.$inject=["$resource"],deploymentSearchListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchListResource=searchListResource,exports.noSearchListResource=noSearchListResource,exports.deploymentSearchListResource=deploymentSearchListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _networkpolicy_stateconfig=__webpack_require__(560),_networkpolicy_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_networkpolicy_stateconfig),_list_service=__webpack_require__(569),_detail_service=__webpack_require__(570),_networkpolicy_service=__webpack_require__(571);exports.default=angular.module("horApp.networkpolicy",["ngMaterial","ngResource","ui.router"]).config(_networkpolicy_stateconfig2.default).factory("horNetworkPolicyListResource",_list_service.networkPolicyListResource).factory("horNetworkPolicyDetailResource",_detail_service.networkPolicyLDetailResource).service("horNetworkPolicyService",_networkpolicy_service.networkPolicyService).factory("horNetworkPolicyYmlArr",_detail_service.networkPolicyYmlArr).factory("horNetworkPolicyDetailYml",_detail_service.networkPolicyDetailYml)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("networkpolicy.new",_new_stateconfig.config).state("networkpolicy.template",_create_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(66),_detail_state=__webpack_require__(556),_list_stateconfig=__webpack_require__(561),_detail_stateconfig=__webpack_require__(563),_new_stateconfig=__webpack_require__(565),_create_stateconfig=__webpack_require__(567)},function(module,exports,__webpack_require__){"use strict";function resolveNetworkPolicyList($stateParams,horNetworkPolicyListResource){var obj={objectNamespace:$stateParams.namespace};return horNetworkPolicyListResource.get(obj).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNetworkPolicyList=resolveNetworkPolicyList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(562),_list_state=__webpack_require__(66);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{networkPolicyList:resolveNetworkPolicyList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"networkpolicy/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=__webpack_require__(556),_utils=(__webpack_require__(57),__webpack_require__(4));exports.ListController=function(){function ListController($state,networkPolicyList,NgTableParams,horModifyService,$stateParams,horNetworkPolicyService){_classCallCheck(this,ListController),this._state=$state,this._horModifyService=horModifyService,this._horNetworkPolicyService=horNetworkPolicyService,this._horNetworkPolicyService=horNetworkPolicyService,this._stateParams=this._state.params,this.namespace=$stateParams.namespace,this.networkPolicyList=networkPolicyList.items,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.networkPolicyList}),angular.forEach(networkPolicyList.items,function(item){if(item.metadata.labels){var labelsArr=[];angular.forEach(item.metadata.labels,function(value,key){if(0==value.length){var str=""+key;labelsArr.push(str),item.labels=labelsArr}else{var _str=key+"="+value;labelsArr.push(_str),item.labels=labelsArr}})}else item.labels=[]}),angular.forEach(networkPolicyList.items,function(item){var arrAnnotations=[];item.metadata.annotations&&angular.forEach(item.metadata.annotations,function(value,key){var str=key+"="+value;arrAnnotations.push(str)}),item.arrAnnotations=arrAnnotations})}return _createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({"metadata.name":term})}},{key:"getDetailHref",value:function(objNamespace,objName){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}},{key:"getNamespaceHref",value:function(objns,ns){return this._state.href("namespacedetail",new _utils.StateParams(ns,objns))}},{key:"deleteNetworkPolicy",value:function(event,item){return this._horNetworkPolicyService.showDeleteDialog(event,item)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.UpdageStateParams(item.metadata.namespace,item.metadata.name,"yaml"))}},{key:"deleteService",value:function(event,item){return this._horNetworkPolicyService.showDeleteDialog(event,item)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveNetworkPolicyDetail($stateParams,horNetworkPolicyDetailResource){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horNetworkPolicyDetailResource.get(obj).$promise}function resolveNetworkPolicyYml(horNetworkPolicyDetailYml,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horNetworkPolicyDetailYml.get(obj).$promise}resolveNetworkPolicyYml.$inject=["horNetworkPolicyDetailYml","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveNetworkPolicyDetail=resolveNetworkPolicyDetail,exports.resolveNetworkPolicyYml=resolveNetworkPolicyYml;var _hormain_state=__webpack_require__(30),_detail_controller=__webpack_require__(564),_detail_state=__webpack_require__(556),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{networkPolicyDetail:resolveNetworkPolicyDetail,networkpolicyYml:resolveNetworkPolicyYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"networkpolicy/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}
return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_namespacedetail_state=__webpack_require__(57);exports.DetailController=function(){function DetailController($state,networkPolicyDetail,networkpolicyYml,horNetworkPolicyYmlArr,horNetworkPolicyDetailYml,$mdToast,$stateParams,horNetworkPolicyService,horModifyService,$translate){var _this=this;_classCallCheck(this,DetailController),this._state=$state,this._horNetworkPolicyDetailYml=horNetworkPolicyDetailYml,this._horNetworkPolicyYmlArr=horNetworkPolicyYmlArr,this._mdToast=$mdToast,this._stateParams=$stateParams,this._horNetworkPolicyService=horNetworkPolicyService,this._horModifyService=horModifyService,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:(this.currentTab,this.selectedIndex=0),this._translate=$translate,this.networkPolicyDetailObject={},this.networkPolicyDetailObject.name=networkPolicyDetail.metadata.name,this.networkPolicyDetailObject.namespace=networkPolicyDetail.metadata.namespace,this.networkPolicyDetailObject.creationTimestamp=networkPolicyDetail.metadata.creationTimestamp,this.networkPolicyDetailObject.labelsArr=[],this.networkPolicyDetailObject.annotationsArr=[],this.networkPolicyDetailObject.matchLabelsArr=[],networkPolicyDetail.metadata.labels&&angular.forEach(networkPolicyDetail.metadata.labels,function(value,key){var str="";str=0==value.length?""+key:key+"="+value,_this.networkPolicyDetailObject.labelsArr.push(str)}),networkPolicyDetail.metadata.annotations&&angular.forEach(networkPolicyDetail.metadata.annotations,function(value,key){_this.networkPolicyDetailObject.annotationsArr.push(key+"="+value)}),networkPolicyDetail.spec.podSelector.matchLabels&&angular.forEach(networkPolicyDetail.spec.podSelector.matchLabels,function(value,key){_this.networkPolicyDetailObject.matchLabelsArr.push(key+"="+value)}),networkPolicyDetail.spec.ingress&&angular.forEach(networkPolicyDetail.spec.ingress,function(item){if("from"==Object.keys(item)[0]){var matchLabelArray=[];angular.forEach(item.from,function(data){var newKeys=Object.keys(data)[0],newLabel=data[newKeys].matchLabels;if(console.log(newLabel),newLabel){Object.keys(newLabel)[0],newLabel[Object.keys(newLabel)[0]]}else;var arrNewLabels=[];angular.forEach(newLabel,function(value,key){var str=key+"="+value;arrNewLabels.push(str)});var obj={newkey:newKeys,newvalue:arrNewLabels};matchLabelArray.push(obj)}),_this.matchLabel=matchLabelArray}}),networkPolicyDetail.spec.ingress&&angular.forEach(networkPolicyDetail.spec.ingress,function(item){if("ports"==Object.keys(item)[0]){var arrPorts=[];angular.forEach(item.ports,function(data){var str=data.protocol+"/"+data.port;arrPorts.push(str)}),_this.arrPorts=arrPorts}}),this.networkPolicyDetail=networkPolicyDetail,console.log(networkPolicyDetail),this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(networkpolicyYml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson))}return _createClass(DetailController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"saveChange",value:function(){var _this2=this,aceName=this.networkPolicyDetail.metadata.name,aceNamespace=this.networkPolicyDetail.metadata.namespace,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horNetworkPolicyYmlArr.changeYaml(aceName,aceNamespace,newModel).then(function(data){200==data.status&&(_this2._mdToast.show(_this2._mdToast.simple().textContent(_this2._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this2._stateParams.lastPage?_this2._state.go(".",{},{reload:!0}):_this2._state.go(".",new _utils.UpdageStateParams(aceNamespace,aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this3=this,obj={namespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName};this._horNetworkPolicyDetailYml.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this3.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"showUpdatePage",value:function(){this.selectedIndex=1}},{key:"deleteService",value:function(event,item){return this._horNetworkPolicyService.showDeleteDialog(event,item)}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _hormain_state=__webpack_require__(30),_new_controller=__webpack_require__(566),_list_state=__webpack_require__(66);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"networkpolicy/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(556);exports.NewController=function(){function NewController($q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,horNetworkPolicyService,$translate){_classCallCheck(this,NewController),this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._horNetworkPolicyService=horNetworkPolicyService,this._mdDialog=$mdDialog,this._mdToast=$mdToast,this._errorDialog=errorDialog,this._translate=$translate;var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: example\n  namespace: "+namespaceString+"\nspec:\n  podSelector:\n    matchLabels:\n      role: db\n  ingress:\n    - from:\n        - namespaceSelector:\n            matchLabels:\n              project: myproject\n        - podSelector:\n            matchLabels:\n              role: somerole\n      ports:\n        - protocol: TCP\n          port: 6379",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.yamlImg=!1}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,resourceYaml={name:"np.yaml",content:this.aceModel,validate:!0};return 0==this.aceModel.length?void this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/deployresource").save(resourceYaml,function(res){if(res.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var objNamespace="all"===res.ResourceObject.namespace?"default":res.ResourceObject.namespace,objName=res.ResourceObject.name;console.log(objNamespace),_this._state.go(_detail_state.stateName,new _utils.StateParams(objNamespace,objName))}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}},{key:"toggle",value:function(){this.yamlImg=!this.yamlImg,console.log(this.yamlImg)}},{key:"denyothernamespaces",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: deny-other-namespaces\n  namespace: "+namespaceString+"\nspec:\n  podSelector: null\n  ingress:\n    - from:\n        - podSelector: {}"}},{key:"dborapiallowapp",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: db-or-api-allow-app\n  namespace: "+namespaceString+"\nspec:\n  podSelector:\n    matchLabels:\n      role: db\n  ingress:\n    - from:\n        - podSelector:\n            matchLabels:\n              app: mail"}},{key:"apiallowhttpandhttps",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: api-allow-http-and-https\n  namespace: "+namespaceString+"\nspec:\n  podSelector:\n    matchLabels:\n      app: api\n  ingress:\n    - from:\n        - podSelector:\n            matchLabels:\n              role: monitoring\n    - ports:\n        - protocol: TCP\n          port: 80\n        - protocol: TCP\n          port: 443"}},{key:"defaultdenyall",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: default-deny-all\n  namespace: "+namespaceString+"\nspec:\n  podSelector: null"}},{key:"weballowexternal",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: web-allow-external\n  namespace: "+namespaceString+"\nspec:\n  podSelector:\n    matchLabels:\n      app: web\n  ingress:\n    - {}\n"}},{key:"webdballowallns",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: web-db-allow-all-ns\n  namespace: "+namespaceString+"\nspec:\n  podSelector:\n    matchLabels:\n      role: web-db\n  ingress:\n    - from:\n        - namespaceSelector: {}"}},{key:"weballowproduction",value:function(){var namespaceString="all"===this._stateParams.namespace?"default":this._stateParams.namespace;this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: access-nginx\n  namespace: "+namespaceString+'\nspec:\n  podSelector:\n    matchLabels:\n      run: nginx\n  ingress:\n  - from:\n    - podSelector:\n        matchLabels:\n          access: "true"'}},{key:"createResource",value:function(){var _this2=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.indexOf("namespace:")).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horNetworkPolicyService.createResource().save(deploymentSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this2._errorDialog.open(_this2._translate.instant("System prompt information"),_this2._translate.instant("Create failure"));_this2._state.go(_detail_state.stateName,new _utils.UpdageStateParams(response.ResourceObject.namespace,response.ResourceObject.name,"list"))})}}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _hormain_state=__webpack_require__(30),_create_controller=__webpack_require__(568),_list_state=__webpack_require__(66);exports.config={url:_list_state.stateUrl+"/template/:name/:namespace/",parent:_hormain_state.stateName,views:{"":{params:{name:null,namespace:null},controller:_create_controller.CreateController,controllerAs:"$ctrl",templateUrl:"networkpolicy/create/create.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(556);exports.CreateController=function(){function CreateController($q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,$resource,horServiceDetailResource,$translate){_classCallCheck(this,CreateController),this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._resource=$resource,this.serviceNamespace=this._stateParams.namespace,this.serviceName=this._stateParams.name,this._translate=$translate;"all"===this._stateParams.namespace||this._stateParams.namespace;this._horServiceDetailResource=horServiceDetailResource,this.networkpolicyNamespace="default",this.matchLabels="app: api",this.port="80"}return _createClass(CreateController,[{key:"$onInit",value:function(){var _this=this,obj={namespace:this.serviceNamespace,objectName:this.serviceName};this._horServiceDetailResource.get(obj).$promise.then(function(data){var serviceDetail=data.Service;serviceDetail&&(serviceDetail.metadata.namespace&&(_this.networkpolicyNamespace=serviceDetail.metadata.namespace),serviceDetail.spec.selector&&angular.forEach(serviceDetail.spec.selector,function(value,key){_this.matchLabels=key+": "+value}),serviceDetail.spec.ports&&(_this.port=serviceDetail.spec.ports[0].port)),_this.aceModel="apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: example\n  namespace: "+_this.networkpolicyNamespace+"\nspec:\n  podSelector:\n    matchLabels:\n      "+_this.matchLabels+"\n  ingress:\n    - from:\n        - ipBlock:\n            cidr: 0.0.0.0/0\n      ports:\n        - port: "+_this.port+"\n  policyTypes:\n    - Ingress",_this.objName="",_this.objNamespace="",_this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}})}},{key:"createResource",value:function(){var _this2=this,resourceYaml={name:"np.yaml",content:this.aceModel,validate:!0};return 0==this.aceModel.length?void this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/deployresource").save(resourceYaml,function(res){if(res.Error.length>0)return void _this2._errorDialog.open(_this2._translate.instant("System prompt information"),_this2._translate.instant("Create failure"));try{var objNamespace="all"===res.ResourceObject.namespace?"default":res.ResourceObject.namespace,objName=res.ResourceObject.name;_this2._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))}catch(err){_this2._errorDialog.open(_this2._translate.instant("Error"),err)}})}}]),CreateController}()},function(module,exports,__webpack_require__){"use strict";function networkPolicyListResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/:objectNamespace/networkpolicies")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.networkPolicyListResource=networkPolicyListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function networkPolicyLDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/:namespace/networkpolicies/:objectName")}function networkPolicyDetailYml($resource){return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/networkpolicy/namespace/:namespace/name/:objectName")}function networkPolicyYmlArr($http){function changeYaml(name,namespace,data){var url=_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/networkpolicy/namespace/"+namespace+"/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}networkPolicyDetailYml.$inject=["$resource"],networkPolicyYmlArr.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.networkPolicyLDetailResource=networkPolicyLDetailResource,exports.networkPolicyDetailYml=networkPolicyDetailYml,exports.networkPolicyYmlArr=networkPolicyYmlArr;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.networkPolicyService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.networkPolicyService=function(){function networkPolicyService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,networkPolicyService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(networkPolicyService,[{key:"getUrl",value:function(obj){var ns=obj.metadata.namespace,networkpolicy=obj.metadata.name;return _constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/_raw/networkpolicies/namespace/"+ns+"/name/"+networkpolicy}},{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+item.metadata.namespace+"/networkpolicies/"+item.metadata.name,confirm=this._dialog.confirm().title(this._translate.instant("Delete NetworkPolicy")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.metadata.name+"?").targetEvent(event).ok(this._translate.instant("Delete NetworkPolicy")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(data){console.log("click",data,status),self._state.go("networkpolicy",{},{reload:!0})},function(){})}}]),networkPolicyService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(573),_podsecuritypolicie_service=__webpack_require__(574),_detail_service=__webpack_require__(575),_podsecuritypolicie_stateconfig=__webpack_require__(577),_podsecuritypolicie_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_podsecuritypolicie_stateconfig);exports.default=angular.module("horApp.podsecuritypolicie",["ngMaterial","ngResource","ui.router"]).config(_podsecuritypolicie_stateconfig2.default).service("horPodsecuritypolicieService",_podsecuritypolicie_service.podsecuritypolicieService).factory("horPodsecuritypolicieResource",_list_service.podsecuritypolicieResource).factory("horPodsecuritypolicieDetailResource",_detail_service.podsecuritypolicieDetailResource).factory("horGetPSPYmlResource",_detail_service.getPSPYml).factory("horPSPDetailYml",_detail_service.pspDetailYml)},function(module,exports,__webpack_require__){"use strict";function podsecuritypolicieResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/podsecuritypolicies")}podsecuritypolicieResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podsecuritypolicieResource=podsecuritypolicieResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.podsecuritypolicieService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.podsecuritypolicieService=function(){function podsecuritypolicieService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,podsecuritypolicieService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(podsecuritypolicieService,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"createYmlResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/podsecuritypolicies",{},{save:{method:"POST"}})}},{key:"editYmlResource",value:function(pspName){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/podsecuritypolicies/"+pspName,{},{save:{method:"PUT"}})}},{key:"getUrl",value:function(obj){var objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/podsecuritypolicies/"+objName}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Pod Security Policy")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Pod Security Policy")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("podsecuritypolicie",{},{reload:!0})},function(){})}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,deploymentData){this.deploymentData=deploymentData.data,this.obj={data:this.deploymentData,options:{mode:"tree",name:"PersistentVolume"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"persistentvolume/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{deploymentData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(){})}}]),podsecuritypolicieService}()},function(module,exports,__webpack_require__){"use strict";function podsecuritypolicieDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/podsecuritypolicies/:objectName")}function getPSPYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/podsecuritypolicy/name/:objectName")}function pspDetailYml($http){function changeYaml(name,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/podsecuritypolicy/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}podsecuritypolicieDetailResource.$inject=["$resource"],getPSPYml.$inject=["$resource"],pspDetailYml.$inject=["$http"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.podsecuritypolicieDetailResource=podsecuritypolicieDetailResource,exports.getPSPYml=getPSPYml,exports.pspDetailYml=pspDetailYml;var _constant=__webpack_require__(11);__webpack_require__(576)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="podsecuritypolicie",exports.stateUrl="/podsecuritypolicie"},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("podsecuritypolicie.new",_new_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(576),_detail_state=__webpack_require__(555),_list_stateconfig=__webpack_require__(578),_detail_stateconfig=__webpack_require__(580),_new_stateconfig=__webpack_require__(582)},function(module,exports,__webpack_require__){"use strict";function resolvepodsecuritypolicie(horPodsecuritypolicieResource,horUtilsService){return horPodsecuritypolicieResource.get().$promise.then(function(psplistList){return horUtilsService.recombinepodsecuritypolicieList(psplistList)})}resolvepodsecuritypolicie.$inject=["horPodsecuritypolicieResource","horUtilsService"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvepodsecuritypolicie=resolvepodsecuritypolicie;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(579),_list_state=__webpack_require__(576);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{pspList:resolvepodsecuritypolicie},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"podsecuritypolicie/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=(__webpack_require__(11),__webpack_require__(555)),_utils=(__webpack_require__(576),__webpack_require__(4)),_namespacedetail_state=__webpack_require__(57);exports.ListController=function(){function ListController(pspList,$stateParams,$http,$state,$mdDialog,horPodsecuritypolicieService,$scope,NgTableParams,horModifyService){_classCallCheck(this,ListController),this._horModifyService=horModifyService,this.pspList=pspList,this.tableParams=null,this.pspList&&(this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.pspList})),this.namespace=$stateParams.namespace,this._http=$http,this._state=$state,this._dialog=$mdDialog,this._horPodsecuritypolicieService=horPodsecuritypolicieService}return ListController.$inject=["pspList","$stateParams","$http","$state","$mdDialog","horPodsecuritypolicieService","$scope","NgTableParams","horModifyService"],_createClass(ListController,[{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"getDetailHref",value:function(objName){return this._state.href(_detail_state.stateName,new _utils.NewUpdageStateParams(objName,"list"))}},{key:"deleteService",value:function(event,item){return this._horPodsecuritypolicieService.showDeleteDialog(event,item)}},{key:"updateService",value:function(event,item){return this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(item.name,"yaml"))}},{key:"showNothingState",value:function(){return 0===this.tableParams.count()}},{key:"getNamespaceHref",value:function(objName,namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}},{key:"showModifyResourceObjectLabels",value:function(event,namespace,resourceObjType,resourceObjName,resourceObjLabels){var objLabels=angular.copy(resourceObjLabels);this._horModifyService.showModifyResourceObjectLabelsDialog(namespace,resourceObjType,resourceObjName,objLabels)}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolvePodsecuritypolicieDetail(horPodsecuritypolicieDetailResource,$stateParams){var obj={objectName:$stateParams.objectName};return horPodsecuritypolicieDetailResource.get(obj).$promise}function resolvePSPYml(horGetPSPYmlResource,$stateParams){var obj={objectName:$stateParams.objectName};return horGetPSPYmlResource.get(obj).$promise}resolvePodsecuritypolicieDetail.$inject=["horPodsecuritypolicieDetailResource","$stateParams"],resolvePSPYml.$inject=["horGetPSPYmlResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePodsecuritypolicieDetail=resolvePodsecuritypolicieDetail,exports.resolvePSPYml=resolvePSPYml;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_controller=__webpack_require__(581),_detail_state=__webpack_require__(555);exports.config={url:(0,_utils.newappendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{podsecuritypolicieDetail:resolvePodsecuritypolicieDetail,pspyml:resolvePSPYml},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",
templateUrl:"podsecuritypolicie/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=(__webpack_require__(11),__webpack_require__(576),__webpack_require__(4)),_detail_state=__webpack_require__(555);exports.DetailController=function(){function DetailController(podsecuritypolicieDetail,pspyml,$mdDialog,$http,$state,$scope,$resource,$mdToast,$stateParams,horPodsecuritypolicieService,horGetPSPYmlResource,horPSPDetailYml,$q,$translate,errorDialog){_classCallCheck(this,DetailController),this._translate=$translate,this._errorDialog=errorDialog,this._q=$q,this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._mdToast=$mdToast,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this._horPodsecuritypolicieService=horPodsecuritypolicieService,this._horGetPSPYmlResource=horGetPSPYmlResource,this._horPSPDetailYml=horPSPDetailYml,this.radioValue="configuration",this.selectedIndex=-1,"yaml"===this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this._translate=$translate,this.data=podsecuritypolicieDetail,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"};var tempJson=JSON.stringify(pspyml,null,2);this.aceModel=jsyaml.safeDump(JSON.parse(tempJson)),this.pspName=pspyml.metadata.name,this.items=["azureFile","azureDisk","flocker","flexVolume","hostPath","emptyDir","gcePersistentDisk","awsElasticBlockStore","gitRepo","secret","nfs","iscsi","glusterfs","persistentVolumeClaim","rbd","cinder","cephFS","downwardAPI","fc","configMap","vsphereVolume","quobyte","photonPersistentDisk","projected","portworxVolume","scaleIO","storageos"],"*"==pspyml.spec.volumes?this.selectedVegetables=["azureFile","azureDisk","flocker","flexVolume","hostPath","emptyDir","gcePersistentDisk","awsElasticBlockStore","gitRepo","secret","nfs","iscsi","glusterfs","persistentVolumeClaim","rbd","cinder","cephFS","downwardAPI","fc","configMap","vsphereVolume","quobyte","photonPersistentDisk","projected","portworxVolume","scaleIO","storageos"]:this.selectedVegetables=pspyml.spec.volumes||[],this.selectedVegetables.length==this.items.length?this.allCheck=!0:this.selectedVegetables.length!=this.items.length&&(this.allCheck=!1),this.group={group1:pspyml.spec.runAsUser.rule,group2:pspyml.spec.seLinux.rule,group3:pspyml.spec.supplementalGroups.rule,group4:pspyml.spec.fsGroup.rule},this.environmentMaps=pspyml.spec.runAsUser.ranges||[],this.suppleMaps=pspyml.spec.supplementalGroups.ranges||[],this.fsMaps=pspyml.spec.fsGroup.ranges||[],this.seLinuxOptions=pspyml.spec.seLinux.seLinuxOptions||{},this.hostPorts=pspyml.spec.hostPorts||[],this.listObj={cb1:pspyml.spec.readOnlyRootFilesystem||!1,cb2:pspyml.spec.privileged||!1,cb3:pspyml.spec.hostPID||!1,cb4:pspyml.spec.hostIPC||!1},this.readonly=!1,this.allowedCapabilities=pspyml.spec.allowedCapabilities||[],this.requiredDropCapabilities=pspyml.spec.requiredDropCapabilities||[],this.defaultAddCapabilities=pspyml.spec.defaultAddCapabilities||[]}return DetailController.$inject=["podsecuritypolicieDetail","pspyml","$mdDialog","$http","$state","$scope","$resource","$mdToast","$stateParams","horPodsecuritypolicieService","horGetPSPYmlResource","horPSPDetailYml","$q","$translate","errorDialog"],_createClass(DetailController,[{key:"showDeleteDialog",value:function(event,item){var obj={name:item.metadata.name};return this._horPodsecuritypolicieService.showDeleteDialog(event,obj)}},{key:"showEditDialog",value:function(event){this.selectedIndex=1}},{key:"saveChange",value:function(){var _this=this,aceName=this.data.metadata.name,aceModel=this.aceModel,newModel=jsyaml.safeLoad(aceModel);if(0!=this.aceModel.length)return this._horPSPDetailYml.changeYaml(aceName,newModel).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(aceName,"list")))});this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={objectName:this._stateParams.objectName};this._horGetPSPYmlResource.get(obj).$promise.then(function(data){var tempJson=JSON.stringify(data,null,2);_this2.aceModel=jsyaml.safeDump(JSON.parse(tempJson))})}},{key:"addEnvironmentMap",value:function(){var addData={min:"",max:""};this.environmentMaps.push(addData)}},{key:"delEnvironmentMap",value:function(index){this.environmentMaps.splice(index,1)}},{key:"addSuppleMap",value:function(){var addData={min:"",max:""};this.suppleMaps.push(addData)}},{key:"delSuppleMap",value:function(index){this.suppleMaps.splice(index,1)}},{key:"addFstMap",value:function(){var addData={min:"",max:""};this.fsMaps.push(addData)}},{key:"delFstMap",value:function(index){this.fsMaps.splice(index,1)}},{key:"addHostPort",value:function(){var addData={min:"",max:""};this.hostPorts.push(addData)}},{key:"delHostPort",value:function(index){this.hostPorts.splice(index,1)}},{key:"onTransformCb",value:function(chip){var _this3=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.resourceObjLabels.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this3.resourceObjLabels[index]=chip)}),chip):chipTest2?chip:null}},{key:"createYml",value:function(){var _this4=this,defer=this._q.defer(),self=this,environmentMap=[],suppleMap=[],fsMap=[],group1={},group2={},group3={},group4={};if(self.flagEnvironmentMaps=!0,self.flagFsMaps=!0,self.flagSuppleMaps=!0,self.flagHostPorts=!0,1==this.environmentMaps.length)if(this.environmentMaps[0].min<this.environmentMaps[0].max)environmentMap=this.environmentMaps;else{if(this.environmentMaps[0].min!==this.environmentMaps[0].max)return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.environmentMaps[0].min&&""!=this.environmentMaps[0].max&&(environmentMap=this.environmentMaps)}else this.environmentMaps.length>1?angular.forEach(this.environmentMaps,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&environmentMap.push(data):(self._errorDialog.open("error","The min value must less than the max value"),self.flagEnvironmentMaps=!1)}):0==this.environmentMaps.length&&(environmentMap=[]);if(group1="MustRunAs"==this.group.group1&&environmentMap.length>0?{rule:this.group.group1,ranges:environmentMap}:{rule:this.group.group1,ranges:[]},1==this.fsMaps.length){if(!(this.fsMaps[0].min<this.fsMaps[0].max||this.fsMaps[0].min===this.fsMaps[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.fsMaps[0].min&&""!=this.fsMaps[0].max&&(fsMap=this.fsMaps)}else this.fsMaps.length>1?angular.forEach(this.fsMaps,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&fsMap.push(data):(self._errorDialog.open(self._translate.instant("error"),self._translate.instant("The min value must less than the max value")),self.flagFsMaps=!1)}):0==this.fsMaps.length&&(fsMap=[]);if(group4="MustRunAs"==this.group.group4&&fsMap.length>0?{rule:this.group.group4,ranges:fsMap}:{rule:this.group.group4,ranges:[]},1==this.suppleMaps.length){if(!(this.suppleMaps[0].min<this.suppleMaps[0].max||this.suppleMaps[0].min===this.suppleMaps[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.suppleMaps[0].min&&""!=this.suppleMaps[0].max&&(suppleMap=this.suppleMaps)}else this.suppleMaps.length>1?angular.forEach(this.suppleMaps,function(data){0!=data.min.length&&0!=data.max.length&&data.min<data.max&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&suppleMap.push(data):(self._errorDialog.open(self._translate.instant("error"),self._translate.instant("The min value must less than the max value")),self.flagSuppleMaps=!1)}):0==this.suppleMaps.length&&(suppleMap=[]);group3="MustRunAs"==this.group.group3&&suppleMap.length>0?{rule:this.group.group3,ranges:suppleMap}:{rule:this.group.group3,ranges:[]};var seLinuxOptionsObj={};void 0!=this.seLinuxOptions.user?seLinuxOptionsObj.user=this.seLinuxOptions.user:seLinuxOptionsObj.user="",void 0!=this.seLinuxOptions.role?seLinuxOptionsObj.role=this.seLinuxOptions.role:seLinuxOptionsObj.role="",void 0!=this.seLinuxOptions.type?seLinuxOptionsObj.type=this.seLinuxOptions.type:seLinuxOptionsObj.type="",void 0!=this.seLinuxOptions.level?seLinuxOptionsObj.level=this.seLinuxOptions.level:seLinuxOptionsObj.level="",group2="MustRunAs"==this.group.group2&&null!=seLinuxOptionsObj?{rule:this.group.group2,seLinuxOptions:seLinuxOptionsObj}:{rule:this.group.group2};var obj={spec:{runAsUser:group1,seLinux:group2,supplementalGroups:group3,fsGroup:group4}};if(this.selectedVegetables.length>0&&this.selectedVegetables.length<27)obj.spec.volumes=this.selectedVegetables;else{if(27!=this.selectedVegetables.length)return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The volumes choose at least one"));obj.spec.volumes=["*"]}obj.spec.readOnlyRootFilesystem=this.listObj.cb1,obj.spec.privileged=this.listObj.cb2,obj.spec.hostPID=this.listObj.cb3,obj.spec.hostIPC=this.listObj.cb4,obj.spec.allowedCapabilities=this.allowedCapabilities,obj.spec.defaultAddCapabilities=this.defaultAddCapabilities,obj.spec.requiredDropCapabilities=this.requiredDropCapabilities;var hostPorts=[];if(1==this.hostPorts.length){if(!(this.hostPorts[0].min<this.hostPorts[0].max||this.hostPorts[0].min===this.hostPorts[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.hostPorts[0].min&&""!=this.hostPorts[0].max&&(hostPorts=this.hostPorts,obj.spec.hostPorts=hostPorts)}else this.hostPorts.length>1?angular.forEach(this.hostPorts,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&(hostPorts.push(data),obj.spec.hostPorts=hostPorts):(self._errorDialog.open(self._translate.instant("error"),self._translate.instant("The min value must less than the max value")),self.flagHostPorts=!1)}):0==this.hostPorts.length&&(obj.spec.hostPorts=[]);var pspName=this.pspName;this.flagEnvironmentMaps&&this.flagFsMaps&&this.flagSuppleMaps&&this.flagHostPorts&&this.selectedVegetables&&this._horPodsecuritypolicieService.editYmlResource(pspName).save(obj,function(response){defer.resolve(response),"list"===_this4._stateParams.lastPage?_this4._state.go(".",{},{reload:!0}):_this4._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(response.metadata.name,"list"))})}},{key:"searchFeatured",value:function(allCheck){1==allCheck&&this.selectedVegetables.length==this.items.length?this.selectedVegetables=[]:0==allCheck&&this.selectedVegetables.length!=this.items.length&&(this.selectedVegetables=this.items)}},{key:"optionData",value:function(item,allCheck){this.selectedVegetables.indexOf(item)>-1?this.selectedVegetables.length-1==this.items.length?this.allCheck=!0:this.selectedVegetables.length-1!=this.items.length&&(this.allCheck=!1):-1==this.selectedVegetables.indexOf(item)&&(this.selectedVegetables.length+1==this.items.length?this.allCheck=!0:this.selectedVegetables.length+1!=this.items.length&&(this.allCheck=!1))}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(576),_new_controller=__webpack_require__(583),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/psp/new/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_new_controller.NewController,controllerAs:"$ctrl",templateUrl:"podsecuritypolicie/new/new.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(555);exports.NewController=function(){function NewController($q,$state,$mdDialog,$mdToast,errorDialog,$stateParams,horPodsecuritypolicieService,$translate){_classCallCheck(this,NewController),this._horPodsecuritypolicieService=horPodsecuritypolicieService,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._translate=$translate;"all"===this._stateParams.namespace||this._stateParams.namespace;this.aceModel="apiVersion: extensions/v1beta1\nkind: PodSecurityPolicy\nmetadata:\n  name: permissive\nspec:\n  seLinux:\n    rule: RunAsAny\n  supplementalGroups:\n    rule: RunAsAny\n  runAsUser:\n    rule: RunAsAny\n  fsGroup:\n    rule: RunAsAny\n  hostPorts:\n  - min: 8000\n    max: 8080\n  volumes:\n  - '*'",this.objName="",this.objNamespace="",this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.items=["azureFile","azureDisk","flocker","flexVolume","hostPath","emptyDir","gcePersistentDisk","awsElasticBlockStore","gitRepo","secret","nfs","iscsi","glusterfs","persistentVolumeClaim","rbd","cinder","cephFS","downwardAPI","fc","configMap","vsphereVolume","quobyte","photonPersistentDisk","projected","portworxVolume","scaleIO","storageos"],this.selectedVegetables=[],this.allCheck=!1,this.group={group1:"RunAsAny",group2:"RunAsAny",group3:"RunAsAny",group4:"RunAsAny"},this.environmentMaps=[{min:"",max:""}],this.suppleMaps=[{min:"",max:""}],this.fsMaps=[{min:"",max:""}],this.hostPorts=[{min:"",max:""}],this.data={cb1:!1,cb2:!1,cb3:!1,cb4:!1},this.readonly=!1,this.allowedCapabilities=[],this.requiredDropCapabilities=[],this.defaultAddCapabilities=[],this.pspName,this.userName,this.roleName,this.typeName,this.levelName}return _createClass(NewController,[{key:"createResource",value:function(){var _this=this,defer=this._q.defer(),deploymentSpec={name:"dp.yaml",content:this.aceModel,validate:!0};if(0==this.aceModel.length)this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3));else{var str=this.aceModel.substring(this.aceModel.indexOf("metadata:")+"metadata:".length,this.aceModel.indexOf("spec:")),strObjName=str.substring(str.indexOf("name:")+"name:".length,str.length).trim(),strObjNamespace=str.substring(str.indexOf("namespace:")+"namespace:".length,str.length).trim();this.objNamespace=strObjNamespace,this.objName=strObjName,this._horPodsecuritypolicieService.createResource().save(deploymentSpec,function(response){defer.resolve(response),_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(response.ResourceObject.name,"list"))})}}},{key:"addEnvironmentMap",value:function(){var addData={min:"",max:""};this.environmentMaps.push(addData)}},{key:"delEnvironmentMap",value:function(index){this.environmentMaps.splice(index,1)}},{key:"addSuppleMap",value:function(){var addData={min:"",max:""};this.suppleMaps.push(addData)}},{key:"delSuppleMap",value:function(index){this.suppleMaps.splice(index,1)}},{key:"addFstMap",value:function(){var addData={min:"",max:""};this.fsMaps.push(addData)}},{key:"delFstMap",value:function(index){this.fsMaps.splice(index,1)}},{key:"addHostPort",value:function(){var addData={min:"",max:""};this.hostPorts.push(addData)}},{key:"delHostPort",value:function(index){this.hostPorts.splice(index,1)}},{key:"onTransformCb",value:function(chip){var _this2=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.resourceObjLabels.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this2.resourceObjLabels[index]=chip)}),chip):chipTest2?chip:null}},{key:"createYml",value:function(){var _this3=this,defer=this._q.defer(),self=this,environmentMap=[],suppleMap=[],fsMap=[],group1={},group2={},group3={},group4={};if(self.flagEnvironmentMaps=!0,self.flagFsMaps=!0,self.flagSuppleMaps=!0,self.flagHostPorts=!0,1==this.environmentMaps.length)if(this.environmentMaps[0].min<this.environmentMaps[0].max)environmentMap=this.environmentMaps;else{if(this.environmentMaps[0].min!==this.environmentMaps[0].max)return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.environmentMaps[0].min&&""!=this.environmentMaps[0].max&&(environmentMap=this.environmentMaps)}else this.environmentMaps.length>1&&angular.forEach(this.environmentMaps,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&environmentMap.push(data):(self._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value")),self.flagEnvironmentMaps=!1)});if(group1="MustRunAs"==this.group.group1&&environmentMap.length>0?{rule:this.group.group1,ranges:environmentMap}:{rule:this.group.group1},1==this.fsMaps.length){if(!(this.fsMaps[0].min<this.fsMaps[0].max||this.fsMaps[0].min===this.fsMaps[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.fsMaps[0].min&&""!=this.fsMaps[0].max&&(fsMap=this.fsMaps)}else this.fsMaps.length>1&&angular.forEach(this.fsMaps,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&fsMap.push(data):(self._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value")),self.flagFsMaps=!1)});if(group4="MustRunAs"==this.group.group4&&fsMap.length>0?{rule:this.group.group4,ranges:fsMap}:{rule:this.group.group4},1==this.suppleMaps.length){if(!(this.suppleMaps[0].min<this.suppleMaps[0].max||this.suppleMaps[0].min===this.suppleMaps[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.suppleMaps[0].min&&""!=this.suppleMaps[0].max&&(suppleMap=this.suppleMaps)}else this.suppleMaps.length>1&&angular.forEach(this.suppleMaps,function(data){0!=data.min.length&&0!=data.max.length&&data.min<data.max&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&suppleMap.push(data):(self._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value")),self.flagSuppleMaps=!1)});group3="MustRunAs"==this.group.group3&&suppleMap.length>0?{rule:this.group.group3,ranges:suppleMap}:{rule:this.group.group3};var seLinuxOptionsObj={};void 0!=this.userName&&(seLinuxOptionsObj.user=this.userName),void 0!=this.userName&&(seLinuxOptionsObj.role=this.roleName),void 0!=this.typeName&&(seLinuxOptionsObj.type=this.typeName),void 0!=this.levelName&&(seLinuxOptionsObj.level=this.levelName),void 0==this.userName&&void 0==this.userName&&void 0==this.typeName&&void 0==this.levelName&&(seLinuxOptionsObj=null),group2="MustRunAs"==this.group.group2&&null!=seLinuxOptionsObj?{rule:this.group.group2,seLinuxOptions:seLinuxOptionsObj}:{rule:this.group.group2};var obj={metadata:{name:this.pspName},spec:{runAsUser:group1,seLinux:group2,supplementalGroups:group3,fsGroup:group4}};if(this.selectedVegetables.length>0&&this.selectedVegetables.length<27)obj.spec.volumes=this.selectedVegetables;else{if(27!=this.selectedVegetables.length)return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The volumes choose at least one"));obj.spec.volumes=["*"]}1==this.data.cb1&&(obj.spec.readOnlyRootFilesystem=!0),1==this.data.cb2&&(obj.spec.privileged=!0),1==this.data.cb3&&(obj.spec.hostPID=!0),1==this.data.cb4&&(obj.spec.hostIPC=!0),this.allowedCapabilities.length>0&&(obj.spec.allowedCapabilities=this.allowedCapabilities),this.defaultAddCapabilities.length>0&&(obj.spec.defaultAddCapabilities=this.defaultAddCapabilities),this.requiredDropCapabilities.length>0&&(obj.spec.requiredDropCapabilities=this.requiredDropCapabilities);var hostPorts=[];if(1==this.hostPorts.length){if(!(this.hostPorts[0].min<this.hostPorts[0].max||this.hostPorts[0].min===this.hostPorts[0].max))return void this._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value"));""!=this.hostPorts[0].min&&""!=this.hostPorts[0].max&&(hostPorts=this.hostPorts,obj.spec.hostPorts=hostPorts)}else this.hostPorts.length>1&&angular.forEach(this.hostPorts,function(data){0!=data.min.length&&0!=data.max.length&&(data.min<data.max||data.min===data.max)?""!=data.min&&""!=data.max&&(hostPorts.push(data),obj.spec.hostPorts=hostPorts):(self._errorDialog.open(this._translate.instant("error"),this._translate.instant("The min value must less than the max value")),self.flagHostPorts=!1)});this.flagEnvironmentMaps&&this.flagFsMaps&&this.flagSuppleMaps&&this.flagHostPorts&&this.selectedVegetables&&this._horPodsecuritypolicieService.createYmlResource().save(obj,function(response){defer.resolve(response),_this3._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(response.metadata.name,"list"))})}},{key:"searchFeatured",value:function(allCheck){1==allCheck&&this.selectedVegetables.length==this.items.length?this.selectedVegetables=[]:0==allCheck&&this.selectedVegetables.length!=this.items.length&&(this.selectedVegetables=this.items)}},{key:"optionData",value:function(item,allCheck){this.selectedVegetables.indexOf(item)>-1?this.selectedVegetables.length-1==this.items.length?this.allCheck=!0:this.selectedVegetables.length-1!=this.items.length&&(this.allCheck=!1):-1==this.selectedVegetables.indexOf(item)&&(this.selectedVegetables.length+1==this.items.length?this.allCheck=!0:this.selectedVegetables.length+1!=this.items.length&&(this.allCheck=!1))}}]),NewController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _modify_service=__webpack_require__(585);exports.default=angular.module("horApp.common.modify",["ngMaterial"]).service("horModifyService",_modify_service.ModifyResourceObjectService)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModifyResourceObjectService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modifyLabels_dialog=__webpack_require__(586),_modifyLabels_dialog2=_interopRequireDefault(_modifyLabels_dialog),_modifyPodSelector_dialog=__webpack_require__(589),_modifyPodSelector_dialog2=_interopRequireDefault(_modifyPodSelector_dialog),_modifyNodeSelector_dialog=__webpack_require__(591),_modifyNodeSelector_dialog2=_interopRequireDefault(_modifyNodeSelector_dialog),_modifyAnnotations_dialog=__webpack_require__(593),_modifyAnnotations_dialog2=_interopRequireDefault(_modifyAnnotations_dialog),_modifyCount_dialog=__webpack_require__(595),_modifyCount_dialog2=_interopRequireDefault(_modifyCount_dialog),_modifyHorizontalScaling_dialog=__webpack_require__(597),_modifyHorizontalScaling_dialog2=_interopRequireDefault(_modifyHorizontalScaling_dialog);exports.ModifyResourceObjectService=function(){function ModifyResourceObjectService($mdDialog){_classCallCheck(this,ModifyResourceObjectService),this._mdDialog=$mdDialog}return ModifyResourceObjectService.$inject=["$mdDialog"],_createClass(ModifyResourceObjectService,[{key:"showModifyResourceObjectLabelsDialog",value:function(namespace,resourceObjType,resourceObjName,resourceObjLabels){return(0,_modifyLabels_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjLabels)}},{key:"showModifyResourceObjectPodSelector",value:function(namespace,resourceObjType,resourceObjName,resourceObjPodSelector){return(0,_modifyPodSelector_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjPodSelector)}},{key:"showModifyResourceObjectNodeSelector",value:function(namespace,resourceObjType,resourceObjName,resourceObjNodeSelector){return(0,_modifyNodeSelector_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjNodeSelector)}},{key:"showModifyResourceObjectAnnotations",value:function(namespace,resourceObjType,resourceObjName,resourceObjAnnotations){return(0,_modifyAnnotations_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjAnnotations)}},{key:"showModifyResourceObjectCount",value:function(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){return(0,_modifyCount_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}},{key:"showModifyResourceObjectHS",value:function(namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){return(0,_modifyHorizontalScaling_dialog2.default)(this._mdDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired)}}]),ModifyResourceObjectService}()},function(module,exports,__webpack_require__){"use strict";function showModifyLabelsDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjLabels){return mdDialog.show({controller:_modifyLabels_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyLabels.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjLabels:resourceObjLabels}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyLabelsDialog;var _modifyLabels_controller=__webpack_require__(587),_modifyLabels_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyLabels_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyLabelsController=function(){function ModifyLabelsController($mdDialog,$state,$resource,errorDialog,namespace,resourceObjType,resourceObjName,resourceObjLabels){_classCallCheck(this,ModifyLabelsController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjLabels=resourceObjLabels,this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyLabelsController,[{key:"onTransformCb",value:function(chip){var _this=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.resourceObjLabels.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this.resourceObjLabels[index]=chip)}),chip):chipTest2?chip:null}},{key:"modifyLabels",value:function(){var _this2=this;if(console.log("yy-------",this.resourceObjType),"podpresets"==this.resourceObjType){var resource=(0,_modify_util.modifyPodpresetsLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),labelsObj={},strTemp="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];labelsObj[yy]=arr[1]}else labelsObj[item]=null}):(strTemp="{}",labelsObj=JSON.parse(strTemp)),resource.save(labelsObj,function(response){_this2._dialog.hide(),_this2._state.reload()})}else if("storageclasses"==this.resourceObjType){var _resource=(0,_modify_util.modifyStorageclassesLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj={},_strTemp="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj[yy]=arr[1]}else _labelsObj[item]=null}):(_strTemp="{}",_labelsObj=JSON.parse(_strTemp)),_resource.save(_labelsObj,function(response){_this2._dialog.hide(),_this2._state.reload()})}else if("namespaces"==this.resourceObjType){var _resource2=(0,_modify_util.modifyNamespacesLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj2={},_strTemp2="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj2[yy]=arr[1]}else _labelsObj2[item]=null}):(_strTemp2="{}",_labelsObj2=JSON.parse(_strTemp2)),_resource2.save(_labelsObj2,function(response){_this2._dialog.hide(),_this2._state.reload()})}else if("persistentvolumes"==this.resourceObjType){var _resource3=(0,
_modify_util.modifyPersistentVolumesLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj3={},_strTemp3="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj3[yy]=arr[1]}else _labelsObj3[item]=null}):(_strTemp3="{}",_labelsObj3=JSON.parse(_strTemp3)),_resource3.save(_labelsObj3,function(response){_this2._dialog.hide(),_this2._state.reload()})}else if("nodes"==this.resourceObjType){var _resource4=(0,_modify_util.modifynodeLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj4={},_strTemp4="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj4[yy]=arr[1]}else _labelsObj4[item]=null}):(_strTemp4="{}",_labelsObj4=JSON.parse(_strTemp4)),_resource4.save(_labelsObj4,function(response){_this2._dialog.hide(),_this2._state.reload()})}else if("networkpolies"==this.resourceObjType){var _resource5=(0,_modify_util.modifyNetworkPoliesLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj5={},_strTemp5="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj5[yy]=arr[1]}else _labelsObj5[item]=null}):(_strTemp5="{}",_labelsObj5=JSON.parse(_strTemp5)),_resource5.save(_labelsObj5,function(response){_this2._dialog.hide(),_this2._state.reload()})}else{var _resource6=(0,_modify_util.modifyLabelsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_labelsObj6={},_strTemp6="";this.resourceObjLabels&&this.resourceObjLabels.length>0?angular.forEach(this.resourceObjLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];_labelsObj6[yy]=arr[1]}else _labelsObj6[item]=null}):(_strTemp6="{}",_labelsObj6=JSON.parse(_strTemp6)),_resource6.save(_labelsObj6,function(response){_this2._dialog.hide(),_this2._state.reload()})}}},{key:"cancel",value:function(){this._dialog.cancel()}}]),ModifyLabelsController}();exports.default=ModifyLabelsController},function(module,exports,__webpack_require__){"use strict";function modifyLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/labels",{},actions)}function modifyPodpresetsLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/labels",{},actions)}function modifyNetworkPoliesLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/networkpolicies/"+$stateParams.objectName+"/labels",{},actions)}function modifyPersistentVolumesLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/persistentvolumes/"+$stateParams.objectName+"/labels",{},actions)}function modifynodeLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/"+$stateParams.objectName+"/labels",{},actions)}function modifyStorageclassesLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/storageclasses/"+$stateParams.objectName+"/labels",{},actions)}function modifyPodSelectorResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/podselector",{},actions)}function modifyNodeSelectorResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/nodeselector",{},actions)}function modifyAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/annotations",{},actions)}function modifyPodpresetsAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/"+$stateParams.objectType+"/"+$stateParams.objectName+"/annotations",{},actions)}function modifyStorageclassesAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/storageclasses/"+$stateParams.objectName+"/annotations",{},actions)}function modifyPersistentvolumesAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/persistentvolumes/"+$stateParams.objectName+"/annotations",{},actions)}function modifyNodesAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/nodes/"+$stateParams.objectName+"/annotations",{},actions)}function modifyNetworkPoliesAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.log("stateParams",$stateParams),$resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectNamespace+"/networkpolicies/"+$stateParams.objectName+"/annotations",{},actions)}function modifyCountResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/scale/"+$stateParams.objectType+"/"+$stateParams.objectNamespace+"/"+$stateParams.objectName,{},actions)}function modifyNamespacesLabelsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectName+"/labels",{},actions)}function modifyNamespacesAnnotationsResource($stateParams,$resource){var actions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $resource(_constant.backendApi.HOR_K8S_EXTENSION+"/kubernetes/namespaces/"+$stateParams.objectName+"/annotations",{},actions)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.modifyLabelsResource=modifyLabelsResource,exports.modifyPodpresetsLabelsResource=modifyPodpresetsLabelsResource,exports.modifyNetworkPoliesLabelsResource=modifyNetworkPoliesLabelsResource,exports.modifyPersistentVolumesLabelsResource=modifyPersistentVolumesLabelsResource,exports.modifynodeLabelsResource=modifynodeLabelsResource,exports.modifyStorageclassesLabelsResource=modifyStorageclassesLabelsResource,exports.modifyPodSelectorResource=modifyPodSelectorResource,exports.modifyNodeSelectorResource=modifyNodeSelectorResource,exports.modifyAnnotationsResource=modifyAnnotationsResource,exports.modifyPodpresetsAnnotationsResource=modifyPodpresetsAnnotationsResource,exports.modifyStorageclassesAnnotationsResource=modifyStorageclassesAnnotationsResource,exports.modifyPersistentvolumesAnnotationsResource=modifyPersistentvolumesAnnotationsResource,exports.modifyNodesAnnotationsResource=modifyNodesAnnotationsResource,exports.modifyNetworkPoliesAnnotationsResource=modifyNetworkPoliesAnnotationsResource,exports.modifyCountResource=modifyCountResource,exports.modifyNamespacesLabelsResource=modifyNamespacesLabelsResource,exports.modifyNamespacesAnnotationsResource=modifyNamespacesAnnotationsResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function showModifyPodSelectorDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjPodSelector){return mdDialog.show({controller:_modifyPodSelector_contorller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyPodSelector.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjPodSelector:resourceObjPodSelector}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyPodSelectorDialog;var _modifyPodSelector_contorller=__webpack_require__(590),_modifyPodSelector_contorller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyPodSelector_contorller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyPodSelectorController=function(){function ModifyPodSelectorController($mdDialog,$state,$resource,errorDialog,namespace,resourceObjType,resourceObjName,resourceObjPodSelector){_classCallCheck(this,ModifyPodSelectorController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjPodSelector=resourceObjPodSelector,this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyPodSelectorController,[{key:"modifyPodSelector",value:function(){var _this=this,resource=(0,_modify_util.modifyPodSelectorResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),podSelectorObj={},strTemp="";this.resourceObjPodSelector&&this.resourceObjPodSelector.length>0?angular.forEach(this.resourceObjPodSelector,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];podSelectorObj[yy]=arr[1]}else podSelectorObj[item]=null}):(strTemp="{}",podSelectorObj=JSON.parse(strTemp)),resource.save(podSelectorObj,function(response){_this._dialog.hide(),_this._state.reload()})}},{key:"onTransformCb",value:function(chip){var _this2=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.resourceObjPodSelector.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this2.resourceObjPodSelector[index]=chip)}),chip):chipTest2?chip:null}},{key:"cancel",value:function(){this._state.go(".",{},{reload:!0}),this._dialog.cancel()}}]),ModifyPodSelectorController}();exports.default=ModifyPodSelectorController},function(module,exports,__webpack_require__){"use strict";function showModifyNodeSelectorDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjNodeSelector){return mdDialog.show({controller:_modifyNodeSelector_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyNodeSelector.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjNodeSelector:resourceObjNodeSelector}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyNodeSelectorDialog;var _modifyNodeSelector_controller=__webpack_require__(592),_modifyNodeSelector_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyNodeSelector_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyNodeSelectorController=function(){function ModifyNodeSelectorController($mdDialog,$state,$resource,errorDialog,namespace,resourceObjType,resourceObjName,resourceObjNodeSelector){_classCallCheck(this,ModifyNodeSelectorController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjNodeSelector=resourceObjNodeSelector,console.log(this.resourceObjNodeSelector),void 0===this.resourceobjNodeSelector&&(this.resourceobjNodeSelector=[]),this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyNodeSelectorController,[{key:"modifyNodeSelector",value:function(){var _this=this,resource=(0,_modify_util.modifyNodeSelectorResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),nodeSelectorObj={},strTemp="";this.resourceObjNodeSelector&&this.resourceObjNodeSelector.length>0?angular.forEach(this.resourceObjNodeSelector,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];nodeSelectorObj[yy]=arr[1]}else nodeSelectorObj[item]=null}):(strTemp="{}",nodeSelectorObj=JSON.parse(strTemp)),resource.save(nodeSelectorObj,function(response){_this._dialog.hide(),_this._state.reload()})}},{key:"onTransformCb",value:function(chip){var _this2=this,chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.resourceObjNodeSelector.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this2.resourceObjNodeSelector[index]=chip)}),chip):chipTest2?chip:null}},{key:"cancel",value:function(){this._state.go(".",{},{reload:!0}),this._dialog.cancel()}}]),ModifyNodeSelectorController}();exports.default=ModifyNodeSelectorController},function(module,exports,__webpack_require__){"use strict";function showModifyAnnotationsDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjAnnotations){return mdDialog.show({controller:_modifyAnnotations_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyAnnotations.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjAnnotations:resourceObjAnnotations}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyAnnotationsDialog;var _modifyAnnotations_controller=__webpack_require__(594),_modifyAnnotations_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyAnnotations_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyAnnotationsController=function(){function ModifyAnnotationsController($mdDialog,$state,$resource,errorDialog,namespace,$mdToast,resourceObjType,resourceObjName,resourceObjAnnotations){if(_classCallCheck(this,ModifyAnnotationsController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjAnnotations=resourceObjAnnotations,this._mdToast=$mdToast,this.annotationsList=[],this.resourceObjAnnotations&&this.resourceObjAnnotations.length>0)if(1===this.resourceObjAnnotations.length&&"No annotation"===this.resourceObjAnnotations[0]){var annotationData={annotationKey:"",annotationValue:""};this.annotationsList.push(annotationData)}else{var array=[];angular.forEach(this.resourceObjAnnotations,function(item){var annotationData={annotationKey:"",annotationValue:""},tmp=item.split("=");annotationData.annotationKey=tmp[0],annotationData.annotationValue=tmp[1],array.push(annotationData)}),this.annotationsList=array}else if(this.resourceObjAnnotations&&0===this.resourceObjAnnotations.length){var _annotationData={annotationKey:"",annotationValue:""};this.annotationsList.push(_annotationData)}this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyAnnotationsController,[{key:"addAnnotationItem",value:function(){var addData={annotationKey:"",annotationValue:""};this.annotationsList.push(addData)}},{key:"delEnvironmentMap",value:function(index){this.annotationsList.length>1?this.annotationsList.splice(index,1):1==this.annotationsList.length&&(this.annotationsList=[{annotationKey:"",annotationValue:""}])}},{key:"modifyAnnotations",value:function(){var _this=this;if("podpresets"==this.resourceObjType){var resource=(0,_modify_util.modifyPodpresetsAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),annotationsObj={},strTemp="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(strTemp="{}",annotationsObj=JSON.parse(strTemp)):annotationsObj[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:annotationsObj[item.annotationKey]=item.annotationValue}):(strTemp="{}",annotationsObj=JSON.parse(strTemp)),resource.save(annotationsObj,function(response){_this._dialog.hide(),_this._state.reload()})}else if("storageclasses"==this.resourceObjType){var _resource=(0,_modify_util.modifyStorageclassesAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj={},_strTemp="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp="{}",_annotationsObj=JSON.parse(_strTemp)):_annotationsObj[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj[item.annotationKey]=item.annotationValue}):(_strTemp="{}",_annotationsObj=JSON.parse(_strTemp)),_resource.save(_annotationsObj,function(response){_this._dialog.hide(),_this._state.reload()})}else if("namespaces"==this.resourceObjType){var _resource2=(0,_modify_util.modifyNamespacesAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj2={},_strTemp2="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp2="{}",_annotationsObj2=JSON.parse(_strTemp2)):_annotationsObj2[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj2[item.annotationKey]=item.annotationValue}):(_strTemp2="{}",_annotationsObj2=JSON.parse(_strTemp2)),_resource2.save(_annotationsObj2,function(response){_this._dialog.hide(),_this._state.reload()})}else if("networkpolies"==this.resourceObjType){var _resource3=(0,_modify_util.modifyNetworkPoliesAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj3={},_strTemp3="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp3="{}",_annotationsObj3=JSON.parse(_strTemp3)):_annotationsObj3[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj3[item.annotationKey]=item.annotationValue}):(_strTemp3="{}",_annotationsObj3=JSON.parse(_strTemp3)),_resource3.save(_annotationsObj3,function(response){_this._dialog.hide(),_this._state.reload()})}else if("persistentvolumes"==this.resourceObjType){var _resource4=(0,_modify_util.modifyPersistentvolumesAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj4={},_strTemp4="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp4="{}",_annotationsObj4=JSON.parse(_strTemp4)):_annotationsObj4[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj4[item.annotationKey]=item.annotationValue}):(_strTemp4="{}",_annotationsObj4=JSON.parse(_strTemp4)),_resource4.save(_annotationsObj4,function(response){_this._dialog.hide(),_this._state.reload()})}else if("nodes"==this.resourceObjType){var _resource5=(0,_modify_util.modifyNodesAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj5={},_strTemp5="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp5="{}",_annotationsObj5=JSON.parse(_strTemp5)):_annotationsObj5[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj5[item.annotationKey]=item.annotationValue}):(_strTemp5="{}",_annotationsObj5=JSON.parse(_strTemp5)),_resource5.save(_annotationsObj5,function(response){_this._dialog.hide(),_this._state.reload()})}else{var _resource6=(0,_modify_util.modifyAnnotationsResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),_annotationsObj6={},_strTemp6="";this.annotationsList&&1==this.annotationsList.length?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?(_strTemp6="{}",_annotationsObj6=JSON.parse(_strTemp6)):_annotationsObj6[item.annotationKey]=item.annotationValue}):this.annotationsList&&this.annotationsList.length>1?angular.forEach(this.annotationsList,function(item){0==item.annotationKey.length?delete item.annotationKey:_annotationsObj6[item.annotationKey]=item.annotationValue}):(_strTemp6="{}",_annotationsObj6=JSON.parse(_strTemp6)),_resource6.save(_annotationsObj6,function(response){_this._dialog.hide(),_this._state.reload()})}}},{key:"cancel",value:function(){this._dialog.cancel()}}]),ModifyAnnotationsController}();exports.default=ModifyAnnotationsController},function(module,exports,__webpack_require__){"use strict";function showModifyCountDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){return mdDialog.show({controller:_modifyCount_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyCount.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjCount:resourceObjCount,resourceObjDesired:resourceObjDesired}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyCountDialog;var _modifyCount_controller=__webpack_require__(596),_modifyCount_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyCount_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyCountController=function(){function ModifyCountController($mdDialog,$state,$resource,errorDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){_classCallCheck(this,ModifyCountController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjCount=resourceObjCount,this.resourceObjDesired=resourceObjDesired,this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyCountController,[{key:"modifyCount",value:function(){var _this=this,resource=(0,_modify_util.modifyCountResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),countObj={},strTemp="";this.resourceObjCount?(strTemp=strTemp+'"count":"'+this.resourceObjCount+'"',strTemp="{"+strTemp+"}",countObj=JSON.parse(strTemp)):(strTemp="{}",countObj=JSON.parse(strTemp)),resource.save(countObj,function(response){_this._dialog.hide(),_this._state.reload()})}},{key:"cancel",value:function(){this._dialog.cancel()}},{key:"reduceCount",value:function(){this.resourceObjCount--}},{key:"addCount",value:function(){this.resourceObjCount++}}]),ModifyCountController}();exports.default=ModifyCountController},function(module,exports,__webpack_require__){"use strict";function showModifyCountDialog(mdDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){return mdDialog.show({controller:_modifyHorizontalScaling_controller2.default,controllerAs:"$ctrl",clickOutsideToClose:!0,templateUrl:"common/modifyresourceobject/modifyHorizontalScaling.html",locals:{namespace:namespace,resourceObjType:resourceObjType,resourceObjName:resourceObjName,resourceObjCount:resourceObjCount,resourceObjDesired:resourceObjDesired}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=showModifyCountDialog;var _modifyHorizontalScaling_controller=__webpack_require__(598),_modifyHorizontalScaling_controller2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_modifyHorizontalScaling_controller)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_modify_util=__webpack_require__(588),_utils=__webpack_require__(4),ModifyCountController=function(){function ModifyCountController($mdDialog,$state,$resource,errorDialog,namespace,resourceObjType,resourceObjName,resourceObjCount,resourceObjDesired){_classCallCheck(this,ModifyCountController),this.namespace=namespace,this.resourceObjType=resourceObjType,this.resourceObjName=resourceObjName,this.resourceObjCount=resourceObjCount,this.resourceObjDesired=resourceObjDesired,this._dialog=$mdDialog,this._state=$state,this._resource=$resource,this._errorDialog=errorDialog,this.readonly=!1}return _createClass(ModifyCountController,[{key:"modifyCount",value:function(){var _this=this,resource=(0,_modify_util.modifyCountResource)(new _utils.ModifyStateParams(this.namespace,this.resourceObjType,this.resourceObjName),this._resource,{save:{method:"PUT"}}),countObj={},strTemp="";strTemp=strTemp+'"count":"'+this.resourceObjCount+'"',strTemp="{"+strTemp+"}",countObj=JSON.parse(strTemp),resource.save(countObj,function(response){_this._dialog.hide(),_this._state.reload()})}},{key:"cancel",value:function(){this._dialog.cancel()}}]),ModifyCountController}();exports.default=ModifyCountController},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _service=__webpack_require__(600),_stateconfig=__webpack_require__(601),_stateconfig2=_interopRequireDefault(_stateconfig),_directive=__webpack_require__(603),_directive2=_interopRequireDefault(_directive);exports.default=angular.module("horApp.common.shell",["ngAnimate","ngResource","ngMaterial"]).config(_stateconfig2.default).factory("horPodContainerShell",["$resource",_service.podContainerShellResource]).directive("termOpen",["$timeout",_directive2.default])},function(module,exports,__webpack_require__){"use strict";function podContainerShellResource($resource){
return $resource(_constant.backendApi.HOR_K8S_EXTENSION_URL+"/api/v1/pod/:objectNamespace/:objectName/shell/:container")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.podContainerShellResource=podContainerShellResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_state.stateName,{url:(0,_utils.appendDetailParamsToUrl)(_state.stateUrl)+"/:container",parent:_hormain_state.stateName,resolve:{containerList:resolveContainerList,containerShell:resolveContainerShell},views:{"":{controller:_controller.ShellController,controllerAs:"$ctrl",templateUrl:"common/shell/shell.html"}}})}function resolveContainerList(horPodContainerDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horPodContainerDetailResource.query(obj).$promise}function resolveContainerShell(horPodContainerShell,$stateParams){var obj={objectNamespace:$stateParams.objectNamespace,objectName:$stateParams.objectName,container:$stateParams.container};return horPodContainerShell.get(obj).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig,exports.resolveContainerList=resolveContainerList,exports.resolveContainerShell=resolveContainerShell;var _hormain_state=__webpack_require__(30),_state=__webpack_require__(90),_utils=__webpack_require__(4),_controller=__webpack_require__(602)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShellController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_state=__webpack_require__(90);exports.ShellController=function(){function ShellController($scope,$state,$resource,$stateParams,$document,containerList,horPodContainerShell,containerShell){_classCallCheck(this,ShellController),this._scope=$scope,this._resource=$resource,this._document=$document[0],this._state=$state,this._stateParams=this._state.params,this.containerShell=containerShell,this._horPodContainerShell=horPodContainerShell,this.containerList=containerList||[],this.containerSocketInfoData=null,this.term=null,this.io=null,this.conn=null,this.container=this.getContainerName(),this.prepareTerminal()}return _createClass(ShellController,[{key:"$onInit",value:function(){this.containerSocketInfo()}},{key:"prepareTerminal",value:function(){hterm.defaultStorage=new lib.Storage.Memory,this.term=new hterm.Terminal,this.term.onTerminalReady=this.onTerminalReady.bind(this)}},{key:"openTerminal",value:function(){var target=this._document.getElementById("shell-term");this.term.decorate(target),target.firstChild.style.position=null,this.term.installKeyboard()}},{key:"onTerminalReady",value:function(){this.io=this.term.io.push();var obj={objectNamespace:this._stateParams.objectNamespace,objectName:this._stateParams.objectName,container:this._stateParams.container};this._horPodContainerShell.get(obj,this.onTerminalResponseReceived.bind(this))}},{key:"onTerminalResponseReceived",value:function(terminalResponse){this.conn=new SockJS(_constant.backendApi.HOR_K8S_EXTENSION_URL+"/api/sockjs?"+terminalResponse.id),this.conn.onopen=this.onConnectionOpen.bind(this,terminalResponse),this.conn.onmessage=this.onConnectionMessage.bind(this),this.conn.onclose=this.onConnectionClose.bind(this)}},{key:"onConnectionOpen",value:function(terminalResponse){this.conn.send(JSON.stringify({Op:"bind",SessionID:terminalResponse.id})),this.onTerminalResize(this.term.screenSize.width,this.term.screenSize.height),this.io.onVTKeystroke=this.onTerminalVTKeystroke.bind(this),this.io.sendString=this.onTerminalSendString.bind(this),this.io.onTerminalResize=this.onTerminalResize.bind(this)}},{key:"onConnectionMessage",value:function(evt){var msg=JSON.parse(evt.data);switch(msg.Op){case"stdout":this.io.print(msg.Data);break;case"toast":this.io.showOverlay(msg.Data)}}},{key:"onConnectionClose",value:function(evt){""!==evt.reason&&evt.code<1e3?this.io.showOverlay(evt.reason,null):this.io.showOverlay("Connection closed",null),this.conn.close(),this.term.uninstallKeyboard()}},{key:"onTerminalVTKeystroke",value:function(str){this.conn.send(JSON.stringify({Op:"stdin",Data:str}))}},{key:"onTerminalSendString",value:function(str){this.conn.send(JSON.stringify({Op:"stdin",Data:str}))}},{key:"onTerminalResize",value:function(columns,rows){this.conn.send(JSON.stringify({Op:"resize",Cols:columns,Rows:rows}))}},{key:"getContainerName",value:function(){return this._stateParams.container?this._stateParams.container:this.containerList.length>0?this.containerList[0]:""}},{key:"containerSocketInfo",value:function(){var _this=this,serverTime=Math.round((new Date).getTime()/1e3),id=this.containerShell.id;return this._resource(_constant.backendApi.HOR_K8S_EXTENSION_URL+"/api/sockjs/info?"+id+"&t="+serverTime).get().$promise.then(function(data){_this.containerSocketInfoData=data})}},{key:"onContainerChange",value:function(container){this._state.go(_state.stateName,new _state.ShellStateParams(this._stateParams.objectNamespace,this._stateParams.objectName,container))}}]),ShellController}()},function(module,exports){"use strict";function termOpenDirective($timeout){return{restrict:"A",terminal:!0,transclude:!1,link:function(scope,element,attrs){$timeout(scope.$eval(attrs.termOpen),0)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=termOpenDirective},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _traefik_stateconfig=__webpack_require__(605),_traefik_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_traefik_stateconfig),_traefik_service=__webpack_require__(612),_list_service=__webpack_require__(613),_detail_service=__webpack_require__(614);exports.default=angular.module("horApp.traefik",["ngMaterial","ngResource","ui.router"]).config(_traefik_stateconfig2.default).service("horTraefikService",_traefik_service.traefikService).factory("horTraefikProvidersResource",_list_service.traefikProvidersResource).factory("horTraefikHealthResource",_list_service.traefikHealthResource).factory("horTraefikDetailResource",_detail_service.traefikDetailResource).factory("horGetTraefikYmlResource",_detail_service.getTraefikYml).factory("horTraefikDetailYml",_detail_service.traefikDetailYml)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(606),_detail_state=__webpack_require__(607),_list_stateconfig=__webpack_require__(608),_detail_stateconfig=__webpack_require__(610)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="traefik",exports.stateUrl="/traefik"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="traefikdetail",exports.stateUrl="/traefik"},function(module,exports,__webpack_require__){"use strict";function resolveTraefikProviders(horTraefikProvidersResource,horUtilsService){return horTraefikProvidersResource.get().$promise.then(function(traefikProviders){return horUtilsService.recombineTraefikProviders(traefikProviders)})}function resolveTraefikHealth(horTraefikHealthResource){return horTraefikHealthResource.get().$promise}resolveTraefikProviders.$inject=["horTraefikProvidersResource","horUtilsService"],resolveTraefikHealth.$inject=["horTraefikHealthResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTraefikProviders=resolveTraefikProviders,exports.resolveTraefikHealth=resolveTraefikHealth;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(609),_list_state=__webpack_require__(606);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{traefikProviders:resolveTraefikProviders,traefikHealth:resolveTraefikHealth},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"traefik/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state2=(__webpack_require__(607),__webpack_require__(79)),_constant=__webpack_require__(11);exports.ListController=function(){function ListController(traefikProviders,traefikHealth,$state,$scope,$resource,$stateParams,$window,NgTableParams,horUtilsService,$translate){var _this=this;_classCallCheck(this,ListController),this.k8sTraefikProviders=traefikProviders,this.traefikHealth=traefikHealth,this._state=$state,this._scope=$scope,this.selectedTraefikName,this._resource=$resource,this._stateParams=$stateParams,this._selectedIndex=0,this._window=$window,this._NgTableParams=NgTableParams,this._horUtilsService=horUtilsService;var _formatTime=function(value){var unixTimestamp=new Date(1e3*value),hours=unixTimestamp.getHours(),minutes=unixTimestamp.getMinutes(),seconds=unixTimestamp.getSeconds();return hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,hours+":"+minutes+":"+seconds},_ChartConfig=function(title,tooltipCb,yAxisCb){return{tooltip:{trigger:"axis",formatter:tooltipCb},legend:{right:15,top:10,itemWidth:40,itemHeight:15,data:[{name:title+" (ms)",icon:"line",textStyle:{fontFamily:"Source Sans Pro",fontSize:14}}]},grid:{left:"20",right:"30",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[],axisLabel:{textStyle:{color:"#333"},formatter:function(value,index){return _formatTime(value)}},splitLine:{show:!0,lineStyle:{color:"#EFEFEF"}}},yAxis:{type:"value",boundaryGap:!1,splitNumber:5,splitLine:{show:!0,lineStyle:{color:"#EFEFEF"}},axisLabel:{formatter:yAxisCb,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["#FAFAFA","#fff"]}}},series:[{name:title+" (ms)",type:"line",itemStyle:{normal:{color:"#408ed5"}},label:{normal:{show:!0,position:"top",formatter:function(params){return(1e3*params.data).toFixed(2)}}},data:[],step:"middle"}]}},_BarChartConfig=function(title){return{tooltip:{},grid:{left:"20",right:"30",containLabel:!0},xAxis:{type:"category",data:[],axisTick:{alignWithLabel:!0},axisLabel:{textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:"#EFEFEF"}}},yAxis:{type:"value",axisLabel:{textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["#FAFAFA","#fff"]}}},series:[{name:title,type:"bar",barMinHeight:5,data:[],barWidth:"60%",itemStyle:{emphasis:{barBorderWidth:1,shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.5)"},normal:{color:function(params){switch(!0){case params.value<=200:return"rgba(37, 114, 190, 0.5)";case params.value<=1e3:return"rgba(37, 114, 190, 0.6)";case params.value<=2e3:return"rgba(37, 114, 190, 0.7)";case params.value<=3e3:return"rgba(37, 114, 190, 0.8)";case params.value<=5e3:return"rgba(37, 114, 190, 0.9)";case params.value>5e3:default:return"rgba(37, 114, 190, 1)"}},barBorderRadius:[10,10,0,0]}},label:{normal:{show:!0,position:"top",distance:10}}}]}};this.averageResponseTimeConfig=function(){var title=$translate.instant("Average response time");return new _ChartConfig(title,function(params){var yAxis=void 0,xAxis=void 0,marker=void 0,seriesName=void 0;return params.forEach(function(p){yAxis=(1e3*p.data).toFixed(2),xAxis=_formatTime(p.axisValue),marker=p.marker,seriesName=p.seriesName}),xAxis+"<br>"+marker+seriesName+" : "+yAxis},function(value,index){return(1e3*value).toFixed(2)})}(),this.totalStatusCodeCountConfig=function(){var title=$translate.instant("Total Status Code Count");return new _BarChartConfig(title)}(),this.formatUptime=function(uptime){if(uptime){var decimalUT=uptime.split(".")[1],secondUT=parseInt(uptime),minuteUT=void 0,hourUT=void 0;secondUT>60&&(minuteUT=parseInt(secondUT/60),secondUT=parseInt(secondUT%60),minuteUT>60&&(hourUT=parseInt(minuteUT/60),minuteUT=parseInt(minuteUT%60)));var result={hour:0,minute:0,second:secondUT,decimal:decimalUT};return minuteUT>0&&(result={hour:0,minute:minuteUT,second:secondUT,decimal:decimalUT}),hourUT>0&&(result={hour:hourUT,minute:minuteUT,second:secondUT,decimal:decimalUT}),result}},this.formatTable=function(val){_this.tableParamsRule=new _this._NgTableParams({count:10},{counts:[],dataset:val.routes}),_this.tableParamsServer=new _this._NgTableParams({count:10},{counts:[],dataset:val.servers}),_this.traefikName=val.name,_this.traefikEntryPoints=val.entryPoints,_this.backend=val.backend,_this.passHostHeader=val.passHostHeader,_this.loadBalancer=val.loadBalancer}}return ListController.$inject=["traefikProviders","traefikHealth","$state","$scope","$resource","$stateParams","$window","NgTableParams","horUtilsService","$translate"],_createClass(ListController,[{key:"$onInit",value:function(){this.value=this.k8sTraefikProviders[0],this.formatTable(this.value),this.itemClick=0}},{key:"applyGlobalFilter",value:function(keyword){this.value=this.k8sTraefikProviders.find(function(value,index,arr){return-1!=value.name.search(keyword)}),this.formatTable(this.value),this.itemClick=0}},{key:"showTraefikDetail",value:function(item,index){var _this2=this;this.k8sTraefikProviders.find(function(value,index,arr){value.name==item.name&&(_this2.value=value,_this2.formatTable(_this2.value))}),this.itemClick=index}},{key:"changeToProviders",value:function(){this._selectedIndex=0}},{key:"drawChart",value:function(){var _this3=this;this._selectedIndex=1,this.averageResponseTimeDataY=[],this.averageResponseTimeDataX=[],this.totalStatusCodeCountDataX=[],this.totalStatusCodeCountDataY=[];var card1Container=document.getElementById("card1"),card2Container=document.getElementById("card2"),timeContainer=document.getElementById("averageResponseTimeDataDiv"),countContainer=document.getElementById("totalStatusCodeCountDataDiv"),resizeTimeContainer=function(){timeContainer.style.width=card1Container.clientWidth+"px","0px"==timeContainer.style.width&&(timeContainer.style.width=.58*(document.documentElement.clientWidth-300)+"px"),timeContainer.style.height="280px"},resizeCountContainer=function(){countContainer.style.width=card2Container.clientWidth+"px","0px"==countContainer.style.width&&(countContainer.style.width=.58*(document.documentElement.clientWidth-300)+"px"),countContainer.style.height="280px"};resizeTimeContainer(),resizeCountContainer();var chartOne=echarts.init(timeContainer),chartTwo=void 0,configOne=void 0,configTwo=void 0;chartOne.showLoading("default",{color:"#34a2e3",text:""}),this.uptime=this.traefikHealth.uptime_sec.toString(),this.total_response_time=this.traefikHealth.total_response_time_sec.toFixed(9),this.pid=this.traefikHealth.pid,this.total_count=this.traefikHealth.total_count,this.count=this.traefikHealth.count;var formatData=function(conf,data){return conf.series&&conf.series.forEach(function(s){s.data=data}),conf},formatDataX=function(conf,data){return conf.xAxis&&(conf.xAxis.data=data),conf},timer=setInterval(function(){return _this3._resource(_constant.backendApi.HOR_K8S_TRAEFIKS+"/traefik/health").get().$promise.then(function(data){_this3.uptime=data.uptime_sec.toString(),_this3.total_response_time=data.total_response_time_sec.toFixed(9),_this3.pid=data.pid,_this3.total_count=data.total_count,_this3.count=data.count,_this3.averageResponseTimeDataX.push(data.unixtime),_this3.averageResponseTimeDataY.push(data.average_response_time_sec),_this3.averageResponseTimeDataX.length>5&&(_this3.averageResponseTimeDataX.shift(),_this3.averageResponseTimeDataY.shift()),configOne=formatData(_this3.averageResponseTimeConfig,_this3.averageResponseTimeDataY),configOne=formatDataX(_this3.averageResponseTimeConfig,_this3.averageResponseTimeDataX),chartOne.setOption(configOne),_this3.totalStatusCodeCountDataX=[],_this3.totalStatusCodeCountDataY=[],angular.forEach(data.total_status_code_count,function(value,key){_this3.totalStatusCodeCountDataX.push(key),_this3.totalStatusCodeCountDataY.push(value)}),_this3.totalStatusCodeCountDataX.length>0&&(chartTwo?(configTwo=formatData(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataY),configTwo=formatDataX(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataX),chartTwo.setOption(configTwo)):(chartTwo=echarts.init(document.getElementById("totalStatusCodeCountDataDiv")),configTwo=formatData(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataY),configTwo=formatDataX(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataX),chartTwo.setOption(configTwo)))})},3e3);this._scope.$watch(function(){return _this3.traefikHealth.unixtime},function(value){value&&(_this3.averageResponseTimeDataX.push(_this3.traefikHealth.unixtime),_this3.averageResponseTimeDataY.push(_this3.traefikHealth.average_response_time_sec),configOne=formatData(_this3.averageResponseTimeConfig,_this3.averageResponseTimeDataY),configOne=formatDataX(_this3.averageResponseTimeConfig,_this3.averageResponseTimeDataX),chartOne.setOption(configOne),chartOne.hideLoading())},!0),this._scope.$watch(function(){return _this3.traefikHealth.total_status_code_count},function(value){value&&(angular.forEach(value,function(val,key){_this3.totalStatusCodeCountDataX.push(key),_this3.totalStatusCodeCountDataY.push(val)}),_this3.totalStatusCodeCountDataX.length>0&&(chartTwo=echarts.init(countContainer),configTwo=formatData(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataY),configTwo=formatDataX(_this3.totalStatusCodeCountConfig,_this3.totalStatusCodeCountDataX),chartTwo.setOption(configTwo),chartTwo.hideLoading()))},!0),this._scope.$on("$destroy",function(){timer&&clearInterval(timer)}),this._scope.$watch(function(){return _this3._selectedIndex},function(val){0==val&&timer&&clearInterval(timer)}),this._window.onresize=function(){resizeTimeContainer(),resizeCountContainer(),chartTwo&&chartTwo.resize(),chartOne.resize()}}},{key:"getPodDetailHref",value:function(objName){var _this4=this,Url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/all/pods",resource=this._resource(Url,{},{get:{method:"GET"}}),objNamespace=void 0;resource.get().$promise.then(function(data){data.items.find(function(value,index,arr){value.Pod.metadata.name==objName&&(objNamespace=value.Pod.metadata.namespace)}),_this4._state.go(_detail_state2.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list"))})}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveTraefikDetail(horTraefikDetailResource,$stateParams,horUtilsService){return horTraefikDetailResource.get().$promise.then(function(traefikDetail){return horUtilsService.recombineTreafikDetail(traefikDetail)})}function resolveTraefikDetailYaml(horTraefikDetailYml,$stateParams){var objParams={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horTraefikDetailYml.get(objParams).$promise}function resolveServiceDetail(horServiceDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectName:$stateParams.objectName};return horServiceDetailResource.get(obj).$promise}resolveTraefikDetail.$inject=["horTraefikDetailResource","$stateParams","horUtilsService"],resolveTraefikDetailYaml.$inject=["horTraefikDetailYml","$stateParams"],resolveServiceDetail.$inject=["horServiceDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTraefikDetail=resolveTraefikDetail,exports.resolveTraefikDetailYaml=resolveTraefikDetailYaml,exports.resolveServiceDetail=resolveServiceDetail;var _utils=__webpack_require__(4),_detail_state=__webpack_require__(607),_hormain_state=__webpack_require__(30),_detail_controller=__webpack_require__(611);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{serviceDetail:resolveServiceDetail},views:{"":{controller:_detail_controller.TraefikController,controllerAd:"$ctrl",templateUrl:"traefik/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_detail_state=__webpack_require__(607);exports.DetailController=function(){function DetailController(traefikDetail,traefikyml,$mdDialog,$state,$scope,$resource,$mdToast,$stateParams,horTraefikService,horGetTraefikYmlResource,horTraefikDetailYml,$translate){_classCallCheck(this,DetailController),this._dialog=$mdDialog,this._mdToast=$mdToast,this.traefikDetail=traefikDetail,this._state=$state,this._stateParams=$stateParams,this._horTraefikService=horTraefikService,this._horGetTraefikYmlResource=horGetTraefikYmlResource,this._horTraefikDetailYml=horTraefikDetailYml,this._translate=$translate,this.currentTab=this._stateParams.lastPage,this.selectedIndex=-1,"yaml"==this.currentTab?this.selectedIndex=1:this.selectedIndex=0,this.item={namespace:this.traefikDetail.namespace,name:this.traefikDetail.name},this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"json"},this.aceModel=JSON.stringify(traefikyml,null,2)}return DetailController.$inject=["traefikDetail","traefikyml","$mdDialog","$state","$scope","$resource","$mdToast","$stateParams","horTraefikService","horGetTraefikYmlResource","horTraefikDetailYml","$translate"],_createClass(DetailController,[{key:"showDeleteDialog",value:function(event,item){var obj={name:item.metadata.name};return this._horTraefikService.showDeleteDialog(event,obj)}},{key:"showEditDialog",value:function(event){this.selectedIndex=1}},{key:"saveChange",value:function(data){var _this=this;if(0!=data.length){var jsonData=jsyaml.safeLoad(data);return this._horTraefikDetailYml.changeYaml(this.item.name,this.item.namespace,jsonData).then(function(data){200==data.status&&(_this._mdToast.show(_this._mdToast.simple().textContent(_this._translate.instant("JSON changes success")).position("w320 success").hideDelay(3e3)),"list"===_this._stateParams.lastPage?_this._state.go(".",{},{reload:!0}):_this._state.go(_detail_state.stateName,new _utils.NewUpdageStateParams(name,"list")))})}this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("JSON changes failure")).position("w320 danger").hideDelay(3e3))}},{key:"reload",value:function(){var _this2=this,obj={objectName:this._stateParams.objectName};this._horGetTraefikYmlResource.get(obj).$promise.then(function(data){_this2.aceModel,JSON.stringify(data,null,2)})}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.traefikService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.traefikService=function(){function traefikService($http,$state,$mdDialog,$resource,$translate){_classCallCheck(this,traefikService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._translate=$translate}return _createClass(traefikService,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"getUrl",value:function(obj){var objName=obj.name;return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/traefik/"+objName}},{key:"showEditDialog",value:function(event,item){var self=this,url=this.getUrl(item);this._dialog.show({controller:function($mdDialog,traefikData){this.traefikData=traefikData.data,this.obj={data:this.traefikData,options:{mode:"tree",name:"Traefik"}},this.onLoad=function(instance){instance.expandAll()},this.answer=function(answer){$mdDialog.hide(answer)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"traefik/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{traefikData:function(){return self._http.get(url)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})})}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Traefik")).textContent(this._translate.instant("Are you sure you want to delete ")+(item.name+"?")).targetEvent(event).ok(this._translate.instant("Delete Traefik")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("traefik",{},{reload:!0})})}}]),traefikService}()},function(module,exports,__webpack_require__){"use strict";function traefikProvidersResource($resource){return $resource(_constant.backendApi.HOR_K8S_TRAEFIKS+"/traefik/api/providers",{query:{method:"GET"}})}function traefikHealthResource($resource){return $resource(_constant.backendApi.HOR_K8S_TRAEFIKS+"/traefik/health")}traefikProvidersResource.$inject=["$resource"],traefikHealthResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.traefikProvidersResource=traefikProvidersResource,exports.traefikHealthResource=traefikHealthResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function traefikDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/traefik/:objectName")}function getTraefikYml($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/traefik/name/:objectName")}function serviceDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/services/:objectName")}function traefikDetailYml($http){function changeYaml(name,data){var url=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/_raw/traefik/name/"+name;return $http({url:url,method:"PUT",data:data})}var serviceInstance={};return serviceInstance.changeYaml=changeYaml,serviceInstance}traefikDetailResource.$inject=["$resource"],getTraefikYml.$inject=["$resource"],serviceDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.traefikDetailResource=traefikDetailResource,exports.getTraefikYml=getTraefikYml,exports.serviceDetailResource=serviceDetailResource,exports.traefikDetailYml=traefikDetailYml;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(107),_registryconfig_service=__webpack_require__(616),_detail_service=__webpack_require__(617),_registryconfig_stateconfig=__webpack_require__(618),_registryconfig_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_registryconfig_stateconfig);exports.default=angular.module("horApp.registryconfig",["ngMaterial","ngResource","ui.router"]).config(_registryconfig_stateconfig2.default).service("horRegistryConfigSerivce",_registryconfig_service.registryConfigSerivce).factory("horRegistryConfigListResource",_list_service.registryConfigListResource).factory("horRegistryConfigDetailResource",_detail_service.registryConfigDetailResource).factory("horRegistryConfigYmlArr",_detail_service.registryConfigYmlArr).factory("horRegistryConfigDetailYml",_detail_service.registryConfigDetailYml)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.registryConfigSerivce=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.registryConfigSerivce=function(){function registryConfigSerivce($http,$state,$mdDialog,$resource,$mdToast,$cookies,$translate){_classCallCheck(this,registryConfigSerivce),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._resource=$resource,this._toast=$mdToast,this._cookies=$cookies,this._translate=$translate}return _createClass(registryConfigSerivce,[{key:"getUrl",value:function(obj){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+obj.namespace+"/registryconfigs/"+obj.id}},{key:"getNamespaceUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces"}},{key:"showDeleteDialog",value:function(event,item){var _this=this,self=this,url=this.getUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Registry Config")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.name+"？").targetEvent(event).ok(this._translate.instant("Delete Registry Config")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go("registryconfig",{},{reload:!0})})}},{
key:"showEditDialog",value:function(event,item){var _this2=this,self=this,url=this.getUrl(item),namespaceurl=this.getNamespaceUrl();this._dialog.show({controller:function(registryConfigData,$mdDialog,namespaceData){var namespaceList=namespaceData.data.items,namespaceArray=[];angular.forEach(namespaceList,function(namespace){"all"!==namespace.metadata.name&&namespaceArray.push(namespace)}),this.registryConfigData=registryConfigData,this.obj={namespaceValue:this.registryConfigData.data.namespace,url:this.registryConfigData.data.url,name:this.registryConfigData.data.name,username:this.registryConfigData.data.username,password:this.registryConfigData.data.password,email:this.registryConfigData.data.email,namespaceList:namespaceArray,isEnable:!1},this.onLoad=function(instance){instance.expandAll()},this.answer=function(val){var obj={username:val.username,password:val.password,email:val.email};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"registryconfig/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{registryConfigData:function(){return self._http.get(url)},namespaceData:function(){return self._http.get(namespaceurl)}}}).then(function(answer){return self._http({url:url,method:"PUT",data:answer})}).then(function(data){void 0==data?(_this2._toast.show(_this2._toast.simple().textContent(_this2._translate.instant("Failed")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this2._toast.show(_this2._toast.simple().textContent(_this2._translate.instant("Successed")).position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))})}},{key:"showAddRegistryConfigDialog",value:function(event,item){var _this3=this,cookiesName=item.name,cookiesNamespace=item.namespace,self=this,namespaceurl=this.getNamespaceUrl();return this._dialog.show({controller:function($mdDialog,namespaceData,InSideCookiesName,InSideCookiesNamespace){var namespaceList=[],namespaceValue=null;"admin"==InSideCookiesName?(namespaceList=[{metadata:{name:InSideCookiesNamespace}}],namespaceValue=namespaceList[0].metadata.name):"edit"==InSideCookiesName?(namespaceList=[{metadata:{name:InSideCookiesNamespace}}],namespaceValue=namespaceList[0].metadata.name):"cluster-admin"==InSideCookiesName?(namespaceList=namespaceData.data.items,namespaceValue=namespaceData.data.items[0].metadata.name):"view"==InSideCookiesName&&(namespaceList=namespaceData.data.items,namespaceValue=namespaceData.data.items[0].metadata.name),this.obj={namespaceList:namespaceList,namespaceValue:namespaceValue},this.onLoad=function(instance){instance.expandAll()},this.answer=function(val){var obj={namespace:val.namespaceValue,url:val.url,name:val.name,username:val.username,password:val.password,email:val.email};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"registryconfig/dialog_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{namespaceData:function(){return self._http.get(namespaceurl)}},locals:{InSideCookiesName:cookiesName,InSideCookiesNamespace:cookiesNamespace}}).then(function(answer){var strUrl=_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/"+answer.namespace+"/registryconfigs";return self._http({url:strUrl,method:"POST",data:answer})}).then(function(data){void 0==data?(_this3._toast.show(_this3._toast.simple().textContent(_this3._translate.instant("Failed")).position("w200 danger").hideDelay(3e3)),self._state.go(".",{},{reload:!0})):void 0!=data&&200===data.status&&(_this3._toast.show(_this3._toast.simple().textContent(_this3._translate.instant("Successed")).position("w200 success").hideDelay(3e3)),self._state.go(".",{},{reload:!0}))},function(reason){})}}]),registryConfigSerivce}()},function(module,exports,__webpack_require__){"use strict";function registryConfigDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespace/registryconfigs/:objectID")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.registryConfigDetailResource=registryConfigDetailResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(619)),_detail_state=__webpack_require__(620),_list_stateconfig=__webpack_require__(621),_detail_stateconfig=__webpack_require__(623)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="registryconfig",exports.stateUrl="/registryconfig"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="registryconfigdetail",exports.stateUrl="/registryconfig"},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigList(horRegistryConfigListResource,$stateParams){var obj={namespace:$stateParams.namespace};return horRegistryConfigListResource.get(obj).$promise}resolveRegistryConfigList.$inject=["horRegistryConfigListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigList=resolveRegistryConfigList;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(622),_list_state=__webpack_require__(619);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{registryConfigList:resolveRegistryConfigList},views:{"":{controller:_list_controller.registryConfigController,controllerAs:"$ctrl",templateUrl:"registryconfig/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.registryConfigController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_utils=__webpack_require__(4),_detail_state=__webpack_require__(620),_namespacedetail_state=__webpack_require__(57);exports.registryConfigController=function(){function registryConfigController(registryConfigList,$state,$stateParams,horRegistryConfigSerivce,$cookies,$scope,NgTableParams,horModifyService){_classCallCheck(this,registryConfigController),this._horRegistryConfigSerivce=horRegistryConfigSerivce,this._state=$state,this._stateParams=$stateParams,this._cookies=$cookies,this._scope=$scope,this.data=registryConfigList,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],paginationMaxBlocks:5,paginationMinBlocks:2,dataset:this.data}),this.namespace=$stateParams.namespace}return registryConfigController.$inject=["registryConfigList","$state","$stateParams","horRegistryConfigSerivce","$cookies","$scope","NgTableParams","horModifyService"],_createClass(registryConfigController,[{key:"$onInit",value:function(){var user=this._cookies.getObject(_constant.HOR_USER_COOKIES_KEY);this.cookiesName=user.userRole.Name}},{key:"deleteItem",value:function(event,item){return this._horRegistryConfigSerivce.showDeleteDialog(event,item)}},{key:"updateItem",value:function(event,item){return this._horRegistryConfigSerivce.showEditDialog(event,item)}},{key:"getDetailHref",value:function(namespace,id){return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(namespace,id,"list"))}},{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.namespace,namespace))}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"addRegistryConfig",value:function(event,name,namespace){var item={name:name,namespace:namespace};return this._horRegistryConfigSerivce.showAddRegistryConfigDialog(event,item)}}]),registryConfigController}()},function(module,exports,__webpack_require__){"use strict";function resolveRegistryConfigDetail(horRegistryConfigDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,objectID:$stateParams.objectName};return horRegistryConfigDetailResource.get(obj).$promise}resolveRegistryConfigDetail.$inject=["horRegistryConfigDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRegistryConfigDetail=resolveRegistryConfigDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(620),_detail_controller=__webpack_require__(624);exports.config={url:(0,_utils.appendUpdateParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{registryConfigDetail:resolveRegistryConfigDetail},views:{"":{controller:_detail_controller.RegistryConfigDetailController,controllerAs:"$ctrl",templateUrl:"registryconfig/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RegistryConfigDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_namespacedetail_state=(__webpack_require__(619),__webpack_require__(620),__webpack_require__(57));exports.RegistryConfigDetailController=function(){function RegistryConfigDetailController($state,$stateParams,$scope,$resource,$mdToast,registryConfigDetail,horRegistryConfigSerivce){_classCallCheck(this,RegistryConfigDetailController),this.data=registryConfigDetail,this._state=$state,this._resource=$resource,this._stateParams=$stateParams,this.currentTab=this._stateParams.lastPage,this._mdToast=$mdToast,this._scope=$scope,this._horRegistryConfigSerivce=horRegistryConfigSerivce}return RegistryConfigDetailController.$inject=["$state","$stateParams","$scope","$resource","$mdToast","registryConfigDetail","horRegistryConfigSerivce"],_createClass(RegistryConfigDetailController,[{key:"getNamespaceHref",value:function(namespace){return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(this.data.namespace,namespace))}},{key:"deleteItem",value:function(event,item){return this._horRegistryConfigSerivce.showDeleteDialog(event,item)}},{key:"updateItem",value:function(event,item){return this._horRegistryConfigSerivce.showEditDialog(event,item)}},{key:"openMenu",value:function($mdMenu,ev){this.originatorEv=ev,$mdMenu.open(ev)}},{key:"showNothingState",value:function(){return 0===this.podTableParams.count()}}]),RegistryConfigDetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(626),_detail_service=__webpack_require__(627),_tenant_stateconfig=__webpack_require__(628),_tenant_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_tenant_stateconfig),_tenant_service=__webpack_require__(641);exports.default=angular.module("horApp.tenant",["ngMaterial","ngResource","ui.router"]).config(_tenant_stateconfig2.default).factory("horTenantListResource",_list_service.tenantListResource).factory("horTenantDetailResource",_detail_service.tenantDetailResource).service("horTenantService",_tenant_service.TenantService)},function(module,exports,__webpack_require__){"use strict";function tenantListResource($resource){try{return $resource(_constant.backendApi.HOR_K8S_SERVER+"/tenant/",{},{get:{method:"GET",isArray:!0}})}catch(err){console.log(err)}}tenantListResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.tenantListResource=tenantListResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function tenantDetailResource($resource){try{return $resource(_constant.backendApi.HOR_K8S_SERVER+"/tenant/:tenantName")}catch(err){console.log(err)}}tenantDetailResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.tenantDetailResource=tenantDetailResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){try{$stateProvider.state(_list_state.stateName,_list_stateconfig.config).state(_detail_state.stateName,_detail_stateconfig.config).state("tenant.newnp",_newnp_stateconfig.config).state("tenant.newsc",_newsc_stateconfig.config).state("tenant.newrq",_newrq_stateconfig.config)}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(629),_detail_state=__webpack_require__(630),_list_stateconfig=__webpack_require__(631),_detail_stateconfig=__webpack_require__(633),_newnp_stateconfig=__webpack_require__(635),_newsc_stateconfig=__webpack_require__(637),_newrq_stateconfig=__webpack_require__(639)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="tenant",exports.stateUrl="/tenant"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="tenantdetail",exports.stateUrl="/tenant"},function(module,exports,__webpack_require__){"use strict";function resolveTenantList(horTenantListResource,$stateParams){try{return horTenantListResource.get().$promise}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}resolveTenantList.$inject=["horTenantListResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTenantList=resolveTenantList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(629),_list_controller=__webpack_require__(632);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{tenantList:resolveTenantList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"tenant/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_detail_state=__webpack_require__(630),_utils=__webpack_require__(4);exports.ListController=function(){function ListController($state,$stateParams,tenantList,NgTableParams,horTenantService){_classCallCheck(this,ListController),this.tenantList=tenantList,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.tenantList}),this.globalSearchTerm,this._state=$state,this._stateParams=$stateParams,this._horTenantService=horTenantService}return _createClass(ListController,[{key:"applyGlobalFilter",value:function(){try{var term=this.globalSearchTerm;this.tableParams.filter({Name:term})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"createTenant",value:function(){try{return this._horTenantService.showCreateTenantDialog()}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"deleteTenant",value:function(event,item){try{return this._horTenantService.deleteTenant(event,item)}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"getDetailHref",value:function(namespace,tenantName){try{return this._state.href(_detail_state.stateName,new _utils.StateParams(namespace,tenantName))}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";function resolveTenantDetail(horTenantDetailResource,$stateParams){var obj={namespace:$stateParams.objectNamespace,tenantName:$stateParams.objectName};return horTenantDetailResource.get(obj).$promise}resolveTenantDetail.$inject=["horTenantDetailResource","$stateParams"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTenantDetail=resolveTenantDetail;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_detail_state=__webpack_require__(630),_detail_controller=__webpack_require__(634);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_detail_state.stateUrl),parent:_hormain_state.stateName,resolve:{tenantDetail:resolveTenantDetail},views:{"":{controller:_detail_controller.DetailController,controllerAs:"$ctrl",templateUrl:"tenant/detail/detail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_namespacedetail_state=__webpack_require__(57),_utils=__webpack_require__(4),_detail_state=__webpack_require__(556),_detail_state2=__webpack_require__(126),_detail_state3=__webpack_require__(538),_tentant_utils=__webpack_require__(67);__webpack_require__(24),exports.DetailController=function(){function DetailController(tenantDetail,horModifyService,$state,$timeout,$filter,$translate){_classCallCheck(this,DetailController),this._translate=$translate,this._timeout=$timeout,this._state=$state,this._filter=$filter,this._horModifyService=horModifyService;var npLabelsArr=[];tenantDetail.NetworkPolicy&&tenantDetail.NetworkPolicy.metadata.labels&&angular.forEach(tenantDetail.NetworkPolicy.metadata.labels,function(value,key){if(0===value.length){var str=""+key;npLabelsArr.push(str)}else{var _str=key+"="+value;npLabelsArr.push(_str)}}),tenantDetail.npLabels=npLabelsArr;var npAnnotationsArr=[];tenantDetail.NetworkPolicy&&tenantDetail.NetworkPolicy.metadata.annotations&&angular.forEach(tenantDetail.NetworkPolicy.metadata.annotations,function(value,key){var str=key+"="+value;npAnnotationsArr.push(str)}),tenantDetail.npAnnotationsArr=npAnnotationsArr;var npMatchLabelsArr=[];tenantDetail.NetworkPolicy&&tenantDetail.NetworkPolicy.spec.podSelector.matchLabels&&angular.forEach(tenantDetail.NetworkPolicy.spec.podSelector.matchLabels,function(value,key){var str=key+"="+value;npMatchLabelsArr.push(str)}),tenantDetail.npMatchLabelsArr=npMatchLabelsArr,tenantDetail.NetworkPolicy&&tenantDetail.NetworkPolicy.spec.ingress&&angular.forEach(tenantDetail.NetworkPolicy.spec.ingress,function(item){if("from"===Object.keys(item)[0]){var matchLabelArray=[];angular.forEach(item.from,function(data){var newKeys=Object.keys(data)[0];if(data[newKeys].matchLabels){var newLabel=data[newKeys].matchLabels,arrNewLabels=(Object.keys(newLabel)[0],newLabel[Object.keys(newLabel)[0]],[]);angular.forEach(newLabel,function(value,key){var str=key+"="+value;arrNewLabels.push(str)});var obj={newkey:newKeys,newvalue:arrNewLabels};matchLabelArray.push(obj)}}),tenantDetail.npMatchLabel=matchLabelArray}}),tenantDetail.NetworkPolicy&&tenantDetail.NetworkPolicy.spec.ingress&&angular.forEach(tenantDetail.NetworkPolicy.spec.ingress,function(item){if("ports"===Object.keys(item)[0]){var arrPorts=[];angular.forEach(item.ports,function(data){var str=data.protocol+"/"+data.port;arrPorts.push(str)}),tenantDetail.arrPorts=arrPorts}});var scLabelsArr=[];tenantDetail.StorageClass&&tenantDetail.StorageClass.metadata.labels&&angular.forEach(tenantDetail.StorageClass.metadata.labels,function(value,key){if(0===value.length){var str=""+key;scLabelsArr.push(str)}else{var _str2=key+"="+value;scLabelsArr.push(_str2)}}),tenantDetail.scLabelsArr=scLabelsArr;var scAnnotationsArr=[];tenantDetail.StorageClass&&tenantDetail.StorageClass.metadata.annotations&&angular.forEach(tenantDetail.StorageClass.metadata.annotations,function(value,key){var str=key+"="+value;scAnnotationsArr.push(str)}),tenantDetail.scAnnotationsArr=scAnnotationsArr;var rqAcctionArr=[];tenantDetail.ResourceQuota&&tenantDetail.ResourceQuota.metadata.annotations&&angular.forEach(tenantDetail.ResourceQuota.metadata.annotations,function(value,key){var str=key+"="+value;rqAcctionArr.push(str)}),tenantDetail.rqAcctionArr=rqAcctionArr;var rqLabelArr=[];tenantDetail.ResourceQuota&&tenantDetail.ResourceQuota.metadata.labels&&angular.forEach(tenantDetail.ResourceQuota.metadata.labels,function(value,key){if(0===value.length){var str=""+key;rqLabelArr.push(str)}else{var _str3=key+"="+value;rqLabelArr.push(_str3)}}),tenantDetail.rqLabelArr=rqLabelArr,this.tenantDetail=tenantDetail,this.chartData={limitsCPU:"",limitsCPUUsed:"",limitsMemory:"",limitsMemoryUsed:"",requestsCPU:"",requestsCPUUsed:"",requestsMemory:"",requestsMemoryUsed:"",requestsStorage:"",requestsStorageUsed:""},this.limitsCPUConfig,this.limitsCPUData=[];var _ChartConfig=function(title,tooltipCb,yAxisCb){return{tooltip:{trigger:"item"},legend:{orient:"vertical",x:"left"},series:[{name:title,type:"pie",hoverAnimation:!1,radius:["85%","100%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[]}]}},self=this;this.cpuUsageChartConfig=function(){var title=self._translate.instant("Storage (Gi) Used");return new _ChartConfig(title)}(),this.limitsMemoryChartConfig=function(){var title=self._translate.instant("Limits Memory (Gi) Used");return new _ChartConfig(title)}(),this.limitsCPUChartConfig=function(){var title=self._translate.instant("Limits CPU (Cores) Used");return new _ChartConfig(title)}(),this.requestsMemoryChartConfig=function(){var title=self._translate.instant("Requests Memory (Gi) Used");return new _ChartConfig(title)}(),this.requestsCPUChartConfig=function(){var title=self._translate.instant("Requests CPU (Cores) Used");return new _ChartConfig(title)}()}return _createClass(DetailController,[{key:"$onInit",value:function(){try{var self=this;if(self.tenantDetail.ResourceQuota&&self.tenantDetail.ResourceQuota.status&&self.tenantDetail.ResourceQuota.status.hard&&self.tenantDetail.ResourceQuota.status.used){var hard=self.tenantDetail.ResourceQuota.status.hard,used=self.tenantDetail.ResourceQuota.status.used;self.chartData=self.resolveChartData(hard,used);var requestsStorageUsed=self.chartData.requestsStorageUsed,requestsStorageFree=self.chartData.requestsStorage-self.chartData.requestsStorageUsed;self.cpuUsageChartData=[{value:requestsStorageUsed,name:this._translate.instant("Used")},{value:requestsStorageFree,name:this._translate.instant("Free")}],self.pieData=Math.round(self.chartData.requestsStorageUsed/self.chartData.requestsStorage*1e4)/100+"%";var limitsMemoryUsed=self.chartData.limitsMemoryUsed,limitsMemoryFree=self.chartData.limitsMemory-self.chartData.limitsMemoryUsed;self.limitsMemoryChartData=[{value:limitsMemoryUsed,name:this._translate.instant("Used")},{value:limitsMemoryFree,name:this._translate.instant("Free")}],self.pieDatalimit=Math.round(self.chartData.limitsMemoryUsed/self.chartData.limitsMemory*1e4)/100+"%";var limitsCPUUsed=self.chartData.limitsCPUUsed,limitsCPUFree=self.chartData.limitsCPU-self.chartData.limitsCPUUsed;self.limitsCPUChartData=[{value:limitsCPUUsed,name:this._translate.instant("Used")},{value:limitsCPUFree,name:this._translate.instant("Free")}],self.pieDatalimitCPU=Math.round(self.chartData.limitsCPUUsed/self.chartData.limitsCPU*1e4)/100+"%";var requestsMemoryUsed=self.chartData.requestsMemoryUsed,requestsMemoryFree=self.chartData.requestsMemory-self.chartData.requestsMemoryUsed;self.requestsMemoryChartData=[{value:requestsMemoryUsed,name:this._translate.instant("Used")},{value:requestsMemoryFree,name:this._translate.instant("Free")}],self.pieDataMemory=Math.round(self.chartData.requestsMemoryUsed/self.chartData.requestsMemory*1e4)/100+"%";var requestsCPUUsed=self.chartData.requestsCPUUsed,requestsCPUFree=self.chartData.requestsCPU-self.chartData.requestsCPUUsed;self.requestsCPUChartData=[{value:requestsCPUUsed,name:this._translate.instant("Used")},{value:requestsCPUFree,name:this._translate.instant("Free")}],self.pieDataCpu=Math.round(self.chartData.requestsCPUUsed/self.chartData.requestsCPU*1e4)/100+"%"}}catch(err){}}},{key:"initPieConfig",value:function(){try{return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:300,y:100,data:[{name:this._translate.instant("Used"),textStyle:{},icon:"pie"},{name:this._translate.instant("Total"),textStyle:{},icon:"pie"}]},series:[{name:"Vulnerability",type:"pie",radius:["50%","70%"],center:["25%","50%"],avoidLabelOverlap:!1}]}}catch(err){console.log(err)}}},{key:"setChartStyle",value:function(element,type,data){try{var gauge=void 0;if("CPU"===type){var configCPU=(0,_tentant_utils.liquidFillGaugeDefaultSettings)();configCPU.circleThickness=.1,configCPU.circleFillGap=.2,configCPU.textVertPosition=.8,configCPU.waveAnimateTime=2e3,configCPU.waveHeight=.3,configCPU.waveCount=1,gauge=(0,_tentant_utils.loadLiquidFillGauge)(element,data,configCPU)}else if("Memory"===type){var configMemory=(0,_tentant_utils.liquidFillGaugeDefaultSettings)();configMemory.circleThickness=.1,configMemory.circleFillGap=.2,configMemory.textVertPosition=.8,configMemory.waveAnimateTime=2e3,configMemory.waveHeight=.3,configMemory.waveCount=1,configMemory.circleColor="#D4AB6A",configMemory.textColor="#553300",configMemory.waveTextColor="#805615",configMemory.waveColor="#AA7D39",gauge=(0,_tentant_utils.loadLiquidFillGauge)(element,data,configMemory)}return gauge}catch(err){console.log(err)}}},{key:"resolveChartData",value:function(hard,used){try{var self=this,chartData={limitsCPU:"",limitsCPUUsed:"",limitsMemory:"",limitsMemoryUsed:"",requestsCPU:"",requestsCPUUsed:"",requestsMemory:"",requestsMemoryUsed:"",requestsStorage:"",requestsStorageUsed:""};if(hard["limits.cpu"]){var str=hard["limits.cpu"],formatStr=self.formatCPUValue(str);chartData.limitsCPU=formatStr}if(used["limits.cpu"]){var _str4=used["limits.cpu"],_formatStr=self.formatCPUValue(_str4);chartData.limitsCPUUsed=_formatStr}if(hard["limits.memory"]){var _str5=hard["limits.memory"],_formatStr2=self.formatMemoryValue(_str5);chartData.limitsMemory=_formatStr2}if(used["limits.memory"]){var _str6=used["limits.memory"],_formatStr3=self.formatMemoryValue(_str6);chartData.limitsMemoryUsed=_formatStr3}if(hard["requests.cpu"]){var _str7=hard["requests.cpu"],_formatStr4=self.formatCPUValue(_str7);chartData.requestsCPU=_formatStr4}if(used["requests.cpu"]){var _str8=used["requests.cpu"],_formatStr5=self.formatCPUValue(_str8);chartData.requestsCPUUsed=_formatStr5}if(hard["requests.memory"]){var _str9=hard["requests.memory"],_formatStr6=self.formatMemoryValue(_str9);chartData.requestsMemory=_formatStr6}if(used["requests.memory"]){var _str10=used["requests.memory"],_formatStr7=self.formatMemoryValue(_str10);chartData.requestsMemoryUsed=_formatStr7}if(hard["requests.storage"]){var _str11=hard["requests.storage"],_formatStr8=self.formatMemoryValue(_str11);chartData.requestsStorage=_formatStr8}if(used["requests.storage"]){var _str12=used["requests.storage"],_formatStr9=self.formatMemoryValue(_str12);chartData.requestsStorageUsed=_formatStr9}return chartData}catch(err){console.log(err)}}},{key:"formatCPUValue",value:function(valueStr){try{var self=this,result="";if((0,_tentant_utils.endWith)(valueStr,"k")){var tmp="";tmp=(0,_tentant_utils.trimLastString)(valueStr,"k".length),result=self._filter("number")(parseFloat(tmp/1e3/1e3),2)}else if((0,_tentant_utils.endWith)(valueStr,"m")){var _tmp="";_tmp=(0,_tentant_utils.trimLastString)(valueStr,"m".length),result=self._filter("number")(parseFloat(_tmp/1e3),2)}else result=valueStr;return result}catch(err){console.log(err)}}},{key:"formatMemoryValue",value:function(valueStr){try{var self=this,result="";if((0,_tentant_utils.endWith)(valueStr,"Gi"))result=(0,_tentant_utils.trimLastString)(valueStr,"Gi".length);else if((0,_tentant_utils.endWith)(valueStr,"Mi")){var tmp="";tmp=(0,_tentant_utils.trimLastString)(valueStr,"Mi".length),result=self._filter("number")(parseFloat(tmp/1024),2)}else if((0,_tentant_utils.endWith)(valueStr,"Ki")){var _tmp2="";_tmp2=(0,_tentant_utils.trimLastString)(valueStr,"Ki".length),result=self._filter("number")(parseFloat(_tmp2/1024/1024),2)}else if((0,_tentant_utils.endWith)(valueStr,"Ti")){var _tmp3="";_tmp3=(0,_tentant_utils.trimLastString)(valueStr,"Ti".length),result=self._filter("number")(parseFloat(1024*_tmp3),2)}else if((0,_tentant_utils.endWith)(valueStr,"Pi".length)){var _tmp4="";_tmp4=(0,_tentant_utils.trimLastString)(valueStr,"Pi".length),result=self._filter("number")(parseFloat(1024*_tmp4*1024),2)}else result=valueStr;return result}catch(err){console.log(err)}}},{key:"hideLimitsCPUGauge",value:function(){return""===this.chartData.limitsCPU||""===this.chartData.limitsCPUUsed}},{key:"hideLimitsMemoryGauge",value:function(){return""===this.chartData.limitsMemoryUsed||""===this.chartData.limitsMemory}},{key:"hideRequestsCPUGauge",value:function(){return""===this.chartData.requestsCPUUsed||""===this.chartData.requestsCPU}},{key:"hideRequestsMemoryGauge",value:function(){return""===this.chartData.requestsMemoryUsed||""===this.chartData.requestsMemory}},{key:"hideRequestsStorageGauge",value:function(){return""===this.chartData.requestsStorageUsed||""===this.chartData.requestsStorage}},{key:"getNamespaceHref",value:function(namespace,objName){try{return this._state.href(_namespacedetail_state.stateName,new _utils.StateParams(namespace,objName))}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"toNetworkPolicyDetailHref",value:function(objNamespace,objName){try{return this._state.href(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"yaml"))
}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"toStorageClassDetailHref",value:function(objName){try{return this._state.href(_detail_state2.stateName,new _utils.NewUpdageStateParams(objName,"yaml"))}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"toResourceQuotaDetailHref",value:function(namespace,objName){try{return this._state.href(_detail_state3.stateName,new _utils.UpdageStateParams(namespace,objName,"yaml"))}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"showModifyResourceObjectAnnotations",value:function(event,namespace,resourceObjType,resourceObjName,resourceAnnotations){try{this._horModifyService.showModifyResourceObjectAnnotations(namespace,resourceObjType,resourceObjName,resourceAnnotations)}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),DetailController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(629),_newnp_controller=__webpack_require__(636),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/newnp",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_newnp_controller.NewNPController,controllerAs:"$ctrl",templateUrl:"tenant/newnp/newnp.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewNPController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_state=__webpack_require__(629);exports.NewNPController=function(){function NewNPController(horTenantService,$q,$state,$mdToast,$stateParams,$resource,errorDialog){_classCallCheck(this,NewNPController),this._horTenantService=horTenantService,this.tenantName,this.tenantLabels=[],this.networkPolicyName,this.networkPolicyLabels=[],this.readonly=!1,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._stateParams=$stateParams,this._resource=$resource,this._stateParams=$stateParams,this._errorDialog=errorDialog}return _createClass(NewNPController,[{key:"onTransformCb",value:function(chip){var _this=this;if(chip.length<63){var chipTest=/^\w+([-+.]\w+)*=\w+([-+.]\w+)*$/.test(chip),chipTest2=/^\w+([-+.]\w+)*$/.test(chip);return chipTest?(this.tenantLabels.forEach(function(label,index){-1!=label.search("=")&&label.split("=")[0]==chip.split("=")[0]&&(_this.tenantLabels[index]=chip)}),chip):chipTest2?chip:null}return null}},{key:"resolvePostData",value:function(){try{var self=this,objTenantLabels={},strTenantLabels="";self.tenantLabels&&self.tenantLabels.length>0?angular.forEach(self.tenantLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];objTenantLabels[yy]=arr[1]}else objTenantLabels[item]=null}):(strTenantLabels="{}",objTenantLabels=JSON.parse(strTenantLabels));var objNPLabels={type:"system"};self.networkPolicyLabels&&self.networkPolicyLabels.length>0&&angular.forEach(self.networkPolicyLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];objNPLabels[yy]=arr[1]}else objNPLabels[item]=null});return{NPLabels:objNPLabels,NSLabels:objTenantLabels,Name:self.tenantName,NetworkPolicy:self.networkPolicyName}}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"createNP",value:function(){try{var self=this,obj=self.resolvePostData(),url=self._horTenantService.getCreateTenantUrl();self._resource(url).save(obj).$promise.then(function(){self._horTenantService.setTenantName(self.tenantName),self._state.go("tenant.newsc",{},{reload:!0})},function(reason){})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"cancel",value:function(){try{this._state.go(_list_state.stateName,{},{reload:!0})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),NewNPController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(629),_newsc_controller=__webpack_require__(638),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_newsc_controller.NewSCController,controllerAs:"$ctrl",templateUrl:"tenant/newsc/newsc.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewSCController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=(__webpack_require__(4),__webpack_require__(11)),_list_state=__webpack_require__(629);exports.NewSCController=function(){function NewSCController(horTenantService,horTenantDetailResource,$scope,$q,$state,$mdToast,$mdDialog,$stateParams,$resource,errorDialog,$translate){_classCallCheck(this,NewSCController),this._horTenantService=horTenantService,this._horTenantDetailResource=horTenantDetailResource,this._scope=$scope,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._resource=$resource,this._translate=$translate,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.scName="example",this.aceModel="kind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: "+this.scName+"\n  labels:\n    type: system\nprovisioner: neunn.com/nfs\nreclaimPolicy: Retain"}return _createClass(NewSCController,[{key:"$onInit",value:function(){var self=this;self._scope.$on("$locationChangeStart",function(event,next,current){if(!next.includes("tenant.newrq")&&!next.includes("new"))try{self.cancel()}catch(err){console.log(err)}})}},{key:"createResource",value:function(){var _this=this;try{var defer=this._q.defer(),seviceSpec={name:"storageclass.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horTenantService.getCreateResource().save(seviceSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var tenantName=_this._horTenantService.getTenantName(),putResource=_this._resource(_constant.backendApi.HOR_K8S_SERVER+"/tenant",{},{update:{method:"PUT"}}),jsonObj=jsyaml.safeLoad(_this.aceModel),putObj={Name:tenantName,StorageClass:jsonObj.metadata.name};putResource.update(putObj).$promise.then(function(data){_this._state.go("tenant.newrq",{},{reload:!0})},function(reason){_this._errorDialog.open(_this._translate.instant("Create Tenant Error"),reason)})}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"cancel",value:function(){var _this2=this;try{var tenantName=this._horTenantService.getTenantName(),deleteUrl=_constant.backendApi.HOR_K8S_SERVER+"/tenant/"+tenantName;this._resource(deleteUrl,{},{delete:{method:"DELETE"}}).delete().$promise.then(function(data){_this2._state.go(_list_state.stateName,{},{reload:!0})},function(reason){_this2._errorDialog.open(_this2._translate.instant("Delete Tenant Error"),reason)})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),NewSCController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _list_state=__webpack_require__(629),_newrq_controller=__webpack_require__(640),_hormain_state=__webpack_require__(30);exports.config={url:_list_state.stateUrl+"/new",parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_newrq_controller.NewRQController,controllerAs:"$ctrl",templateUrl:"tenant/newrq/newrq.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewRQController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils=__webpack_require__(4),_constant=__webpack_require__(11),_list_state=__webpack_require__(629),_detail_state=__webpack_require__(630);exports.NewRQController=function(){function NewRQController(horTenantService,horTenantDetailResource,$scope,$q,$state,$mdToast,$mdDialog,$stateParams,$resource,errorDialog,$translate){_classCallCheck(this,NewRQController),this._horTenantService=horTenantService,this._horTenantDetailResource=horTenantDetailResource,this._scope=$scope,this._q=$q,this._state=$state,this._mdToast=$mdToast,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._stateParams=$stateParams,this._resource=$resource,this._translate=$translate,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this.tenantName=this._horTenantService.getTenantName(),this.aceModel="apiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: example\n  namespace: "+this.tenantName+"\n  labels:\n    type: system\nspec:\n  hard:\n    requests.cpu: '1'\n    requests.memory: 1Gi\n    limits.cpu: '2'\n    limits.memory: 2Gi\n    requests.storage: 20Gi\n    resourcequotas: '1'"}return _createClass(NewRQController,[{key:"$onInit",value:function(){var self=this;self._scope.$on("$locationChangeStart",function(event,next,current){if(!next.includes(_detail_state.stateName))try{self.cancel()}catch(err){console.log(err)}})}},{key:"createResource",value:function(){var _this=this;try{var defer=this._q.defer(),seviceSpec={name:"resourceQuota.yaml",content:this.aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent(this._translate.instant("Yaml cannot be empty")).position("w320 danger").hideDelay(3e3)):this._horTenantService.getCreateResource().save(seviceSpec,function(response){if(defer.resolve(response),response.Error.length>0)return void _this._errorDialog.open(_this._translate.instant("System prompt information"),_this._translate.instant("Create failure"));try{var putResource=_this._resource(_constant.backendApi.HOR_K8S_SERVER+"/tenant",{},{update:{method:"PUT"}}),jsonObj=jsyaml.safeLoad(_this.aceModel),putObj={Name:_this.tenantName,ResourceQuota:jsonObj.metadata.name};putResource.update(putObj).$promise.then(function(data){_this._state.go(_detail_state.stateName,new _utils.StateParams(_this.tenantName,_this.tenantName))},function(reason){_this._errorDialog.open(_this._translate.instant("Update Tenant Error"),reason)})}catch(err){_this._errorDialog.open(_this._translate.instant("Error"),err)}})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"cancel",value:function(){var _this2=this;try{var deleteUrl=_constant.backendApi.HOR_K8S_SERVER+"/tenant/"+this.tenantName;this._resource(deleteUrl,{},{delete:{method:"DELETE"}}).delete().$promise.then(function(data){_this2._state.go(_list_state.stateName,{},{reload:!0})},function(reason){_this2._errorDialog.open(_this2._translate.instant("Delete Tenant Error"),reason)})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),NewRQController}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TenantService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11);exports.TenantService=function(){function TenantService($http,$state,$mdDialog,$mdToast,$resource,$translate){_classCallCheck(this,TenantService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._mdToast=$mdToast,this._resource=$resource,this._translate=$translate,this._tenantName}return _createClass(TenantService,[{key:"getCreateTenantUrl",value:function(){return _constant.backendApi.HOR_K8S_SERVER+"/tenant"}},{key:"getDeleteUrl",value:function(item){return _constant.backendApi.HOR_K8S_SERVER+"/tenant/"+item.Name}},{key:"setTenantName",value:function(tenantName){this._tenantName=tenantName}},{key:"getTenantName",value:function(){return this._tenantName}},{key:"getCreateResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"showCreateTenantDialog",value:function(){try{var self=this,url=this.getCreateTenantUrl();this._dialog.show({controller:function($mdDialog){this.readonly=!1,this.tenantLabels=[],this.networkPolicyLabels=[],this.onLoad=function(instance){instance.expandAll()},this.answer=function(tenantName,tenantLabels,networkPolicyName,networkPolicyLabels){var objTenantLabels={},strTenantLabels="";tenantLabels&&tenantLabels.length>0?angular.forEach(tenantLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];objTenantLabels[yy]=arr[1]}else objTenantLabels[item]=null}):(strTenantLabels="{}",objTenantLabels=JSON.parse(strTenantLabels));var objNPLabels={type:"system"};networkPolicyLabels&&networkPolicyLabels.length>0&&angular.forEach(networkPolicyLabels,function(item){var str=item.replace("=",":");if(-1!=str.indexOf(":")){var arr=str.split(":"),yy=arr[0];objNPLabels[yy]=arr[1]}else objNPLabels[item]=null});var obj={NPLabels:objNPLabels,NSLabels:objTenantLabels,Name:tenantName,NetworkPolicy:networkPolicyName};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel()}},controllerAs:"$ctrl",templateUrl:"tenant/create_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,resolve:{}}).then(function(answer){return self._http({url:url,method:"POST",data:answer})}).then(function(data){self._state.go(".",{},{reload:!0})},function(reason){})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}},{key:"deleteTenant",value:function(event,item){var _this=this;try{var self=this,url=this.getDeleteUrl(item),confirm=this._dialog.confirm().title(this._translate.instant("Delete Tenant")).textContent(this._translate.instant("Are you sure you want to delete")+" "+item.Name+"？").targetEvent(event).ok(this._translate.instant("Delete Tenant")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){return _this._http.delete(url)}).then(function(){self._state.go(".",{},{reload:!0})},function(){})}catch(err){window.location.href="http://stackoverflow.com/search?q=[js]+"+err.message}}}]),TenantService}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(643),_calico_stateconfig=__webpack_require__(644),_calico_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_calico_stateconfig);exports.default=angular.module("horApp.calico",["ngMaterial","ngResource","ui.router"]).config(_calico_stateconfig2.default).factory("horIpPoolsResource",_list_service.ippoolsResource).factory("horNodesResource",_list_service.nodesResource).factory("horContainersResource",_list_service.containersResource)},function(module,exports,__webpack_require__){"use strict";function ippoolsResource($resource){return $resource(_constant.backendApi.HOR_K8S_CALICO+"/calico/ippools")}function nodesResource($resource){return $resource(_constant.backendApi.HOR_K8S_CALICO+"/calico/nodes")}function containersResource($resource){return $resource(_constant.backendApi.HOR_K8S_CALICO+"/calico/workloadendpoints/?orchestrator=k8s")}ippoolsResource.$inject=["$resource"],nodesResource.$inject=["$resource"],containersResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.ippoolsResource=ippoolsResource,exports.nodesResource=nodesResource,exports.containersResource=containersResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(645),_list_stateconfig=__webpack_require__(646)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="calico",exports.stateUrl="/calico"},function(module,exports,__webpack_require__){"use strict";function resolveIpPools(horIpPoolsResource){try{return horIpPoolsResource.get().$promise}catch(err){console.log(err)}}function resolveNodesList(horNodesResource){try{return horNodesResource.get().$promise}catch(err){console.log(err)}}function resolveContainersList(horContainersResource){try{return horContainersResource.get().$promise}catch(err){console.log(err)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveIpPools=resolveIpPools,exports.resolveNodesList=resolveNodesList,exports.resolveContainersList=resolveContainersList;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(645),_list_controller=__webpack_require__(647);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,resolve:{ipPoolsList:resolveIpPools,nodesList:resolveNodesList,containersList:resolveContainersList},views:{"":{controller:_list_controller.ListController,controllerAs:"$ctrl",templateUrl:"calico/list/list.html"}}}},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.ListController=function(){function ListController(ipPoolsList,nodesList,containersList){_classCallCheck(this,ListController),ipPoolsList.items&&(this.ipPoolsList=ipPoolsList.items),nodesList.items&&(this.nodesList=nodesList.items),containersList&&(this.containersList=containersList.items),this.nodes=[],this.edges=[],this.container,this.network}return _createClass(ListController,[{key:"$onInit",value:function(){var _this=this;if(1===this.ipPoolsList.length){var tmp=this.ipPoolsList[0],obj={id:0,label:tmp.metadata.cidr,group:24,image:"img/refresh-cl/System-Globe-icon.png",shape:"image",size:50};this.nodes.push(obj);var objId=1,nodesObjList=[];angular.forEach(this.nodesList,function(data){var obj=(data.metadata.name,{id:objId,label:data.metadata.name,group:objId,shape:"image",image:"img/refresh-cl/Hardware-Laptop-1-icon.png"});nodesObjList.push(obj);var edge={from:0,to:objId,length:50};_this.edges.push(edge),_this.nodes.push(obj),objId++}),angular.forEach(nodesObjList,function(objItem){var containerId=1e3*objItem.id;angular.forEach(_this.containersList,function(container){if(container.metadata.node&&objItem.label&&container.metadata.node===objItem.label){var containerObj={id:containerId,label:container.spec.interfaceName,group:objItem.id,shape:"image",image:"img/refresh-cl/Hardware-My-Computer-3-icon.png"};_this.nodes.push(containerObj);var edgeContainer={from:objItem.id,to:containerId,length:25};_this.edges.push(edgeContainer),containerId++}})})}this.container=document.getElementById("mynetwork");var data={nodes:this.nodes,edges:this.edges},options={nodes:{shape:"image",scaling:{min:10,max:30},font:{size:32,face:"Tahoma"},size:50},edges:{width:5,color:{inherit:"from"},smooth:{type:"continuous"}},physics:{stabilization:!1,barnesHut:{gravitationalConstant:-8e4,springConstant:.001,springLength:200}},interaction:{tooltipDelay:200,hideEdgesOnDrag:!0}};this.network=new vis.Network(this.container,data,options)}}]),ListController}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _stateconfig=__webpack_require__(649),_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_stateconfig);exports.default=angular.module("horApp.applications",["ngMaterial","ngResource","ui.router","ngWebSocket"]).config(_stateconfig2.default)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=__webpack_require__(650),_list_stateconfig=__webpack_require__(651)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="applications",exports.stateUrl="/applications"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0;var _hormain_state=__webpack_require__(30),_list_state=__webpack_require__(650);exports.config={url:_list_state.stateUrl,parent:_hormain_state.stateName,views:{"":{templateUrl:"applications/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _destroycluster_stateconfig=__webpack_require__(653),_destroycluster_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_destroycluster_stateconfig),_destroycluster_service=__webpack_require__(656);exports.default=angular.module("horApp.destroycluster",["ngMaterial","md.data.table","ngResource","ui.router","moment-picker"]).config(_destroycluster_stateconfig2.default).factory("horDestroyclusterLogsResource",_destroycluster_service.destroyclusterLogsResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_destroycluster_state.stateName,{url:_destroycluster_state.stateUrl,parent:_hormain_state.stateName,resolve:{translateReady:["$translate",function($translate){return $translate.onReady()}]},views:{"":{controller:_destroycluster_controller.DestroyClusterController,controllerAs:"$ctrl",templateUrl:"destroycluster/destroycluster.html"}}})}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _hormain_state=(__webpack_require__(4),__webpack_require__(30)),_destroycluster_state=__webpack_require__(654),_destroycluster_controller=__webpack_require__(655)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="destroycluster",exports.stateUrl="/destroycluster"},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DestroyClusterController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(4),__webpack_require__(11),__webpack_require__(73),exports.DestroyClusterController=function(){function DestroyClusterController($scope,$window,$location,$mdDialog,$translate,$state,base64,horDestroyclusterLogsResource){_classCallCheck(this,DestroyClusterController),console.log("销毁集群---------"),this._window=$window,this._location=$location,this._horDestroyclusterLogsResource=horDestroyclusterLogsResource,this.destroyCluster=!1,this.Logs=[],this.next=!0,this._scope=$scope,this._translate=$translate,this._dialog=$mdDialog,this._base64=base64,this._translate=$translate,this._state=$state}return _createClass(DestroyClusterController,[{key:"destroy",value:function(){var _this=this,self=this,confirm=this._dialog.confirm().title(this._translate.instant("Delete")).textContent(this._translate.instant("Are you sure you want to delete")+"？").targetEvent(event).ok(this._translate.instant("Delete")).cancel(this._translate.instant("Cancel"));this._dialog.show(confirm).then(function(){_this.destroyCluster=!0,_this._horDestroyclusterLogsResource.startSSEMonitor(),_this._horDestroyclusterLogsResource.setCallBack(self.cloneCallBack.bind(self)),_this._horDestroyclusterLogsResource.setStopBack(self.cloneStopBack.bind(self))})}},{key:"cloneCallBack",value:function(responseData){this.Logs.push(this._base64.decode(responseData)),this._scope.$apply()}},{key:"cloneStopBack",value:function(responseData){var _this2=this;void 0!=responseData&&("eof"===responseData?(this.next=!1,this._scope.$apply()):this._dialog.show(this._dialog.alert().clickOutsideToClose(!0).title(this._translate.instant("System Information")).textContent(this._translate.instant("Error message")+responseData).ok(this._translate.instant("close"))).then(function(){_this2._state.go(".",{},{reload:!0})}))}},{key:"login",value:function(){var url=this._location.absUrl(),index=url.search(/\/([^\/]+html|#)/);console.log(this._location.absUrl()),console.log(index),this._window.location=url.slice(0,index)+"/login.html"}}]),DestroyClusterController}()},function(module,exports,__webpack_require__){"use strict";function destroyclusterLogsResource(){var serviceInstance={},isConnected=!1,setDataCallBack=void 0,setDataStopBack=void 0,socket=void 0,_startConnection=function(url){socket=new EventSource(url),socket.onopen=function(evt){isConnected=!0},socket.onmessage=function(message){setDataCallBack(message.data)},socket.onerror=function(evt){socket.close(),isConnected=!1,setDataStopBack(evt.data)},socket.onclose=function(evt){console.log("关闭")}};return serviceInstance.startSSEMonitor=function(url){var wsUrl=_constant.backendApi.HOR_K8S_SERVER_CONFIG+"/config/destroy";console.log(wsUrl),_startConnection(wsUrl)},serviceInstance.setCallBack=function(callback){setDataCallBack=callback},serviceInstance.setStopBack=function(stopback){setDataStopBack=stopback},serviceInstance.stopSSEMonitor=function(){socket&&2==socket.readyState&&(isConnected=!1,socket.close())},serviceInstance}Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyclusterLogsResource=destroyclusterLogsResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _mirroredwarehouse_service=__webpack_require__(658),_mirroredwarehouse_service2=__webpack_require__(661),_privatedetail_service=__webpack_require__(662),_list_service=__webpack_require__(663),_deploydetail_service=__webpack_require__(664),_mirroredwarehouse_stateconfig=__webpack_require__(665),_mirroredwarehouse_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_mirroredwarehouse_stateconfig);exports.default=angular.module("horApp.mirroredWarehouse",["ngMaterial","ngResource","ui.router"]).config(_mirroredwarehouse_stateconfig2.default).service("horMirroredWarehouseService",_mirroredwarehouse_service.mirroredWarehouseService).service("horRepoTagDetail",_list_service.repositoryTagDetailResource).factory("horProjectsListResource",_mirroredwarehouse_service2.projectsListResource).factory("horRepositoriesResource",_mirroredwarehouse_service2.repositoriesResource).factory("horPrivateDetailResource",_privatedetail_service.privateDetailResource).factory("horProjectDetailResource",_privatedetail_service.projectDetailResource).factory("horRepositoriesListResource",_privatedetail_service.repositoriesListResource).factory("horRepoTagsService",_privatedetail_service.repoTagsResource).factory("horRepoPullCommandsService",_privatedetail_service.repoPullCommandResource).factory("horProjectPushCommandsResource",_privatedetail_service.projectsPushCommandsResource).factory("horResourceAmountResource",_deploydetail_service.resourceAmountResource)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirroredWarehouseService=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_mirroredwarehouse_state=__webpack_require__(659),_privatedetail_state=__webpack_require__(660);exports.mirroredWarehouseService=function(){
function mirroredWarehouseService($http,$state,$mdDialog,$mdToast,$cookies,$filter,$translate,$resource){_classCallCheck(this,mirroredWarehouseService),this._http=$http,this._state=$state,this._dialog=$mdDialog,this._mdToast=$mdToast,this._cookies=$cookies,this.readonly=!1,this._filter=$filter,this._translate=$translate,this._resource=$resource}return _createClass(mirroredWarehouseService,[{key:"createResource",value:function(){return this._resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/deployresource",{},{save:{method:"POST"}})}},{key:"getDeleteUrl",value:function(){return _constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName"}},{key:"deleteRepository",value:function(project,repository,total){var _this=this,self=this,repoName=encodeURIComponent(repository.substring(repository.indexOf("/")+1,repository.length)),confirm=this._dialog.confirm().title("删除镜像仓库确认").textContent("确认删除镜像仓库 "+repository+"?").targetEvent(event).ok("删除").cancel("取消");this._dialog.show(confirm).then(function(){var obj={projectName:project,repositoryName:repoName},deleteUrl=self.getDeleteUrl();return _this._resource(deleteUrl).delete(obj).$promise.then(function(){total-=1,self._state.go(_mirroredwarehouse_state.stateName,{tabIndex:0},{reload:!0})},function(error){console.log(error)})}).then(function(){},function(){})}},{key:"deleteTags",value:function(projectName,repoName,tagName,repoCount){var _this2=this;try{repoName=encodeURIComponent(repoName.substring(repoName.indexOf("/")+1,repoName.length));var self=this,confirm=this._dialog.confirm().title("删除镜像标签确认").textContent("确认删除镜像标签 "+tagName+"?").targetEvent(event).ok("删除").cancel("取消");this._dialog.show(confirm).then(function(){var obj={projectName:projectName,repositoryName:repoName,tagName:tagName},deleteUrl=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName/tags/:tagName";return _this2._resource(deleteUrl).delete(obj).$promise.then(function(){self._state.go(_privatedetail_state.stateName,{objectName:1,tabIndex:1},{reload:!0})},function(error){console.log(error)})}).then(function(){},function(){})}catch(err){console.log("delete tag catch err...",err)}}},{key:"showCopyDigestDialog",value:function(digest){this._dialog.show({controller:function($mdDialog,digest,$mdToast){this._mdToast=$mdToast,this.digestId=digest,this.cancel=function(){this.supported&&(this._mdToast.show(this._mdToast.simple().textContent("复制成功!").position("w200 success ").hideDelay(3e3)),$mdDialog.cancel())}},controllerAs:"$ctrl",templateUrl:"mirroredwarehouse/copy_digest.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0,locals:{digest:digest}})}}]),mirroredWarehouseService}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="registry",exports.stateUrl="/registry"},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="privatedetail",exports.stateUrl="/private"},function(module,exports,__webpack_require__){"use strict";function projectsListResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects",{},{get:{method:"GET",isArray:!0}})}function repositoriesResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?page=:page&page_size=:limit&projectId=:projectId",{},{get:{method:"GET",isArray:!0}})}projectsListResource.$inject=["$resource"],repositoriesResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.projectsListResource=projectsListResource,exports.repositoriesResource=repositoriesResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function privateDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects/:projectId")}function projectDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects",{},{get:{method:"GET",isArray:!0}})}function repositoriesListResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?page=:page&page_size=:limit&projectId=:projectId",{},{get:{method:"GET",isArray:!0}})}function repoTagsResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName/tags")}function repoPullCommandResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects/pull/commands?registryAddress=:repoAddress&projectName=:projectName&repositoryName=:repoName&tag=:tagName")}function projectsPushCommandsResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects/push/commands?registryAddress=:repoAddress&projectName=:projectName")}repositoriesListResource.$inject=["$resource"],repoTagsResource.$inject=["$resource"],repoPullCommandResource.$inject=["$resource"],projectsPushCommandsResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.privateDetailResource=privateDetailResource,exports.projectDetailResource=projectDetailResource,exports.repositoriesListResource=repositoriesListResource,exports.repoTagsResource=repoTagsResource,exports.repoPullCommandResource=repoPullCommandResource,exports.projectsPushCommandsResource=projectsPushCommandsResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function repositoryTagsListResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName/tags",{},{get:{method:"GET",isArray:!0}})}function repositoryTagDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName/tags/:tagName")}function tagVulnerabilityDetailResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/:projectName/:repositoryName/tags/:tagName/vulnerability/details",{},{get:{method:"GET",isArray:!0}})}function projectResource($resource){return $resource(_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/projects",{},{get:{method:"GET",isArray:!0}})}repositoryTagsListResource.$inject=["$resource"],repositoryTagDetailResource.$inject=["$resource"],tagVulnerabilityDetailResource.$inject=["$resource"],projectResource.$inject=["$resource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.repositoryTagsListResource=repositoryTagsListResource,exports.repositoryTagDetailResource=repositoryTagDetailResource,exports.tagVulnerabilityDetailResource=tagVulnerabilityDetailResource,exports.projectResource=projectResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function resourceAmountResource($resource){return $resource(_constant.backendApi.HOR_K8S_SERVER+"/kubernetes/namespaces/:namespaces/resourcequotas")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resourceAmountResource=resourceAmountResource;var _constant=__webpack_require__(11)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_mirroredwarehouse_state.stateName,_mirroredwarehouse_stateconfig.config).state(_privatedetail_state.stateName,_privatedetail_stateconfig.config).state(_publicdetail_state.stateName,_publicdetail_stateconfig.config).state(_deploydetail_state.stateName,_deploydetail_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _mirroredwarehouse_state=(__webpack_require__(30),__webpack_require__(659)),_privatedetail_state=__webpack_require__(660),_publicdetail_state=__webpack_require__(666),_deploydetail_state=__webpack_require__(336),_mirroredwarehouse_stateconfig=__webpack_require__(667),_privatedetail_stateconfig=__webpack_require__(669),_publicdetail_stateconfig=__webpack_require__(672),_deploydetail_stateconfig=__webpack_require__(674)},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="publicdetail",exports.stateUrl="/public"},function(module,exports,__webpack_require__){"use strict";function resolvePrivateDetail(horProjectsListResource,$cookieStore){var objParams={name:$cookieStore.get(_constant.HOR_USER_COOKIES_KEY).userName};return horProjectsListResource.get(objParams).$promise}function resolvePrivateList(horProjectsListResource,horRepositoriesResource,$cookieStore){var objParams={name:$cookieStore.get(_constant.HOR_USER_COOKIES_KEY).userName};return horProjectsListResource.get(objParams).$promise.then(function(_privateList){if(_privateList){var _objParams={projectId:_privateList[0].project_id,page:1,limit:10};return horRepositoriesResource.get(_objParams).$promise}return[]})}function resolvePublicList(horProjectsListResource){var objParams={public:1};return horProjectsListResource.get(objParams).$promise}function resolveProjectPushCommands(horProjectPushCommandsResource,horProjectsListResource,$cookieStore){var objParams={name:$cookieStore.get(_constant.HOR_USER_COOKIES_KEY).userName};return horProjectsListResource.get(objParams).$promise.then(function(projectDetail){var repoAddress=_constant.REGISTRY_ADDRESS,objParams={projectName:projectDetail[0].name,repoAddress:repoAddress};return horProjectPushCommandsResource.get(objParams).$promise})}resolvePrivateDetail.$inject=["horProjectsListResource","$cookieStore"],resolvePrivateList.$inject=["horProjectsListResource","horRepositoriesResource","$cookieStore"],resolvePublicList.$inject=["horProjectsListResource"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePrivateDetail=resolvePrivateDetail,exports.resolvePrivateList=resolvePrivateList,exports.resolvePublicList=resolvePublicList,exports.resolveProjectPushCommands=resolveProjectPushCommands;var _hormain_state=__webpack_require__(30),_mirroredwarehouse_controller=__webpack_require__(668),_mirroredwarehouse_state=__webpack_require__(659),_constant=(__webpack_require__(4),__webpack_require__(11));exports.config={url:_mirroredwarehouse_state.stateUrl,parent:_hormain_state.stateName,params:{tabIndex:0},resolve:{privateDetail:resolvePrivateDetail,privateList:resolvePrivateList,publicList:resolvePublicList,projectPushCommands:resolveProjectPushCommands},views:{"":{controller:_mirroredwarehouse_controller.MirroredWarehouseListController,controllerAs:"$ctrl",templateUrl:"mirroredwarehouse/list/mirroredwarehouselist.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirroredWarehouseListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_list_state=(__webpack_require__(660),__webpack_require__(666),__webpack_require__(335)),_deploydetail_state=__webpack_require__(336),_utils=__webpack_require__(4),_constant=__webpack_require__(11);exports.MirroredWarehouseListController=function(){function MirroredWarehouseListController(horMirroredWarehouseService,horRepositoriesResource,publicList,privateList,privateDetail,projectPushCommands,NgTableParams,$resource,$state,$stateParams,$mdToast,$scope){var _this=this;_classCallCheck(this,MirroredWarehouseListController),MirroredWarehouseListController._self=this,this._resource=$resource,this._scope=$scope,this._mdToast=$mdToast,this._stateParams=$stateParams,this._NgTableParams=NgTableParams,this.selectedIndex=0,1===this._stateParams.tabIndex?this.selectedIndex=1:2===this._stateParams.tabIndex&&(this.selectedIndex=2),this._state=$state,this._horMirroredWarehouseService=horMirroredWarehouseService,this._horRepositoriesResource=horRepositoriesResource,this._privateDetail=privateDetail[0],this.privateList=privateList,console.log(this._privateDetail),this._projectPushCommands={projectPushCommands:projectPushCommands,login_desc:"登录[hor.io]镜像仓库（根据提示输入正确的用户名["+this._privateDetail.name+"]及密码）",login_command:"docker login hor.io"},this.privateQuery={projectId:this._privateDetail.project_id,page:1,limit:10,pageSize:0},this.tableParamsPrivate=new NgTableParams({count:10},{counts:[],dataset:this.privateList}),this.privateSearchTerm=null,this.publicList=[];var _publicList=publicList;angular.forEach(_publicList,function(row){var objParams={projectId:row.project_id};_this._horRepositoriesResource.get(objParams).$promise.then(function(data){data.length>0&&angular.forEach(data,function(repositories){_this.publicList.push(repositories),_this.tableParamsPublic=new _this._NgTableParams({count:10},{counts:[],dataset:_this.publicList})})})}),this.publicSearchTerm=null}return MirroredWarehouseListController.$inject=["horMirroredWarehouseService","horRepositoriesResource","publicList","privateList","privateDetail","projectPushCommands","NgTableParams","$resource","$state","$stateParams","$mdToast","$scope"],_createClass(MirroredWarehouseListController,[{key:"privateTagsList",value:function(item){var projectName=item.name.split("/")[0],repoName=item.name.substring(item.name.indexOf("/")+1,item.name.length);return this._state.href(_list_state.stateName,new _utils.TagsListStateParams(projectName,repoName,item.project_id,0))}},{key:"publicTagsList",value:function(item){var projectName=item.name.split("/")[0],repoName=item.name.substring(item.name.indexOf("/")+1,item.name.length);return this._state.href(_list_state.stateName,new _utils.TagsListStateParams(projectName,repoName,item.project_id,1))}},{key:"getPrivateDesserts",value:function(page,limit){var projectId=MirroredWarehouseListController._self._privateDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page="+page+"&page_size=10";MirroredWarehouseListController.refreshRepoList(url)}},{key:"applyPrivateFilter",value:function(){var term=this.privateSearchTerm,projectId=MirroredWarehouseListController._self._privateDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page=1&page_size=10&q="+term;MirroredWarehouseListController.refreshRepoList(url)}},{key:"deleteRepositories",value:function(projectName,repoName,repoTotal){return this._horMirroredWarehouseService.deleteRepository(projectName,repoName,repoTotal)}},{key:"applyPublicFilter",value:function(){var term=this.publicSearchTerm;this.tableParamsPublic.filter({name:term})}},{key:"collection",value:function(){this._mdToast.show(this._mdToast.simple().textContent("功能开发中，敬请期待！").position("w300 wNotice").hideDelay(3e3))}},{key:"deploy",value:function(item){var projectName=item.name.split("/")[0],repoName=item.name.substring(item.name.indexOf("/")+1,item.name.length);this._state.go(_deploydetail_state.stateName,new _utils.DeployDetailStateParams(projectName,repoName))}},{key:"mirrorImageIntroduction",value:function(){this._mdToast.show(this._mdToast.simple().textContent("功能开发中，敬请期待！").position("w300 wNotice").hideDelay(3e3))}}],[{key:"refreshRepoList",value:function(url){return MirroredWarehouseListController._self._resource(url,{},{get:{method:"GET",isArray:!0}}).get().$promise.then(function(repositories){MirroredWarehouseListController._self.privateList=repositories,MirroredWarehouseListController._self.tableParamsPrivate=new MirroredWarehouseListController._self._NgTableParams({count:10},{counts:[],dataset:MirroredWarehouseListController._self.privateList})})}}]),MirroredWarehouseListController}()},function(module,exports,__webpack_require__){"use strict";function resolvePrivateDetail(horPrivateDetailResource,horProjectDetailResource,$stateParams){var objParams={projectId:$stateParams.objectNamespace};return horPrivateDetailResource.get(objParams).$promise.then(function(project){var projectName={name:project.name};return horProjectDetailResource.get(projectName).$promise})}function resolveRepositoriesList(horRepositoriesListResource,$stateParams){var objParams={projectId:$stateParams.objectNamespace,page:1,limit:10};return horRepositoriesListResource.get(objParams).$promise}function resolveProjectPushCommands(horProjectPushCommandsResource,horPrivateDetailResource,$stateParams){var objParams={projectId:$stateParams.objectNamespace};return horPrivateDetailResource.get(objParams).$promise.then(function(projectDetail){var repoAddress=_constant.REGISTRY_ADDRESS,objParams={projectName:projectDetail.name,repoAddress:repoAddress};return horProjectPushCommandsResource.get(objParams).$promise})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePrivateDetail=resolvePrivateDetail,exports.resolveRepositoriesList=resolveRepositoriesList,exports.resolveProjectPushCommands=resolveProjectPushCommands;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_privatedetail_state=__webpack_require__(660),_privatedetail_controller=__webpack_require__(670),_constant=__webpack_require__(11);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_privatedetail_state.stateUrl),parent:_hormain_state.stateName,params:{tabIndex:0},resolve:{privateDetail:resolvePrivateDetail,repositoriesList:resolveRepositoriesList,projectPushCommands:resolveProjectPushCommands},views:{"":{controller:_privatedetail_controller.PrivateDetailController,controllerAs:"$ctrl",templateUrl:"mirroredwarehouse/privatedetail/privatedetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PrivateDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_mirroredwarehouse_state=__webpack_require__(659),_list_state=__webpack_require__(671),_list_state2=__webpack_require__(335),_utils=__webpack_require__(4);exports.PrivateDetailController=function(){function PrivateDetailController(privateDetail,$http,$state,$resource,$stateParams,repositoriesList,NgTableParams,horRepoTagsService,$q,horRepoPullCommandsService,horMirroredWarehouseService,horRepoTagDetail,projectPushCommands){_classCallCheck(this,PrivateDetailController),this._state=$state,this._stateParams=$stateParams,this._http=$http,this._NgTableParams=NgTableParams,this._q=$q,this._resource=$resource,this._horRepoPullCommandsService=horRepoPullCommandsService,this._horRepoTagsService=horRepoTagsService,this._horMirroredWarehouseService=horMirroredWarehouseService,this._horRepoTagDetail=horRepoTagDetail,PrivateDetailController._self=this,this._repositoriesList=repositoriesList,this._privateDetail=privateDetail[0],this._projectPushCommands=projectPushCommands,this.supported=!1,this.selectedIndex=0,1===this._stateParams.tabIndex&&(this.selectedIndex=1),"1"===this._stateParams.objectName&&(this.selectedIndex=1),this.repositoriesTerm=null,this.repoQuery={projectId:this._privateDetail.project_id,page:1,limit:10,pageSize:0},this.tableParamsRepositories=new NgTableParams({count:10},{counts:[],dataset:this._repositoriesList})}return PrivateDetailController.$inject=["privateDetail","$http","$state","$resource","$stateParams","repositoriesList","NgTableParams","horRepoTagsService","$q","horRepoPullCommandsService","horMirroredWarehouseService","horRepoTagDetail","projectPushCommands"],_createClass(PrivateDetailController,[{key:"applyRepositoriesFilter",value:function(){var term=this.repositoriesTerm,projectId=PrivateDetailController._self._privateDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page=1&page_size=10&q="+term;PrivateDetailController.refreshRepoList(url)}},{key:"getDesserts",value:function(page,limit){var projectId=PrivateDetailController._self._privateDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page="+page+"&page_size=10";PrivateDetailController.refreshRepoList(url)}},{key:"goToList",value:function(){this._state.go(_mirroredwarehouse_state.stateName)}},{key:"deleteRepositories",value:function(projectName,repoName,repoTotal){return this._horMirroredWarehouseService.deleteRepository(projectName,repoName,repoTotal)}},{key:"getTagsList",value:function(item){try{var project=null,repository=null,self=this,tags=null;item.getTagsStatus=!0,item.name&&-1!=item.name.indexOf("/")&&(project=item.name.split("/")[0],repository=item.name.substring(item.name.indexOf("/")+1,item.name.length));var tagsParams={projectName:project,repositoryName:encodeURIComponent(repository)};this._q.all({tags:this._horRepoTagsService.query(tagsParams).$promise}).then(function(result){tags=result.tags;var tagsObj={};return 0===result.tags.length?self.hasTags=!1:(self.hasTags=!0,angular.forEach(tags,function(tag){var pullParams={repoAddress:_constant.REGISTRY_ADDRESS,projectName:project,repoName:repository,tagName:tag.name};tagsObj[tag.name]=self._horRepoPullCommandsService.get(pullParams).$promise})),self._q.all(tagsObj)}).then(function(data){var tagsList=[];angular.forEach(tags,function(tag,count){if(count<5){var tagItem={tagName:tag.name,pullCommand:data[tag.name].pull_command,scan_overview:tag.scan_overview,author:tag.author,created:tag.created,digest:tag.digest,repoName:repository,projectName:project,scanning:!1};tagsList.push(tagItem)}});var tagsTableParams=new PrivateDetailController._self._NgTableParams({page:1,count:5},{noPager:!0,counts:[],dataset:tagsList});item.tagsTable=tagsTableParams,item.getTagsStatus=!1})}catch(err){console.log(err)}}},{key:"scanRepoTag",value:function(projectName,repoName,tag){try{var self=this;repoName=repoName.substring(repoName.indexOf("/")+1,repoName.length);var getRepoName=encodeURIComponent(repoName);repoName=(0,_utils.replaceAll)(repoName,"/","&&&"),tag.scanning=!0;var url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/"+projectName+"/"+repoName+"/tags/"+tag.tagName+"/scan";self._http({method:"POST",url:url}).then(function(response){var objParams=(_constant.backendApi.HOR_K8S_IMAGE,tag.tagName,{projectName:projectName,repositoryName:getRepoName,tagName:tag.tagName});self._horRepoTagDetail.get(objParams).$promise.then(function(response){var tagData=response;tag.scan_overview=tagData.scan_overview},function(response){console.log(response)})},function(response){console.log("scan failed!...",response)}).finally(function(){tag.scanning=!1})}catch(err){console.log("scanning error...",err)}}},{key:"deleteTags",value:function(projectName,repoName,tagName){return this._horMirroredWarehouseService.deleteTags(projectName,repoName,tagName,this._privateDetail.repo_count)}},{key:"showTagDetail",value:function(tagItem){return this._state.href(_list_state.stateName,new _utils.VulnerabilityDetailStateParams(tagItem.projectName,tagItem.repoName,tagItem.tagName,this._privateDetail.project_id))}},{key:"showCopyDigestDialog",value:function(item){this._horMirroredWarehouseService.showCopyDigestDialog(item.digest)}},{key:"toTagsList",value:function(projectName,repoName,projectId){return repoName=repoName.substring(repoName.indexOf("/")+1,repoName.length),this._state.href(_list_state2.stateName,new _utils.TagsListStateParams(projectName,repoName,projectId))}}],[{key:"refreshRepoList",value:function(url){return PrivateDetailController._self._resource(url,{},{get:{method:"GET",isArray:!0}}).get().$promise.then(function(repositories){PrivateDetailController._self._repositoriesList=repositories,PrivateDetailController._self.tableParamsRepositories=new PrivateDetailController._self._NgTableParams({count:10},{counts:[],dataset:PrivateDetailController._self._repositoriesList})})}}]),PrivateDetailController}()},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.stateName="vulnerability",exports.stateUrl="/vulnerability"},function(module,exports,__webpack_require__){"use strict";function resolvePublicDetail(horPrivateDetailResource,horProjectDetailResource,$stateParams){var objParams={projectId:$stateParams.objectNamespace};return horPrivateDetailResource.get(objParams).$promise.then(function(project){var projectName={name:project.name};return horProjectDetailResource.get(projectName).$promise})}function resolveRepositoriesList(horRepositoriesListResource,$stateParams){var objParams={projectId:$stateParams.objectNamespace,page:1,limit:10};return horRepositoriesListResource.get(objParams).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolvePublicDetail=resolvePublicDetail,exports.resolveRepositoriesList=resolveRepositoriesList;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_publicdetail_state=__webpack_require__(666),_publicdetail_controller=__webpack_require__(673);exports.config={url:(0,_utils.appendDetailParamsToUrl)(_publicdetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{publicDetail:resolvePublicDetail,repositoriesList:resolveRepositoriesList},views:{"":{controller:_publicdetail_controller.PublicDetailController,controllerAs:"$ctrl",templateUrl:"mirroredwarehouse/publicdetail/publicdetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PublicDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_mirroredwarehouse_state=__webpack_require__(659),_list_state=__webpack_require__(671),_list_state2=__webpack_require__(335),_utils=__webpack_require__(4);exports.PublicDetailController=function(){function PublicDetailController(publicDetail,repositoriesList,$mdToast,$stateParams,$state,$http,$q,$resource,NgTableParams,horRepoPullCommandsService,horRepoTagsService,horMirroredWarehouseService,horRepoTagDetail){_classCallCheck(this,PublicDetailController),this._mdToast=$mdToast,this._state=$state,this._stateParams=$stateParams,this._NgTableParams=NgTableParams,this._http=$http,this._q=$q,this._resource=$resource,this._horRepoPullCommandsService=horRepoPullCommandsService,this._horRepoTagsService=horRepoTagsService,this._horMirroredWarehouseService=horMirroredWarehouseService,this._horRepoTagDetail=horRepoTagDetail,PublicDetailController._self=this,this.supported=!1,this._publicDetail=publicDetail[0],this._repositoriesList=repositoriesList,this.repositoriesTerm=null,this.repoQuery={projectId:this._publicDetail.project_id,page:1,limit:10,pageSize:0},this.tableParamsRepositories=new NgTableParams({count:10},{counts:[],dataset:this._repositoriesList})}return PublicDetailController.$inject=["publicDetail","repositoriesList","$mdToast","$stateParams","$state","$http","$q","$resource","NgTableParams","horRepoPullCommandsService","horRepoTagsService","horMirroredWarehouseService","horRepoTagDetail"],_createClass(PublicDetailController,[{key:"goToList",value:function(){this._state.go(_mirroredwarehouse_state.stateName,{tabIndex:1})}},{key:"applyRepositoriesFilter",value:function(){var term=this.repositoriesTerm,projectId=PublicDetailController._self._publicDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page=1&page_size=10&q="+term;PublicDetailController.refreshRepoList(url)}},{key:"getDesserts",value:function(page,limit){var projectId=PublicDetailController._self._publicDetail.project_id,url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories?projectId="+projectId+"&page="+page+"&page_size=10";PublicDetailController.refreshRepoList(url)}},{key:"getTagsList",value:function(item){try{var project=null,repository=null,self=this,tags=null;item.getTagsStatus=!0,item.name&&-1!=item.name.indexOf("/")&&(project=item.name.split("/")[0],repository=item.name.substring(item.name.indexOf("/")+1,item.name.length));var tagsParams={projectName:project,repositoryName:encodeURIComponent(repository)};this._q.all({tags:this._horRepoTagsService.query(tagsParams).$promise}).then(function(result){tags=result.tags;var tagsObj={};return 0===result.tags.length?self.hasTags=!1:(self.hasTags=!0,angular.forEach(tags,function(tag){var pullParams={repoAddress:_constant.REGISTRY_ADDRESS,projectName:project,repoName:repository,tagName:tag.name};tagsObj[tag.name]=self._horRepoPullCommandsService.get(pullParams).$promise})),self._q.all(tagsObj)}).then(function(data){var tagsList=[];angular.forEach(tags,function(tag,count){if(count<5){var tagItem={tagName:tag.name,pullCommand:data[tag.name].pull_command,scan_overview:tag.scan_overview,author:tag.author,created:tag.created,digest:tag.digest,repoName:repository,projectName:project,scanning:!1};tagsList.push(tagItem)}});var tagsTableParams=new PublicDetailController._self._NgTableParams({page:1,count:tagsList.length},{noPager:!0,counts:[],dataset:tagsList});item.tagsTable=tagsTableParams,item.getTagsStatus=!1})}catch(err){console.log(err)}}},{key:"scanRepoTag",value:function(projectName,repoName,tag){try{var self=this;repoName=repoName.substring(repoName.indexOf("/")+1,repoName.length);var getRepoName=encodeURIComponent(repoName);repoName=(0,_utils.replaceAll)(repoName,"/","&&&"),tag.scanning=!0;var url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/"+projectName+"/"+repoName+"/tags/"+tag.tagName+"/scan";self._http({method:"POST",url:url}).then(function(response){var objParams=(_constant.backendApi.HOR_K8S_IMAGE,tag.tagName,{projectName:projectName,repositoryName:getRepoName,tagName:tag.tagName});self._horRepoTagDetail.get(objParams).$promise.then(function(response){var tagData=response;tag.scan_overview=tagData.scan_overview},function(response){console.log(response)})},function(response){console.log("scan failed!...",response)}).finally(function(){tag.scanning=!1})}catch(err){console.log("scanning error...",err)}}},{key:"showTagDetail",value:function(tagItem){return this._state.href(_list_state.stateName,new _utils.VulnerabilityDetailStateParams(tagItem.projectName,tagItem.repoName,tagItem.tagName,this._publicDetail.project_id))}},{key:"toTagsList",value:function(projectName,repoName,projectId){return repoName=repoName.substring(repoName.indexOf("/")+1,repoName.length),this._state.href(_list_state2.stateName,new _utils.TagsListStateParams(projectName,repoName,projectId))}},{key:"collection",value:function(){
this._mdToast.show(this._mdToast.simple().textContent("功能开发中，敬请期待！").position("w300 wNotice").hideDelay(3e3))}},{key:"deploy",value:function(){this._mdToast.show(this._mdToast.simple().textContent("功能开发中，敬请期待！").position("w300 wNotice").hideDelay(3e3))}}],[{key:"refreshRepoList",value:function(url){return PublicDetailController._self._resource(url,{},{get:{method:"GET",isArray:!0}}).get().$promise.then(function(repositories){PublicDetailController._self._repositoriesList=repositories,PublicDetailController._self.tableParamsRepositories=new PublicDetailController._self._NgTableParams({count:10},{counts:[],dataset:PublicDetailController._self._repositoriesList})})}}]),PublicDetailController}()},function(module,exports,__webpack_require__){"use strict";function resolveTagDetail(horRepoTagsService,$stateParams){var objParams={projectName:$stateParams.projectName,repositoryName:$stateParams.repoName};return horRepoTagsService.query(objParams).$promise}function resolveResourceAmount(horResourceAmountResource,$stateParams){var objParams={namespaces:$stateParams.namespace};return horResourceAmountResource.get(objParams).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTagDetail=resolveTagDetail,exports.resolveResourceAmount=resolveResourceAmount;var _hormain_state=__webpack_require__(30),_utils=__webpack_require__(4),_deploydetail_state=__webpack_require__(336),_deploydetail_controller=__webpack_require__(675);__webpack_require__(11),exports.config={url:(0,_utils.appendDeployDetailStateParams)(_deploydetail_state.stateUrl),parent:_hormain_state.stateName,resolve:{tagDetail:resolveTagDetail,resourceAmount:resolveResourceAmount},views:{"":{controller:_deploydetail_controller.DeployDetailController,controllerAs:"$ctrl",templateUrl:"mirroredwarehouse/deploydetail/deploydetail.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeployDetailController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_mirroredwarehouse_state=__webpack_require__(659),_detail_state=(__webpack_require__(335),__webpack_require__(341)),_utils=__webpack_require__(4),DeployDetailController=function(){function DeployDetailController(tagDetail,$stateParams,$cookieStore,$q,$mdToast,$state,$mdDialog,errorDialog,horMirroredWarehouseService,resourceAmount){_classCallCheck(this,DeployDetailController),this._state=$state,this._mdDialog=$mdDialog,this._errorDialog=errorDialog,this._mdToast=$mdToast,this._q=$q,this._stateParams=$stateParams,this._horMirroredWarehouseService=horMirroredWarehouseService,this.name=$cookieStore.get(_constant.HOR_USER_COOKIES_KEY).userName,this._yaml=!1,this._limitsMemory=resourceAmount.items[0].spec.hard["limits.memory"],this._requestsMemory=resourceAmount.items[0].spec.hard["requests.memory"],this._tagDetail=tagDetail,this.serviceName="",this.imageURL="hor.io/"+this._stateParams.projectName+"/"+this._stateParams.repoName,this.instancesNum=1,this.memory="512Mi",this.limitsMemory=this.memory,this.requestsMemory=this.memory,this.serviceType=!1,this.tegEdition=this._tagDetail[0].name,this.label="",this.storageSpace=[{title:"2X",content:"512Mi 内存",state:!0},{title:"4X",content:"1024Mi 内存",state:!1},{title:"8X",content:"2048Mi 内存",state:!1},{title:"16X",content:"4096Mi 内存",state:!1},{title:"32X",content:"8192Mi 内存",state:!1}],"all"===this._stateParams.namespace&&(this._stateParams.namespace="default"),this.aceModel="apiVersion: v1\nkind: Service\nmetadata:\n  name: "+this.serviceName+"\n  namespace: "+this._stateParams.namespace+"\nspec:\n  type: NodePort\n  selector:\n    run: "+this.label+"\n  ports:\n  - protocol: TCP\n    port: 8080\n    targetPort: 80\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: "+this.serviceName+"\n  namespace: "+this._stateParams.namespace+"\nspec:\n  replicas: "+this.instancesNum+"\n  template:\n    metadata:\n      labels:\n        app: nginx\n        run: "+this.label+"\n    spec:\n      containers:\n        - name: nginx\n          image: "+this.imageURL+":"+this.tegEdition+"\n          ports:\n            - containerPort: 80\n          resources:\n            limits:\n              cpu: 200m\n              memory: "+this.memory+"\n            requests:\n              cpu: 100m\n              memory: "+this.memory+"\n      imagePullSecrets:\n        - name: "+this.name,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"}}return DeployDetailController.$inject=["tagDetail","$stateParams","$cookieStore","$q","$mdToast","$state","$mdDialog","errorDialog","horMirroredWarehouseService","resourceAmount"],_createClass(DeployDetailController,[{key:"storage",value:function(_storage){var _this=this;angular.forEach(this.storageSpace,function(row){_storage.title===row.title?(row.state=!0,_this.memory=row.content.split(" ")[0]):row.state=!1})}},{key:"createResource",value:function(){this.aceModel="apiVersion: v1\nkind: Service\nmetadata:\n  name: "+this.serviceName+"\n  namespace: "+this._stateParams.namespace+"\nspec:\n  type: NodePort\n  selector:\n    run: "+this.label+"\n  ports:\n  - protocol: TCP\n    port: 8080\n    targetPort: 80\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: "+this.serviceName+"\n  namespace: "+this._stateParams.namespace+"\nspec:\n  replicas: "+this.instancesNum+"\n  template:\n    metadata:\n      labels:\n        app: nginx\n        run: "+this.label+"\n    spec:\n      containers:\n        - name: nginx\n          image: "+this.imageURL+":"+this.tegEdition+"\n          ports:\n            - containerPort: 80\n          resources:\n            limits:\n              cpu: 200m\n              memory: "+this.memory+"\n            requests:\n              cpu: 100m\n              memory: "+this.memory+"\n      imagePullSecrets:\n        - name: "+this.name,this.aceOption={useWrapMode:!0,showGutter:!0,theme:"textmate",mode:"yaml"},this._yaml=!0}},{key:"lastStep",value:function(){this._yaml=!1}},{key:"_hasValidationError",value:function(err){return err.indexOf("validate=false")>-1}},{key:"_handleDeployAnywayDialog",value:function(err){var _this2=this;showDeployAnywayDialog(this.mdDialog_,"发生验证错误","确定想继续部署?",err,"是","否").then(function(){_this2.deploy(!1)})}},{key:"_CreateResource",value:function(aceModel,jump){var _this3=this,defer=this._q.defer(),deploymentSpec={name:"service-dp.yaml",content:aceModel,validate:!0};0==this.aceModel.length?this._mdToast.show(this._mdToast.simple().textContent("模板不能为空").position("w320 danger").hideDelay(3e3)):this._horMirroredWarehouseService.createResource().save(deploymentSpec,function(response){defer.resolve(response);var resourceObj=response.ResourceObject,objNamespace=resourceObj.namespace,objName=resourceObj.name,kind=resourceObj.kind;if(console.log("Deployment is completed: ",response),response.Error.length>0)return void _this3._errorDialog.open("系统提示","创建失败");_this3._mdToast.show(_this3._mdToast.simple().textContent("成功创建 "+kind+"对象").position("w200 success").hideDelay(3e3)),jump>0&&("Deployment"===kind?_this3._state.go(_detail_state.stateName,new _utils.UpdageStateParams(objNamespace,objName,"list")):"Service"===kind&&_this3._state.go(_mirroredwarehouse_state.stateName,new _utils.StateParams))},function(err){defer.reject(err),_this3._hasValidationError(err.data)?_this3._handleDeployAnywayDialog(err.data):_this3._errorDialog.open("系统提示","创建失败")})}},{key:"create",value:function(){var _this4=this;if(this.limitsMemory=parseInt(this.aceModel.split("memory: ")[1]),this.requestsMemory=parseInt(this.aceModel.split("memory: ")[2]),this.limitsMemory/1024<parseInt(this._limitsMemory))if(this.requestsMemory/1024<parseInt(this._requestsMemory))if(this.aceModel.indexOf("---")>=0){var aceModel=this.aceModel.split("---");console.log(aceModel),angular.forEach(aceModel,function(item,index){index===aceModel.length-1?_this4._CreateResource(item,1):_this4._CreateResource(item,0)})}else this._CreateResource(this.aceModel,1);else this._errorDialog.open("系统提示信息","requests存储空间不足");else this._errorDialog.open("系统提示信息","limits存储空间不足")}}]),DeployDetailController}();exports.DeployDetailController=DeployDetailController},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _list_service=__webpack_require__(663),_vulnerability_stateconfig=__webpack_require__(677),_vulnerability_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_vulnerability_stateconfig),_scanningchart_component=__webpack_require__(680);exports.default=angular.module("horApp.vulnerability",["ngMaterial","ngResource","ui.router"]).config(_vulnerability_stateconfig2.default).factory("horRepositoryTagListResource",_list_service.repositoryTagsListResource).factory("horRepositoryTagDetailResource",_list_service.repositoryTagDetailResource).factory("horTagVulnerabilityDetailResource",_list_service.tagVulnerabilityDetailResource).factory("horProjectResource",_list_service.projectResource).component("scanningChart",_scanningchart_component.scanningChartComponent)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(671)),_list_stateconfig=__webpack_require__(678)},function(module,exports,__webpack_require__){"use strict";function resolveRepositoryTagsList(horRepositoryTagListResource,$stateParams){var objParams={projectName:$stateParams.projectName,repositoryName:encodeURIComponent($stateParams.repoName)};return horRepositoryTagListResource.get(objParams).$promise}function resolveRepositoryTagDetail(horRepositoryTagDetailResource,$stateParams){var objParams={projectName:$stateParams.projectName,repositoryName:encodeURIComponent($stateParams.repoName),tagName:$stateParams.tagName};return horRepositoryTagDetailResource.get(objParams).$promise}function resolveTagVulnerabilityDetail(horTagVulnerabilityDetailResource,$stateParams){var objParams={projectName:$stateParams.projectName,repositoryName:encodeURIComponent($stateParams.repoName),tagName:$stateParams.tagName};return horTagVulnerabilityDetailResource.get(objParams).$promise}function projectDetail(horProjectResource,$stateParams){var projectName={name:$stateParams.projectName};return horProjectResource.get(projectName).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveRepositoryTagsList=resolveRepositoryTagsList,exports.resolveRepositoryTagDetail=resolveRepositoryTagDetail,exports.resolveTagVulnerabilityDetail=resolveTagVulnerabilityDetail,exports.projectDetail=projectDetail;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(679),_list_state=__webpack_require__(671),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendVulnerabilityParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{projectDetail:projectDetail,repositoryTagsList:resolveRepositoryTagsList,tagDetail:resolveRepositoryTagDetail,tagVulnerabilityDetail:resolveTagVulnerabilityDetail},views:{"":{controller:_list_controller.VulnerabilityController,controllerAs:"$ctrl",templateUrl:"vulnerability/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VulnerabilityController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_privatedetail_state=__webpack_require__(660),_publicdetail_state=__webpack_require__(666),_utils=__webpack_require__(4);exports.VulnerabilityController=function(){function VulnerabilityController(projectDetail,repositoryTagsList,tagDetail,tagVulnerabilityDetail,$stateParams,NgTableParams,$state){_classCallCheck(this,VulnerabilityController),this._projectDetail=projectDetail[0],this.projectName=$stateParams.projectName,this.repositoryName=$stateParams.repoName,this.tagName=$stateParams.tagName,this.projectId=$stateParams.projectId,this.repositoryTagsList=repositoryTagsList,this.tagDetail=tagDetail,this.tagVulnerabilityDetail=tagVulnerabilityDetail,this.tableParamsVulnerability=new NgTableParams({count:10},{counts:[],dataset:this.tagVulnerabilityDetail}),this._state=$state,VulnerabilityController._self=this,this._NgTableParams=NgTableParams}return _createClass(VulnerabilityController,[{key:"severityText",value:function(severity){switch(severity){case 5:return"High";case 4:return"Medium";case 3:return"Low";case 1:return"Negligible";case 2:default:return"Unknown"}}},{key:"applyVulnerabilityFilter",value:function(){var term=this.globalSearchTerm;this.tableParamsVulnerability.filter({id:term})}},{key:"goToRepoList",value:function(){return 0===this._projectDetail.public?this._state.href(_privatedetail_state.stateName,new _utils.StateParams(this.projectId,1)):1===this._projectDetail.public?this._state.href(_publicdetail_state.stateName,new _utils.StateParams(this.projectId,1)):void 0}},{key:"showDescription",value:function(item){try{var descriptionList=[],obj={descriptionStr:item.description};descriptionList.push(obj);var descriptionTableParams=new VulnerabilityController._self._NgTableParams({count:10},{counts:[],dataset:descriptionList});item.dTable=descriptionTableParams}catch(err){}}}]),VulnerabilityController}()},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ScanningChartController=exports.ScanningChartController=function(){function ScanningChartController($translate){_classCallCheck(this,ScanningChartController),this.data,this._translate=$translate,this.tagDetails=null,this.scanOverviewData=[]}return _createClass(ScanningChartController,[{key:"initPieChartConfig",value:function(){return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:300,y:100,data:[{name:"严重",textStyle:{},icon:"pie"},{name:"中等",textStyle:{},icon:"pie"},{name:"一般",textStyle:{},icon:"pie"},{name:"未知",textStyle:{},icon:"pie"},{name:"可忽略",textStyle:{},icon:"pie"}]},series:[{name:"镜像缺陷",type:"pie",radius:["50%","70%"],center:["25%","50%"],avoidLabelOverlap:!1}]}}},{key:"withoutChartConfig",value:function(){return{series:[{name:"镜像缺陷",type:"pie",hoverAnimation:!1,radius:["50%","70%"],center:["50%","50%"],avoidLabelOverlap:!1}]}}},{key:"$onInit",value:function(){var _this=this;if(void 0!=this.data)if(this.summary=this.data.scan_overview.components.summary,this.summary.length>1||1===this.summary.length&&1!=this.summary[0].severity){var obj=void 0,labelFormatter=function(params,ticket,callback){return params.percent.toFixed(0)+"%"},highStyle={normal:{label:{show:!0,position:"inner",color:"rgb(255,255,255)",formatter:labelFormatter},color:"orangered"}},mediumStyle={normal:{label:{show:!0,position:"inner",color:"rgb(255,255,255)",formatter:labelFormatter},color:"rgb(216, 150, 9)"}},lowStyle={normal:{label:{show:!0,position:"inner",color:"rgb(255,255,255)",formatter:labelFormatter},color:"orange"}},unknownStyle={normal:{label:{show:!0,position:"inner",color:"rgb(255, 255, 255)",formatter:labelFormatter},color:"rgb(206, 206, 159)"}},negligibleStyle={normal:{label:{show:!0,position:"inner",color:"rgb(255,255,255)",formatter:labelFormatter},color:"rgb(238, 219, 48)"}};angular.forEach(this.summary,function(item){switch(item.severity){case 5:obj={value:item.count,name:"严重",itemStyle:highStyle},_this.scanOverviewData.push(obj);break;case 4:obj={value:item.count,name:"中等",itemStyle:mediumStyle},_this.scanOverviewData.push(obj);break;case 3:obj={value:item.count,name:"一般",itemStyle:lowStyle},_this.scanOverviewData.push(obj);break;case 2:obj={value:item.count,name:"未知",itemStyle:unknownStyle},_this.scanOverviewData.push(obj);break;case 1:obj={value:item.count,name:"可忽略",itemStyle:negligibleStyle},_this.scanOverviewData.push(obj)}}),this.scanOverviewConfig=this.initPieChartConfig()}else{var _obj={value:1,name:"没有漏洞",itemStyle:{normal:{label:{show:!0,position:"center",color:"#3fc98e",fontSize:18},color:"#3fc98e"}}};this.scanOverviewData.push(_obj),this.scanOverviewConfig=this.withoutChartConfig()}}}]),ScanningChartController}();exports.scanningChartComponent={controller:ScanningChartController,bindings:{data:"<"},templateUrl:"vulnerability/scanningcharts/scanningchart.html"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _tag_stateconfig=__webpack_require__(682),_tag_stateconfig2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_tag_stateconfig),_list_service=__webpack_require__(663),_privatedetail_service=__webpack_require__(662),_mirroredwarehouse_service=__webpack_require__(658);exports.default=angular.module("horApp.tag",["ngMaterial","ngResource","ui.router"]).config(_tag_stateconfig2.default).factory("horTagsListResource",_list_service.repositoryTagsListResource).service("horMirroredWarehouseService",_mirroredwarehouse_service.mirroredWarehouseService).service("horRepoPullCommandResource",_privatedetail_service.repoPullCommandResource).service("horTagRepoService",_privatedetail_service.privateDetailResource)},function(module,exports,__webpack_require__){"use strict";function stateConfig($stateProvider){$stateProvider.state(_list_state.stateName,_list_stateconfig.config)}stateConfig.$inject=["$stateProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=stateConfig;var _list_state=(__webpack_require__(30),__webpack_require__(335)),_list_stateconfig=__webpack_require__(683)},function(module,exports,__webpack_require__){"use strict";function resolveTagList(horTagsListResource,$stateParams){try{var obj={projectName:$stateParams.projectName,repoName:$stateParams.repoName},objParams={projectName:obj.projectName,repositoryName:encodeURIComponent(obj.repoName)};return horTagsListResource.get(objParams).$promise}catch(err){console.log(err)}}function resolveProject(horTagRepoService,$stateParams){var objParams={projectId:$stateParams.projectId};return horTagRepoService.get(objParams).$promise}Object.defineProperty(exports,"__esModule",{value:!0}),exports.config=void 0,exports.resolveTagList=resolveTagList,exports.resolveProject=resolveProject;var _hormain_state=__webpack_require__(30),_list_controller=__webpack_require__(684),_list_state=__webpack_require__(335),_utils=__webpack_require__(4);exports.config={url:(0,_utils.appendTagsListParamsToUrl)(_list_state.stateUrl),parent:_hormain_state.stateName,resolve:{tagsList:resolveTagList,projectInfo:resolveProject},views:{"":{controller:_list_controller.TagsListController,controllerAs:"$ctrl",templateUrl:"tag/list/list.html"}}}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TagsListController=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_constant=__webpack_require__(11),_mirroredwarehouse_state=__webpack_require__(659),_list_state=(__webpack_require__(660),__webpack_require__(671)),_deploydetail_state=__webpack_require__(336),_utils=__webpack_require__(4);exports.TagsListController=function(){function TagsListController(tagsList,projectInfo,horRepoPullCommandResource,horMirroredWarehouseService,horTagsListResource,NgTableParams,$stateParams,$state,$q,$http){_classCallCheck(this,TagsListController),console.log(tagsList),this.tagsList=tagsList,this._stateParams=$stateParams,this.projectName=$stateParams.projectName,this.repoName=$stateParams.repoName,this.projectInfo=projectInfo,this.publicLevel=this._stateParams.publicLevel,this._horRepoPullCommandResource=horRepoPullCommandResource,this._horMirroredWarehouseService=horMirroredWarehouseService,this._horRepoTagDetail=horTagsListResource,this._q=$q,this._state=$state,this._http=$http,this._NgTableParams=NgTableParams,this.globalSearchTerm,this.tableParams=new NgTableParams({count:10},{counts:[],dataset:this.tagsList})}return TagsListController.$inject=["tagsList","projectInfo","horRepoPullCommandResource","horMirroredWarehouseService","horTagsListResource","NgTableParams","$stateParams","$state","$q","$http"],_createClass(TagsListController,[{key:"$onInit",value:function(){try{var self=this;angular.forEach(self.tagsList,function(tag){var pullParams={repoAddress:_constant.REGISTRY_ADDRESS,projectName:self.projectName,repoName:self.repoName,tagName:tag.name};tag.repoName=self.repoName,tag.projectName=self.projectName,tag.scanning=!1,self._horRepoPullCommandResource.get(pullParams).$promise.then(function(data){tag.pullCommand=data.pull_command})})}catch(err){console.log(err)}}},{key:"applyGlobalFilter",value:function(){var term=this.globalSearchTerm;this.tableParams.filter({name:term})}},{key:"goToList",value:function(){0===this.projectInfo.public?this._state.go(_mirroredwarehouse_state.stateName):1===this.projectInfo.public&&this._state.go(_mirroredwarehouse_state.stateName,{tabIndex:1})}},{key:"showTagDetail",value:function(item){return this._state.href(_list_state.stateName,new _utils.VulnerabilityDetailStateParams(this.projectName,this.repoName,item.name,this.projectInfo.project_id))}},{key:"showCopyDigestDialog",value:function(item){this._horMirroredWarehouseService.showCopyDigestDialog(item.digest)}},{key:"deleteTags",value:function(tagName){try{return this._horMirroredWarehouseService.deleteTags(this.projectName,this.repoName,tagName,this.projectInfo.project_id)}catch(err){console.log(err)}}},{key:"scanRepoTag",value:function(tag){try{var self=this,projectName=self.projectName,repoName=self.repoName;repoName=repoName.substring(repoName.indexOf("/")+1,repoName.length);var getRepoName=encodeURIComponent(repoName);repoName=(0,_utils.replaceAll)(repoName,"/","&&&"),tag.scanning=!0;var url=_constant.backendApi.HOR_K8S_IMAGE+"/harbor/api/repositories/"+projectName+"/"+repoName+"/tags/"+tag.name+"/scan";self._http({method:"POST",url:url}).then(function(response){var objParams=(_constant.backendApi.HOR_K8S_IMAGE,tag.name,{projectName:projectName,repositoryName:getRepoName,tagName:tag.name});self._horRepoTagDetail.get(objParams).$promise.then(function(response){var tagData=response;tag.scan_overview=tagData.scan_overview},function(response){})},function(response){console.log("scan failed!...",response)}).finally(function(){tag.scanning=!1})}catch(err){console.log("scanning error...",err)}}},{key:"deploy",value:function(item){var projectName=item.projectName,repoName=item.repoName,tagName=item.name,dockerVersion=item.docker_version;this._state.go(_deploydetail_state.stateName,new _utils.DeployDetailStateParams(projectName,repoName,tagName,dockerVersion))}}]),TagsListController}()},function(module,exports,__webpack_require__){"use strict";function routeConfig($urlRouterProvider){$urlRouterProvider.otherwise(_state.stateUrl)}routeConfig.$inject=["$urlRouterProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=routeConfig;var _state=__webpack_require__(425)},function(module,exports,__webpack_require__){"use strict";function httpConfig($httpProvider){$httpProvider.interceptors.push(requestInterceptor),$httpProvider.interceptors.push(responseInterceptor)}function requestInterceptor($cookies){return{request:function(req){if(-1!=req.url.indexOf("cicd/"))return $cookies.getObject(_constant.HOR_USER_COOKIES_KEY),req.headers.Authorization=""+_constant.HOR_K8S_CICD_TOKEN,req;var _user=$cookies.getObject(_constant.HOR_USER_COOKIES_KEY)||{};return null!=_user&&_user.token.length>0&&(req.headers.Authorization="Bearer "+_user.token),req},requestError:function(reqErr){return reqErr}}}function responseInterceptor($q,$location,$window,$injector){return{response:function(res){var $mdToast=$injector.get("$mdToast"),$cookies=$injector.get("$cookies"),licenseValue=$cookies.getObject(_constant.HOR_LICENSE_COOKIES_KEY),licenseData=res.headers("license");return licenseData&&licenseValue&&($cookies.putObject(_constant.HOR_LICENSE_COOKIES_KEY,!1),$mdToast.show($mdToast.simple().textContent(licenseData).position("w300 danger").hideDelay(3e3))),res},responseError:function(resErr){if(401===resErr.status||-1===resErr.status){var deferred=$q.defer(),url=$location.absUrl(),index=url.search(/\/([^\/]+html|#)/);return $window.location=url.slice(0,index)+"/"+_constant.HOR_LOGIN_PAGE,deferred.reject(resErr),deferred}if(500===resErr.status){var _deferred=$q.defer();_deferred.reject(resErr);var $mdDialog=$injector.get("$mdDialog"),$translate=$injector.get("$translate"),errStr=resErr.data.Error.toString();return $mdDialog.show($mdDialog.alert().clickOutsideToClose(!0).title($translate.instant("System Information")).textContent($translate.instant("Error message")+errStr).ok($translate.instant("close"))),_deferred.promise}if(400===resErr.status||409===resErr.status){var _deferred2=$q.defer();_deferred2.reject(resErr);var _$mdDialog=$injector.get("$mdDialog"),_$translate=$injector.get("$translate"),_errStr=resErr.data.Error.toString();return _$mdDialog.show(_$mdDialog.alert().clickOutsideToClose(!0).title(_$translate.instant("System Information")).textContent(_$translate.instant("Error message:")+_errStr).ok(_$translate.instant("close"))),_deferred2.promise}if(406===resErr.status){$q.defer().reject(resErr);var _$mdDialog2=$injector.get("$mdDialog"),_$translate2=$injector.get("$translate"),_errStr2=resErr.data.Error.toString();return _$mdDialog2.show(_$mdDialog2.alert().clickOutsideToClose(!0).title(_$translate2.instant("System Information")).textContent(_$translate2.instant("Error message:")+_errStr2).ok(_$translate2.instant("close"))),{request:function(config){return $q.reject("reason")}}}if(403===resErr.status){var _$mdDialog3=$injector.get("$mdDialog"),$http=$injector.get("$http"),$state=$injector.get("$state");return _$mdDialog3.show({controller:function($mdDialog){this.obj={name:""},this.onLoad=function(instance){instance.expandAll()},this.answer=function(licenseName){var obj={param:licenseName.toString()};$mdDialog.hide(obj)},this.cancel=function(){$mdDialog.cancel();var deferred=$q.defer(),url=$location.absUrl(),index=url.search(/\/([^\/]+html|#)/);return $window.location=url.slice(0,index)+"/"+_constant.HOR_LOGIN_PAGE,deferred.reject(resErr),deferred}},controllerAs:"$ctrl",templateUrl:"binding_template.html",parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!1,resolve:{}}).then(function(obj){return $http({url:_constant.backendApi.HOR_K8S_LICENSE+"/license/license-secret",method:"POST",data:obj.param})}).then(function(data){$state.go(".",{},{reload:!0})},function(reason){}),{request:function(config){return $q.reject("reason")}}}}}}requestInterceptor.$inject=["$cookies"],responseInterceptor.$inject=["$q","$location","$window","$injector"],httpConfig.$inject=["$httpProvider"],Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=httpConfig;var _constant=__webpack_require__(11)}]);