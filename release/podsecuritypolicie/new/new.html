<div class="detail-tit" layout="flex"> <div> <span class="label label-PersistentVolume">PSP</span>{{"Create Pod Security Policy"|I18N}}</div> <span flex></span> </div> <md-card> <md-tabs md-selected="$ctrl.selectedIndex"> <md-tab> <md-tab-label>{{"Overview"|I18N}}</md-tab-label> <md-tab-body> <form ng-cloak name="create_form" class="creatpsp"> <div layout="row" layout-wrap> <div flex="50"> <div> <md-input-container class="md-block" flex-gt-sm> <label class="label-title"> <span style="color:red;">*</span>{{"Name"|I18N}}: </label> <input ng-model="$ctrl.pspName" type="text" name="name" required placeholder="{{'Please input Pod Security Policies name'|I18N}}" ng-maxlength="30" ng-pattern="/^[0-9a-zA-Z\-]*$/"> <div class="error" ng-messages="create_form.name.$error"> <div ng-message="required">{{"Please input Pod Security Policies name"|I18N}}</div> <div ng-message="maxlength">{{"Pod Security Policies name no more than 30 characters"|I18N}}</div> <div ng-message="pattern">{{"Please input English and numbers"|I18N}}</div> </div> </md-input-container> </div> <div> <label class="label-title"> <span style="color:red;">*</span>{{"Volumes"|I18N}}:</label> <md-select ng-model="$ctrl.selectedVegetables" md-on-close="$ctrl.clearSearchTerm()" data-md-container-class="selectdemoSelectHeader" aria-label="Select" multiple="multiple"> <md-optgroup label="Volumes"> <md-checkbox ng-model="$ctrl.allCheck" aria-label="Checkbox 1" ng-click="$ctrl.searchFeatured($ctrl.allCheck)"> Check all </md-checkbox> <md-option ng-value="item" ng-repeat="item in $ctrl.items |filter:searchTerm" ng-click="$ctrl.optionData(item,$ctrl.allCheck) "> {{item}} </md-option> </md-optgroup></md-select> </div> <div class="creatpsp-bg"> <label class="label-title"> <span style="color:red;">*</span>{{"RunAsUser"|I18N}}: </label> <md-radio-group ng-model="$ctrl.group.group1"> <md-radio-button value="RunAsAny" class="md-primary">{{"RunAsAny"|I18N}}</md-radio-button> <md-radio-button value="MustRunAs" class="md-primary">{{"MustRunAs"|I18N}}</md-radio-button> <md-radio-button value="MustRunAsNonRoot" class="md-primary">{{"MustRunAsNonRoot"|I18N}}</md-radio-button> </md-radio-group> <div ng-if="$ctrl.group.group1 == 'MustRunAs'" class="creatpsp-child"> <label class="label-title"> {{"Ranges"|I18N}}: <a href="javascript:;" ng-click="$ctrl.addEnvironmentMap($index)" class=""> <i class="icon-plus-line fa-fw"></i> </a> </label> <div class="form-group" ng-repeat="env in $ctrl.environmentMaps track by $index"> <label class="col-md-3 control-label">&nbsp;</label> <div class="col-md-8"> <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.min" name="key{{$index}}" required placeholder="{{'Please enter the minimum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> &nbsp; <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.max" name="key{{$index}}" required placeholder="{{'Please enter the maximum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <a href="javascript:;" ng-click="$ctrl.delEnvironmentMap($index)" class=""> <i class="icon-minus-line"></i></a> </div> </div> </div> </div> <div class="creatpsp-bg"> <label class="label-title"> <span style="color:red;">*</span>{{"SELinux"|I18N}}: </label> <md-radio-group ng-model="$ctrl.group.group2"> <md-radio-button value="RunAsAny" class="md-primary">{{"RunAsAny"|I18N}}</md-radio-button> <md-radio-button value="MustRunAs" class="md-primary">{{"MustRunAs"|I18N}}</md-radio-button> </md-radio-group> <div ng-if="$ctrl.group.group2 == 'MustRunAs'" class="creatpsp-child"> <label>{{"seLinuxOptions"|I18N}}:</label> <div class="form-group"> <label class="col-md-3 control-label">&nbsp;</label> <div layout="row" layout-wrap class="seLinuxOptions-input"> <div flex="50"> <md-input-container class="md-block" flex-gt-sm> <label class="label-title">{{"sel_user"|I18N}}:</label> <input ng-model="$ctrl.userName" type="text" name="user" required placeholder="{{'sel_user'|I18N}}"> </md-input-container> </div> <div flex="50"> <md-input-container class="md-block" flex-gt-sm> <label class="label-title">{{"sel_role"|I18N}}:</label> <input ng-model="$ctrl.roleName" type="text" name="role" required placeholder="{{'sel_role'|I18N}}"> </md-input-container> </div> <div flex="50"> <md-input-container class="md-block" flex-gt-sm> <label class="label-title">{{"sel_type"|I18N}}:</label> <input ng-model="$ctrl.typeName" type="text" name="type" required placeholder="{{'sel_type'|I18N}}"> </md-input-container> </div> <div flex="50"> <md-input-container class="md-block" flex-gt-sm> <label class="label-title">{{"sel_level"|I18N}} :</label> <input ng-model="$ctrl.levelName" type="text" name="level " required placeholder="{{'sel_level'|I18N}}"> </md-input-container> </div> </div> </div> </div> </div> <div class="creatpsp-bg"> <label class="label-title"> <span style="color:red;">*</span>{{"SupplementalGroups"|I18N}}: </label> <md-radio-group ng-model="$ctrl.group.group3"> <md-radio-button value="RunAsAny" class="md-primary">{{"RunAsAny"|I18N}}</md-radio-button> <md-radio-button value="MustRunAs" class="md-primary">{{"MustRunAs"|I18N}}</md-radio-button> </md-radio-group> <div ng-if="$ctrl.group.group3 == 'MustRunAs'" class="creatpsp-child"> <label class="label-title"> {{"Ranges"|I18N}}: <a href="javascript:;" ng-click="$ctrl.addSuppleMap($index)" class=""> <i class="icon-plus-line fa-fw"></i> </a> </label> <div class="form-group" ng-repeat="env in $ctrl.suppleMaps track by $index"> <label class="col-md-3 control-label">&nbsp;</label> <div class="col-md-8"> <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.min" name="key{{$index}}" required placeholder="{{'Please enter the minimum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> &nbsp; <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.max" name="key{{$index}}" required placeholder="{{'Please enter the maximum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <a href="javascript:;" ng-click="$ctrl.delSuppleMap($index)" class=""> <i class="icon-minus-line"></i></a> </div> </div> </div> </div> <div class="creatpsp-bg"> <label class="label-title"> <span style="color:red;">*</span>{{"FSGroup"|I18N}}:</label> <md-radio-group ng-model="$ctrl.group.group4"> <md-radio-button value="RunAsAny" class="md-primary">{{"RunAsAny"|I18N}}</md-radio-button> <md-radio-button value="MustRunAs" class="md-primary">{{"MustRunAs"|I18N}}</md-radio-button> </md-radio-group> <div ng-if="$ctrl.group.group4 == 'MustRunAs'" class="creatpsp-child"> <label class="label-title"> {{"Ranges"|I18N}}: <a href="javascript:;" ng-click="$ctrl.addFstMap($index)" class=""> <i class="icon-plus-line fa-fw"></i> </a> </label> <div class="form-group" ng-repeat="env in $ctrl.fsMaps track by $index"> <label class="col-md-3 control-label">&nbsp;</label> <div class="col-md-8"> <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.min" name="key{{$index}}" required placeholder="{{'Please enter the minimum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> &nbsp; <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.max" name="key{{$index}}" required placeholder="{{'Please enter the maximum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <a href="javascript:;" ng-click="$ctrl.delFstMap($index)" class=""> <i class="icon-minus-line"></i></a> </div> </div> </div> </div> </div> <div flex="50"> <div> <label class="label-title"> {{"AllowPrivilegeEscalation"|I18N}}: </label> <form name="fruitForm"> <md-chips ng-model="$ctrl.allowedCapabilities" name="allowedCapabilities" readonly="$ctrl.readonly" md-transform-chip="$ctrl.onTransformCb($chip)" md-removable="$ctrl.removable" placeholder="app=frontend"> </md-chips> <div ng-messages="$ctrl.modifyLabelsForm.resourceObjLabels.$error"> <div ng-message="required">{{"This is required."|I18N}}</div> <div ng-message="md-maxlength">{{"The description must be less than 30 characters long."|I}}</div> </div> </form> </div> <div> <label class="label-title"> {{"DefaultAllowPrivilegeEscalation"|I18N}}: </label> <form name="fruitForm"> <md-chips ng-model="$ctrl.defaultAddCapabilities " name="defaultAddCapabilities " readonly="$ctrl.readonly" md-transform-chip="$ctrl.onTransformCb($chip)" md-removable="$ctrl.removable" placeholder="app=frontend"> </md-chips> <div ng-messages="$ctrl.modifyLabelsForm.resourceObjLabels.$error"> <div ng-message="required">{{"This is required."|I18N}}</div> <div ng-message="md-maxlength">{{"The description must be less than 30 characters long."|I18N}}</div></div> </form> </div> <div> <label class="label-title"> {{"RequiredDropCapabilities"|I18N}}: </label> <form name="fruitForm"> <md-chips ng-model="$ctrl.requiredDropCapabilities" name="requiredDropCapabilities" readonly="$ctrl.readonly" md-transform-chip="$ctrl.onTransformCb($chip)" md-removable="$ctrl.removable" placeholder="app=frontend"> </md-chips> <div ng-messages="$ctrl.modifyLabelsForm.resourceObjLabels.$error"> <div ng-message="required">{{"This is required."|I18N}}</div> <div ng-message="md-maxlength">{{"The description must be less than 30 characters long."|I18N}}</div></div> </form> </div> <div class="creatpsp-bg"> <md-input-container class="md-block" flex-gt-sm> <md-switch ng-model="$ctrl.data.cb1" aria-label="Switch 1" class="md-primary">{{"ReadOnlyRootFilesystem"|I18N}}: {{ $ctrl.data.cb1|I18N }}</md-switch> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <md-switch ng-model="$ctrl.data.cb2" aria-label="Switch 1" class="md-primary">{{"Privileged"|I18N}}: {{ $ctrl.data.cb2|I18N }}</md-switch> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <md-switch ng-model="$ctrl.data.cb3" aria-label="Switch 1" class="md-primary">{{"hostPID"|I18N}}: {{ $ctrl.data.cb3|I18N }}</md-switch> </md-input-container> <md-input-container class="md-block" flex-gt-sm> <md-switch ng-model="$ctrl.data.cb4" aria-label="Switch 1" class="md-primary">{{"hostIPC"|I18N}}: {{ $ctrl.data.cb4|I18N }}</md-switch> </md-input-container> </div> <div class="creatpsp-bg"> <label class="label-title"> {{"HostPorts"|I18N}}: <a href="javascript:;" ng-click="$ctrl.addHostPort($index)" class=""> <i class="icon-plus-line fa-fw"></i> </a> </label> <div class="form-group" ng-repeat="env in $ctrl.hostPorts track by $index"> <label class="col-md-3 control-label">&nbsp;</label> <div class="col-md-8"> <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.min" name="key{{$index}}" required placeholder="{{'Please enter the minimum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> &nbsp; <input class="md-block input-text" input type="number" style="width: 180px;" ng-model="env.max" name="key{{$index}}" required placeholder="{{'Please enter the maximum'|I18N}}" ng-maxlength="300" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"> <a href="javascript:;" ng-click="$ctrl.delHostPort($index)" class=""> <i class="icon-minus-line"></i></a> </div> </div> </div> </div> <div flex="100" class="border-top"></div> <div class="co-m-btn-bar text-center m-t-md" flex="100"> <md-button ng-disabled="create_form.name.$invalid " ng-click="$ctrl.createYml()" class="btn btn-success">{{"Create Pod Security Policy"|I18N}}</md-button> <a ui-sref="podsecuritypolicie"> <button class="btn btn-success">{{"Cancel"|I18N}}</button> </a> </div> </div> </form> </md-tab-body> </md-tab> <md-tab> <md-tab-label>{{"YAML"|I18N}}</md-tab-label> <md-tab-body> <section class="yamlc" style="height: calc(100vh - 211px);"> <div auto-heightc ui-ace="$ctrl.aceOption" ng-model="$ctrl.aceModel"></div> </section> <div class="yaml-btn ng-scope"> <button ng-click="$ctrl.createResource()" class="btn btn-success">{{"Create Pod Security Policy"|I18N}}</button> <a ui-sref="podsecuritypolicie"> <button class="btn btn-default">{{"Cancel"|I18N}}</button> </a> </div> </md-tab-body> </md-tab> </md-tabs> </md-card>