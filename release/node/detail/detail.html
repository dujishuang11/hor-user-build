<div class="detail-tit" layout="flex"> <div> <span class="label label-Node">N</span> {{$ctrl.nodeDetail.name | limitTo :40}} <span ng-if="$ctrl.nodeDetail.name.length >40">...</span> <md-tooltip md-direction="bottom" ng-if="$ctrl.nodeDetail.name.length >40"> {{$ctrl.nodeDetail.name}} </md-tooltip> </div> <span flex></span> <md-menu> <md-button aria-label="Open demo menu" class="md-button btn-default m-a-0" ng-click="$mdMenu.open($event)"> <md-icon md-menu-origin> <i class="icon-set f12"></i> {{"Actions"|I18N}} <i class="icon-arrow-down-sm f12"></i> </md-icon> </md-button> <md-menu-content> <md-menu-item> <md-button ng-click="$ctrl.showModifyResourceObjectLabels(
                  event,$ctrl.namespace, 'nodes',
                  $ctrl.nodeDetail.name, $ctrl.data.labels)"> <span md-menu-align-target>{{"Change Labels"|I18N}}</span> </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="$ctrl.showModifyResourceObjectAnnotations()"> <span md-menu-align-target>{{"Change Annotations"|I18N}}</span> </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="$ctrl.changeUnschedulable($ctrl.nodeDetail.name,$ctrl.nodeDetail.unschedulable)"> <span md-menu-align-target ng-if="$ctrl.nodeDetail.unschedulable==true">{{"Change Schedulable"|I18N}}</span> <span md-menu-align-target ng-if="$ctrl.nodeDetail.unschedulable==undefined">{{"Change Unschedulable"|I18N}}</span> </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="$ctrl.showUpdatePage()" aria-label="编辑"> <span md-menu-align-target>{{"Edit Node"|I18N}}</span> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> <md-card> <md-tabs md-selected="$ctrl.selectedIndex"> <md-tab> <md-tab-label>{{"Overview"|I18N}}</md-tab-label> <md-tab-body> <div layout="flex" class="md-detail-card"> <div flex="33"> <div class="detail-card"> <h3 class="card-title">{{"Pod Overview CPU"|I18N}}</h3> <div class="card"> <hor-chart data="$ctrl.nodeCpuUsageChartData" config="$ctrl.nodeCpuUsageChartConfig"></hor-chart> <p ng-if="$ctrl.nodeCpuUsageChartData.length==0" class="chart-no-data">No data found</p> </div> </div> </div> <div flex="33"> <div class="detail-card"> <h3 class="card-title">{{"Pod Overview Memory"|I18N}}</h3> <div class="card"> <hor-chart data="$ctrl.nodeMemoryUsageChartData" config="$ctrl.nodeMemoryUsageChartConfig"></hor-chart> <p ng-if="$ctrl.nodeMemoryUsageChartData.length==0" class="chart-no-data">No data found</p> </div> </div> </div> </div> <div layout="flex" layout-wrap class="overviewDetail"> <div flex="40"> <label>{{"NAME"|I18N}}</label> {{$ctrl.nodeDetail.name | limitTo :40}} <span ng-if="$ctrl.nodeDetail.name.length >40">...</span> <md-tooltip md-direction="bottom" ng-if="$ctrl.nodeDetail.name.length >40"> {{$ctrl.nodeDetail.name}} </md-tooltip> </div> <div flex="40"> <label>{{"OPERATING SYSTEM"|I18N}}</label> {{::$ctrl.nodeDetail.operatingSystem}} </div> <div flex="40"> <label>{{"EXTERNAL ID"|I18N}}</label> {{::$ctrl.nodeDetail.externalId}} </div> <div flex="40"> <label>{{"ARCHITECTURE"|I18N}}</label> {{::$ctrl.nodeDetail.architecture}} </div> <div flex="40"> <label>{{"KERNEL VERSION"|I18N}}</label> {{::$ctrl.nodeDetail.kernelVersion}} </div> <div flex="40" layout="row"> <label flex="30">{{"BOOT ID"|I18N}}</label> <div flex> {{::$ctrl.nodeDetail.bootId}} </div> </div> <div flex="40"> <label>{{"ANNOTATIONS"|I18N}}</label> <div class="image-button"> <a ng-click="$ctrl.showModifyResourceObjectAnnotations(
                                event, $ctrl.data.namespace,
                                    'deployment', $ctrl.data.name, $ctrl.data.annotations)" class="pointer"> <span>{{$ctrl.nodeDetail.annotations.length}}</span> {{"Annotations"|I18N}} <i class="icon-arrow-right-lg f12"></i> </a> </div> </div> <div flex="40"> <label>{{"CONTAINER RUNTIME"|I18N}}</label> {{::$ctrl.nodeDetail.containerRuntimeVersion}} </div> <div flex="40"> <label>{{"KUBE-LET VERSION"|I18N}}</label> {{::$ctrl.nodeDetail.kubeletVersion}} </div> <div flex="40"> <label>{{"KUBE-PROXY VERSION"|I18N}}</label> {{::$ctrl.nodeDetail.kubeProxyVersion}} </div> <div flex="40"> <label>{{"CREATED AT"|I18N}}</label> {{::$ctrl.nodeDetail.createTime | date:data}} </div> <div flex="40" layout="row" ng-repeat="item in $ctrl.nodeDetail.nodeAddress"> <label flex="30">{{item.type|uppercase|I18N}}</label> <div flex> <span> {{item.address}} </span> </div> </div> <div flex="40" layout="row"> <label flex="30">{{"POD CIDR"|I18N}}</label> <div flex> {{$ctrl.nodeDetail.podCIDR}} </div> </div> <div flex="40" layout="row"> <label flex="30">{{"UNSCHEDULABLE"|I18N}}</label> <div> {{$ctrl.unschedulable}} </div> <div ng-if="$ctrl.unschedulable == undefined">false</div> </div> <div flex="40" layout="row"> <label flex="30">{{"LABELS"|I18N}}</label> <div flex> <div class="label-default" ng-repeat="item in $ctrl.nodeDetail.labels  track by $index"> <a class="label-Node-c">{{item}}</a> </div> </div> </div> </div> <div layout="flex" layout-wrap class="overviewDetail"> <div flex="100" class="label-border-top"> <h3 class="overviewDetail-tit">{{"Allocated resources"|I18N}}</h3> </div> <div flex="100" layout="row" layout-wrap class="nodechart"> <div flex="33" class="cpuUsageChartData" style="position: relative;"> <div class="card"> <h5 class="card-title-text chart-title"> {{"CPU allocation (cores)"|I18N}} </h5> <div layout="flex"> <hor-allocated-resources-chart outer="$ctrl.allocatedResources.cpuRequestsFraction" inner="$ctrl.allocatedResources.cpuLimitsFraction"> </hor-allocated-resources-chart> <div style="width: 130px;"> <div> <div><i class="icon-media-stop f12" style="color:#f77454"></i>&nbsp;&nbsp;{{"Requests"|I18N}}: {{$ctrl.allocatedResources.cpuRequests|horCores}}</div> <div><i class="icon-media-stop f12" style="color:#df5977"></i>&nbsp;&nbsp;{{"Limits"|I18N}}: {{$ctrl.allocatedResources.cpuLimits|horCores}}</div> <hr> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{"Total"|I18N}}: {{$ctrl.allocatedResources.cpuCapacity|horCores}}</div> </div> </div> </div> </div> </div> <div flex="33" class="cpuUsageChartData" style="position: relative;"> <div class="card"> <h5 class="card-title-text chart-title"> {{"Memory allocation (bytes)"|I18N}} </h5> <div layout="flex"> <hor-allocated-resources-chart outer="$ctrl.allocatedResources.memoryRequestsFraction" inner="$ctrl.allocatedResources.memoryLimitsFraction"> </hor-allocated-resources-chart> <div style="width: 130px;"> <div> <div><i class="icon-media-stop f12" style="color:#f77454"></i>&nbsp;&nbsp;{{"Requests"|I18N}}: {{$ctrl.allocatedResources.memoryRequests|horMemory}}</div> <div><i class="icon-media-stop f12" style="color:#df5977"></i>&nbsp;&nbsp;{{"Limits"|I18N}}: {{$ctrl.allocatedResources.memoryLimits|horMemory}}</div> <hr> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{"Total"|I18N}}: {{$ctrl.allocatedResources.memoryCapacity|horMemory}}</div> </div> </div> </div> </div> </div> <div flex="30" class="cpuUsageChartData" style="position: relative;"> <div class="card"> <h5 class="card-title-text chart-title"> {{"Pods allocation"|I18N}} </h5> <div layout="flex"> <hor-allocated-resources-chart outer="$ctrl.allocatedResources.podFraction"> </hor-allocated-resources-chart> <div style="width: 130px;"> <div> <div><i class="icon-media-stop f12" style="color:#f77454"></i>&nbsp;&nbsp;{{"Allocated"|I18N}}: {{$ctrl.allocatedResources.allocatedPods}}</div> <hr> <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{"Total"|I18N}}: {{$ctrl.allocatedResources.podCapacity}}</div> </div> </div> </div> </div> </div> </div> </div> <div layout="flex" layout-wrap class="overviewDetail"> <div flex="100" class="label-border-top"> <h3 class="overviewDetail-tit">{{"Node Conditions"|I18N}}</h3> <table ng-table="$ctrl.tableParams" class="ng-table-nopadding"> <tr ng-repeat="row in $data"> <td data-title="'TYPE'|I18N" sortable="'type'"> {{row.type}} </td> <td data-title="'STATUS'|I18N" sortable="'status'"> {{row.status}} </td> <td data-title="'UPDATED'|I18N" sortable="'lastHeartbeatTime'"> <div class="name-overflow"> {{row.lastHeartbeatTime|date:data}} <md-tooltip md-direction="bottom"> {{row.lastHeartbeatTime}} </md-tooltip> </div> </td> <td data-title="'CHANGED'|I18N" sortable="'lastTransitionTime'"> <div class="name-overflow"> {{row.lastTransitionTime|date:data}} <md-tooltip md-direction="bottom"> {{row.lastTransitionTime}} </md-tooltip> </div> </td> <td data-title="'REASON'|I18N" sortable="'reason'"> {{row.reason}} </td> </tr> </table> </div> </div> <div layout="flex" layout-wrap class="overviewDetail"> <div flex="100" class="label-border-top"> <h3 class="overviewDetail-tit">{{"Images"|I18N}} <a ng-click="viewMore=!viewMore" class="viewMore-btn"> <span ng-if="!viewMore">{{"VIEW MORE"|I18N}} <span>&#43;</span> </span> <span ng-if="viewMore">{{"COLLAPSE"|I18N}} <span>&minus;</span> </span> </a> </h3> <div ng-class="{true: 'viewMore', false: ''}[viewMore]" class="ng-table-hidden"> <table ng-table="$ctrl.imageTableParams" class="ng-table-nopadding"> <tr ng-repeat="row in $data"> <td data-title="'NAME'|I18N" sortable="'name'"> {{row.name}} </td> <td data-title="'SIZE'|I18N" sortable="'size'"> {{row.size|bytes: 2}} </td> </tr> </table> </div> </div> </div> </md-tab-body> </md-tab> <md-tab ng-click="focusInput=true"> <md-tab-label>{{"YAML"|I18N}}</md-tab-label> <md-tab-body> <section class="yaml"> <div auto-height ui-ace="$ctrl.aceOption" ng-model="$ctrl.aceModel"></div> </section> <div class="yaml-btn"> <md-button ng-click="$ctrl.saveChange()" class="btn btn-success">{{"Save Change"|I18N}}</md-button> <md-button ng-click="$ctrl.reload()" class="btn btn-default">{{"Reload"|I18N}} </md-button> </div> </md-tab-body> </md-tab> <md-tab ng-click="focusInput=true"> <md-tab-label>{{"Pods"|I18N}}</md-tab-label> <md-tab-body> <md-table-container> <div ng-if="$ctrl.nodePod.length"> <div class="table-search"> <div class="table-search-input"> <div layout="row"> <span class="create-btn"> <div ui-sref="pod.new" class="create-btn"> <button class="btn btn-success">{{"CreatePod"|I18N}}</button> </div> </span> <span flex> <i class="icon-search"></i> <input type="text" placeholder="{{'Filter Pod'|I18N}}" ng-model="$ctrl.searchText" set-focus> </span> </div> </div> </div> <hor-pod-list data="$ctrl.podTableParams" namespace="$ctrl.namespace" searchtext="$ctrl.searchText" on-href="$ctrl.getPodDetailHref(namespace, objName)" on-namespace="$ctrl.getNamespaceHref(namespace, objName)" on-delete="$ctrl.deleteNodePod(event, item)" on-update="$ctrl.updateNodePod(event, item)" on-node="$ctrl.goToNodeDetail(event,item)" update-labels="$ctrl.showModifyResourceObjectLabels(event, namespace, resourceObjType, resourceObjName, resourceObjLabels)" update-annotations="$ctrl.showModifyResourceObjectAnnotations(event, namespace, resourceObjType, resourceObjName, resourceObjAnnotations)"> </hor-pod-list> </div> <div ng-if="!$ctrl.nodePod.length"> <hor-notingstate></hor-notingstate> </div> </md-table-container> </md-tab-body> </md-tab> </md-tabs> </md-card> 